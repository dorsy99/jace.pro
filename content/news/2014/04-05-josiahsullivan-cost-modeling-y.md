---
title: "Cost Modeling Your Cloud Part  Be Consistent"
date: 2014-04-04T21:23:13.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=3b8d2a69dbd0dbc01dcaf3231f9619e3"
---
<p><span style="font-size: 12pt;">This is Part 3 of the Cost Modeling Your Cloud series.</span></p><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p><span style="font-size: 12pt;">So how does ServiceNow make rational decisions about what to buy when building our cloud? And how can you?</span></p><ul><li><span style="font-size: 12pt;"><a title="" _jive_internal="true" data-containerid="2927" data-containertype="37" data-objectid="2860" data-objecttype="38" href="/community?id=community_blog&sys_id=1b5c2aa1dbd0dbc01dcaf3231f9619ea">Part 1: Know your numbers</a></span></li><li><span style="font-size: 12pt;"><a title="" _jive_internal="true" data-containerid="2927" data-containertype="37" data-objectid="2904" data-objecttype="38" href="/community?id=community_blog&sys_id=7d5e6aaddbd0dbc01dcaf3231f96196f">Part 2: Develop the model</a></span></li><li><span style="font-size: 12pt;">Be consistent</span></li></ul><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p><span style="font-size: 12pt;">** Disclaimer: Math ahead. Actual costs and data points obfuscated for confidentiality. **</span></p><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p><span style="font-size: 12pt;"><strong>Be consistent</strong></span></p><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p><span style="font-size: 12pt;">As a lean organization, we don't have the luxury of a 50-man team just for testing hardware. We had to hack the evaluation process into the essentials.</span></p><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p><span style="font-size: 12pt;"><em>First, generate a baseline.</em> Simply run a test against whatever you are currently using. Do your best to use a benchmark that is similar to your production workload. A 3D rendering benchmark (e.g. Frames Per Second) would be largely irrelevant to DB performance measured in Transactions Per Second (TPS).</span></p><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p><span style="font-size: 12pt;"><em>Second, create evaluation sets.</em> Let's face it: one could test and compare an infinite number of configurations, but that would require infinite resources. </span></p><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p><span style="font-size: 12pt;">In 2012 ServiceNow was evaluating more than a thousand possible configs (multiple CPUs, RAM configs, disk form factors,   RAID configs, NUMA settings, and file systems) for the 2013 hardware platform. Some of these tests required additional test passes at various load levels (e.g. 1,2,4,8,16,32,64,128 threads), resulting in tens of thousands of possible test results.</span></p><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p><span style="font-size: 12pt;">However, by creating evaluation sets to cost model similar changes, we quickly got a sense of which individual changes were most valuable.</span></p><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p><span style="font-size: 12pt;">If you were testing memory configurations, a change set might include:</span></p><p><span style="font-size: 12pt;">4x8GB     LV 1333 DIMMS</span></p><p><span style="font-size: 12pt;">4x8GB               1600 DIMMS</span></p><p><span style="font-size: 12pt;">2x16GB LV 1333 DIMMS</span></p><p><span style="font-size: 12pt;">2x16GB           1600 DIMMS</span></p><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p><span style="font-size: 12pt;">Here is a CPU and memory evaluation set built into the cost model from Part 2. This allows you to get a general sense of which config most effectively aligns with your business priorities (cost vs. performance, etc.). You can tell that our workload sees minimal performance gains from 1866 MHz memory (SKU B and D), and that the increased CAPEX and OPEX make it more expensive per performance unit. This low ROI actually led us to continue running 1600 Mhz for the 2014 hardware platform.</span></p><p><a _jive_internal="true" href="/servlet/JiveServlet/showImage/38-2951-8896/evalsets.png"><img  alt="evalsets.png" class="image-0 jive-image" height="131" src="3a9f0c46dbdc1344e9737a9e0f961954.iix" style="height: 65px; width: 620px;" width="1256"/></a></p><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p><span style="font-size: 12pt;"><em>Third and finally, build a pilot from the best options in the evaluation sets, and test again.</em></span></p><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p><a _jive_internal="true" href="/servlet/JiveServlet/showImage/38-2951-8897/whack-a-mole.jpg"><img  alt="whack-a-mole.jpg" class="image-1 jive-image" height="252" src="2e0573f5db905704ed6af3231f961900.iix" style="height: auto;" width="355"/></a></p><p><span style="font-size: 12pt;">Bottlenecks are like whack-a-mole, and improvements almost never combine linearly. Rather, adding 2% and 2% improvements tends to equal 1.5% or 6% more often than 4%. You won't know how much difference is actually made until you test the final combination. On paper, we expected to improve performance per dollar by 37% this year but it ended up being closer to 44% when changes were tested in harmony.</span></p><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p><span style="font-size: 12pt;">By applying these methods, we are able to run less than 100 tests to identify the best configurations out of tens of thousands of possibilities.</span></p><ol><li><span style="font-size: 12pt;">Define a baseline</span></li><li><span style="font-size: 12pt;">Create and test evaluation sets against the baseline</span></li><li><span style="font-size: 12pt;">Build a pilot from the best eval set results and test against the baseline</span></li></ol><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p><span style="font-size: 12pt;">Be smart: don't test everything. But this only works if you can be consistent, test after test, month after month, year after year. </span></p>