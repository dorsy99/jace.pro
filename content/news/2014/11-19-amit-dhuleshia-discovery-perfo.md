---
title: "Discovery Performance Patch  SCCM Identifier"
date: 2014-11-18T10:42:28.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=cc5de229dbd0dbc01dcaf3231f96193d"
---
<p><span style="font-size: 12pt;"><strong>Affected Customers</strong></span></p><p><span style="font-size: 12pt;"><strong><br/></strong></span></p><p><span style="font-size: 12pt;"><span style="font-size: 10pt;">All customers that have <strong>Discovery </strong>and<strong> SCCM (above 3.0)</strong> installed are affected by this issue. <span style="font-size: 10pt;">If you are an affected customer with a decent size CMDB, this fix will significantly improve your performance.</span></span><strong><br/></strong></span></p><p><span style="font-size: 12pt;"><strong><br/></strong></span></p><p><span style="font-size: 16px;"><strong>Problem Symptoms</strong></span></p><p><span style="font-size: 12pt;"><strong><br/></strong></span></p><p><span style="font-size: 10pt;">General performance degradation on the SN instance during Discovery runs.</span></p><ul><li><span style="font-size: 10pt;">High load on database</span></li><li><span style="font-size: 10pt;">Average/Max sensor time taking seconds instead of milliseconds.</span></li></ul><p></p><p><span style="font-size: 12pt;"><strong>Problem</strong></span></p><p></p><p>The SCCM Identifier is one of the first ones to execute during the Discovery Identification phase. If the device that is being Discovered is not from SCCM, the SCCM identifier will run an unnecessary query on a base cmdb table such as cmdb_ci_hardware without a where clause. A query such has this will have significant performance implications especially if the data returned by the query is large. The results are also <span style="font-size: 10pt; line-height: 1.5em;">pushed into a javascript array and that impacts memory and processing time. </span></p><p></p><p><span style="font-size: 16px;"><strong>Performance Improvements</strong></span></p><p></p><p>The performance improvement is linearly tied to the amount of data in the CMDB. However, if you have thousands of records in your base cmdb tables, then you can expect the average sensor time to reduce by a factor of N just by the impact of reducing the time on the identifier sensors. The identifier sensor will reduce by some factor of 10.</p><p></p><p><span style="font-size: 12pt;"><strong>Fix</strong></span></p><p></p><p>This issue has been fixed in <strong>Fuji</strong> and has been back ported to <strong>Eureka Patch 7 and Dublin Patch 7</strong>. The fix involved changing the SCCM identifier script to not run the unnecessary query.</p><p></p><p><span style="line-height: 1.5em; font-size: 12pt;"><strong>Applying Fix Yourself</strong></span></p><p><span style="font-size: 10pt; line-height: 1.5em;"><br/></span></p><p><span style="font-size: 10pt; line-height: 1.5em;">Locate all Discovery Identifiers<br/></span></p><p><span style="font-size: 10pt; line-height: 1.5em;"><br/></span></p><p><span style="font-size: 10pt; line-height: 1.5em;"> <img   alt="sccm_fix_1.jpg" class="image-0 jive-image" src="f7d3e506db101744e9737a9e0f9619c9.iix" style="height: 319px; width: 620px;"/></span></p><p><span style="font-size: 10pt; line-height: 1.5em;"><br/></span></p><p><span style="font-size: 10pt; line-height: 1.5em;">Click on the <strong>SCCM ID &amp; Class Name</strong> Identifier<br/></span></p><p><span style="font-size: 10pt; line-height: 1.5em;"><img   alt="sccm_fix_2.jpg" class="image-1 jive-image" src="716a2dcadb5053043eb27a9e0f9619e9.iix" style="height: 302px; width: 620px;"/></span></p><p><span style="font-size: 10pt; line-height: 1.5em;">Change the script below with the script that is attached.<br/></span></p><p><span style="font-size: 10pt; line-height: 1.5em;"><br/></span></p><p><span style="font-size: 10pt; line-height: 1.5em;"><img   alt="sccm_fix_3.jpg" class="jive-image image-3" src="55544586db1497049c9ffb651f961993.iix" style="height: 327px; width: 620px;"/></span></p><p><span style="font-size: 10pt; line-height: 1.5em;"><br/></span></p><p><span style="font-size: 10pt; line-height: 1.5em;"><strong>Note this will count as a customer update for this identifier and all future changes will not be automatically applied during upgrade.</strong></span></p>