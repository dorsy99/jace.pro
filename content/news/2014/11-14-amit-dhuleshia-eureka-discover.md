---
title: "Eureka Discovery Deleted Installed Software Issue"
date: 2014-11-13T23:25:58.000Z
authors: ["amit.dhuleshia"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=cd2d26e5dbd0dbc01dcaf3231f961995"
---
<p><span style="font-size: 12pt;"><strong>Affected Customers</strong></span></p><p><span style="font-size: 12pt;"><strong><br/></strong></span></p><p><span style="font-size: 12pt;"><span style="font-size: 10pt;">Only customers that are on <strong>Eureka</strong> and have <strong>Discovery and Software Asset Management</strong> installed are affected by this issue. </span><strong><br/></strong></span></p><p><span style="font-size: 12pt;"><strong><br/></strong></span></p><p><span style="font-size: 16px;"><strong>Problem Symptoms</strong></span></p><p><span style="font-size: 12pt;"><strong><br/></strong></span></p><p><span style="font-size: 12pt;"><span style="font-size: 10pt;">Installed Software are getting deleted out of the CMDB (cmdb_sam_sw_install) table.</span><strong><br/></strong></span></p><p><span style="font-size: 12pt;"><strong><br/></strong></span></p><p><span style="font-size: 12pt;"><strong>Problem</strong></span></p><p></p><p>In Eureka, a new Discovery performance enhancement called <a title="ki.servicenow.com/index.php?title=Discovery_Probes_and_Sensors#Probe_Results_Cache" href="http://wiki.servicenow.com/index.php?title=Discovery_Probes_and_Sensors#Probe_Results_Cache">Probe Results Cache </a>was introduced. Essentially, this feature caches the last probe results. If in the subsequent Discovery, the probe results did not change, it would not send the probe results payload from the MID Server to the Service Now Instance and would skip the sensor processing. One of the the out of the box probes that was cached was the installed software probe. So, if for a device, no new software was installed or deleted since the last Discovery run, it would not run the sensor.</p><p></p><p>However, this causes a issue if Software Asset Management (SAM) plugin is installed. SAM has a background job that deletes installed software if they have not been refreshed within the last 7 days. Because the sensor will not run if the results have not changed, entries in the software install will start getting deleted.</p><p></p><p><span style="font-size: 12pt;"><strong>Workaround</strong></span></p><p></p><p>Disable the Probe Results Cache for the installed software probes. First locate all the installed software probes:</p><p></p><p><img  __jive_id="15614" alt="installed_software_list.jpg" class="image-0 jive-image jiveImage" src="32614142dbdc9344e9737a9e0f9619df.iix" style="height: 108px; width: 620px;"/></p><p></p><p>For each of the installed software probes, uncheck the "Cache results" field and Update:</p><p></p><p><img  __jive_id="15615" alt="installed_software_probe.jpg" class="image-1 jive-image jiveImage" src="3c4e580edb1c1f048c8ef4621f961918.iix" style="height: 227px; width: 620px;"/></p><p>This will bypass the Probe Results Cache until the issue is fixed. <strong>Please remember to turn it back on after the issue has been resolved in the product. Also, note this will count as a customer update for these probes and all future changes will not be automatically applied during upgrade.</strong></p><p></p><p><span style="font-size: 12pt;"><strong>Fix</strong></span></p><p></p><p>This issue has been fixed in <strong>Fuji</strong> and has been back ported to <strong><span style="text-decoration: line-through;">Eureka Patch 6</span> Eureka Patch 7</strong>. The fix involved changing the SAM background job to not delete those entries since the Discovery sensor already takes care of reconciliation.</p>