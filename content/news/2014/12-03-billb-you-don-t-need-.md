---
title: "You Dont Need A VPN Part II  LDAP Integrations User Data Imports  the Internet solution"
date: 2014-12-02T23:28:50.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=10dd26e9dbd0dbc01dcaf3231f9619c8"
---
<p><a _jive_internal="true" href="/servlet/JiveServlet/downloadImage/38-3695-16094/vpn image2.jpg"><img   alt="vpn image2.jpg" class="image-0 jive-image" height="263" src="d9244c06db1cd3041dcaf3231f96194c.iix" style="height: 263px; width: 224.962809917355px; float: left;" width="225"/></a></p><p class="p1">La<span style="font-size: 10pt; line-height: 1.5em;">s</span><span style="font-size: 10pt; line-height: 1.5em;">t week we discussed </span><a title="" _jive_internal="true" data-containerid="2927" data-containertype="37" data-objectid="3678" data-objecttype="38" href="/community?id=community_blog&sys_id=4baca625dbd0dbc01dcaf3231f96193c">why you don't need to use a VPN when running a user data import, and can instead use the MID server</a><span style="font-size: 10pt; line-height: 1.5em;">. But what if you don't </span><span style="font-size: 10pt; line-height: 1.5em;"><em>want</em></span><span style="font-size: 10pt; line-height: 1.5em;"> to use a MID server to sync data?</span></p><p class="p1"><strong>You<em> still</em> don't need a VPN tunnel!</strong></p><p class="p1"></p><p class="p1">VPN tunnels leave a leg in both networks unencrypted. So, a better method would be to use LDAPS-over-the-Internet.</p><p class="p1"></p><p class="p1">I know, I know…"But it's our Domain Controller," you say, "sensitive data. We can't have that open to the Internet!" Right?</p><p class="p1"></p><p class="p1">Well, SSL encrypts the traffic over the Internet using the same encryption methods as IPSec tunnels. If the data is intercepted, then either method, SSL or VPN, would present the same challenges to an attacker. In fact, VPN tunnels use <em>pre-shared keys</em>, which are basically like passwords. Most of the ones I have seen are pretty weak and fairly short—the equivalent of one word.</p><p class="p1"></p><h2 class="p1">Using LDAPS-over-the-Internet</h2><p class="p1"></p><p class="p1">By contrast, the SSL key is several lines long, always gibberish, extremely hard to guess, and can be changed at-will by you, our customer, according to whatever policy you decide to implement, and all without even needing to involve anyone at ServiceNow. Change the key once a year or once a month—it's completely up to you. Simply upload the new key over an encrypted channel to your instance and you have a new set of encryption parameters. Changing VPN pre-shared keys, on the other hand, require a tunnel outage. I have never seen anyone change a tunnel key except when completely changing out their peers. SSL certificates are updated on a more frequent basis in most cases.</p><p class="p1"></p><p class="p1">When using LDAPS-over-the-Internet without a VPN tunnel, is the server exposed to the Internet? Microsoft introduced the concept of a Read Only Domain Controller (RODC) in Windows 2008, which can be configured to not store any passwords. Since ServiceNow never asks for a password and makes a read-only Bind query to validate a token instead, this technology is perfect for our use case. Simply install an RODC in a DMZ, lock down access to allow connections from only the specific source addresses from ServiceNow and the port number of your choosing (since you can configure this in the Instance), and an attacker would be hard-pressed to obtain that information. Top that off with the fact that an attacker would need the key that you export and upload to your Instance (again over an encrypted channel), along with the username, password, and starting directory that you configure, and you have a very secure connection point.</p><p class="p2"></p><p class="p1">All this to say, <strong>LDAPS-over-the-Internet will give you the flexibility to make changes to your environment quickly and efficiently without the need to engage ServiceNow to modify a tunnel.</strong> Your LDAPS-over-the-Internet solution would look something like this:</p><p class="p3"></p><ol class="ol1"><li>You have a domain controller in your network. You install an RODC in a DMZ with a public IP address.</li><li>On your firewall, you allow connections to that public IP address from only the specific source addresses that ServiceNow will be using from the two (paired) data centers where your instances are located.</li><li>You further lock down access to a port of your choosing and do a port translation (PAT) on your firewall to redirect the non-standard port to port 636 (LDAPS).</li><li>You then configure the non-standard port in your instance and upload the SSL cert over an encrypted channel.</li><li>If you want to get really creative, you could also implement stateful inspection to ensure that only LDAP traffic is passing through, thereby preventing other TCP connections to your RODC.</li></ol><p></p><p class="p1">Of course, using the MID server is much easier. But the MID server can't be used for authentication. For that we need something that is on-demand when we log in.</p><p class="p2"></p><p class="p1" style="text-align: center;"><a _jive_internal="true" data-containerid="1147" data-containertype="37" data-objectid="3708" data-objecttype="38" href="/community?id=community_blog&sys_id=6adde6e9dbd0dbc01dcaf3231f9619e1">Check out Part III for why you <em>still</em> don't need VPN and the benefits of using Single Sign-On (SSO).</a></p>