---
title: "Generating CIs and relationships from existing CIs using a script"
date: 2014-07-16T00:12:52.000Z
authors: ["yjaques"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=59ed2ee9dbd0dbc01dcaf3231f9619cc"
---
<p>Sometimes you may automatically want to generate a closely related CI to an existing CI and you don't feel like it doing it all step by step in the interface, maybe you have too many or maybe you want it to run as a business rule. Recently we had a number of Java applications set as CIs for which we wanted to create a parallel set of business services and relate the business service CI to the Java app CI. There were about 35 of them so I thought I would script it instead of going through all those forms. Here's what I did:</p><p></p><p>//create an object in my Java CI table</p><p>var app = new GlideRecord('u_cmdb_ci_applications_web_jav');</p><p>//iterate through every record</p><p>app.query();</p><p>while (app.next()) {</p><p>       //make sure record meets your criteria (in my case had to be operational and installed</p><p><span style="font-size: 10pt; line-height: 1.5em;">         if(app.operational_status==1 &amp;&amp; app.install_status==1) {</span></p><p><span style="font-size: 10pt; line-height: 1.5em;">                 //create a service object</span></p><p>                   var serv = new GlideRecord('cmdb_ci_service');</p><p>                   serv.initialize();</p><p>                   //give it the same name as the app</p><p>                   serv.name = app.name;</p><p>                   //create the CI record</p><p>                   servId = serv.insert();</p><p>                   if(servId != null) {</p><p>                             gs.log('Added SERVICE!');</p><p>                             //create a relationship object</p><p>                             var rel = new GlideRecord('cmdb_rel_ci');</p><p>                             rel.initialize();</p><p>                             //make the parent the service</p><p>                             rel.parent = servId;</p><p>                             //make the child the app</p><p>                             rel.child = app.sys_id;</p><p>                             //define the relationship type (in my case was Depends on:: Used by)</p><p>                             rel.type = 1;</p><p>                           //create the relationship</p><p>                             relId = rel.insert();</p><p>                             if(relId != null) {</p><p>                                       gs.log('Added rel!');</p><p>                             }</p><p>                   }</p><p>         }</p><p>}</p>