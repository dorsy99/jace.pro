---
title: "Script to check who has ever approved or been assigned to tasks"
date: 2014-11-20T06:02:47.000Z
authors: ["yjaques"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=5b8c6ae1dbd0dbc01dcaf3231f961940"
---
<p>If you're like us, you're always struggling to keep the number of licenses you need under control. I was recently tasked with this since we were so far over our license limits. I made a quick script in order to figure out who were just the "ceremonial" approvers who wanted the honor of an approval role, same thing for the ITIL roles. What this background script does is iterate through change requests, change tasks, incidents, problems and approvals and grab the assigned_to and approver names, before deduping and printing them to the log.</p><p></p><p>WARNING: if you have a huge amount of rows in those tables you could bring your instance to its knees, in which case be sure and get a clone to your test instance first, or add some query parameters to just grab the last weeks or months of records.</p><p></p><p>var tables = ['change_request','change_task','incident','problem','sysapproval_approver'];</p><p>var licenses = [];</p><p>for(var i=0;i&lt;tables.length;i++) {</p><p>var rec = new GlideRecord(tables[i]);</p><p>   rec.query();</p><p>   while (rec.next()) {</p><p>         if(typeof rec.assigned_to != "undefined" &amp;&amp; rec.assigned_to != '')</p><p>                 licenses.push(rec.assigned_to.getDisplayValue());</p><p>         if(typeof rec.approver != "undefined" &amp;&amp; rec.approver != '')</p><p>                 licenses.push(rec.approver.getDisplayValue());</p><p>             }</p><p>}</p><p></p><p>var arrayUtil = new ArrayUtil();</p><p>licenses = arrayUtil.unique(licenses);</p><p></p><p>for(var i=0;i&lt;licenses.length;i++) {</p><p>       logMe(licenses[i]);</p><p>}</p><p></p><p>function logMe(message) {</p><p>       if(gs) {</p><p>           gs.addInfoMessage(message);</p><p>       } else {</p><p>           log.info(message);</p><p>       }       </p><p>}</p>