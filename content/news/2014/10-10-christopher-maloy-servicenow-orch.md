---
title: "ServiceNow Orchestration and OpenStack Integration"
date: 2014-10-10T03:53:29.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=2cac6225dbd0dbc01dcaf3231f9619c0"
---
<p><span style="font-size: 10pt;"><a _jive_internal="true" href="/servlet/JiveServlet/showImage/38-3527-14420/ServiceNowLogo.png"><img  alt="ServiceNowLogo.png" class="image-0 jive-image" height="44" src="e7272c86db54d704ed6af3231f961962.iix" style="height: auto;" width="253"/></a></span></p><p><span style="font-size: 10pt;"><a _jive_internal="true" href="/servlet/JiveServlet/showImage/38-3527-14431/OpenStackLogo.png"><img  alt="OpenStackLogo.png" class="image-1 jive-image" height="55" src="a2444c42db1c5fc068c1fb651f96192d.iix" style="height: auto;" width="174"/></a></span></p><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p><span style="font-size: 10pt;">This integration is a REST based web service.</span></p><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p><span style="font-size: 10pt;">I am beginning to hear more and more about <a title="k-external-small" class="jive-link-external-small" href="http://www.openstack.org/" rel="nofollow" target="_blank">OpenStack,</a> and personally, I like their software.   It is an open source software solution for creating and managing public and private clouds.</span></p><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p><span style="font-size: 10pt;">If you want to use ServiceNow Orchestration, and leverage the OpenStack framework for cloud management, the steps below should help you get things going.   This is a very easy process with ServiceNow.   We will be making outbound REST based web service calls to the OpenStack server, using the <a title="k-external-small" class="jive-link-external-small" href="http://docs.openstack.org/" rel="nofollow" target="_blank">API they have available</a>.   There are many examples using curl and a variety of other languages to help you out as well as a very active community of OpenStack gurus.</span></p><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p><span style="font-size: 10pt;"><a _jive_internal="true" href="/servlet/JiveServlet/showImage/38-3527-14432/OpenStackRest1.png"><img  alt="OpenStackRest1.png" class="image-0 jive-image" height="441" src="31e3673ddbd093041dcaf3231f9619d5.iix" style="height: 242px; width: 620px;" width="1129"/></a></span></p><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p><span style="font-size: 10pt; font-family: Arial, sans-serif; color: #454545;">I like to set up a series of REST API definitions, using the REST Message module in ServiceNow.   Once we define these I will be able to reuse them within a ServiceNow workflow.</span></p><p><span style="font-size: 10pt; font-family: Arial, sans-serif; color: #454545;">OpenStack requires a login token on most of their server request, so we will set up this call first.</span></p><p><span style="color: #454545; font-size: 10pt; font-family: Arial, sans-serif;">The URL used will be the address to your <a title="k-external-small" class="jive-link-external-small" href="http://serverport/" rel="nofollow" target="_blank">OpenStack server</a><strong> </strong>and a <strong>post</strong> will be made.</span></p><p><span style="color: #454545; font-size: 10pt; font-family: Arial, sans-serif;"><br/></span></p><p><span style="color: #454545; font-size: 10pt; font-family: Arial, sans-serif;"><a _jive_internal="true" href="/servlet/JiveServlet/showImage/38-3527-14446/Rest1.png"><img  alt="Rest1.png" class="image-0 jive-image" height="618" src="b3f54106db549f048c8ef4621f961977.iix" style="height: 319px; width: 620px;" width="1203"/></a></span></p><p><span style="color: #454545; font-size: 10pt; font-family: Arial, sans-serif;"><br/></span></p><p><span style="font-size: 10pt; font-family: Arial, sans-serif; color: #454545;">The Content-Type header value needs to be supplied as well as the content with your authentication credentials.</span></p><p><span style="font-size: 10pt; font-family: Arial, sans-serif; color: #454545;"><a _jive_internal="true" href="/servlet/JiveServlet/showImage/38-3527-14447/rest2.png"><img  alt="rest2.png" class="image-1 jive-image" height="871" src="79b3608adb50dfc068c1fb651f9619a2.iix" style="height: 360px; width: 620px;" width="1500"/></a></span></p><p><span style="font-size: 10pt; font-family: Arial, sans-serif; color: #454545;"><br/></span></p><p><span style="font-size: 10pt; font-family: Arial, sans-serif; color: #454545;">What you get back is an HTTP status code of 200 and a token in the response.   I have not shown my response here as it describes secure data elements I do not want to share on the Internet.   I did show the example from the OpenStack documentation of what the response looks like. You are interested in the token id from the "id" field.   The token can be a quite large series of characters.</span></p><p><span style="font-size: 10pt; font-family: Arial, sans-serif; color: #454545;"><br/></span></p><p><span style="font-size: 10pt; font-family: Arial, sans-serif; color: #454545;"><a _jive_internal="true" href="/servlet/JiveServlet/showImage/38-3527-14448/rest3.png"><img  alt="rest3.png" class="jive-image image-2" height="373" src="be71ccc2dbd4db048c8ef4621f96192b.iix" style="height: 294px; width: 620px;" width="786"/></a><br/></span></p><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p><span style="font-size: 10pt; font-family: Arial, sans-serif; color: #454545;">In handling the response you will want to parse the id value form the token object.</span></p><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p><span style="font-size: 10pt;"><a _jive_internal="true" href="/servlet/JiveServlet/showImage/38-3527-14449/rest4.png"><img  alt="rest4.png" class="jive-image image-3" height="900" src="f8712fb1db5c9f04e9737a9e0f9619d6.iix" style="height: 742px; width: 620px;" width="752"/></a></span></p><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p><span style="font-size: 10pt; font-family: Arial, sans-serif; color: #454545;">As far as creating a server goes, it will require a valid tenant id.   You can make a call to the server to get this or just hard code this value as a property.   I decided to call the server.   The <a title="k-external-small" class="jive-link-external-small" href="http://serverport/" rel="nofollow" target="_blank">URL</a> changes a bit to get a list of valid tenant ids.</span></p><p><span style="font-size: 10pt; font-family: Arial, sans-serif; color: #454545;"><a _jive_internal="true" href="/servlet/JiveServlet/showImage/38-3527-14450/rest5.png"><img  alt="rest5.png" class="jive-image image-4" height="644" src="b661d14adb989f048c8ef4621f9619ad.iix" style="height: 366px; width: 620px;" width="1091"/></a><br/></span></p><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p><span style="font-size: 10pt; font-family: Arial, sans-serif; color: #454545;">For this call you need to include the authentication token retrieved on the previous step as a header value.</span></p><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p><span style="font-size: 10pt;"><a _jive_internal="true" href="/servlet/JiveServlet/showImage/38-3527-14451/rest6.png"><img  alt="rest6.png" class="jive-image image-5" height="548" src="ff89640adb545f048c8ef4621f961968.iix" style="height: 221px; width: 620px;" width="1538"/></a></span></p><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p><span style="font-size: 10pt; font-family: Arial, sans-serif; color: #454545;">When you get a successful return a http status code of 200 is return along with a JSON object that includes the id of valid tenants.</span></p><p><span style="font-size: 10pt;"><a _jive_internal="true" href="/servlet/JiveServlet/showImage/38-3527-14452/rest7.png"><img  alt="rest7.png" class="jive-image image-6" height="360" src="a8d88cc2dbdc5fc068c1fb651f961968.iix" style="height: 258px; width: 620px;" width="864"/></a></span></p><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p><span style="font-size: 10pt; font-family: Arial, sans-serif; color: #454545;">Now we are ready to define the good stuff.   We will create a VM using the OpenStack create server method.   The URL for this is (click <a title="k-external-small" class="jive-link-external-small" href="http://serverport/" rel="nofollow" target="_blank">URL</a>) the tenant_id is the id retrieved from the previous step.   As you can see in the screenshot below several header values need to be defined.   The project_id will be supplied when a self service user makes the request from the catalog.   They will need to select which project and which instance (or image) to apply to the this call.</span></p><p><span style="font-size: 10pt; font-family: Arial, sans-serif; color: #454545;"><br/></span></p><p><span style="font-size: 10pt; font-family: Arial, sans-serif; color: #454545;"><br/></span></p><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p><span style="font-size: 10pt; font-family: Arial, sans-serif; color: #454545;">The content body will dictate which flavor reference and image reference to use, as well as network specific uuid's and security groups should be applied to the creation of the server.</span></p><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p><span style="font-size: 10pt;"><a _jive_internal="true" href="/servlet/JiveServlet/showImage/38-3527-14453/rest8.png"><img  alt="rest8.png" class="jive-image image-7" height="697" src="bf89ab31db1893049c9ffb651f96190c.iix" style="height: 270px; width: 620px;" width="1600"/></a></span></p><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p><span style="font-size: 10pt; font-family: Arial, sans-serif; color: #454545;">The return will include a http code of 202 and have the newly created server specifics (including server url and admin password).</span></p><p><span style="font-size: 10pt;"><a _jive_internal="true" href="/servlet/JiveServlet/showImage/38-3527-14454/rest9.png"><img  alt="rest9.png" class="jive-image image-8" height="332" src="c35945cedbd897041dcaf3231f961923.iix" style="height: 129px; width: 620px;" width="1600"/></a></span></p><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p><span style="font-size: 10pt; font-family: Arial, sans-serif; color: #454545;">That is it.   At this point you will want to build out your catalog request item and a workflow that uses the REST activity to call these methods.   After this configuration is done it is pretty much drag an drop from here.   The hard part is over.   You can implement other OpenStack API calls in a similar fashion.   The more REST messages you build out the greater flexibility you will have to integrate with the various parts of OpenStack.   </span></p><p><span style="font-size: 10pt; font-family: Arial, sans-serif; color: #454545;"><br/></span></p><p><span style="color: #454545; font-size: 10pt; font-family: 'Arial','sans-serif';">Cheers.</span></p>