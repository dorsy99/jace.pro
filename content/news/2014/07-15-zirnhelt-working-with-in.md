---
title: "Working with Internet Search Engines and their Crawlers"
date: 2014-07-14T22:20:51.000Z
authors: ["zirnhelt"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=efed222ddbd0dbc01dcaf3231f9619f8"
---
<p>In <a title="" _jive_internal="true" data-containerid="2927" data-containertype="37" data-objectid="3225" data-objecttype="38" href="/community?id=community_blog&sys_id=9acc6265dbd0dbc01dcaf3231f9619ef">my last post</a> I shared some of the hidden metadata we applied to our articles to feed the crawlers - those bots sent by the internet search engines to consume and subsequently index our content.   Today I will explain how a knowledge manager may fine-tune the search engine to better handle the crawled content.   Search engines are incredibly smart today, and many of you (if you even have your content crawled by internet search engines) may not ever need to take these added steps.   For us, however, we have a lot of content that resembles it's neighbors, and to be sure our customers have the best experience, we want the search engines to be as effective as possible.</p><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p><a href="https://hi.service-now.com/KB_Icon_484x252px.jpegx"><img alt="KB_Icon_484x252px.jpegx" class="image-0 jive-image" height="136" src="https://hi.service-now.com/KB_Icon_484x252px.jpegx" style="height: 135.89256198347107px; width: 261px; display: block; margin-left: auto; margin-right: auto;" width="261"/></a></p><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><h3>Allowing crawlers to crawl</h3><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p>The first part of this puzzle in ensuring that the crawlers are able to access the content.   This comes in two steps:   (1) opening the doors to them, and (2) then inviting them in.</p><ol><li>Opening the doors entails making the permissions changes on the server side.   Specifically, enabling the 'guest' user and changing the permissions on the pages and objects you need to be accessible.</li><li>Inviting them in is as simple as updating your <a title="k-external-small" class="jive-link-external-small" href="http://www.robotstxt.org/" rel="nofollow" target="_blank">robots.txt</a> file.   The ServiceNow default looks like this:</li></ol><p style="padding-left: 60px;"><span style="font-size: 10pt; line-height: 1.5em;"><span style="font-family: 'courier new', courier;">User-agent: *</span><br/></span><span style="line-height: 1.5em; font-size: 10pt; font-family: 'courier new', courier;">Disallow: /</span></p><p style="padding-left: 30px;"><span style="line-height: 1.5em; font-size: 10pt; font-family: arial, helvetica, sans-serif;">Depending on the search engine, how you need to format the file is different, and some respect the <span style="font-family: 'courier new', courier;">Allow</span> statement. With Google (from which we get over 95% of our search traffic) <a title="k-external-small" class="jive-link-external-small" href="https://developers.google.com/webmasters/control-crawl-index/docs/robots_txt" rel="nofollow" target="_blank">they respect the more specific over the more general</a>, and order doesn't matter.   For example, here is <a title="k-external-small" class="jive-link-external-small" href="https://hi.service-now.com/robots.txt" rel="nofollow" target="_blank">ours</a> today:</span></p><p style="padding-left: 60px;"><span style="font-family: 'courier new', courier;">User-agent: *</span></p><p style="padding-left: 60px;"><span style="font-family: 'courier new', courier;">Allow: /kb_view</span></p><p style="padding-left: 60px;"><span style="font-family: 'courier new', courier;">Allow: /kb_view.do</span></p><p style="padding-left: 60px;"><span style="font-family: 'courier new', courier;">Allow: /knowledgeSiteMap.do</span></p><p style="padding-left: 60px;"><span style="font-family: 'courier new', courier;">Allow: /sys_attachment</span></p><p style="padding-left: 60px;"><span style="font-family: 'courier new', courier;">Allow: /sys_attachment.do</span></p><p style="padding-left: 60px;"><span style="font-family: 'courier new', courier;">Allow: /*.png</span></p><p style="padding-left: 60px;"><span style="font-family: 'courier new', courier;">Allow: /*.pngx</span></p><p style="padding-left: 60px;"><span style="font-family: 'courier new', courier;">Allow: /*.jpg</span></p><p style="padding-left: 60px;"><span style="font-family: 'courier new', courier;">Allow: /*.jpgx</span></p><p style="padding-left: 60px;"><span style="font-family: 'courier new', courier;">Allow: /*.jpeg</span></p><p style="padding-left: 60px;"><span style="font-family: 'courier new', courier;">Allow: /*.jpegx</span></p><p style="padding-left: 60px;"><span style="font-family: 'courier new', courier;">Allow: /*.gif</span></p><p style="padding-left: 60px;"><span style="font-family: 'courier new', courier;">Allow: /*.gifx</span></p><p style="padding-left: 60px;"><span style="font-family: 'courier new', courier;">Disallow: /</span></p><p style="min-height: 8pt; height: 8pt; padding: 0px; padding-left: 60px;">  </p><p style="padding-left: 60px;"><span style="font-family: 'courier new', courier;"><span>sitemap: </span><a title="k-external-small" class="jive-link-external-small" href="https://hi.service-now.com/knowledgeSiteMap.do" rel="nofollow" target="_blank">https://hi.service-now.com/knowledgeSiteMap.do</a></span></p><p style="min-height: 8pt; height: 8pt; padding: 0px; padding-left: 60px;">  </p><p style="padding-left: 30px;">You can see that the <span style="font-family: 'courier new', courier;">Disallow</span> is less specific than the <span style="font-family: 'courier new', courier;">Allow</span> lines. (Interestingly, Bing behaves differently enough that our <span style="font-family: 'courier new', courier;">Disallow</span> is overpowering our <span style="font-family: 'courier new', courier;">Allow</span> lines, and our KB content is not being crawled.   We're going to have to replace the <span style="font-family: 'courier new', courier;">Disallow</span> wildcard with discrete <span style="font-family: 'courier new', courier;">Disallow</span> lines to fix this.)</p><p style="padding-left: 30px;">It's worth noting that this will not override your system permissions, nor does it guarantee the crawler won't become aware of a page otherwise.   However, it ensures that when the crawler comes across a link you don't want it to follow, it won't attempt it at all.</p><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><h3><span style="line-height: 1.5em; font-size: 12pt;">Directing the crawlers towards the right content to crawl</span></h3><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p>You may have noticed that <span style="font-family: 'courier new', courier;">sitemap</span> line in the <span style="font-family: 'courier new', courier;">robots.txt</span> file above.   This is an easy way to tell the crawlers where to find <a title="k-external-small" class="jive-link-external-small" href="http://www.sitemaps.org/" rel="nofollow" target="_blank">a comprehensive listing of the pages that need to be crawled</a>.   So, as part of this release, we created a realtime <a title="k-external-small" class="jive-link-external-small" href="https://hi.service-now.com/knowledgeSiteMap.do" rel="nofollow" target="_blank">sitemap</a> that lists each crawlable page like this:</p><p style="padding-left: 30px;"><span style="color: #000000; font-family: 'courier new', courier;">&lt;<span class="nm" style="color: purple; font-weight: bold;">url</span></span><span class="s" style="color: #000000; font-family: 'courier new', courier;">&gt;</span></p><div class="e" style="margin: 2px 0px 5px 20px; padding-left: 30px;"><span style="font-family: 'courier new', courier;"><span class="ns s n">&lt;<span class="nm" style="color: purple; font-weight: bold;">loc</span></span><span class="s">&gt;</span></span><div class="c"><span style="font-family: 'courier new', courier;"><span class="t" style="font-weight: bold;"><a title="k-external-small" class="jive-link-external-small" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0538525" rel="nofollow" target="_blank">https://hi.service-now.com/kb_view.do?sysparm_article=KB0538525</a></span><span class="ne n">&lt;/<span class="nm" style="color: purple; font-weight: bold;">loc</span>&gt;</span></span></div><span style="font-family: 'courier new', courier;"><span class="ns s n">&lt;<span class="nm" style="color: purple; font-weight: bold;">lastmod</span></span><span class="s">&gt;</span></span><div class="c"><span style="font-family: 'courier new', courier;"><span class="t" style="font-weight: bold;">2014-06-19</span><span class="ne n">&lt;/<span class="nm" style="color: purple; font-weight: bold;">lastmod</span>&gt;</span></span></div><span style="font-family: 'courier new', courier;"><span class="ns s n">&lt;<span class="nm" style="color: purple; font-weight: bold;">changefreq</span></span><span class="s">&gt;</span></span><div class="c"><span style="font-family: 'courier new', courier;"><span class="t" style="font-weight: bold;">monthly</span><span class="ne n">&lt;/<span class="nm" style="color: purple; font-weight: bold;">changefreq</span>&gt;</span></span></div><span style="font-family: 'courier new', courier;"><span class="ns s n">&lt;<span class="nm" style="color: purple; font-weight: bold;">expires</span></span><span class="s">&gt;</span></span><div class="c"><span style="font-family: 'courier new', courier;"><span class="t" style="font-weight: bold;">2014-07-26</span><span class="ne n">&lt;/<span class="nm" style="color: purple; font-weight: bold;">expires</span>&gt;</span></span></div></div><p style="padding-left: 30px;"><span style="color: #000000; font-family: 'courier new', courier;">&lt;/<span class="nm" style="color: purple; font-weight: bold;">url</span>&gt;</span></p><p>Beyond providing the location of the page, the crawler is also told how often the page is typically updated, the date it was last modified, and (optionally) the date we expect the page to be expired.</p><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><h3>Working with the Search Engine's Tools</h3><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p>Once you've set your content to be crawler-accessible and invited them in, you can monitor your progress and even fine-tune the crawling and search behavior using the search engines' webmaster tools. (We've set up with both Google and Bing, but the links below mostly come from Google.)</p><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p>First, you'll need to <a title="k-external-small" class="jive-link-external-small" href="https://support.google.com/webmasters/answer/35179?hl=en" rel="nofollow" target="_blank">verify your site</a>, so the crawler can tie your user ID to the site.   This ensures that you are truly responsible for the site content. We chose the <a title="k-external-small" class="jive-link-external-small" href="https://support.google.com/webmasters/answer/35659" rel="nofollow" target="_blank">meta tag</a> approach, and even set up a system property to allow us to easily change this value through our test cycles or down the road.</p><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p>Once your site is verified, you gain access to the webmaster tools (<a title="k-external-small" class="jive-link-external-small" href="https://www.google.com/webmasters/tools/home" rel="nofollow" target="_blank">Google</a>, <a title="k-external-small" class="jive-link-external-small" href="http://www.bing.com/webmaster/WebmasterManageSitesPage.aspx" rel="nofollow" target="_blank">Bing</a>) and you can monitor the crawler progress, monitor the indexer progress (yes, <a title="k-external-small" class="jive-link-external-small" href="http://www.google.com/insidesearch/howsearchworks/crawling-indexing.html" rel="nofollow" target="_blank">they are different</a>), identify <a title="k-external-small" class="jive-link-external-small" href="https://support.google.com/webmasters/answer/2650907?hl=en" rel="nofollow" target="_blank">structural</a> or <a title="k-external-small" class="jive-link-external-small" href="https://support.google.com/webmasters/answer/35120?hl=en" rel="nofollow" target="_blank">crawler errors</a>, and provide <a title="k-external-small" class="jive-link-external-small" href="https://support.google.com/webmasters/answer/1235687?hl=en" rel="nofollow" target="_blank">special handling instructions on URL parameters</a>. Some of the steps we took were:</p><ol><li>specified our <a title="k-external-small" class="jive-link-external-small" href="https://hi.service-now.com/knowledgeSiteMap.do" rel="nofollow" target="_blank">sitemap</a>, the same one we list on the <a title="k-external-small" class="jive-link-external-small" href="https://hi.service-now.com/robots.txt" rel="nofollow" target="_blank">robots.txt</a> file</li><li>told the crawler to ignore some of the session-based URL parameters so that it understands that the page content is the same with or without certain parameter specified</li><li>looked at the structural health of our content</li><li>reviewed the crawler, indexer and search stats daily... and obsessively...</li></ol><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><h3>Next Steps</h3><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><p>As I mentioned, Bing is not crawling our site yet, so we have a story in our backlog to refactor the robots.txt file. Outside of that, we know these are early days, and search engines change their behaviors regularly. We will learn and adjust as appropriate.</p><p style="min-height: 8pt; height: 8pt; padding: 0px;">  </p><h4 style="text-align: center;"><span style="color: #993300;">Have any of you exposed your content to the internet?   What did you learn, and what tools did you use?</span></h4>