---
title: "Attachment LoggingAuditing  Where did that attachment go"
date: 2013-02-20T23:39:16.000Z
authors: ["MB"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=ee6e22eddbd0dbc01dcaf3231f96196c"
---
<p>I was asked the other day if ServiceNow has any attachment auditing in place to see when an attachment was added or removed from a record. I was not aware of any, so I came up with the following. Maybe this can help someone else.<br /><br />When you attach something to a record, it creates an entry in the "sys_attachment" table. When it is removed from the record it deletes the record from this same table. So I created two different business rules to make a log in the record of what is added/removed. When an attachment is inserted/deleted it will place a work note in the record that the attachment has been attached or removed. Since this is logged into the work notes field, it will also keep track of who did it and when in the activity section. There is a limitation to this in that if you attach something to a record prior to the record being created, you will not get an update in the record because one does not exist yet in the DB. So keep that in mind.<br /><br />Also, if you want to limit this to making update on only certain tables you can utilize the condition field in the Business Rule like this. <br /><pre __default_attr="plain" __jive_macro_name="code" class="jive_text_macro jive_macro_code"><br />current.table_name == "incident"</pre><br />Merely change the "incident" to the table name you want it to update on.<br /><br />1. Create a Business Rule on the "sys_attachment" table. This will log a work note in the record that it was attached.<br /> -Name: "Insert Attachment - Update Record"<br /> -When: After<br /> -Insert: true<br /><pre __default_attr="plain" __jive_macro_name="code" class="jive_text_macro jive_macro_code"><br /><br />updateRecordForAttachment();<br />function updateRecordForAttachment(){<br /> var gr = new GlideRecord(current.table_name);<br />   if(gr.get(current.table_sys_id)){<br />  gr.work_notes = "Attachment: " + current.file_name + " has been attached.";<br />  gr.update();<br />   }<br />}<br /></pre><br /><br />2. Create a Business Rule on the "sys_attachment" table. This will log a work note in the record that it was removed.<br /> -Name: "Delete Attachment - Update Record"<br /> -When: Before<br /> -Delete: true<br /><pre __default_attr="plain" __jive_macro_name="code" class="jive_text_macro jive_macro_code"><br /><br />updateRecordForAttachment();<br />function updateRecordForAttachment(){<br /> var gr = new GlideRecord(current.table_name);<br />   if(gr.get(current.table_sys_id)){<br />  gr.work_notes = "Attachment: " + current.file_name + " has been removed.";<br />  gr.update();<br />   }<br />}<br /></pre><br /><br />The Activity section on the record would then look this<br /><img  alt="" class="jive-image" src="82d55cc6db9817049c9ffb651f961974.iix" /></p>