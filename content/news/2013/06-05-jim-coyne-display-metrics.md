---
title: "Display Metrics as Timelines on the Appropriate Tables"
date: 2013-06-05T03:26:05.000Z
authors: ["Jim Coyne"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=090d6aa5dbd0dbc01dcaf3231f9619a4"
---
<p>There is an OOB UI Action called "Metrics Timeline" that appears on all Task tables:<br /><br /><img  alt="" class="jive-image" src="ab3cd08adb1c9fc068c1fb651f9619f7.iix" style="width: 490px; height: auto;" /><br /><br />It pops up a window and displays the metrics defined on that table in a nice timeline view:<!--break--><br /><br /><img  alt="" class="jive-image" src="3f4e7f35db585704ed6af3231f96193d.iix" style="width: 762px; height: auto;" /><br /><br />Nice feature, but the problem is the UI Action appears in all Task tables regardless of whether there are metrics defined AND configured to be displayed in a timeline view or not - http://wiki.servicenow.com/index.php?title=Timeline_Pages#Displaying_Metrics_as_Timelines. By default, only the Incident ones are configured this way.<br /><br />I had a client who wanted to only display the UI Action where it was appropriate. The solution was to modify the condition of the UI Action so it only displays on tables where there are metrics configured to be displayed in the timeline view. To do this, modify the UI Actions condition to be:<br /><pre __default_attr="plain" __jive_macro_name="code" class="jive_text_macro jive_macro_code"><br /><br />Berlin instances:<br />!current.isNewRecord() &amp;amp;&amp;amp; u_displayMetricsInTimeline(current.sys_class_name)<br /><br />Calgary instances:<br />!current.isNewRecord() &amp;amp;&amp;amp; !GlideMobileExtensions.runningTablet() &amp;amp;&amp;amp; u_displayMetricsInTimeline(current.sys_class_name)<br /></pre><br /><br />...and add the following Script Include:<br /><pre __default_attr="plain" __jive_macro_name="code" class="jive_text_macro jive_macro_code"><br /><br />Name: u_displayMetricsInTimeline<br />Active: checked<br />Script:<br />function u_displayMetricsInTimeline(tableName) {<br />   var ga = new GlideAggregate("metric_definition");<br />   ga.addEncodedQuery("active=true^timeline=true^table=" + tableName);<br />   ga.addAggregate("COUNT");<br />   ga.query();<br />   if (ga.next() &amp;amp;&amp;amp; ga.getAggregate("COUNT")&gt;0) {<br />      return true;<br />   } else return false;<br />}</pre><br /><br />Now it will only appear on the appropriate tables and will appear automagically as you configure more metrics to be viewable in the timeline view. I've attached the Script Include XML file for import into your instance.</p>