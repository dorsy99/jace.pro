---
title: "Put number of commentsworknotes into form tab label"
date: 2013-02-23T04:28:37.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=23fca6a5dbd0dbc01dcaf3231f9619f4"
---
<p>Sometimes a record has comments or worknotes, but it's not obvious if the form loads with another tab active. I decided to see how easy it'd be to make it more obvious.<br /><br />Turns out it was pretty easy.<!--break--><br /><br />I created a "display" Business Rule on Incident that did the following - condition was !current.isNewRecord();<br /><pre __default_attr="plain" __jive_macro_name="code" class="jive_text_macro jive_macro_code"><br /><br />doIt();<br /><br />function doIt() {<br />   var gr = new GlideRecord("sys_journal_field");<br />   gr.addQuery("element_id", current.sys_id);<br />   gr.addQuery("element", "comments");<br />   gr.query();<br />   g_scratchpad.comments = gr.getRowCount();<br />   gr.initialize();<br />   gr.addQuery("element_id", current.sys_id);<br />   gr.addQuery("element", "work_notes");<br />   gr.query();<br />   g_scratchpad.worknotes = gr.getRowCount();<br />}<br /></pre><br /><br />Next I created an onLoad Client Script on Incident:<br /><pre __default_attr="plain" __jive_macro_name="code" class="jive_text_macro jive_macro_code"><br /><br />function onLoad() {<br />   var e = $$(".tab_caption_text");<br />   // Notes tab is the first one, so use e[0]<br />   e[0].innerHTML = "" + g_scratchpad.comments + " Comments and " + g_scratchpad.worknotes + " Work Notes";<br />}<br /></pre><br /><br />Worked a treat! When bringing up an Incident, the Notes form section tab label automatically changes to something like "2 Comments and 3 Work Notes", letting me know at a glance if I might need to switch to that tab.<br /><br />Obviously a lot could go wrong, and these scripts need some protection, but this was just a 3-minute proof of concept (followed by a 10-minute writeup ;) Thoughts on things to improve:<br /><br />1) make sure the user has Read access to each field, change label accordingly<br />2) if Notes isn't the first form tab, it'll fail - protect against that<br />3) should use GlideAggregate vs. GlideRecord in the Business Rule<br />4) client script should make sure the scratchpad variables actually exist before doing anything with them<br />5) probably more I'm missing<br />6) "1 Comments" looks dumb - modify message to use the singular if only one<br />7) could build entire label on the server and pass that as the scratchpad variable<br />8) Business Rule could use localized field labels, so a French user would see the French labels for "Comments" and "Work Notes"<br />9) you get the picture - bomb proofing something like this often takes 5x as long as the initial PoC!</p>