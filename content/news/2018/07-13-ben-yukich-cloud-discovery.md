---
title: "Cloud Discovery Supporting new cloud tech"
date: 2018-07-12T19:27:48.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=621104c1dbd79780a39a0b55ca96196e"
---
<p>Unless you&#39;ve been under a rock for a while, you&#39;ve probably noticed that cloud technology moves FAST. Well, being born in the cloud, so do we at ServiceNow, and so can YOU as a Discovery/Mapping customer! If you haven&#39;t seen it already, I recommend checking out how you can stay up to date on the latest content releases from ServiceNow: <a title="Content shipping of discovery patterns via ServiceNow store." href="community?id&#61;community_blog&amp;sys_id&#61;1b80b148db3a1380e0e80b55ca96197d" target="_blank" rel="nofollow">Content shipping of discovery patterns via ServiceNow store.</a></p>
<p>Even with our out-of-band content releases, there may be new cloud capabilities that you want to build support for on your own. In this post, I want to cover a capability that has been around for a while now, but is not widely known about: the &#34;Cloud REST Call&#34; pattern operation. This little operation is key to all our API-driven cloud discovery operations, and can be used very quickly to build support for new cloud capabilities in AWS and Azure.</p>
<p>Let&#39;s pick apart what first got me to use this: adding support for AWS ALB (Application Load Balancer). Beginning in Kingston, this support is standard, but that was not the case in Jakarta! And even if you are on Kingston, these steps are exactly the same to take advantage of other AWS/Azure APIs.</p>
<p>So, first let&#39;s take a look at what happens when you try to discover a cloud artifact that is not supported. You will probably get a nice little caution sign (if you&#39;re doing mapping), and an error that looks something like: <img style="max-width: 100%; max-height: 480px;" src="664fd4cbdb5bdf40a39a0b55ca961915.iix" /></p>
<p>Boooo, that&#39;s no fun! Let&#39;s fix it! In this case, I&#39;m trying to discover an ALB, and the discovery pattern log tells me that the pattern I might have expected to work, did not work at all: <img style="max-width: 100%; max-height: 480px;" src="aabf9c8fdb5bdf40a39a0b55ca961989.iix" /></p>
<p>Looks like it&#39;s time to create an additional identifier. If you look at the existing identifier for AWS Load Balancer Service, you&#39;ll notice that it&#39;s calling the &#34;Version 1&#34; of the ELB APIs (available <a title="docs from AWS" href="https://docs.aws.amazon.com/elasticloadbalancing/2012-06-01/APIReference/Welcome.html" target="_blank" rel="nofollow">docs from AWS</a>). To understand how to make this all work, I recommend taking those docs for a spin, and then comparing with the latest/Version 2 <a title="API docs from AWS" href="https://docs.aws.amazon.com/elasticloadbalancing/latest/APIReference/Welcome.html" target="_blank" rel="nofollow">API docs from AWS</a>. You&#39;ll notice the calls are almost identical, but there are a few critical differences - the version that you pass, and some of the parameters accepted. In the past, when our original ELB pattern was authored, there was no JSON parser, so that pattern is a little large. Since we now have the Cloud REST Call operation, with the JSON parsing strategy, we can make our ALB pattern in only a few steps:<img style="max-width: 100%; max-height: 480px;" src="db61a80bdb9bdf40a39a0b55ca961959.iix" /></p>
<p>You&#39;ll notice that we don&#39;t have to worry about credentials (the operation&#39;s plumbing does it all for us!), nor do we have to worry about too many parameters for this particular request --&gt; it&#39;s just a straightforward GET with a couple query parameters. Specifically, we build a request URL of the form: &#34;https://elasticloadbalancing.&#34; &#43; region &#43; &#34;.amazonaws.com/?Action&#61;DescribeLoadBalancers&amp;Version&#61;2015-12-01&amp;Names.member.1&#61;&#34; &#43; nameOfOurALB</p>
<p>That&#39;s not so bad, is it?!? It get&#39;s pretty cool when you do this in debug mode and hit &#34;Run Operation&#34;. You&#39;ll get a nice structured JSON response from AWS that you can easily build into a table just by selecting the values you want to capture:<img style="max-width: 100%; max-height: 480px;" src="a3f120cbdb9bdf40a39a0b55ca961901.iix" /></p>
<p>Now, just lather/rinse/repeat to get any additional properties you want, and be sure to create a connection section to the pattern (if you&#39;re in mapping and want to see what this ALB is routing you to). After that work, you should get a much happier picture: <img style="max-width: 100%; max-height: 480px;" src="6e52e40fdb9bdf40a39a0b55ca961914.iix" /></p>
<p> </p>
<p>I was blown away how quickly this support can be added. Try taking it for a spin! Or, if you&#39;re feeling *really* adventuresome, try creating your own Custom Operation and I&#39;ll be really impressed ;-)</p>