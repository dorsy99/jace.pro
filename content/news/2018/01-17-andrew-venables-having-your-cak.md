---
title: "Having your cake and eating it Allowing your scripts to be customised whilst maintaining IP protection"
date: 2018-01-16T22:19:44.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=0d0d6aa5dbd0dbc01dcaf3231f9619a5"
---
<p>As a ServiceNow application developer you probably already know about <a title="eveloper.servicenow.com/app.do#!/document/content/app_store_doc_contextual_development_environment_geneva_c_ScriptProtectionPolicy?v=geneva" href="https://developer.servicenow.com/app.do#!/document/content/app_store_doc_contextual_development_environment_geneva_c_ScriptProtectionPolicy?v=geneva">Protection Policies</a> and how they enable you to publish an application to the ServiceNow Store for customers to purchase and install without allowing them to see the precious core of your application and the valuable scripts that you spent all those hours crafting to perfection.</p><p></p><p>But as is to be expected with protection there is always a trade-off as once a script is protected it's source can no longer be read on installed instances or edited for that matter. This leads to a couple of things:</p><ul><li>The scripts included in your application are protected and the source cannot be viewed by customers (or spies)</li><li>The script include records cannot be edited (or customised) by your customers if they want to introduce a different behaviour</li><li>Therefore any changes required to your scripts need to be done in your development environment and then published (and re-certified) before being installed by your customers on their instances. This can cause some lead time in delivering even the smallest of changes to your script includes.</li><li>Any Professional Services sold with your application will need to work within these confines and cannot simply alter a script on the customers instance.</li></ul><p></p><p><strong>This article will show how you can maintain the protection policies on your application scripts whilst at the same time introducing some flexibility to your application to counter the above.</strong></p><p></p><p>Before we go into the solution lets do a quick reminder of how protection policies work in practice,</p><p></p><p>On our primary vendor instance let's create a new scoped app:</p><p><img   alt="Screen Shot 2018-01-16 at 13.39.09.png" class="image-1 jive-image" src="6f46b80adb989344e9737a9e0f96192f.iix" style="width: 620px; height: 179px;"/></p><p>In this application create a new script include called "MyScript" with a simple function, "helloWorld".</p><p><img   alt="Screen Shot 2018-01-16 at 13.40.57.png" class="image-2 jive-image" src="55b5544adb545304b322f4621f961914.iix" style="width: 620px; height: 390px;"/></p><p>Now on this script include lets set the "Protection policy" field to be "Protected", this ensures that no third parties will be able to read or edit our script source.</p><p><img   alt="Screen Shot 2018-01-16 at 13.42.01.png" class="image-3 jive-image" src="05c337b5db10d3049c9ffb651f9619df.iix" style="width: 620px; height: 131px;"/></p><p>Lastly lets publish this app to our organisation's repository</p><p><img   alt="Screen Shot 2018-01-16 at 13.42.49.png" class="image-4 jive-image" height="392" src="87471186db9813043eb27a9e0f9619b3.iix" style="width: 404px; height: 392.271px;" width="404"/></p><p></p><p>Next we can move to our secondary vendor instance, where we can install the application from the repository,</p><p><img   alt="Screen Shot 2018-01-16 at 13.44.05.png" class="image-5 jive-image" src="6282340edb1097041dcaf3231f9619dd.iix" style="width: 620px; height: 189px;"/></p><p>Once installed browse to the list of script includes and find the script we created earlier:</p><p><img   alt="Screen Shot 2018-01-16 at 13.45.27.png" class="image-6 jive-image" src="5cd39c86db905344e9737a9e0f9619a6.iix" style="width: 620px; height: 345px;"/></p><p>Here you will see the script is actually viewable and editable on this instance despite our protection policy. This is because our secondary vendor instance has the same vendor prefix as the application itself, therefore the platform is aware this instance owns this app.</p><p></p><p>So in order to test this properly we need to install the application on a instance outside of our vendor organisation.</p><p>Once installed, on say a customer instance, the protection policies will be enforced and a customer will have no access to the script:</p><p><img   alt="Screen Shot 2018-01-16 at 13.49.46.png" class="image-7 jive-image" src="f680ff75db5c93041dcaf3231f9619fa.iix" style="width: 620px; height: 236px;"/></p><p>And don't worry this protection is well designed and cannot be circumvented, even via a background script, the following script for example:</p><p><img   alt="Screen Shot 2018-01-16 at 13.55.12.png" class="image-8 jive-image" height="118" src="7d1d9582db5cd344e9737a9e0f961952.iix" style="width: 422px; height: 117.752px;" width="422"/></p><p>returns <span style="text-decoration: underline;">no protected</span> source code:</p><p><img   alt="Screen Shot 2018-01-16 at 13.55.21.png" class="image-9 jive-image" height="241" src="5ae83ccedb5cdfc068c1fb651f961908.iix" style="width: 313px; height: 240.808px;" width="313"/></p><p>Now that we have established what protection policies do and how they work in practice we can look at how we add some flexibility to our published application without compromising the protection. To do this we're going to use a script extension technique, similar to that used in the server side implementations of GlideAjax.</p><p></p><p>First let's rename our current script from "MyScript" to "MyScriptBase". This is really handy as it also serves to illustrate how this technique can be retro-fitted to your existing application with minimal disruption.</p><p><img   alt="Screen Shot 2018-01-16 at 14.06.32.png" class="image-10 jive-image" height="191" src="6bf7d80edb589fc068c1fb651f9619c9.iix" style="width: 356px; height: 190.632px;" width="356"/></p><p>This leaves us free to create a new script include called "MyScript" without introducing a collision, but crucially this script will extend the "MyScriptBase":</p><p><img   alt="Screen Shot 2018-01-16 at 14.09.10.png" class="image-11 jive-image" src="03a7bf39db145704ed6af3231f9619bd.iix" style="width: 620px; height: 375px;"/></p><p><em>Note: Our new script is both empty (apart from the extension definition) and not protected. This makes it perfect for customer overrides later.</em></p><p></p><p>Now we're all setup, lets publish as a new version and install on our target customer instance.</p><p></p><p>Once published we can see our new script include behaves differently as there is no protection policy set, it's editable!</p><p><img   alt="Screen Shot 2018-01-16 at 14.14.38.png" class="image-12 jive-image" src="cc9b5982db14d7041dcaf3231f96190d.iix" style="width: 620px; height: 349px;"/></p><p>Customers (or members of partner professional services) are free to edit the overiden script include and alter the behaviour of the app whilst having no access to the underlining source of the original script.</p><p></p><p>For example let's override the helloWorld function and make a small change to what it returns:</p><p><img   alt="Screen Shot 2018-01-16 at 14.17.05.png" class="image-13 jive-image" src="5808d882db181f048c8ef4621f9619d0.iix" style="width: 620px; height: 191px;"/></p><p>And when its executed on the customer instance:</p><p><img   alt="Screen Shot 2018-01-16 at 14.20.33.png" class="image-14 jive-image" height="86" src="4eb5184adb545304b322f4621f96192f.iix" style="width: 378px; height: 85.9645px;" width="378"/></p><p><img   alt="Screen Shot 2018-01-16 at 14.20.40.png" class="image-15 jive-image" height="101" src="21c333b1dbdc1fc068c1fb651f9619fc.iix" style="width: 380px; height: 100.516px;" width="380"/></p><p><strong>Summary</strong></p><p>So in summary we can see how this technique allows us to deliver a script include in our application that we intend to be edited by the customer that can introduce small changes to the application without the need to publish a new version. This could be used to either alter the configuration of the app, change some data mappings perhaps or even as a way to fix bugs very quickly.</p><p></p><p>Happy scripting!</p>