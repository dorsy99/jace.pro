---
title: "GlideUserguser in ServicePortal"
date: 2018-02-01T11:44:02.000Z
authors: ["Sush"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=18ac2225dbd0dbc01dcaf3231f9619e3"
---
<p><span style="font-size: 12pt;">The GlideUser API provides access to information about the current user and current user roles. You can access these APIs via a global object called g_user which is typically used in client scripts and UI policies.</span></p><p></p><p><span style="font-size: 12pt;"><strong>In ServicePortal we don't have access to </strong></span>g_user<span style="font-size: 12pt;"><strong> global object in widget client script.</strong></span></p><p></p><p><span style="font-size: 12pt;">For example: If you have ever try to use g_user in widget client script like below.</span></p><p><img   alt="Screen Shot 2018-01-31 at 12.36.23 PM.png" class="image-1 jive-image" src="462aa8c6db94dfc03eb27a9e0f96191e.iix" style="width: 620px; height: 172px;"/></p><p></p><p>UI breaks saying "<span style="color: #e23d39;"><strong>g_user is not defined</strong></span>".</p><p><img   alt="Screen Shot 2018-01-31 at 12.37.01 PM.png" class="image-2 jive-image" src="cae8c84edb109704ed6af3231f9619a5.iix" style="width: 620px; height: 142px;"/></p><p></p><p><span style="font-size: 12pt;">So if we want to get logged in users <strong>SysId</strong> or his <strong>email</strong> etc in widget client script, do we have to do a GlideRecord query in widget Server script and then pass it to Client script?</span></p><p></p><p><span style="font-size: 12pt;">Fortunately, ServicePortal provides us with a service called <strong>glideUserSession</strong>, you just inject this into your client script and you are good to go. Now let's see how to use this in our portal widgets.</span></p><p></p><p><span style="font-size: 12pt;">Let's <strong>inject</strong> the service into our client script.</span></p><p></p><p><img   alt="Screen Shot 2018-01-31 at 8.17.07 PM.png" class="image-3 jive-image" src="2aa6e3f5db5493049c9ffb651f96199e.iix" style="width: 620px; height: 246px;"/></p><p></p><p><span style="font-size: 12pt;">Now that we have injected the <strong>gliderUserSession</strong> into our client script, let's see how to use it.</span></p><p></p><p><span style="text-decoration: underline; font-size: 14pt;"><strong>Widget Client Script demonstrating <span style="font-size: 16px;"><strong>gliderUserSession APIs</strong></span></strong></span></p><p></p><p><span style="font-family: 'courier new', courier; font-size: 12pt;">function(glideUserSession) {</span></p><p><span style="font-family: 'courier new', courier; font-size: 12pt;">       /* widget controller */</span></p><p><span style="font-size: 12pt; font-family: 'courier new', courier;"><strong> </strong></span><span style="font-family: 'courier new', courier; font-size: 12pt;">     var c = this;</span></p><p><span style="font-family: 'courier new', courier; font-size: 12pt;">       //glideUserSession provided OOTB used to like g_user</span></p><p><span style="font-family: 'courier new', courier; font-size: 12pt;">       glideUserSession.loadCurrentUser().then(function(currentUser) {</span></p><p></p><p><span style="font-family: 'courier new', courier; font-size: 12pt;">                     <strong>//To get userID. Equivalent to g_user.userID</strong></span></p><p><span style="font-family: 'courier new', courier; font-size: 12pt;">                   console.log(currentUser.userID);</span></p><p></p><p><span style="font-family: 'courier new', courier; font-size: 12pt;">                   <strong>//To get userName. Equivalent to g_user.userName</strong></span></p><p><span style="font-family: 'courier new', courier; font-size: 12pt;">                   console.log(currentUser.userName);</span></p><p></p><p><span style="font-family: 'courier new', courier; font-size: 12pt;">                   <strong>//To get firstName. Equivalent to g_user.firstName</strong></span></p><p><span style="font-family: 'courier new', courier; font-size: 12pt;">                   console.log(currentUser.firstName);</span></p><p></p><p><span style="font-family: 'courier new', courier; font-size: 12pt;">                   <strong>//To get lastName. Equivalent to g_user.lastName</strong></span></p><p><span style="font-family: 'courier new', courier; font-size: 12pt;">                   console.log(currentUser.lastName);</span></p><p></p><p><span style="font-family: 'courier new', courier; font-size: 12pt;">                   <strong>//To get fullName. Equivalent to g_user.getFullName()</strong></span></p><p><span style="font-family: 'courier new', courier; font-size: 12pt;">                   console.log(currentUser.getFullName());</span></p><p></p><p><span style="font-family: 'courier new', courier; font-size: 12pt;">                   <strong>//To check current user has specified role or admin role. Equivalent to g_user.hasRole('admin');</strong></span></p><p><span style="font-family: 'courier new', courier; font-size: 12pt;">                   console.log(currentUser.hasRole('admin'));</span></p><p></p><p><span style="font-family: 'courier new', courier; font-size: 12pt;">                   <strong>//To check current user has specified role only. Equivalent to g_user.hasRoleExactly('itil');</strong></span></p><p><span style="font-family: 'courier new', courier; font-size: 12pt;">                   console.log(currentUser.hasRoleExactly('itil'));</span></p><p></p><p><span style="font-family: 'courier new', courier; font-size: 12pt;">                   <strong>//To check current user has one of specified roles. Equivalent to g_user.hasRoleFromList('itil, maint');</strong></span></p><p><span style="font-family: 'courier new', courier; font-size: 12pt;">                   console.log(currentUser.hasRoleFromList('itil, maint'));</span></p><p></p><p><span style="font-family: 'courier new', courier; font-size: 12pt;">                   <strong>//To check current user has any roles. Equivalent to g_user.hasRoles();</strong></span></p><p><span style="font-family: 'courier new', courier; font-size: 12pt;">                   console.log(currentUser.hasRoles());</span></p><p></p><p><span style="font-family: 'courier new', courier; font-size: 12pt;"><strong>                   //<span style="font-family: 'courier new', courier;">To </span><span style="color: #333333; font-family: 'Gotham SSm A', 'Gotham SSm B', Arial, Helvetica, sans-serif;"><span style="font-family: 'courier new', courier;">Get a session client value</span> </span>. Equivalent to g_user.getClientData();</strong></span></p><p><span style="font-family: 'courier new', courier; font-size: 12pt;">                   currentUser.getClientData('loginlanguage');</span></p><p></p><p><span style="font-family: 'courier new', courier; font-size: 12pt;">                   <strong>//To get title</strong></span></p><p><span style="font-family: 'courier new', courier; font-size: 12pt;">                   console.log(currentUser.title);</span></p><p></p><p><span style="font-family: 'courier new', courier; font-size: 12pt;">                   <strong>//To get emailid</strong></span></p><p><span style="font-family: 'courier new', courier; font-size: 12pt;">                   console.log(currentUser.email);</span></p><p></p><p><span style="font-family: 'courier new', courier; font-size: 12pt;">                   <strong>//To get link to user avatar</strong></span></p><p><span style="font-family: 'courier new', courier; font-size: 12pt;">                   console.log(currentUser.avatar);</span></p><p></p><p><span style="font-family: 'courier new', courier; font-size: 12pt;">                   <strong>//To clone currentUser object</strong></span></p><p><span style="font-family: 'courier new', courier; font-size: 12pt;">                   var cloneCurrentUser = currentUser.clone();</span></p><p><span style="font-family: 'courier new', courier; font-size: 12pt;">                   console.log(cloneCurrentUser.userID);</span></p><p></p><p><span style="font-family: 'courier new', courier; font-size: 12pt;">       });</span></p><p><span style="font-family: 'courier new', courier; font-size: 12pt;">}</span></p><p></p><p><span style="font-size: 12pt;">Here is the output of our above client script.</span></p><p><img   alt="Screen Shot 2018-01-31 at 9.31.08 PM.png" class="image-4 jive-image" src="cb4e8986db9c97041dcaf3231f96192a.iix" style="width: 620px; height: 241px;"/></p><p></p><p><span style="font-size: 12pt;">Now you know how to use glideUserSession to get user information instead of slower GlideRecord queries.</span></p>