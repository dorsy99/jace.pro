---
title: "Service Portal Pagination Widget using chooseWindow method"
date: 2018-01-01T21:48:42.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=4cac2225dbd0dbc01dcaf3231f96198b"
---
<p>Hello All,</p><p></p><p>This post covers the simpler way to show   records stored in ServiceNow database table in paginated way on Service Portal Widget.</p><p>It leverages the OOB "chooseWindow" <a href="https://docs.servicenow.com/bundle/helsinki-application-development/page/app-store/dev_portal/API_reference/glideRecordScoped/concept/c_GlideRecordScopedAPI.html#ariaid-title14" title="https://docs.servicenow.com/bundle/helsinki-application-development/page/app-store/dev_portal/API_reference/glideRecordScoped/concept/c_GlideRecordScopedAPI.html#ariaid-title14">GlideRecord - Scoped</a>   method of GlideRecord API.</p><p></p><p>HTML Template Code :</p><p></p><p>&lt;div&gt;</p><p>&lt;!-- your widget template --&gt;</p><p>   &lt;table&gt;</p><p>       &lt;tr&gt;</p><p>           &lt;th&gt;</p><p>               Number</p><p>           &lt;/th&gt;</p><p>           &lt;th&gt;</p><p>               Short Description</p><p>           &lt;/th&gt;</p><p>       &lt;/tr&gt;</p><p>       &lt;tr ng-repeat="r in c.data.records | limitTo:c.data.page_size"&gt;</p><p>       &lt;td&gt;{{c.data.records[$index].number}}&lt;/td&gt;</p><p>       &lt;td&gt;{{c.data.records[$index].short_description}}&lt;/td&gt;</p><p>       &lt;/tr&gt;</p><p>       &lt;/table&gt;</p><p>   &lt;button ng-show="c.data.current_page != 0" ng-click="getPrevious()"&gt;</p><p>       Previous</p><p>   &lt;/button&gt;</p><p>   &lt;button ng-show="c.data.count &gt;= c.data.page_size" ng-click="getNextSet()"&gt;</p><p>       Next</p><p>   &lt;/button&gt;</p><p>&lt;/div&gt;</p><p></p><p style="background-position: repeat; color: rgba(0, 0, 0, 0); font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px;">&lt;</p><pre __default_attr="html" __jive_macro_name="code" class="jive_macro_code jive_text_macro _jivemacro_uid_15147562587375037" data-renderedposition="677_8_1192_368" jivemacro_uid="_15147562587375037"><p>&lt;div&gt;</p><p>&lt;!-- your widget template --&gt;</p><p>   &lt;table&gt;</p><p>       &lt;tr&gt;</p><p>           &lt;th&gt;</p><p>               Number</p><p>           &lt;/th&gt;</p><p>           &lt;th&gt;</p><p>               Short Description</p><p>           &lt;/th&gt;</p><p>       &lt;/tr&gt;</p><p>       &lt;tr ng-repeat="r in c.data.records | limitTo:c.data.page_size"&gt;</p><p>       &lt;td&gt;{{c.data.records[$index].number}}&lt;/td&gt;</p><p>       &lt;td&gt;{{c.data.records[$index].short_description}}&lt;/td&gt;</p><p>       &lt;/tr&gt;</p><p>       &lt;/table&gt;</p><p>   &lt;button ng-show="c.data.current_page != 0" ng-click="getPrevious()"&gt;</p><p>       Previous</p><p>   &lt;/button&gt;</p><p>   &lt;button ng-show="c.data.count &gt;= c.data.page_size" ng-click="getNextSet()"&gt;</p><p>       Next</p><p>   &lt;/button&gt;</p><p>&lt;/div&gt;</p></pre><p></p><p></p><p>CSS for table formatting:</p><p>table {</p><p>       font-family: arial, sans-serif;</p><p>       border-collapse: collapse;</p><p>       width: 100%;</p><p>}</p><p></p><p></p><p>td, th {</p><p>       border: 1px solid #dddddd;</p><p>       text-align: left;</p><p>       padding: 8px;</p><p>}</p><p></p><p></p><p>tr:nth-child(even) {</p><p>       background-color: #dddddd;</p><p>}</p><p></p><p>Client Controller :</p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_15147563913769612 jive_text_macro" data-renderedposition="1507_8_1192_496" jivemacro_uid="_15147563913769612"><p>function($scope) {</p><p>   /* widget controller */</p><p>   var c = this;</p><p></p><p>$scope.getNextSet = function() {</p><p>c.data.current_page = parseInt(c.data.current_page) + 1;</p><p>c.data.action = "nextRecord"</p><p>c.server.update().then(function(r){</p><p>c.data.action = undefined;</p><p>console.log("Response " + JSON.stringify(r));</p><p>console.log("Data objet " + JSON.stringify(c.data));</p><p></p><p></p><p>//c.data.records = r.records;</p><p>});</p><p>}</p><p></p><p>$scope.getPrevious = function() {</p><p>c.data.current_page = parseInt(c.data.current_page) - 1;</p><p>c.data.action = "nextRecord"</p><p>c.server.update().then(function(r){</p><p>c.data.action = undefined;</p><p>console.log("Response " + JSON.stringify(r));</p><p>console.log("Data objet " + JSON.stringify(c.data));</p><p></p><p></p><p>//c.data.records = r.records;</p><p>});</p><p>}</p><p>}</p><p></p></pre><p></p><p>Server Script :</p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_15147564191038756 jive_text_macro" data-renderedposition="2066_8_1192_880" jivemacro_uid="_15147564191038756"><p>(function() {</p><p>   /* populate the 'data' object */</p><p>   /* e.g., data.table = $sp.getValue('table'); */</p><p>if (!input) {</p><p>data.records = [];</p><p>data.page_size = 5;</p><p>data.count = 5;</p><p>data.current_page = 0;</p><p></p><p></p><p></p><p></p><p>var gr = new GlideRecord("incident");</p><p>gr.orderBy("number");</p><p>gr.chooseWindow(data.current_page, data.page_size);</p><p>gr.query();</p><p></p><p></p><p>while (gr.next()) {</p><p>var obj = {};</p><p>//gs.addInfoMessage("Hello");</p><p>obj.number = gr.getValue("number");</p><p>obj.short_description = gr.getValue("short_description");</p><p>data.records.push(obj);</p><p>}</p><p></p><p></p><p>}</p><p>if (input &amp;&amp; input.action == "nextRecord") {</p><p></p><p></p><p></p><p>data.records = [];</p><p>data.count = 0;</p><p>var startPage = input.current_page * input.page_size;</p><p>var endPage = (input.current_page * input.page_size) + input.page_size</p><p>// gs.addInfoMessage("start " + startPage + " endPage " + endPage);</p><p>var gr1 = new GlideRecord("incident");</p><p>gr1.orderBy("number");</p><p>gr1.chooseWindow(startPage, endPage);</p><p>gr1.query();</p><p></p><p></p><p>while (gr1.next()) {</p><p>data.count++</p><p>var obj1 = {};</p><p>//gs.addInfoMessage("Hello");</p><p>obj1.number = gr1.getValue("number");</p><p>obj1.short_description = gr1.getValue("short_description");</p><p>data.records.push(obj1);</p><p>}</p><p></p><p>return data;</p><p>}</p><p>})();</p></pre><p></p><p></p><p>Some screen captures</p><p></p><p><img   class="image-1 jive-image" src="404cbccedb5497041dcaf3231f9619af.iix" style="max-width: 1200px; max-height: 900px;"/></p><p></p><p><img   class="image-2 jive-image" src="efcc5882dbdc17049c9ffb651f961924.iix" style="max-width: 1200px; max-height: 900px;"/></p><p></p><p><img   class="image-3 jive-image" src="c6ffbb71db94db048c8ef4621f9619d5.iix" style="max-width: 1200px; max-height: 900px;"/></p>