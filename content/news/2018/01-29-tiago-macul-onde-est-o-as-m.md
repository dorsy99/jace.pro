---
title: "Onde esto as mensagens do perfil"
date: 2018-01-29T00:08:55.000Z
authors: ["Tiago Macul"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=957c22e1dbd0dbc01dcaf3231f9619e7"
---
<p>As mensagens estão armazenadas na tabela: live_messages</p><p></p><p>Live Messages   Stores messages. References sys_user table. Access at Collaborate &gt; Feed Administration &gt; Messages.</p><p></p><p>Live Profiles   Stores user live feed profiles. References sys_user table. Access at Collaborate &gt; Feed Administration &gt; Profiles.</p><p></p><p></p><pre __default_attr="java" __jive_macro_name="code" class="jive_macro_code jive_text_macro _jivemacro_uid_15171625681254637" data-renderedposition="155_8_1192_272" jivemacro_uid="_15171625681254637"><p>var objMessage= new GlideRecord("live_message");</p><p>objMessage.query();</p><p>objMessage.next();</p><p>gs.print(objMessage.profile);</p><p></p><p>var ObjProfile= new GlideRecord("live_profile");</p><p>ObjProfile.addQuery('sys_id',objMessage.profile);</p><p>ObjProfile.query();</p><p>ObjProfile.next();</p><p>gs.print(ObjProfile.document);</p><p></p><p>var objUser= new GlideRecord("sys_user");</p><p>objUser.addQuery('sys_id',ObjProfile.document);</p><p>objUser.query();</p><p>objUser.next();</p><p></p><p>gs.print(objUser.name);</p></pre><p></p><p></p><p></p><pre __default_attr="java" __jive_macro_name="code" class="_jivemacro_uid_15171635800824582 jive_macro_code jive_text_macro" data-renderedposition="490_8_1192_272" jivemacro_uid="_15171635800824582"><p>var objUser= new GlideRecord("sys_user");</p><p>       objUser.addQuery('user_name','tiago.macul');</p><p>objUser.query();</p><p>       objUser.next();</p><p>gs.print(objUser.name);</p><p></p><p>var ObjProfile= new GlideRecord("live_profile");</p><p>       ObjProfile.addQuery('document',objUser.sys_id);</p><p>ObjProfile.query();</p><p>       ObjProfile.next();</p><p>gs.print(ObjProfile.document);</p><p></p><p>var objMessage= new GlideRecord("live_message");</p><p>       objMessage.addQuery('profile', ObjProfile.sys_id);</p><p>objMessage.query();</p><p>       objMessage.next();</p><p>gs.print(objMessage.message);</p></pre><p></p><p></p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_15173407083041128 jive_text_macro" data-renderedposition="825_8_1192_368" jivemacro_uid="_15173407083041128"><p>//sysId = sys_user.sys_id</p><p>function deleteMessage(sysId)</p><p>{</p><p>//Busca o perfil de acordo com o sys_id do usuário (sys_user)</p><p>var ObjProfile = new GlideRecord("live_profile");   </p><p>ObjProfile.addQuery('document', sysId);   </p><p>ObjProfile.query();   </p><p></p><p>//Busca as mensagens de acordo com o profile, deleta todas as mensagens enviadas pelo usuário</p><p>var objMessage = new GlideRecord("live_message");   </p><p>objMessage.addQuery('profile', ObjProfile.sys_id);   </p><p>objMessage.deleteMultiple();   </p><p></p><p>//Busca   a participação em todas as conversas</p><p>var ObjGrpMember = new GlideRecord("live_group_member");</p><p>ObjGrpMember.addQuery('member', ObjProfile.sys_id);   </p><p>ObjGrpMember.query();</p><p></p><p>//Busca as conversas com participação do usuário e deleta todas as mensagens onde houve participação dele</p><p>var objMessageGrp = new GlideRecord("live_message");   </p><p>       objMessageGrp.addQuery('group', ObjGrpMember.group);   </p><p>objMessageGrp.deleteMultiple();</p><p>}</p></pre><p></p><p></p><p><a href="https://docs.servicenow.com/bundle/kingston-servicenow-platform/page/use/live-feed/reference/r_TablesInstalledWithLiveFeed.html" title="https://docs.servicenow.com/bundle/kingston-servicenow-platform/page/use/live-feed/reference/r_TablesInstalledWithLiveFeed.html">Tables installed with live feed</a></p><p><a href="https://docs.servicenow.com/bundle/kingston-servicenow-platform/page/use/live-feed/task/t_AddAPollToAMessage.html" title="https://docs.servicenow.com/bundle/kingston-servicenow-platform/page/use/live-feed/task/t_AddAPollToAMessage.html">Add a poll to a message</a></p><p></p><p></p><p>Autores: <a __default_attr="85842" __jive_macro_name="user" class="jive_macro jive_macro_user" data-orig-content="tiagomacul" data-renderedposition="1321_64.015625_99_16" href="/community?id=community_user_profile&user=c1a19e2ddb981fc09c9ffb651f961919" modifiedtitle="true" title="Tiago Macul,">tiagomacul</a>   <a __default_attr="156895" __jive_macro_name="user" class="jive_macro jive_macro_user" data-orig-content="edersonfs" data-renderedposition="1321_170.375_82_16" href="/community?id=community_user_profile&user=66901e2ddb581fc09c9ffb651f9619fc" modifiedtitle="true" title="Edersonfs">edersonfs</a> </p>