---
title: "JavaScript Short Circuit Evaluation"
date: 2011-03-28T18:53:43.000Z
authors: ["SlightlyLoony"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=fbcce265dbd0dbc01dcaf3231f9619ab"
---
<p><img __jive_id="6860" alt="Electric Hair 2.jpg" class="jive-image" style="width: SlightlyLoony/Electric Hair 2.jpg; height: auto;" />If you write even a few JavaScript programs, you're going to run into situations where you need to make a test, then take some action only if the test had a certain outcome. Probably the most common example of this is testing to see if a reference is null before reading a property or calling a method on the object referred to. For example, suppose your program had a reference "x" to an object (but it might be null or undefined), and that object had a method "y" that you'd like to call if it is defined (and that depends on what <i>type</i> of object "x" was. Here's how you might code that:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />if (this.x != null) {<br />   if (typeof x.y == 'function')<br />      x.y();<br />}</pre><br /><br />Ah, but there's a more concise way, using a feature of the JavaScript language called "short circuit evaluation". That's <i>not</i> a reference to what happened to our girl's hair (at right), but rather to a special way that certain operators work. Here's what the code above would look like, rewritten to use <a title=".wikipedia.org/wiki/Short_circuit_evaluation" href="http://en.wikipedia.org/wiki/Short_circuit_evaluation">short circuit evaluation</a>:<br /><!--break--><br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />(this.x != null) &amp;&amp; (typeof x.y == 'function') &amp;&amp; x.y();</pre><br /><br />What's going on here? Let's pick it apart...<br /><br />The short circuit evaluation magic is happening on the three sub-expressions separated by the "&amp;&amp;" operators. These sub-expressions are always evaluated left-to-right, but the evaluation of the sub-expressions <i>stops</i> as soon the result of the overall expression can be determined. That sounds complicated, but it's really not. Imagine, for instance, that "x" was null when this code was evaluated. The first sub-expression evaluates to false — which means that no matter what the other sub-expressions evaluate to, the overall expression's result will be false. To obey the special short circuit evaluation rule, that means the second and third sub-expressions <i>will not be evaluated</i> — and that's a good thing, because when "x" is null, they'd both fail big time! Something very similar happens in the second sub-expression if "x" is not null, but it doesn't have a "y" function. In that case the third sub-expression will not be evaluated — and the invocation of "x.y()" will not fail.<br /><br />In JavaScript there are <a title="w.devguru.com/technologies/ecmascript/quickref/logical_operators.html" href="http://www.devguru.com/technologies/ecmascript/quickref/logical_operators.html">two operators for which short circuit evaluation applies</a>: "&amp;&amp;" (logical "and") and "||" (logical "or"). It's worth learning both of these well, and what makes them different than the very similar (but <i>not</i> short circuit evaluating!) <a title="w.devguru.com/technologies/ecmascript/quickref/bitwise_operators.html" href="http://www.devguru.com/technologies/ecmascript/quickref/bitwise_operators.html">bitwise integer operators</a> "&amp;" and "|".<br /><br />There's another (unrelated) piece of that example that's worth noting: it tests "this.x != null" instead of "x != null". Do you know why? In my example, I'm assuming that "x" is either a global variable or an instance variable (i.e., a property in the current object). By including the "this.", the test will work correctly even if "x" is undefined; otherwise the test would cause a runtime error.<br /><br />Here's one more example, this time of probably the most common usage pattern for short circuit evaluation: making sure an object isn't null before you attempt to retrieve a property or call a method from it:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />var x = getMyX();<br />if ((x != null) &amp;&amp; x.valid()) {<br />   // do important stuff because x is valid...<br />}</pre><br /><br />This is a pattern you'll see frequently in our code, and it's a good example of handy-dandy short circuit evaluation at work...</p>