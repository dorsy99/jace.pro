---
title: "Jelly When Everything Goes Horribly Wrong"
date: 2011-12-15T23:38:25.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=049d6a69dbd0dbc01dcaf3231f96195d"
---
<p>Somewhere there may be a programmer who always writes programs that work correctly on the first try. Many non-programmers I know are convinced that <em>every</em> progammer other than me is like that! But I've never met that programmer — and I am certainly <em>not</em> that programmer. Some programming languages increase the probability of writing a correct program; others reduce it. Jelly, in my own experience, is a prime candidate for the programming language most likely to <span style="text-decoration: line-through;">help</span>drive a programmer crazy. That's a shorter drive for some (like me!) than it is for others...</p><p></p><p>So when things <em>do</em> go horribly wrong with your Jelly templates, as they inevitably will, how can you troubleshoot them?</p><p></p><p>Here's an example we'll use to illustrate the troubleshooting techniques:</p><pre style="margin-left: 20px; line-height: 1; color: firebrick;"><br/>&lt;?xml version="1.0" encoding="utf-8"?&gt;<br/>&lt;j:jelly&gt;<br/>       &lt;g:evaluate&gt;<br/>               var fn = gs.getUser().getFirstName();<br/>               var ln = gs.getUser().getLastName();<br/>               var name = fn + ' ' + ln;<br/>               name;<br/>       &lt;/g:evaluate&gt;<br/>       &lt;g2:evaluate&gt;<br/>               var picks = ['rocket scientist', 'hero', 'mouse', 'orangatan', 'Jelly-head', 'communist'];<br/>               var index = Math.random();<br/>               var pick = picks[index];<br/>               pick;<br/>       &lt;/g2:evaluate&gt;<br/>     <br/><strong>Your name is $[jvar_name] and you are a $[jvar_pick] (and your mother wears Army boots)!</strong><br/>&lt;/j:jelly&gt;</pre><p><br/>If you run this, you'll see that it works very poorly indeed. Here's what I got:</p><div style="margin-left: 20px; font-weight: bold;"><br/>Your name is and you are a *Undefined(var picks = ['rocket scientist', 'hero', 'mouse', 'orangatan', 'Jelly-head', 'communist']; var index = Math.random(); var pick = picks[index]; pick;) (and your mother wears Army boots)!</div><p><br/>There are two problems: it didn't print out my name, and I got a bunch of garbage instead of the randomly selected description. Let's take the name problem first. The <span style="font-family=courier;color: FireBrick;">evaluate</span> tag looks pretty much foolproof, so I'm wondering exactly what is in the <span style="font-family=courier;color: FireBrick;">jvar_name</span> Jelly variable when that evaluation is finished. Here's how I can find out — by using the <span style="font-family=courier;color: FireBrick;">breakpoint</span> tag like this:</p><pre style="margin-left: 20px; line-height: 1; color: firebrick;"><br/>&lt;?xml version="1.0" encoding="utf-8"?&gt;<br/>&lt;j:jelly&gt;<br/>       &lt;g:evaluate&gt;<br/>               var fn = gs.getUser().getFirstName();<br/>               var ln = gs.getUser().getLastName();<br/>               var name = fn + ' ' + ln;<br/>               name;<br/>       &lt;/g:evaluate&gt;<br/>       &lt;g:breakpoint/&gt;<br/>       &lt;g2:evaluate&gt;<br/>               var picks = ['rocket scientist', 'hero', 'mouse', 'orangatan', 'Jelly-head', 'communist'];<br/>               var index = Math.random();<br/>               var pick = picks[index];<br/>               pick;<br/>       &lt;/g2:evaluate&gt;<br/>     <br/><strong>Your name is $[jvar_name] and you are a $[jvar_pick] (and your mother wears Army boots)!</strong><br/>&lt;/j:jelly&gt;</pre><p><br/>When I ran this, the following showed up in my log:</p><pre style="margin-left: 20px; line-height: 1; color: firebrick;"><br/>&lt;&lt;&lt; BREAKPOINT TAG START &lt;&lt;&lt;<br/>JVAR: AMP=&amp;<br/>JVAR: AND=&amp;&amp;<br/>JVAR: GT=&gt;<br/>JVAR: LT=&lt;<br/>JVAR: RP=FFFFFFFFFFF250350nullnullnullnullnullnullnullFFFnullnullnullF<br/>JVAR: SP=<br/>JVAR: context=com.glide.ui.jelly.GlideJellyContext@5f02640f<br/>JVAR: gc=com.glide.script.GlideController@15f74584<br/>JVAR: jvar_cdata_end=]]&gt;<br/>JVAR: jvar_cdata_start=</pre>