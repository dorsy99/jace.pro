---
title: "Jelly Over and Over Again"
date: 2011-12-06T22:35:23.000Z
authors: ["SlightlyLoony"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=613daae5dbd0dbc01dcaf3231f961947"
---
<p>Sometimes you need to be a little obsessive-compulsive in your HTML rendering, such as when you want to make a list of something. You need to do the same thing, over and over again — you need <em>repetition</em>, <em>iteration</em>, or some other such loopy thingamabob. I've already introduced you to a teensy bit of this with the first Jelly example I showed you:</p><pre style="margin-left: 20px; line-height: 1; color: firebrick;"><br/>&lt;?xml version="1.0" encoding="utf-8"?&gt;<br/>&lt;j:jelly&gt;<br/>       &lt;j:set/&gt;<br/>       &lt;j:while&gt;<br/>             <br/>Test<br/>               &lt;j:set/&gt;<br/>       &lt;/j:while&gt;<br/>&lt;/j:jelly&gt;</pre><p><br/>That's the <em>while</em> loop that every programmer is familiar with (hopefully!). But wait! There's even <em>more</em> loopy Jelly thingamabob goodness!</p><p></p><p>When you need to iterate over a collection of things, the Jelly <span style="font-family=courier;color: FireBrick;">forEach</span> tag is your friend. For instance, here we're iterating over an array of CSS color names:</p><pre style="margin-left: 20px; line-height: 1; color: firebrick;"><br/>&lt;?xml version="1.0" encoding="utf-8"?&gt;<br/>&lt;j:jelly&gt;<br/>       &lt;g:evaluate&gt;<br/>               var colors = ['Red', 'Black', 'Blue', 'Brown', 'CadetBlue', 'DarkGreen', 'DeepPink'];<br/>       &lt;/g:evaluate&gt;<br/>       &lt;j:foreach&gt;<br/>             <br/>Color: $[SP] <span style="color: ${jvar_color};">${jvar_color}</span><br/>       &lt;/j:foreach&gt;<br/>&lt;/j:jelly&gt;</pre><p><br/>Don't worry about that <span style="font-family=courier;color: FireBrick;">evaluate</span> tag at the moment; it's just creating an array of color names for us. We'll get into much more detail about it in a later post. For now, just look at the <span style="font-family=courier;color: FireBrick;">forEach</span> tag. The <em>items</em> attribute is where you specify the collection (in this case, an array) of things to iterate over. The <em>var</em> attribute is where you specify the name of the variable that will contain each item from the collection in its turn. The array of color names has seven colors in it, so that <span style="font-family=courier;color: FireBrick;">forEach</span> loop will execute 7 times, once for each color. The first time through, the variable <em>jvar_color</em> will contain "Red", the next time through "Black", and so on.</p><p></p><p>Now look at the line after the <span style="font-family=courier;color: FireBrick;">forEach</span> tag. Here's where we're actually doing something useful (well, maybe). The first time through the loop, when <em>jvar_color</em> equals "Red", the JEXL expressions will evaluate into this HTML:</p><pre style="margin-left: 20px; line-height: 1; color: firebrick;"><br/>             <br/>Color:     <span style="color: red;">Red</span></pre><p><br/>This is an example of how the JEXL expressions can be used to directly render HTML. It's worth taking a few minutes to make sure you really understand what's happening in there. In later posts you'll see how you can use information from your ServiceNow instance's database to do similar sorts of things. Some of these will look complicated, but in the end there's really only two things going on: (1) we're making decisions about <em>what</em> HTML to render, or (2) we're getting data to be <em>part of</em> the HTML we're rendering.</p><p></p><p>Now you have all the tools you need to build trully obsessive-compulsive Jelly!</p>