---
title: "Conditionally Speaking"
date: 2011-11-17T21:53:19.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=384daee5dbd0dbc01dcaf3231f961998"
---
<p><span class="asset-asset_lightbox-Small asset-align-right"><a href="/files/SlightlyLoony/puzzled3.jpg" rel="lightbox"><img rel="lightbox" src="http://community.service-now.com/files/imagecache/Small/SlightlyLoony/puzzled3.jpg" alt="" title="" class="imagecache imagecache-Small" /></a></span>JavaScript, like all the "C-like" languages, has a <i>conditional</i> operator (sometimes called the <i>ternary</i> operator because it has three parts). If you don't know it by name, it looks like this:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />&lt;condition&gt; ? &lt;value&gt; : &lt;value&gt;<br /></pre><br />This is one of those langauge elements that seems to have a bit of "religion" associated with it. Some developers avoid it at all costs, for stated reasons ranging from "It's confusing!" to "It's ugly!" Others seem to embrace it as the one true way. I think of it as a useful tool, mainly for simplifying and clarifying code...<br /><!--break--><br />If you don't know this operator, here's how it works. When JavaScript sees a conditional operator, the first thing it does is to evaluate the condition, which can be any expression at all. Whatever that expression is, JavaScript will evaluate it and then coerce it to a boolean. If the result is true, then the first value (after the question mark) is returned. If the result is false, the second value (after the colon) is returned. The key thing to remember is that the conditonal operator as a whole always returns one of the two values.<br /><br />Most often the condition will be a simple comparison, like this:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />var word = (words == 1) ? 'thing' : 'things';<br /></pre><br />The condition part here is <span style="font-family=Courier;color:FireBrick;">(words == 1)</span>, which compares the value of the variable <span style="font-family=Courier;color:FireBrick;">words</span> to the number <span style="font-family=Courier;color:FireBrick;">1</span>, and evaluates to either <span style="font-family=Courier;color:FireBrick;">true</span> or <span style="font-family=Courier;color:FireBrick;">false</span> â€” no coercion to boolean needed. If this comparison is true, then <span style="font-family=Courier;color:FireBrick;">'thing'</span> is the result of this conditional operator, otherwise it's <span style="font-family=Courier;color:FireBrick;">'things'</span>.<br /><br />But consider this different use of the conditional operator, to handle calling a method on a value that we're not quite sure is actually an object:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />var x = Something.fetch();<br />var result = (!!x &amp;&amp; (typeof x == 'object')) ? x.process() : null;<br /></pre><br />That code behaves exactly like the following:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />var x = Something.fetch();<br />var result;<br />if (!!x &amp;&amp; (typeof x == 'object'))<br />    result = x.process();<br />else<br />    result = null;<br /></pre><br />Six lines of code reduced to two lines of code that easier to read. Win! This is a good example of my favorite use for the conditional operator: simplifying code.<br /><br />Here's another example, showing how the values can be expressions themselves:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />var x = 14;<br />var y = 83;<br />var op = 'sub';<br />var result = (op == 'add') ? x + y : x - y;<br /></pre><br />This is exactly the same as the following code:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />var x = 14;<br />var y = 83;<br />var op = 'sub';<br />var result;<br />if (op == 'add')<br />    result = x + y;<br />else<br />    result = x - y;<br /></pre><br />The values in this case are expressions (like <span style="font-family=Courier;color:FireBrick;">x - y</span>). They can be any kind of expression or value, including objects and functions. For instance, you could (if you were a perverse developer) implement a selectable ascending or descending sort like this:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />var x = [34,939,2,59,2904,495,3];<br />var asc = true;<br />x.sort(asc ? function(a,b) {return a - b;} : function(a,b) {return b - a;});<br /></pre><br />That's <i>not</i> the way I'd recommend implementing it, but it is an example of the values in a conditional operator being something you might not expect: in this case, a function.<br /><br />I'll leave you with one last (extended) example of using conditional operators to simplify your code. If you start with this:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />// return the difference between two temperatures a and b, expressed in F (type = 'F') or C (type = 'C')<br />// temperature values are suffixed with type, like '24C' or '94F' and may be non-integer<br />// result is integer temperature, and always positive<br />function tempDiff (a, b, type) {<br />    var t1 = fc(parse(a));<br />    var t2 = fc(parse(b));<br />    var d = t1.value - t2.value;<br />    var r = {value: d, units: 'C'};<br />    if (type == 'F') {<br />        r.value *= 9/5;<br />        r.units = 'F';<br />    }<br />    return '' + Math.round(Math.abs(r.value)) + r.units;<br /><br />    function parse(t) {<br />        return {value: t.substring(0, t.length - 1) - 0, units: t.substr(t.length - 1)};<br />    }<br /><br />    function fc(t) {<br />        if (t.units == 'C')<br />            return t;<br /><br />        return {value: (t.value - 32) * 5 / 9, units: 'C'};<br />    }<br />}<br /></pre><br />You could simplify it to this:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />// return the difference between two temperatures a and b, expressed in F (type = 'F') or C (type = 'C')<br />// temperature values are suffixed with type, like '24C' or '94F' and may be non-integer<br />// result is integer temperature, and always positive<br />function tempDiff (a, b, type) {<br />    var t1 = fc(parse(a));<br />    var t2 = fc(parse(b));<br />    var d = t1.value - t2.value;<br />    return '' + Math.round(Math.abs(d * ((type == 'F') ? 9/5 : 1))) + type;<br /><br />    function parse(t) {<br />        return {value: t.substring(0, t.length - 1) - 0, units: t.substr(t.length - 1)};<br />    }<br /><br />    function fc(t) {<br />        return (t.units == 'C') ? t : {value: (t.value - 32) * 5 / 9, units: 'C'};<br />    }<br />}<br /></pre><br />Note that in one case (<span style="font-family=Courier;color:FireBrick;">d * ((type == 'F') ? 9/5 : 1)</span>) we had to surround the entire conditional operator with parentheses. If we had not, JavaScript would think that our condition was <span style="font-family=Courier;color:FireBrick;">d * (type == 'F')</span>, which would work very poorly :-)<br /><br />Well, that's about enough of that!</p>