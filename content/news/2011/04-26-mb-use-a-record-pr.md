---
title: "Use a Record Producer to NOT CREATE A RECORD"
date: 2011-04-25T23:24:45.000Z
authors: ["MB"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=6c8de269dbd0dbc01dcaf3231f96198f"
---
<p><img  alt="" class="jive-image" src="3ea4f846db1cdfc068c1fb651f961911.iix" style="float:right;" /><br />I was asked recently to create a new app that would manage the shipment of hardware. One of the requirements was to allow the user to Create AND Update the record via a record producer. Normally record producers, as the name suggests, creates records. However I needed to figure out a smooth way to update an existing record, in particular ONLY add or remove pieces of hardware on the existing record from within the record producer.<br /><br />When it comes down to it, the real magic to make this process work is contained in two lines of code. <br /><br /><pre __default_attr="plain" __jive_macro_name="code" class="jive_text_macro jive_macro_code"><br /><br />   //This will prevent the record producer from creating a new record.<br />current.setAbortAction(true);<br />   //This will redirect you to the record specified. <br />   //Need to add the record table, and the record sys_id.<br />producer.redirect = 'u_recordtable.do?sys_id=' + record.sys_id;<br /></pre><br /><br />These two lines of code will need to be incorporated in a script contained in the "Script" field of the record producer.<br /><br /><b>Building Out My Example:</b><br />•In the record producer you will need some type of field called "Existing Record" (existing_record). Or something of the sort to contain Yes/No.<br />•Selecting "YES", by UI Policy, will display a reference field where the user could select an existing record on the referenced table.<br />•In my case I specifically wanted the user to ONLY modify the CIs associated with the record. So I created a "List Collector" in my record producer. <br />•I then used a Catalog Client script to populate all additional variables with the data from the existing record when the existing_record was "Yes". Here is an example of that onChange Client script.<br /><pre __default_attr="plain" __jive_macro_name="code" class="jive_text_macro jive_macro_code"><br /><br />function onChange(control, oldValue, newValue, isLoading) {<br />   //Yes-No variable drop down.<br />var existing = g_form.getValue('existing_record');<br />if (existing == 'Yes'){<br />   // variable field to the referenced record.<br />var rec = g_form.getReference('ref_variable_field_name');<br />g_form.setValue('producer-field', rec.somedata);<br /><br />   //How I populated the right side of the List Collector from the existing record.<br />var configitems = gel('configuration_items_select_1');<br />$('configuration_items_select_1').options.remove(0);<br />var gr = new GlideRecord("some_ci_table");<br />gr.addQuery("ci_field", rec.sys_id);<br />gr.query();<br />while (gr.next()) {<br />var opt = document.createElement('option');<br />opt.text = gr.name;<br />opt.value = gr.sys_id;<br />opt.title = "";<br />$('configuration_items_select_1').options.add(opt);<br />}<br />}<br />}<br /></pre><br /><br />Once you have populated your record producer, you will need to work on the "Submit" part of the Record Producer script. The framework to accomplish this will look something like this. All of this code will be contained in the "Script" field of the record producer.<br /><pre __default_attr="plain" __jive_macro_name="code" class="jive_text_macro jive_macro_code"><br /><br />if (producer.existing_record == 'Yes'){<br />   //Do whatever code in here to update the referenced record. <br />   //Remember that your onChange Client script will have been triggered,<br />   //based on the existing_record being yes, to populate any fields you want.<br />   //Once your code is done, use our magic two lines of code.<br /><br />   //This will prevent the record producer from creating a new record.<br />current.setAbortAction(true);<br />   //This will redirect you to the record specified. <br />   //Need to add the record table, and the record sys_id.<br />producer.redirect = 'u_recordtable.do?sys_id=' + record.sys_id;<br />}<br /><br />else {<br />   //In here would be any processing to happen when the Record producer will actually Complete.<br />}<br /></pre><br /><br />If anything, this example got me thinking out-of-the-box about the many different ways you could use a record producer. It is a great front-end to back-end interaction for the user.<br /><br />Enjoy the out-of-box thoughts....<br />&lt;script&gt;&lt;/script&gt;<br /> var _gaq = _gaq || [];<br /> _gaq.push(['_setAccount', 'UA-22945975-1']);<br /> _gaq.push(['_trackPageview']);<br /><br /> (function() {<br /> var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;<br /> ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';<br /> var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);<br /> })();<br /><br /></p>