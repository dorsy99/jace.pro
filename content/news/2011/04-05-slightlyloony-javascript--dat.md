---
title: "JavaScript Datatype Coercion"
date: 2011-04-04T17:46:43.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=441e6e2ddbd0dbc01dcaf3231f961973"
---
<p><img  alt="" class="jive-image" src="56b7c586db1413043eb27a9e0f961972.iix" style="width: auto; height: 146px;" />Our young friend at right is skeptical that we ever need to force JavaScript to use any particular datatype, but actually the need arises often. If you write any JavaScript at all, you're probably using implicit datatype coercion already, though you may not know it. But what this post is all about is using <i>explicit</i> datatype coercion. "Why?", you ask. Consider this code:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />var y = x + 3;</pre><br /><br />If 'x' contains a number, then 'y' will contain the arithmetic sum you'd expect. But if 'x' had a string representation of a number (e.g., '045'), then 'y' will contain a string with the '3' concatenated (e.g., '0453') instead of the arithmetic sum you wanted. This code will fix it, by explicit coercion:<br /><!--break--><br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />var y = x - 0 + 3;</pre><br /><br />By asking JavaScript to subtract zero, we force (coerce!) JavaScript to convert 'x' to a number â€” exactly what we want. Subtracting zero from a string is just a 'trick' to force the coercion to a number. Here are some more:<br />#customers {<br /> font-family:"Trebuchet MS", Arial, Helvetica, sans-serif;<br /> width:100%;<br /> border-collapse:collapse;<br />}<br />#customers td, #customers th {<br /> font-size:1em;<br /> border:1px solid #914D21;<br /> padding:3px 7px 2px 7px;<br />}<br />#customers th {<br /> font-size:1.1em;<br /> text-align:left;<br /> padding-top:5px;<br /> padding-bottom:4px;<br /> background-color:#914D21;<br /> color:#ffffff;<br />}<br />#customers tr.alt td {<br /> color:#000000;<br /> background-color:#EAF2D3;<br />}<br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><br /><table id="customers"><tr><th>From</th><th>To</th><th>Use this</th></tr><tr><td>string</td><td>boolean</td><td>!!x</td></tr><tr><td>string</td><td>number</td><td>x - 0</td></tr><tr><td>string</td><td>object</td><td>new String(x)</td></tr><tr><td>boolean</td><td>string</td><td>'' + x</td></tr><tr><td>boolean</td><td>number</td><td>x - 0</td></tr><tr><td>boolean</td><td>object</td><td>new Boolean(x)</td></tr><tr><td>number</td><td>string</td><td>'' + x</td></tr><tr><td>number</td><td>boolean</td><td>!!x</td></tr><tr><td>number</td><td>object</td><td>new Number(x)</td></tr><tr><td>object</td><td>string</td><td>x.toString()</td></tr><tr><td>object</td><td>boolean</td><td>!!x -or- !!x.toString()</td></tr><tr><td>object</td><td>number</td><td>(!!x) - 0 -or- x.toString() - 0</td></tr></table><br /><br />There's one more similar issue that isn't really coercion, but often comes up in similar circumstances. Suppose you have a variable 'x' that has a number, and you want to get just the integer part of it. In other words, if 'x' is 3.4, you want to get 3, and if 'x' is -56.787, you want to get -56. Here's how you can do it:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />(x &lt; 0) ? Math.ceil(x) : Math.floor(x);</pre><br /><br />Now go forth and coerce!</p>