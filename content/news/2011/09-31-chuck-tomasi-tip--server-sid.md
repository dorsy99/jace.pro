---
title: "Tip Server Side Functions and Client Scripts"
date: 2011-10-01T00:43:12.000Z
authors: ["Chuck Tomasi"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=eacda2e9dbd0dbc01dcaf3231f961907"
---
<p><img   align="right" alt="" class="jive-image" src="1e72348edb189344e9737a9e0f9619e5.iix"/>For years I've been told by my colleagues to use server side scripts in ServiceNow when ever possible to keep from slowing down things like form loads. However, there are times when I need some server side information on the client and for some reason (probably conditioning) cringe at the thought of retrieving it from an Ajax call. By using the g_scratchpad object, I'll show you how to leverage server side script functions to "set up" information that the client script can consume.</p><p></p><p></p><p></p><p>This is just one of several tips I have coming up to help make you more effective at script writing, because bad scripting habits can lead a poor user experience.</p><p></p><p>Here's an example based on a recent customer requirement; present an alert message when an emergency change request is in the state "Plan", and has no attachment yet.</p><p></p><p>Wouldn't it be nice if there was a client side function to detect if there are attachments on a record? I thought so to, but there isn't. Fortunately, there's an easy way to do this. From the server side, we can use</p><p></p><pre __default_attr="plain" __jive_macro_name="code" class="_jivemacro_uid_14703419954467409 jive_macro_code jive_text_macro" data-renderedposition="281_8_1192_32" jivemacro_uid="_14703419954467409"><br/>current.hasAttachments()</pre><p></p><p>to get a boolean value (true=this record has attachments, false=no attachments found.) Using the g_scratchpad object, we can store that value and pick it up with a client script. This is a great place to use a display business rule to do the set up.</p><p></p><p>Display business rules are the server side analog of an onLoad client script. When a record is requested, the display business rule runs, then the form is presented. The cool part is that the display business rules run before the onLoad client scripts, so it becomes quite easy to put something in the g_scratchpad with a display business rule and pick it up with an onLoad client script.</p><p></p><p></p><center><img   alt="" class="jive-image" src="1951954adb5897049c9ffb651f961995.iix"/></center><p></p><p></p><p>Let's use the following scripts to illustrate the emergency change/alert example above.</p><p></p><p>Name: hasAttachments<br/>Table: Change Request [change_request]<br/>Order: 100<br/>Active: true<br/>When: display<br/>Condition: (empty)<br/>Script:</p><pre __default_attr="plain" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14703419954413653 jive_text_macro" data-renderedposition="887_8_1192_64" jivemacro_uid="_14703419954413653"><br/><br/>// Check for attachments and save it in the g_scratchpad<br/>g_scratchpad.hasAttachments = current.hasAttachments();</pre><p></p><p></p><p>Now we can create an onLoad client script:</p><p></p><p>Name: Change Attachment Alert<br/>Active: true<br/>Global: true<br/>Type: onLoad<br/>Table: Change Request [change_request]<br/>Inherited: false<br/>Script:</p><pre __default_attr="plain" __jive_macro_name="code" class="jive_macro_code jive_text_macro _jivemacro_uid_14703419954379790" data-renderedposition="1182_8_1192_112" jivemacro_uid="_14703419954379790" modifiedtitle="true"><br/><br/>function onLoad() {<br/>   if (g_form.getValue('type') == 'Emergency' &amp;&amp; g_form.getValue('state') == '2' &amp;&amp; !g_scratchpad.hasAttachments) {<br/>       alert("Don't forget your attachments");<br/>   }<br/>}</pre><p></p><p></p><p>Hopefully you'll find good uses for the g_scratchpad and start communicating more effectively between your server and client scripts.</p><p></p><p>Reference:</p><p><a href="http://wiki.service-now.com/index.php?title=Differences_Among_Scripts" title="http://wiki.service-now.com/index.php?title=Differences_Among_Scripts">Differences Among Scripts - ServiceNow Wiki</a> </p><p><a href="http://wiki.service-now.com/index.php?title=Business_Rules" title="http://wiki.service-now.com/index.php?title=Business_Rules">Business Rules - ServiceNow Wiki</a> </p><p style="font-family: 'Helvetica Neue';"><a title="ki.servicenow.com/index.php?title=Business_Rules_Best_Practices" href="http://wiki.servicenow.com/index.php?title=Business_Rules_Best_Practices" style="line-height: 1.5;">Business Rules Best Practices - ServiceNow Wiki</a><span style="line-height: 1.5;">   </span></p>