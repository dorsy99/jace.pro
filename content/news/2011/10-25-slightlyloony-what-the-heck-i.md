---
title: "What the Heck is So Regular About This"
date: 2011-10-24T20:17:17.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=00ccae25dbd0dbc01dcaf3231f9619ff"
---
<p><span class="asset-asset_lightbox-Small asset-align-right"><a href="/files/SlightlyLoony/baby3.png" rel="lightbox"><img rel="lightbox" src="http://community.service-now.com/files/imagecache/Small/SlightlyLoony/baby3.png" alt="" title="" class="imagecache imagecache-Small" /></a></span>Some people think of regular expressions almost as a religion (The One Way), but more people think of them as something to be avoided if possible. Some people find them elegant and intuitive, but more people find them ugly, incomprehensible, and head-exploding. I know accomplished developers who will do almost anything to avoid using regular expressions, and I know non-developers who use incredibly complex regular expressions with the same ease that I drink my morning tea. Personally, I think of them as a useful tool for many needs when processing text — and well worth making the effort to understand them well.<br /><br />Though I've received more requests to blog about regular expressions than on any other topic, I've avoided it until now — mainly because it's a very large and detailed topic. My favorite book on the subject (<a href="http://www.amazon.com/Mastering-Regular-Expressions-Jeffrey-Friedl/dp/0596528124/ref=sr_1_1?s=books&amp;ie=UTF8&amp;qid=1319467991&amp;sr=1-1"><i>Mastering Regular Expressions</i></a>) is almost 500 pages long. But...some recent experiences have convinced me that I might actually be able to do something useful with a few blog posts on the subject. This is the first one.<br /><br />I'm going to concentrate more on <i>why</i> one might want to use regular expressions, with just enough introduction to the details to (hopefully) whet your interest — then you can go study them in detail on your own :-)<br /><br />The first challenge with regular expressions is knowing when they might actually be an appropriate tool for the problem at hand. In general, regular expressions excel at finding text when you don't know exactly what text you're looking for, but instead you know something about the <i>pattern</i> of the text. Here's a simple example: suppose you want to see if a piece of text contains a social security number (aka SSN, the closest thing Americans have to an ID number). You don't know <i>which</i> SSN might be in the text, you just know that they are conventionally written like this: 123-45-6789. Without using regular expressions, you'd have to write code something like this:<br /><!--break--><br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />var test = 'I have written my social security number (123-45-6789) in here, like this.';<br />var result = getSSNwithoutRegex(test);<br />gs.log(result);<br /><br />function getSSNwithoutRegex(text) {<br />    var state, count, start;<br />    clear();<br />    for (var i = 0; i &lt; text.length; i++) {<br />        var c = text.charAt(i);<br />        var t = 'other';<br />        if ((c &gt;= '0') &amp;&amp; (c &lt;= '9'))<br />            t = 'digit';<br />        else if (c == '-')<br />            t = 'dash';<br />        switch (state) {<br />            case 'G1':<br />                if (t == 'digit') {<br />                    count++;<br />                    if (count == 1)<br />                        start = i;<br />                    if (count == 3)<br />                        changeTo('D1');<br />                } else<br />                    clear();<br />                break;<br />            case 'G2':<br />                if (t == 'digit') {<br />                    count++;<br />                    if (count == 2)<br />                        changeTo('D2');<br />                } else<br />                    clear();<br />                break;<br />            case 'G3':<br />                if (t == 'digit') {<br />                    count++;<br />                    if (count == 4) {<br />                        if ((i == (text.length - 1)) ||<br />                            (text.charAt(i + 1) &lt; '0') ||<br />                            (text.charAt(i + 1) &gt; '9'))<br />                            return text.substring(start, i+1);<br />                        else<br />                          clear();<br />                    }<br />                } else<br />                    clear();<br />                break;<br />            case 'D1':<br />                if (t == 'dash')<br />                    changeTo('G2');<br />                else<br />                    clear();<br />                break;<br />            case 'D2':<br />                if (t == 'dash')<br />                    changeTo('G3');<br />                else<br />                    clear();<br />                break;<br />        }<br />    }<br />    return null;<br /><br />    function clear() {<br />        changeTo('G1');<br />    }<br /><br />    function changeTo(newState) {<br />        state = newState;<br />        count = 0;<br />    }<br />}<br /></pre><br />That function finds SSNs just fine, and there's nothing fancy about it at all. It wasn't difficult to write and test. It will probably only take you a few minutes to figure out how it works. So what's wrong with it? Why do I think a regular expression might be a better tool for this problem? Here's why:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />var test = 'I have written my social security number (123-45-6789) in here, like this.';<br />var result = getSSNwithRegex(test);<br />gs.log(result);<br /><br />function getSSNwithRegex(text) {<br />    var parser = /(^|[^0-9])([0-9]{3}-[0-9]{2}-[0-9]{4})($|[^0-9])/m;<br />    var ans = parser.exec(text);<br />    return (ans == null) ? null : ans[2];<br />}<br /></pre><br />It's just a tad shorter and simpler, eh? <br /><br />Simpler, that is, if the regular expression itself doesn't make your head explode.<br /><br />This example demonstrates the <i>why</i> for regular expressions. There are many occasions when a regular expression can make code dramatically simpler and easier to write (and often the difference is even more dramatic than this example). They're not magic; they're just a tool — but a tool that takes some effort to learn how to use.<br /><br />In the next post, I'll show you how this regular expression works...</p>