---
title: "Scripting Extending a Class Part I"
date: 2011-04-14T18:17:26.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=7e7ce2e1dbd0dbc01dcaf3231f961916"
---
<p><img  alt="" class="jive-image" src="45c68c82db5c5fc03eb27a9e0f9619c0.iix" style="width: auto; height: 150px;" />Yesterday I threatened to show you one way to extend a JavaScript class. This is done a bit differently than how the woman at right has extended her hair.<br /><br />We're going to extend <i>GRUtil</i> to add a new method: <i>getChildTables()</i>. This method will return all the child classes of the given class, so that we can write code like this:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />var gru = new GRUtil();<br />gs.log(gru.getChildTables('cmdb_ci_server'));</pre><br /><br />That code should log:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />cmdb_ci_osx_server,cmdb_ci_mainframe,cmdb_ci_linux_server,cmdb_ci_unix_server,<br />cmdb_ci_aix_server,cmdb_ci_hpux_server,cmdb_ci_solaris_server,cmdb_ci_esx_server,<br />cmdb_ci_netware_server,cmdb_ci_win_server,cmdb_ci_mainframe_lpar</pre><br /><br />Which are all the classes that extend <i>cmdb_ci_server</i> in the out-of-the-box product. The code to implement that method (or function) looks like this:<br /><!--break--><br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />   getChildTables: function(table) {<br />      var om = Packages.com.glide.db.DBObjectManager.get();<br />      var tables = om.getTableExtensions(table);<br />      return j2js(tables);<br />   }</pre><br /><br />But how do we add that code to our <i>GRUtil</i> class? Here's the first (of four) ways that I'm going to show you:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />var gru = new GRUtil();<br /><br />gru.getChildTables = function(table) {<br />      var om = Packages.com.glide.db.DBObjectManager.get();<br />      var tables = om.getTableExtensions(table);<br />      return j2js(tables);<br />   };<br /><br />gs.log(gru.getChildTables('cmdb_ci_server'));</pre><br /><br />The first line of this code just creates a <i>GRUtil</i> instance and initializes the <i>gru</i> variable to it. The second line extends the <i>gru</i> object — the <i>object</i>, not the <i>class</i>. The third line actually uses our new method.<br /><br />Why did I make the distinction between object and class above? Consider this code:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />var gru = new GRUtil();<br /><br />gru.getChildTables = function(table) {<br />      var om = Packages.com.glide.db.DBObjectManager.get();<br />      var tables = om.getTableExtensions(table);<br />      return j2js(tables);<br />   };<br /><br />gs.log(gru.getChildTables('cmdb_ci_server'));<br /><br />var gru2 = new GRUtil();<br />gs.log(gru2.getChildTables('cmdb_ci_server'));</pre><br /><br />You might think the last two lines would log the same tables as the before them. Instead, they log <i>undefined</i>. What's going on?<br /><br />The extension we made in the second line of that code only applied to the <i>GRUtil object</i> in the <i>gru</i> variable. When we created a new instance of <i>GRUtil</i> to put into <i>gru2</i>, that new instance did not include our extension. When we tried to invoke that extension in the last line of code, it was undefined — and that's what we logged.<br /><br />This method of object extension is useful when you have some reason to temporarily extend the object, and you don't want the extension to apply to other places the object is used. It's much more common to want to extend the object <i>everywhere</i>, for all uses of it. In the example I'm using here, that is the case: <i>getChildTables()</i> is a potentially useful method anywhere at all. So that means that today I showed you the wrong technique for our need. Tomorrow I'll show you a more appropriate way...</p>