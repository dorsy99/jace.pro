---
title: "The problem youve never seen and never want to"
date: 2011-08-16T04:08:36.000Z
authors: ["gaidem"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=db6caea1dbd0dbc01dcaf3231f96198c"
---
<p>First off, sorry to the community members. I've been super busy these days and haven't been able to respond to posts as much as I would like. Here's an example of what's been keeping me busy.<br /><br />Yesterday (Sunday) I get notified that our production instance crashed. For about 7 hours the instance was extremely slow and had to be rebooted almost 10 times. So what happened?<br /><br />We received a spam ticket with CC's that ended up adding several donotreply addresses on the watch list and created a loop. This alone wasn't new to me. However, each of the bounce backs from the addresses were HUGE in size. For example 1 was 357 pages in length and over 1.5 million characters.<br /><br />The Incident record became so big that any query related to it would deplete all the system resources. I don't mean opening the record, I mean referencing tables like sys_email that had a reference to this record.<br /><br />Because of this I have developed a preventative solution for the future. This solution will prevent updates to a ticket once the specified journal field character count exceeds a new property I have created:<br /><br />Create a new field on the task table: u_journal_count<br />Create a new system property:<br />Name: task.journal.limit<br />Type: integer<br />Value: Specify the amount of characters you want to limit (-1 equals no limit)<br /><br />Now create a before insert/update business rule on the task table:<br />Condition: current.work_notes.changes()<br />Script:<br /><pre __default_attr="plain" __jive_macro_name="code" class="jive_text_macro jive_macro_code"><br /><br />var limit = gs.getProperty('task.journal.limit');<br />if(limit!='-1'){<br />var journalCount = current.u_journal_count;<br />var wrkNotes = current.work_notes;<br />var wrkNotesSPLT = wrkNotes.split('');<br />if((wrkNotesSPLT.length + journalCount)&gt; limit){<br />current.setAbortAction(true);<br />gs.addInfoMessage("The Client Communication field has exceeded its journal limit");<br />}<br />else{<br />current.u_journal_count += wrkNotesSPLT.length;<br />}<br />}<br /></pre><br /><br />Regards,</p>