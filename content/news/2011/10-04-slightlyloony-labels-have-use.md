---
title: "Labels Have Uses"
date: 2011-10-03T23:01:17.000Z
authors: ["SlightlyLoony"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=5ffca6a5dbd0dbc01dcaf3231f961903"
---
<p><span class="asset-asset_lightbox-Small asset-align-right"><a href="/files/SlightlyLoony/Extreme_Computer_Nerd_1520708.jpg" rel="lightbox"><img rel="lightbox" src="http://community.service-now.com/files/imagecache/Small/SlightlyLoony/Extreme_Computer_Nerd_1520708.jpg" alt="" title="" class="imagecache imagecache-Small" /></a></span>Yesterday, Snorklebogger (our developer at right) was working a tough problem: his code had a pair of nested loops, and he needed to handle a condition detected in the <i>inner</i> loop by skipping to the next iteration of the <i>outer</i> loop. How can he do this?<br /><br />Take a look at the code he started with, and ponder his problem:<br /><!--break--><br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />// some test data...<br />var input = 'jane:gender=female;age=34;skills=ok;hair=blond\n' +<br />            'jim:gender=male;age=?;skills=awful;hair=brown\n' +<br />            'bosun:gender=male;age=99;skills=good;hair=none';<br /><br />var parsed = parse(input);<br />JSUtil.logObject(parsed, 'parsed');<br /><br />function parse(input) {<br />    var result = {};<br /><br />    // iterate over the people in the input string...<br />    var people = input.split('\n');<br />    for (var p = 0; p &lt; people.length; p++) {<br />        var personParts = people[p].split(':');<br />        var person = {};<br />        var name = personParts[0];<br />        var attrStr = personParts[1];<br />        result[name] = person;<br />        person.name = name;<br /><br />        // iterate over the attributes for this person...<br />        var attrs = attrStr.split(';');<br />        for (var a = 0; a &lt; attrs.length; a++) {<br />            var attrParts = attrs[a].split('=');<br />            var attrName = attrParts[0];<br />            var attrValue = attrParts[1];  // here's where we need to detect a problem...<br />            person[attrName] = attrValue;<br />        }<br />    }<br />    return result;<br />}</pre><br />When he ran this code, he got this result:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />Log Object: parsed<br />  Object<br />    jim: Object<br />      gender: string = male<br />      name: string = jim<br />      age: string = ?<br />      skills: string = awful<br />      hair: string = brown<br />    bosun: Object<br />      gender: string = male<br />      name: string = bosun<br />      age: string = 99<br />      skills: string = good<br />      hair: string = none<br />    jane: Object<br />      gender: string = female<br />      name: string = jane<br />      age: string = 34<br />      skills: string = ok<br />      hair: string = blond</pre><br />This was almost correct, but had one pesky problem: the <i>attrValue</i> could have an inappropriate value assigned to it (see the commented line near the end of the code above). When that happens, Snorklebogger wanted to log the error and refrain from including that person in the result. Without twisting the code into salt-free pretzels, how could he do this? After several cups of coffee and a hamburger of questionable ancestry, Snorklebogger started Googling in sheer desperation — and found out about labeled <i>continue</i> and <i>break</i> statements. They were exactly what he needed — and armed with his new and profound knowledge he was able to craft a solution:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />// some test data...<br />var input = 'jane:gender=female;age=34;skills=ok;hair=blond\n' +<br />            'jim:gender=male;age=?;skills=awful;hair=brown\n' +<br />            'bosun:gender=male;age=99;skills=good;hair=none';<br /><br />var parsed = parse(input);<br />JSUtil.logObject(parsed, 'parsed');<br /><br />function parse(input) {<br />    var result = {};<br /><br />    // iterate over the people in the input string...<br />    var people = input.split('\n');<br />    outer:                                               // the label marking the point we want to continue to...<br />    for (var p = 0; p &lt; people.length; p++) {<br />        var personParts = people[p].split(':');<br />        var person = {};<br />        var name = personParts[0];<br />        var attrStr = personParts[1];<br />        person.name = name;<br /><br />        // iterate over the attributes for this person...<br />       var attrs = attrStr.split(';');<br />        for (var a = 0; a &lt; attrs.length; a++) {<br />            var attrParts = attrs[a].split('=');<br />            var attrName = attrParts[0];<br />            var attrValue = attrParts[1];<br />            if (!attrValue || (attrValue == '?')) {<br />                gs.log('Person ' + name + ' has data errors...');<br />                continue outer;                         // continue goes to the label, not the closest loop...<br />            }<br />            person[attrName] = attrValue;<br />        }<br />        result[name] = person;<br />    }<br />    return result;<br />}</pre><br />When our easily-amazed fellow ran his new code, he saw this:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />Person jim has data errors...<br />Log Object: parsed<br />  Object<br />    bosun: Object<br />      gender: string = male<br />      name: string = bosun<br />      age: string = 99<br />      skills: string = good<br />      hair: string = none<br />    jane: Object<br />      gender: string = female<br />      name: string = jane<br />      age: string = 34<br />      skills: string = ok<br />      hair: string = blond</pre><br />Oddly enough, that's exactly what he wanted.<br /><br />This little trick falls squarely into the category of "Things you're not likely to need, but when you do, oh my is it a handy thing to know!" Keep in your back pocket for a desperate day...</p>