---
title: "Incidents of the dead"
date: 2011-10-14T14:25:42.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=e8bc6a25dbd0dbc01dcaf3231f961912"
---
<p><img  alt="" class="jive-image" src="1893a7fddb141fc03eb27a9e0f96195e.iix" /><br /><br />We've all been there - you think you've killed it off. It's dead - you removed the head, or destroyed the brain. Whatever. <br /><br />As your attention moves to the next monster, the undead stirs... comes back to life.. and moves back into your line of sight, shuffling towards you with murderous intent.<br /><br />Once we've <b>closed</b> an Incident it should stay that way, right? We really don't want zombified Incident records coming back to haunt us, with glazed eyes and bits hanging off them.<br /><br /><img  alt="" class="jive-image" src="a9264102db50d344e9737a9e0f961977.iix" /><br /><br />Of course users should have the opportunity to say if an Incident hasn't been resolved to their satisfaction, but that is what the <b>resolved</b> state is for, so that we can move it back into Active if need be.<br /><br />Once the record goes to Closed state it should stay that way. Re-opening it at that point messes with your statistics. It also means that a user can reopen the ticket weeks or months later and we see work that was started a long time ago, which messes with KPIs.<br /><br />A few days ago <a title="witter.com/#!/Stamon74" href="https://twitter.com/#!/Stamon74">Chris Damon</a> tweeted a SOS message from his post-apocalyptic ITSM bunker. Armed with his <a title=".wikipedia.org/wiki/Shaun_of_the_dead" href="http://en.wikipedia.org/wiki/Shaun_of_the_dead">cricket bat and a deactivated Winchester rifle</a> he was seeing Incidents coming back from the dead.<br /><br /><blockquote><br />I wish the link in a Resolved incident email expired as soon as the record was closed. Someone reopened a 2 week old INC. #servicenow (<a title="witter.com/#!/Stamon74/status/121707472913301504" href="https://twitter.com/#!/Stamon74/status/121707472913301504">link</a>)<br /></blockquote><br /><br /><blockquote><br />Better yet, what if it opened a new Incident record with the same information but a new SLA? #servicenow (<a title="witter.com/#!/Stamon74/status/121710144743669760" href="https://twitter.com/#!/Stamon74/status/121710144743669760">link</a>)<br /></blockquote><br /><br />The culprit here is an Inbound Email Action named <b>Update Incident (BP)</b> (sys_id = 498e10410a0a0b4b007c8c7f63531747). <br /><br />It reads:<br /><br /><pre __default_attr="plain" __jive_macro_name="code" class="jive_text_macro jive_macro_code"><br /><br />gs.include('validators');<br /><br />if (current.getTableName() == "incident") {<br />    current.comments = "reply from: " + email.origemail + "\n\n" + email.body_text;<br /><br />    if (email.subject.toLowerCase().indexOf("please reopen") &gt;= 0) {<br />        current.state = "2";<br />        current.work_notes = "The caller did not feel that this issue was resolved";<br />    }<br /><br />    if (email.body.assign != undefined)<br />        current.assigned_to = email.body.assign;<br /><br />    if (email.body.priority != undefined &amp;amp;&amp;amp; isNumeric(email.body.priority))<br />        current.priority = email.body.priority;<br /><br />    if (email.body.category != undefined)<br />        current.category = email.body.category;<br /><br />    if (email.body.short_description != undefined)<br />        current.short_description = email.body.short_description;<br /><br />    current.update();<br />}<br /></pre><br /><br />So if the subject line contains the words <b>please reopen</b> we set the state of the Incident to 2, and update the Work Notes.<br /><br />Maybe a better, non-zombified solution would to create a new Incident if the record is in closed state. We can do some nice association, and update the Work Notes on the original.<br /><br /><pre __default_attr="plain" __jive_macro_name="code" class="jive_text_macro jive_macro_code"><br /><br />gs.include('validators');<br /><br />if (current.getTableName() == "incident") {<br />    current.comments = "reply from: " + email.origemail + "\n\n" + email.body_text;<br /><br />    if (email.subject.toLowerCase().indexOf("please reopen") &gt;= 0) {<br /><br />        if (current.state == "7") {<br />            // If the current record is in closed state create a new Incident and relate it to this one.<br />            // Copies the default incident form fields, you may wish to customise.<br />            var new_inc = new GlideRecord("incident");<br />            new_inc.caller_id = current.caller_id;<br />            new_inc.location = current.location;<br />            new_inc.category = current.category;<br />            new_inc.cmdb_ci = current.cmdb_ci;<br />            new_inc.impact = current.impact;<br />            new_inc.urgency = current.urgency;<br />            new_inc.priority = current.priority;<br />            new_inc.short_description = "Reopened from " + current.number + ": " + current.short_description;<br />            new_inc.contact_type = current.contact_type;<br />            new_inc.assignment_group = current.assignment_group;<br />            new_inc.work_notes = "The caller did not feel that this issue was resolved\n\nReopened from " + current.number + "\n\nPlease refer to previous worknotes");<br />            new_inc.parent = current.sys_id;<br />            new_inc.insert();<br /><br />            current.work_notes = "Re-opened by customer. New incident number is " + new_inc.number;<br /><br />        } else {<br />            current.state = "2";<br />            current.work_notes = "The caller did not feel that this issue was resolved";<br />        }<br />    }<br /><br />    if (email.body.assign != undefined)<br />        current.assigned_to = email.body.assign;<br /><br />    if (email.body.priority != undefined &amp;amp;&amp;amp; isNumeric(email.body.priority))<br />        current.priority = email.body.priority;<br /><br />    if (email.body.category != undefined)<br />        current.category = email.body.category;<br /><br />    if (email.body.short_description != undefined)<br />        current.short_description = email.body.short_description;<br /><br />    current.update();<br />}<br /></pre><br /><br />This creates a new Incident with all the same attributes as the dead (closed) one, based on the right caller and it's associated back to the closed incident in the description, and using the <b>parent</b> field.<br /><br />How's THAT for a slice of fried gold?</p>