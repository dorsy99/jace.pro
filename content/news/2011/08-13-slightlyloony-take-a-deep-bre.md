---
title: "Take A Deep Breath"
date: 2011-08-12T19:49:39.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=c09d6a69dbd0dbc01dcaf3231f96195c"
---
<p><img  alt="" class="jive-image" src="eb2a49c6db941b04ed6af3231f96195e.iix" style="width: auto; height: 110px;" />When you're working with JavaScript on the client side, it's pretty easy to work with XML — the DOM is built right in. But what if you want to work with XML in a server-side JavaScript? There's no DOM on the server-side!<br /><br />There are several possibilities, actually. There is quite a bit of support in Java that is also available in JavaScript (through the Packages.xxx), but it is a bit awkward to use, and requires that you (or the developer) know the Java library support as well. Our developer at right thinks that working with XML in this fashion is as terrifying as leaping off a 300 foot high bridge with only a bungee cord to save her.<br /><br />Wouldn't it be nice to have a way to work with XML on the server side in pure JavaScript?<br /><br />You should know what's coming next: starting with the upcoming October release (and in the next preview, and in demo.service-now.com right now), you can!<!--break--><br /><br />The ServiceNow platform comes with a script include named XMLHelper that greatly simplifies reading, analyzing, and producing XML documents or strings. It takes a different approach than the DOM on client-side scripting — instead of directly navigating through the DOM, XMLHelper converts XML to and from JavaScript objects. Your scripts can then directly read or modify the JavaScript objects with very simple code.<br /><br />This is one of those things that's best explained by example:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />var xml = '&lt;result&gt;';<br />xml    += '   &lt;people&gt;';<br />xml    += '      &lt;person&gt;';<br />xml    += '         &lt;country&gt;';<br />xml    += '            United States';<br />xml    += '            &lt;former&gt;Germany&lt;/former&gt;';<br />xml    += '         &lt;/country&gt;';<br />xml    += '         &lt;occupation&gt;electrician&lt;/occupation&gt;';<br />xml    += '      &lt;/person&gt;';<br />xml    += '      &lt;person&gt;';<br />xml    += '         &lt;country&gt;Elbonia&lt;/country&gt;';<br />xml    += '         &lt;occupation&gt;cartoonist&lt;/occupation&gt;';<br />xml    += '      &lt;/person&gt;';<br />xml    += '   &lt;/people&gt;';<br />xml    += '&lt;/result&gt;';<br /><br />var xh = new XMLHelper();<br />var obj = xh.toObject(xml);<br />JSUtil.logObject(obj, 'Our resulting JavaScript object!');</pre><br /><br />The first part of this test code is simply constructing a little XML string for us to play with. The last three lines are the interesting part, wherein we construct an instance of XMLHelper, then call its .toObject() method with our XML test string as the argument. The result goes into the obj variable, and then we use JSUtil to log the object. When we run this code, we get this result in the log (or on the screen in Scripts - Background):<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />*** Script: Log Object: Our resulting JavaScript object!<br />  Object<br />    people: Object<br />      person: Array of 2 elements<br />        [0]: Object<br />          @name: string = Werner Schultz<br />          country: Object<br />            #text: string = United States<br />            former: string = Germany<br />          occupation: null = null<br />        [1]: Object<br />          @name: string = Scott Adams<br />          country: string = Elbonia<br />          occupation: string = cartoonist</pre><br />Here's a little snippet of code that logs every person and their occupation by reading that object:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />for (var i = 0; i &lt; obj.people.person.length; i++) {<br />    var person = obj.people.person<i>;<br />    gs.log(person['@name']);<br />    gs.log('   ' + person.occupation);<br />}</i></pre><i><br />That was easy! You can also convert a JavaScript object (in this same format) back to XML, like this:<br /></i><pre style="margin-left:20px;line-height:1;color:FireBrick;"><i><br />var str = xh.toXMLStr(obj);<br />gs.log(str);</i></pre><i><br />That means you can create a JavaScript object in your code, following the format shown above, and then make one simple call to XMLHelper to get a nice XML document!<br /><br />Here are a few thing worth noting about the JavaScript object format:<br /></i><ul><li style="list-style: none"><i><br /></i></li><li><i>Tags in the XML turn into corresponding JavaScript properties. The value of this property will be one of three things: a string (if the tag had no attributes and contained no other tags), an object (if the tag had attributes or contained other tags), or an array (if there are more than one of the same tag enclosed by a parent tag).</i></li><li><i>Attributes turn into properties whose name is "@" plus the original XML attribute name. These properties always contain a string with the value of the attribute.</i></li><li><i>Tags that enclose both text and other tags (or have an attribute) will turn into properties named "#text". These properties always contain a string with the value of the text.</i></li><li><i>There's no particular limit to the size or depth of the XML document; it is only constrained by available memory (so be careful with really gigantic documents!).</i></li><li><i>XMLHelper can also convert Java Document instances to JavaScript, and vice versa. See the XMLHelper script include if you're interested in this.</i></li><li style="list-style: none"><i><br /></i></li></ul></p>