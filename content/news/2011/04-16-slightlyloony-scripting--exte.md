---
title: "Scripting Extending a Class Part II"
date: 2011-04-15T17:58:55.000Z
authors: ["SlightlyLoony"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=fedc2a65dbd0dbc01dcaf3231f9619ad"
---
<p><img  alt="" class="jive-image" src="9f13af39db10dfc0b322f4621f9619cc.iix" style="width: auto; height: 113px;" />This is the day our geekette at right has been waiting for: the day she finds out how to extend a JavaScript class on the Service-now platform. Woo hoo!<br /><br />She want the following code (using our new method from yesterday) to work anywhere, anytime in her Service-now instance:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />var gru = new GRUtil();<br />gs.log(gru.getChildTables('cmdb_ci_server'));</pre><br /><br />Here's how she (and you!) can do it:<br /><!--break--><br /><div style="float:right;border:1px solid FireBrick;"><p style="margin:10px;font-size:80%;line-height:120%"><br />Posts in this series:<br /><a title="lightlyLoony/blog/2011/4/13/2067" href="/community?id=community_blog&sys_id=0a3daae5dbd0dbc01dcaf3231f9619b4">A JavaScript Class to be Extended</a><br /><a title="lightlyLoony/blog/2011/4/14/2068" href="/community?id=community_blog&sys_id=7e7ce2e1dbd0dbc01dcaf3231f961916">Extending a Class, Part I...</a><br /></p></div><br />Just add the <i>getChildTables()</i> method to the <i>GRUtil</i> script includes, as follows:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />var GRUtil = Class.create();<br /><br />GRUtil.prototype = {<br />   initialize : function() {<br />   },<br /><br />   /*<br />    * Returns an array containing the component tables for the given table.  For instance, given<br />    * 'cmdb_ci_win_server', returns an array with 'cmdb_ci_win_server', 'cmdb_ci_server',<br />    * 'cmdb_ci_computer', 'cmdb_ci_hardware', and 'cmdb_ci'.<br />    */<br />   getTables: function(table) {<br />      var om = Packages.com.glide.db.DBObjectManager.get();<br />      var tables = om.getTables0(table);<br />      return j2js(tables);<br />   },<br /><br />   /*<br />    * Returns an array containing any tables that extend the given table.  For example, given<br />    * 'cmdb_ci_netgear', returns an array with 'cmdb_ci_ip_switch' and 'cmdb_ci_ip_router'.<br />    */<br />   getChildTables: function(table) {<br />      var om = Packages.com.glide.db.DBObjectManager.get();<br />      var tables = om.getTableExtensions(table);<br />      return j2js(tables);<br />   }<br />}</pre><br /><br />One thing to note carefully in the syntax of adding a method: there must be a comma (',') between method definitions. In the example above, I've followed the usual convention of putting the comma after the closing brace ('}') of the preceding method. Something that frequently trips people up is to habitually put a comma after <i>every</i> method's closing brace — but if you do this after the <i>last</i> method's closing brace, you'll get an error. Just remember that they go <i>between</i> method definitions (actually, every property definition of any type). <br /><br />Also note the use of comments to describe what the method actually does. This is very polite and useful for others who might want to use your <i>GRUtil</i> class. If you're anything like me, it will also be useful for <i>you</i> at some distant future remove (like, say, tomorrow morning) when you've forgotten everything you did here.<br /><br />Adding methods to class definitions in script includes is probably the single most common way for people to extend classes on the Service-now platform. For many situations, it's exactly the right solution. There are at least two situations, however, where it's exactly the <i>wrong</i> solution:<br /><ol><li><u>Extending classes originally provided by Service-now</u>: If you modify a script include that is provided by Service-now, then (just like any modification you might make in the product) that script include will effectively be "owned" by you, and you will not get future upgrades to that script include. This isn't necessarily the end of the world, but it <i>does</i> entail some risk — we might, in the future, release some code that depends on a new method in that script include, and if you don't get the update, you won't have the new method. Fortunately there's an easy way to avoid this, which I'll show you on Monday.</li><li><u>Extending classes in a non-generic way</u>: To make that concrete with an example, suppose we wanted to add a method to <i>GRUtil</i> that did something specific for computer CIs. Currently <i>GRUtil</i> is a completely generic class; it's two methods work with any table in the system. It would be strange to extend it to do something specific for computers. What you <i>really</i> want, if you're going to have a good object-oriented design, is a class that does everything that <i>GRUtil</i> does, plus some extra, special stuff just for computers. In object-oriented design speak, you want to <i>extend</i> the <i>GRUtil</i> class to make a specialized version of it just for computers. That's easy to do, and it happens to be the same thing you do to avoid the first problem above. I'll show you this secret code jujitsu on Monday.</li></ol></p>