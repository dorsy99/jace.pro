---
title: "Arrant Arrays"
date: 2011-10-11T23:22:57.000Z
authors: ["SlightlyLoony"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=e94deee5dbd0dbc01dcaf3231f9619be"
---
<p><span class="asset-asset_lightbox-Small asset-align-right"><a href="/files/SlightlyLoony/crazy-girl.jpg" rel="lightbox"><img rel="lightbox" src="http://community.service-now.com/files/imagecache/Small/SlightlyLoony/crazy-girl.jpg" alt="" title="" class="imagecache imagecache-Small" /></a></span>Our young developer has just discovered that her boss has been keeping secrets from her. All this time in her (extensive) JavaScript programming experience, she's believed that arrays were places where you could store lists of like things. You could have an array of numbers, for example, or an array of strings. And certainly her boss never told her that you could use an array like a stack, or rotate the elements in it, or reverse their order, or any number of other nifty things.<br /><br />This morning she discovered that arrays were cool. Who knew? And now she's raging...<br /><!--break--><br />The Array object is <i>so</i> cool that it's hard for your blogger to know where to start. I guess first we'll just clear up a common misconception: that arrays can only be used to store things of the same type. Consider this code:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />var a = [152,'test',true,null,{test:'xxx',there:'yyy'}];<br />JSUtil.logObject(a);<br /></pre><br />The square brackets are a shorthand for creating an instance of the JavaScript Array class. In between those square brackets, we've got five <a title="l" href="">literal values</a>, separated by commas. Note that the literal values are all different types — JavaScript's dynamic typing makes this possible. You can stuff any combination of types you'd like to into any array. Here's what was logged when we ran it:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />Log Object<br />  Array of 5 elements<br />    [0]: number = 152<br />    [1]: string = test<br />    [2]: boolean = true<br />    [3]: null = null<br />    [4]: Object<br />      there: string = yyy<br />      test: string = xxx<br /></pre><br />A "stack", more formally, is a <a title=".wikipedia.org/wiki/LIFO_(computing)" href="http://en.wikipedia.org/wiki/LIFO_(computing)">last-in, first-out (LIFO)</a> data structure. JavaScript arrays have two methods (<i>push()</i> and <i>pop()</i>) that let you use an array as if it was a LIFO data structure, or stack. Consider:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />var a = [];<br />a.push(55);<br />a.push(83);<br />a.push(29);<br />gs.log('Size: ' + a.length);<br />gs.log(a.pop());<br />gs.log(a.pop());<br />gs.log(a.pop());<br />gs.log('Size: ' + a.length);<br />gs.log(a.pop());<br /></pre><br />When we run this code, it will create the array <i>a</i>, push three numbers onto it (treating it like a stack), print the length (which is 3 because we pushed three numbers), then pops and prints three numbers. Note that they're printed in reverse of the order they were pushed, and when we're done the length is zero. But then the code tries to pop a <i>fourth</i> value off — and look what happens:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />Size: 3<br />29<br />83<br />55<br />Size: 0<br />undefined<br /></pre><br />That undefined value is a good indication that your code is doing something silly — it doesn't make any sense to pop more things off a stack than you pushed onto it!<br /><br />If you're familiar with data structures in general, you might be wondering if you can make a first-in, first out (FIFO) data structure with a JavaScript array. Of course you can! Here's a simple example by a small tweak in the preceding code:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />var a = [];<br />a.push(55);<br />a.push(83);<br />a.push(29);<br />gs.log('Size: ' + a.length);<br />gs.log(a.shift());<br />gs.log(a.shift());<br />gs.log(a.shift());<br />gs.log('Size: ' + a.length);<br />gs.log(a.shift());<br /></pre><br />The result is just like the last example, except that the order of elements shifted off is the same as the order of elements pushed on:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />Size: 3<br />55<br />83<br />29<br />Size: 0<br />undefined<br /></pre><br />Got that? Let's see if you can figure this one out:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />var a = [55,83,29];<br />gs.log(a);<br />a.push(a.shift());<br />gs.log(a);<br />a.unshift(a.pop());<br />gs.log(a);<br />a.unshift(a.pop());<br />gs.log(a);<br />a.push(a.shift());<br />gs.log(a);<br /></pre><br />That code first builds the same array of three values we've been playing with, then does a "rotate left" operation (the <i>a.push(a.shift())</i> line) by shifting off the first (leftmost) value and pushing it back on as the last (rightmost) value. The next line rotates right, which puts the array back in the same state it started out. The next two lines do the same thing, but in the reverse order. Is your head spinning yet?<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />55,83,29<br />83,29,55<br />55,83,29<br />29,55,83<br />55,83,29<br /></pre><br />We're not done yet - arrays have a few more tricks yet! Here's a simple one:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />var a = [55,83,29];<br />gs.log(a);<br />a.reverse();<br />gs.log(a);<br />a.reverse();<br />gs.log(a);<br /></pre><br />You can probably guess what that does:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />55,83,29<br />29,83,55<br />55,83,29<br /></pre><br />Once you have an array, the <i>slice()</i> method gives you very flexible ways of getting any piece of it you want, by specifying the first element of the array you want and (optionally) the element after the last one you want. If you leave out the second argument, it will return all the elements to the end of the array. Negative arguments count elements from the end (right), instead of from the beginning (left):<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />var a = [55,83,29,76,14];<br />gs.log(a);<br />var b = a.slice(1,3);<br />gs.log(b);<br />b = a.slice(-2,1);<br />gs.log(b);<br />b = a.slice(-2,-1);<br />gs.log(b);<br />b = a.slice(-2);<br />gs.log(b);<br /></pre><br />When the arguments are negative, it means the count of positions from the right side instead of from the left side for positive numbers.<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />55,83,29,76,14<br />83,29<br /><br />76<br />76,14<br /></pre><br />Study that until it all makes sense to you. The third one is blank (empty array) because the line <i>a.slice(-2,1)</i> is specifying a last element that's before the first element.<br /><br />Here's one last method for you: <i>splice()</i>. This method is very powerful — it can simultaneously insert elements into, and delete elements from, an array. The first argument specifies the element position where the insertion and deletion is to occur. Just like with <i>slice()</i>, if this argument is negative, it means you're counting from the end (right) position. The second argument specifies how many elements should be deleted. If you don't want to delete any elements, just put a zero there. The remaining arguments specify the values to be inserted after any deletions, at the same position. There's a tricky bit to that: if you specify an array as one of these arguments, the array itself is <i>not</i> inserted, but rather its elements. Finally, the method returns an array of any elements deleted. Phew! Some examples might make all this easier to understand, but you'll probably need to stare at them for a while:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />var a = [55,83,29,76,14];<br />gs.log(a);<br />var b = a.splice(2, 0, 71, 72, 73);<br />gs.log(a + " : " + b);<br />b = a.splice(2, 3, [99,98]);<br />gs.log(a + " : " + b);<br />b = a.splice(-5, 3, [68,67,66]);<br />gs.log(a + " : " + b);<br />b = a.splice(1, 4, [51,52],53,[54,55]);<br />gs.log(a + " : " + b);<br /></pre><br />When we ran this, we got:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />55,83,29,76,14<br />55,83,71,72,73,29,76,14 :<br />55,83,99,98,29,76,14 : 71,72,73<br />55,68,67,66,76,14 : 83,99,98,29<br />55,51,52,53,54,55 : 68,67,66,76,14<br /></pre><br />Now you see why our young lady is raging!<br /><br />W3Schools has a <a title="w.w3schools.com/jsref/jsref_obj_array.asp" href="http://www.w3schools.com/jsref/jsref_obj_array.asp">nice reference for the JavaScript Array object online</a>...</p>