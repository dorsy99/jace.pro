---
title: "Using setParameter setStringParameter setXMLParameter when using a SOAPMessage to consume a web service in SNC"
date: 2012-04-05T00:12:02.000Z
authors: ["Christopher.Maloy"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=fb7c26e1dbd0dbc01dcaf3231f96192e"
---
<p>OK, I have noticed recently a lot of folks getting tripped up on sending outbound SOAP messages, particularly in the Business Rules (BR) and other scripts they are writing to post successfully an outbound message. I think part of the problem is to stop using the deprecated setParameter('name', 'value') function.<br /><br />If you are writing a script that sends an outbound SOAP message you are probably familiar with this code:<br /><br /><pre __default_attr="plain" __jive_macro_name="code" class="jive_text_macro jive_macro_code"><br /><br />var s = new SOAPMessage('SOAPName', 'SOAPFunction');<br />s.setParameter(name, value);<br />var response = s.post();<br /></pre><br /><br />The problem with that code is it doesn't escape XML specific characters or handle custom XML strings. What we should be doing is the following:<br /><br /><pre __default_attr="plain" __jive_macro_name="code" class="jive_text_macro jive_macro_code"><br /><br />var s = new SOAPMessage('SOAPName', 'SOAPFunction');<br />s.setStringParameter(name, value);<br />var response = s.post();<br /></pre><br /><br />The setStringParameter calls Packages.org.apache.commons.lang.StringEscapeUtils.escapeXml(value); to remove any XML specific characters before setting that value. <br /><br />The setXMLParameter(name, value) sets a literal XML value for a specific field in the SOAP Envelope. There is no escaping here. I will not talk about this one much because John has already posted a pretty good blog here: http://www.john-james-andersen.com/blog/service-now/inserting-xml-into-servicenows-soapmessage-object.html<br /><br />So the moral of my story is stop using setParameter(name, value) and start using setStringParameter(name, value). Happy coding everyone. Cheers.</p>