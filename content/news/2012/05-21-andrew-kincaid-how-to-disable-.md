---
title: "How to Disable or Restrict the JavaScript Executor"
date: 2012-05-21T00:05:50.000Z
authors: ["andrew.kincaid"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=0adce665dbd0dbc01dcaf3231f961975"
---
<p>Welcome to my first blog post! I recently presented a lab called "JavaScripting Techniques in ServiceNow" at the Knowledge 12 conference. In both sessions, the attendees asked excellent questions, made thought provoking comments, and offerred up ingenious ideas. I will attempt to answer the questions and share the comments and ideas over my next few blog posts.<br /><br />The first question I'd like to answer is: how do you disable or restrict the JavaScript Executor?<br /><br /><!--break--><br /><br /><br /><br /><div style="border: 1px solid #CCC; display: inline-block; padding: 0.5em; margin: 0.5em;"><br /><strong>NOTE:</strong> We discovered in the lab that the standard key combination did not always work. Here is what we discovered:<br /><dl><dd><br /></dd><dt>Key combination: <strong>CTRL+SHIFT+J</strong></dt><dd><br /></dd><dd>Works on OS X with browsers Chrome, Safari, and Firefox</dd><dd><br /></dd><dt>Key combination: <strong>CTRL+ALT+SHIFT+J</strong></dt><dd><br /></dd><dd>Works on Windows with browsers Chrome, IE, and Firefox</dd><dd><br /></dd></dl><br />The OOB script that checks for the key combination is looking for CTRL+SHIFT+J; however, it seems on Windows that if you additionally hold down ALT, you prevent the browser from reacting to the key combination - the OOB script ignores the ALT and 'sees' it as CTRL+SHIFT+J.<br /><br />If you are having trouble launching the JavaScript Executor, try both combinations. Also, another trick is to make sure a field in the main window is in focus first. Clicking inside any input field usually does the trick.<br /></div><br /><br /><br /><br />My recommended solution is to add an Access Control Rule:<br /><div class="geshifilter" style="display: inline-block;"><br /><pre style="font-family:monospace;"><br />Object type.....: Access Control Rule<br />Type............: ui_page<br />Operation.......: read<br />Active..........: checked<br />Admin overrides.: checked<br />Name............: javascript_executor<br />Description.....: Only allow admins to run JavaScript Executor<br />Condition.......: &lt;none&gt;<br />Script..........: answer = false;<br />Roles...........: &lt;none&gt;<br /></pre></div><br /><img  alt="" class="jive-image" src="fda91906dbd0d7041dcaf3231f961901.iix" style="width: 663px; height: auto;" /><br /><br /><br /><br />When a user without the admin role presses CTRL+SHIFT+J, they will see this because the Access Control Rule is preventing them from loading the UI Page:<br /><img  alt="" class="jive-image" src="7c58d542db18d304b322f4621f961992.iix" style="width: 300px; height: auto;" /><br /><br /><br /><br />I recommend only using the Access Control Rule; however, if you'd like to prevent the above dialog window when a non-admin attempts to invoke the JavaScript Executor, you can add a Global UI Script <strong>in addition to the Access Control Rule</strong> - do not rely on this UI Script by itself. This is an advanced technique because we are replacing an OOB script with a custom script. The custom script checks that "checkForClientKeystroke" exists and is a function and it checks that "orig_checkForClientKeystroke" does not exist. If the OOB function name were to ever change or if our custom function name were to be introduced as a new OOB function, this script would simply stop working and users would get the above error dialog.<br /><br /><div class="geshifilter" style="display: inline-block;"><br /><pre style="font-family:monospace;"><br />Object type.: UI Script<br />Name........: Override checkForClientKeystroke<br />Active......: checked<br />Global......: checked<br />Description.: Intercept key combination CTRL+SHIFT+J, do not run if non-admin<br /></pre></div><br /><pre __default_attr="plain" __jive_macro_name="code" class="jive_text_macro jive_macro_code"><br /><br />if (typeof checkForClientKeystroke == 'function' &amp;amp;&amp;amp; typeof u_checkForClientKeystroke == 'undefined') {<br /><br />  // Run once on first keydown - stop observing OOB checkForClientKeystroke function on keyup<br />  Event.observe(document,'keydown',function() {<br />    Event.stopObserving(document,'keyup',checkForClientKeystroke);<br />    Event.stopObserving(document,'keydown',arguments.callee);<br />  });<br /><br />  // Add custom wrapper function on keyup<br />  var u_checkForClientKeystroke = function(evt) {<br />    if (evt &amp;amp;&amp;amp; evt.shiftKey &amp;amp;&amp;amp; evt.ctrlKey &amp;amp;&amp;amp; evt.keyCode == 74 &amp;amp;&amp;amp; !getTopWindow().g_user.hasRole('admin')) {<br />      // If you desire, you could add an alert here to let the user know this function has been disabled<br />      return;<br />    } else {<br />      checkForClientKeystroke(evt);<br />    }<br />  };<br />  Event.observe(document,'keyup',u_checkForClientKeystroke);<br /><br />}<br /></pre><br /><br /><br /><br />If you have any questions, comments, or improvements, please let me know!<br /><br /></p>