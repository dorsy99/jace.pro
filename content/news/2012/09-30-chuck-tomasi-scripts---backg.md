---
title: "Scripts  Background"
date: 2012-09-30T00:07:58.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=311e226ddbd0dbc01dcaf3231f961985"
---
<p>I'm often faced with providing customers solutions for complex requirements. Some of these requirements come at the end of long processes. For example, "in our<img   alt="sb-icon.png" class="image-0 jive-image jiveImage" height="33" src="531af086db1497041dcaf3231f961908.iix" style="width: 33px; height: 33px; float: left;" width="33"/>change workflow, we want you to look up closure approves from these set of conditions…" I could put 10-20 lines of code in a workflow script activity, but then I'd have to go through 15-20 minutes of filling out a form, moving it through the change process, only to get to the closure to find out if my code worked or not. Read on for a better way.</p><p></p><p></p><p></p><p>By placing the main logic of the lookup process, in this case, in a <a title="ki.servicenow.com/index.php?title=Script_Includes" href="http://wiki.servicenow.com/index.php?title=Script_Includes">script include</a> one can "unit" test the code outside the change process and have confidence that it will work as expected when you do invest the 20 minutes to use the form.</p><p></p><p>Let's take the following simple script include as an example:</p><p></p><p></p><pre __default_attr="plain" __jive_macro_name="code" class="jive_text_macro _jivemacro_uid_14005434794445892 jive_macro_code" jivemacro_uid="_14005434794445892"><br/><br/><br/>var SimpleUtil = Class.create();<br/>SimpleUtil.prototype = {<br/>       initialize: function() {<br/>                   this.debug = false;<br/>       },<br/>     <br/>         /*<br/>           * addTwoNums - add two numbers together and return a result<br/>           *<br/>           * @param num1 - a number<br/>           * @param num2 - a number<br/>           * @return - the sum of num1 + num2<br/>           *<br/>           */<br/>         addTwoNums : function(num1, num2) {<br/>               <br/>                   return num1 + num2;<br/>         },<br/>     <br/>         /*<br/>           * _debug - send a string to the debug log<br/>           *<br/>           * @param str - string to output<br/>           * @return NA<br/>           *<br/>           */<br/>         _debug : function(str) {<br/>               <br/>                   if (this.debug)<br/>                             gs.print(str);<br/>         },<br/><br/>       type: 'SimpleUtil'<br/>}<br/><br/></pre><p></p><p></p><p>Let's ensure that the function to add two numbers works before releasing it to the testers. To do this, use "System Definition&gt; Scripts - Background". To see this module, you will need to first elevate your security privileges. Click on the gold lock next to your name on the title bar.</p><p></p><p></p><center><br/><img   alt="sb-key-click.jpg" class="image-0 jive-image" src="b1a89846db1c17049c9ffb651f96196d.iix" style="height: auto;"/></center><p></p><p></p><p>Next, check the security_admin checkbox on the pop up window and click OK.</p><p></p><p></p><center><img   alt="sb-elevate-priv.jpg" class="image-0 jive-image" height="229" src="440573bddb5c9b048c8ef4621f961942.iix" style="height: 228.923px; width: 300px;" width="300"/><p></p></center><p></p><p></p><p>You should now see the key "unlocked", indicating you have elevated privileges.</p><p></p><p></p><center><img   alt="sb-elevated-priv-enabled.jpg" class="image-0 jive-image" src="98581d8edb1c97049c9ffb651f9619a1.iix" style="height: auto;"/><p></p></center><p></p><p></p><p>Finally, go to System Definition&gt; Scripts - Background, or type in 'background' (no quotes) in the navbar search box to quickly locate the module, and click on it.</p><p></p><p></p><center><img  alt="sb-navbar.jpg" class="image-0 jive-image" src="96f3b8cadb5c5f048c8ef4621f96191b.iix" style="height: 225px; width: 620px;"/><p></p></center><p></p><p></p><p>In the large text area presented, you can test specific components of your script include logic. In the case of the script above, I can use a simple test script like the following:</p><p></p><p></p><pre __default_attr="plain" __jive_macro_name="code" class="jive_text_macro jive_macro_code _jivemacro_uid_14005434794373698" jivemacro_uid="_14005434794373698"><br/><br/>var su = new SimpleUtil();<br/><br/>var answer = su.addTwoNums(5, 3);<br/><br/>gs.print(answer);<br/><br/></pre><p></p><p></p><p>Click the "Run Script" button to get a result:</p><p></p><p></p><pre __default_attr="plain" __jive_macro_name="code" class="jive_text_macro jive_macro_code _jivemacro_uid_14005434794329511" jivemacro_uid="_14005434794329511"><br/><br/>*** Script: 8</pre><p></p><p></p><p>If it did not work, quickly edit and save the script include then test again without the pain of going through the long change process again. Once it is working, add the lines of code to create a new object from the script include and call the same function in the workflow script activity with confidence that it works as you expect. In the future, someone may try to enter string information, or other 'invalid' data that cannot/should not be added. Updating and re-testing your changes is quite easy in this case without involving checking out and publishing the workflow, long unit testing cycles, etc. Scripts - Background makes testing very easy in such cases.</p><p></p><p>This is, of course, a very simple test, but you get the idea how you can create more complex tests to ensure your script gives you the expected results.</p><p></p><p>Another thing I like to use the Scripts - Background utility for is to trigger events, to send email notifications. The follow test script is an example of how to do this.</p><p></p><p></p><pre __default_attr="plain" __jive_macro_name="code" class="jive_text_macro jive_macro_code _jivemacro_uid_14005434794236606" jivemacro_uid="_14005434794236606"><br/><br/>var incidentID = '46f67787a9fe198101e06dfcf3a78e99';<br/>var inc               = new GlideRecord('incident');<br/>var incEvent     = 'reset.password';<br/><br/>if (inc.get(incidentID)) {<br/>     gs.eventQueue(incEvent, inc, inc.number, gs.getUserDisplayName());<br/><br/>} else {<br/>     gs.print('Error: Cannot read record');<br/>}</pre><p></p><p></p><p>These are just some of the useful things you can do with Scripts - Background. I hope you find it as useful as I do.</p>