---
title: "In a public Knowledge Base make an article visible to ESS users but not unauthenticated users"
date: 2012-01-31T05:02:58.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=0cecaa65dbd0dbc01dcaf3231f96196c"
---
<p>One limitation of making the Knowledge Base public is that you lose the distinction between an ESS user (without roles) and a user who is not logged in. You can't have an article that Joe Employee can see that the Guest user cannot.<br /><br />While explaining this for the 3rd time in the last 12 months, I had a thought.<!--break--> You could probably:<br /><br />1) create a new boolean on kb_knowledge, call it u_login_required<br />2) set this field true for articles without roles that you don't want unauthenticated users to see<br />3) add a "before query" rule to kb_knowledge that says if you're not logged in, records where u_login_required is true get filtered out of the result set.<br /><br />For the rule in 3), the condition would be:<br /><pre __default_attr="plain" __jive_macro_name="code" class="jive_text_macro jive_macro_code"><br /><br />gs.getUser().isDefault()<br /></pre><br /><br />And the script would be:<br /><pre __default_attr="plain" __jive_macro_name="code" class="jive_text_macro jive_macro_code"><br /><br />current.addQuery("u_login_required", false);<br /></pre><br /><br />I haven't tested this (I spent my time writing it up instead), but I can't think of a reason why it wouldn't work. If anyone interested in doing this actually tries it and finds it doesn't work, lemme know :)</p>