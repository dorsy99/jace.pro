---
title: "Tips and Tricks The Wrong Sort"
date: 2010-07-14T17:36:16.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=5cbc2a25dbd0dbc01dcaf3231f961994"
---
<p><img  alt="" class="jive-image" src="d80c3bb9db101344e9737a9e0f961988.iix" style="width: auto; height: 150px;" />Have you ever had trouble sorting stuff into the "right" order? JavaScript (and most other languages), by default, sorts numbers into numeric order and everything else into <a title=".wikipedia.org/wiki/Lexicographic_order" href="http://en.wikipedia.org/wiki/Lexicographic_order">lexicographical</a> (i.e., alphabetical) order. Often this is exactly what you need, but sometimes it's deeply wrong. For example, consider this list of IP addresses:<br /><br /><br /><br /><br /><br /><br /><br /><br /><table style="width:50%;line-height:1;"><tr><td><b>Lexicographical Order</b></td><td><b>Correct Order</b></td></tr><tr><td>10.0.1.222</td><td>10.0.1.32</td></tr><tr><td>10.0.1.32</td><td>10.0.1.222</td></tr><tr><td>10.0.10.43</td><td>10.0.2.43</td></tr><tr><td>10.0.14.21</td><td>10.0.2.83</td></tr><tr><td>10.0.2.43</td><td>10.0.10.43</td></tr><tr><td>10.0.2.83</td><td>10.0.14.21</td></tr></table><br />How can you persuade/coerce the %&amp;^#$^@ computer to sort this <i>correctly</i>?<!--break--><br /><br />This little snippet sorts our test data into lexicographical order — what we <i>don't</i> want:<br /><pre style="margin-left:20px;line-height:1;"><br />var ips = ['10.0.1.32','10.0.1.222','10.0.2.43','10.0.10.43','10.0.2.83','10.0.14.21'];<br /><br />ips.sort();<br />gs.log(ips);</pre><br />The trick to getting the order you want is to use a custom comparator. In JavaScript you do this by supplying a comparator function as a parameter to the sort method, as shown below. The sort method will then use this comparator to determine the sort order:<br /><pre style="margin-left:20px;line-height:1;"><br />var ips = ['10.0.1.32','10.0.1.222','10.0.2.43','10.0.10.43','10.0.2.83','10.0.14.21'];<br /><br />ips.sort(compareIPs);<br />gs.log(ips);<br /><br />function compareIPs(a, b) {<br />   var aa = getIPArray(a);<br />   var ba = getIPArray(b);<br />   for (var i = 0; i &lt; aa.length; i++) {<br />      var c = aa <i>- ba</i>;<br />      if (c != 0)<br />         return c;<br />   }<br />   return 0;<br />}<br /><br />function getIPArray(x) {<br />   var result = [];<br />   var parts = x.split('.');<br />   for (var i = 0; i &lt; parts.length; i++)<br />      result.push(parts <i>- 0);<br />   return result;<br />}</i></pre><i><br />The comparator function (in our case, compareIPs) accepts two parameters a and b, which are to be compared. The comparator's job is to return zero if the two parameters are equal, some number greater than zero if a is greater than b, or some number less than zero if a is less than b.<br /><br /> The example given first converts each IP address string into an array of four numbers, then compares each of those number in a and b until it figures out which one is bigger. For instance, if the comparator was called with '10.0.1.23' and '10.0.10.43', it would first convert those strings to the arrays [10,0,1,23] and [10,0,10,43]. Then it would compare 10 and 10 (they're equal, so we keep going), 0 and 0 (again, they're equal, so we keep going), and finally 1 and 10 — since 1 is less than 10, it would return a negative number to show that a is less than b.<br /><br /> It may not be obvious until you try this a few times, but with a comparator you can implement any sort order at all. Furthermore, you can use custom comparators to sort arbitrary JavaScript objects, not just strings or numbers…</i></p>