---
title: "A Question of Identity"
date: 2010-03-29T18:35:56.000Z
authors: ["SlightlyLoony"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=0b5de629dbd0dbc01dcaf3231f9619ce"
---
<p><img  alt="" class="jive-image" src="e6521446db505344e9737a9e0f9619e9.iix" style="width: auto; height: 133px;" />Perhaps you've already heard about the new Discovery feature called "CI Scan". What's it all about? Why do we think it's a big deal?<br /><br />If those questions have been keeping you awake at night, then you need to get a grip. There are better reasons to lose sleep!<br /><br />But even so, CI Scan is just the most visible part of some big changes in how Discovery works under the covers. It's all about CI <i>identity</i>. We introduced the feature as an option in the Winter 2010 release — and sometime later this year it won't be an option, it will be <i>the</i> standard way that discovery works. If you'd like to know more, then keep reading...<!--break--><br /><br /><img  alt="" class="jive-image" src="ff20fb71db5c93041dcaf3231f9619eb.iix" style="width: auto; height: 643px;" />The diagram at right shows the sequence of activities during the discovery of a single CI when using CI Scan. Of course during an actual discovery there are thousands or tens of thousands of these happening at the same time — but it's much easier to follow what happens with a single CI from start to finish...<br /><br />After a CI Scan discovery kicks off, the first thing that happens is the <i>scan phase</i>. The Shazzam probe does all the scan work. It's only job is to identify those IP addresses within the discovery's range that have active services on them. Shazzam does this by attempting to open TCP connections (without actually sending any data) and by looking for responses from UDP ports. <br /><br />Once Shazzam has identified an IP address that has active services, the next thing that happens is the <i>identity phase</i>. This is the part that's new, so pay attention! During the identity phase, no CIs are created, updated, or deleted — the CMDB isn't touched at all, not even to create IP Devices (as used to happen). Instead, during this phase Discovery collects all the information it needs to unambiguously identify a CI. At the end of the identity phase (more precisely, in the <i>Identity sensor</i>), one of several things can happen with the out-of-the-box configuration:<ul><li>The identity sensor cannot find an existing CI with matching identity. In this case, Discovery will create a new CI and start exploring and updating it.</li><li>The identity sensor finds exactly one existing CI with matching identity. In this case, Discovery will start exploring and updating the existing CI.</li><li>The identity sensor finds two or more existing CIs with matching identity. In this case, Discovery will <i>not</i> explore or update the CI, as your CMDB is in need of your attention and intervention.</li><li>The identity sensor finds exactly one existing CI with matching identity, but sees that an IP address on that CI is already being explored. In this case, Discovery will <i>not</i> redundantly explore this additional IP on the CI.</li></ul><br />Finally comes the <i>exploration phase</i> (assuming the IP is going to be explored), which hasn't changed significantly. In this phase, Discovery launches probes to find out about the CI, and uses the results of those probes to update the CI in the CMDB.<br /><br />This new identity-based approach to discovery has several compelling advantages:<ul><li>No CIs are ever deleted by Discovery. <i>Period</i>.</li><li>CIs that change IP addresses (such as workstations or laptops provisioned with DHCP) are always updated correctly — even when those addresses change frequently, or when the CI changes location (e.g., someone carries a laptop from the New York office to the Hong Kong office).</li><li>CIs with multiple IPs are only explored once. This is particularly helpful if your organization has web farms with servers that have dozens of IPs provisioned for different services.</li><li>If your CMDB contains duplicate CIs, Discovery will figure this out and not update any of them (as it can't know which one is the right one). You'll know this happened because the device history log will tell you, in plain language.</li></ul><br /><br />We urge you to take CI Scan for a test spin, if you haven't already done so — and to move to CI Scanning in your production environment once you've learned how to use it. Consider this your early warning announcement, because later this year, CI Scan won't be an option, it will be the only way Discovery works!</p>