---
title: "Tips and Tricks Sets in JavaScript"
date: 2010-07-08T17:43:39.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=7fcce265dbd0dbc01dcaf3231f9619ad"
---
<p><img  alt="" class="jive-image" src="50303f71db5c93041dcaf3231f961923.iix" style="width: auto; height: 99px;" />Not long ago I came across a piece of code whose purpose was to eliminate the duplicates from a comma-separated list of email addresses. The approach taken was to put the email addresses in an array, sort the array, and then walk through the array eliminating adjacent entries that were the same. The function in question looked like this (with some test code):<br /><pre style="margin-left:20px;line-height:1;"><br />var test = 'b@b.com,a@b.com,c@b.com,b@b.com,d@c.com';<br />test = dedupe(test);<br />gs.log('Test: ' + test);<br /><br />function dedupe(emails) {<br />   var email_list = emails.split(',');<br />   email_list.sort();<br />   var last = '';<br />   for (var i = 0; i &lt; email_list.length; i++) {<br />      if (last == email_list<i>) {<br />         email_list.splice(i, 1);<br />         i--;<br />      } else {<br />         last = email_list</i>;<br />      }<br />   }<br />   return email_list.join(',');<br />}</pre><br />While this works just fine, there's an easier way...<!--break-->use the notion of a <i>set</i>, which every JavaScript object is an example of. Here's the same function, rewritten to use a set:<br /><pre style="margin-left:20px;line-height:1;"><br />var test = 'b@b.com,a@b.com,c@b.com,b@b.com,d@c.com';<br />test = dedupe(test);<br />gs.log('Test: ' + test);<br /><br />function dedupe(emails) {<br />   var email_list = emails.split(',');<br />   var set = {};<br />   for (var i = 0; i &lt; email_list.length; i++)<br />      set[email_list<i>] = true;<br />   email_list = [];<br />   for (var email in set)<br />      email_list.push(email);<br />   return email_list.join(',');<br />}</i></pre><i><br />This code is shorter and less tricky to understand. But how does it work? The magic bit is happening in these lines:<br /></i><pre style="margin-left:20px;line-height:1;"><i><br />   var set = {};<br />   for (var i = 0; i &lt; email_list.length; i++)<br />      set[email_list] = true;</i></pre><i><br />This snippet creates an object to be our set (the "set" variable), then walks through the array of email addresses setting properties in the set variable. The last line adds or replaces an entry in the set. The first time we encounter any particular email address, a property with the email address' name is added to the set. But if we encounter any email address again, the property with that email address' name is already in our set, so all we do is replace its value. Since the only value we ever set is "true", no values actually change. At the end of this code, our set object has one property for each unique email address in the input â€” the duplicates have been eliminated.<br /><br />This snippet of code puts all those properties in our set back into an array, and then we can conveniently join the array to get back our de-duplicated list:<br /></i><pre style="margin-left:20px;line-height:1;"><br />   email_list = [];<br />   for (var email in set)<br />      email_list.push(email);</pre><br />The for syntax <i>for (x in y)</i> iterates through all the properties of y, putting the names of each property in x. The snippet above starts with an empty array, then populates it with each property name (email address) in our set. <br /><br /><i>Sets</i> are an example of a <a title=".wikipedia.org/wiki/Collection_%28computing%29" href="http://en.wikipedia.org/wiki/Collection_%28computing%29">collection</a>, a general notion that is central to many programming problems and solutions. If you don't know them well, consider getting better acquainted...</p>