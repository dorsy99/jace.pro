---
title: "New Feature OnDemand Functions"
date: 2010-08-23T18:28:23.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=b5bcea25dbd0dbc01dcaf3231f9619b2"
---
<p><img  alt="" class="jive-image" src="bc3fb006db5013043eb27a9e0f961934.iix" style="width: auto; height: 200px;" />She seems a bit skeptical about this, but it's true — starting with the Fall 2010 release, you'll be able to define functions whose definitions are automatically included when you use them.<br /><br />This is much different than a feature you may already be familiar with: global business rules. <i>All</i> global business rules are loaded (included) before you run <i>any</i> script. The more global business rules you define, the less efficient this process is.<br /><br />On-demand functions, on the other hand, are <i>only</i> loaded (included) when you actually use them in a script. That means you can define as many of them as you'd like without any loss of efficiency.<br /><br />So how does this work?<br /><!--break--><br />Suppose you're taking a computer science course at your neighborhood bar, and during the section titled <i>Margaritas and Math</i> you learned about <a title=".wikipedia.org/wiki/Greatest_common_divisor" href="http://en.wikipedia.org/wiki/Greatest_common_divisor">greatest common divisors (GCDs)</a> and the <a title=".wikipedia.org/wiki/Euclidean_algorithm" href="http://en.wikipedia.org/wiki/Euclidean_algorithm">recursive form of the Euclidean Algorithm</a>. Naturally you'd want to add a nice GCD function to your system, 'cause you just never know when it might be useful to know the GCD of two numbers. Since this is definitely not the sort of function that would be used in <i>every</i> script you write, it's a good candidate for an on-demand function. So how would you make one of these?<br /><br /><img  alt="" class="jive-image" src="daea500edbd89fc068c1fb651f961964.iix" style="width: auto; height: 89px;" />The first step is to write your function in a Script Include (navigate to <b>System Definition â†’ Script Includes</b> and click <i>New</i>). I recommend following a convention of prefixing the name of any on-demand function you write with "u_" to be certain you don't accidentally collide with the name of any system-supplied function. Note that it is vital for the name field of the Script Include to exactly match the name of the function you define in the script part; otherwise you'll get a nasty error. While you may define multiple functions in a Script Include, the only one that will load automatically on-demand is the one whose name is in the name field. So here I called my new on-demand GCD function "u_gcd". Now all I need is a test script:<br /><pre style="clear:both;margin-left:20px;line-height:1;"><br />var a = u_gcd(21560, 12747);<br />gs.log(a);</pre><br />Manually factoring those numbers I get (with a little help from <a title="ms.unice.fr/wims/wims.cgi" href="http://wims.unice.fr/wims/wims.cgi">Factoris</a>):<br />21560 = 2<sup>3</sup> <font color="green">×</font> 5 <font color="green">×</font> 7<sup>2</sup> <font color="green">×</font> 11<br />12747 = 3 <font color="green">×</font> 7 <font color="green">×</font> 607<br />By inspection the GCD is 7, and indeed that's the answer I get when I run the test code.<br /><br />You may be wondering where you can use an on-demand function. The answer is simple: anywhere, anytime, in any script. That means in other Script Includes, in Business Rules, in condition scripts, in UI Actions, in Probes, in Sensors...you get the idea. Anywhere!</p>