---
title: "JavaScript Which String Are We Talking About Here"
date: 2010-10-25T18:07:41.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=1d1deea5dbd0dbc01dcaf3231f961967"
---
<p><img  alt="" class="jive-image" src="53ae180adbd85304b322f4621f961961.iix" style="width: auto; height: 188px;" />Recently I helped someone troubleshoot a script problem that turned out to be a case of mistaken identity: the script's author thought she had a Java String instance, but in fact she had a JavaScript String instance — and that led to some badly broken code.<br /><br />If "Huh?" or "Less gobbledegook, please!" is your reaction, you might want to read on...<br /><!--break--><br />The broken script looked like this:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />var gr = new GlideRecord('cmdb_ci_computer');<br />gr.addQuery('name', 'ovrhf003');<br />gr.query();<br />gr.next();<br />var domain = gr.getValue('os_domain');<br />gs.log(domain.contains('ROCOCO'));</pre><br />When run, this script generates a big, fat old "undefined". What gives?<br /><br />The problem is that the string value returned by the <span style="font-family:Courier;">gr.getValue('os_domain')</span> invocation is a <i>JavaScript</i> String instance — and the JavaScript String class does not contain a <span style="font-family:Courier;">.contains()</span> method. That's a method from the <i>Java</i> String class. We troubleshot it with this logging code:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />var gr = new GlideRecord('cmdb_ci_computer');<br />gr.addQuery('name', 'ovrhf003');<br />gr.query();<br />gr.next();<br />var domain = new Packages.java.lang.String(gr.getValue('os_domain'));<br />gs.log(typeof domain);</pre><br />When we ran this, the log showed "string" — meaning that it was a JavaScript String instance. Fortunately, it's very easy to convert the JavaScript String to a Java String:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />var gr = new GlideRecord('cmdb_ci_computer');<br />gr.addQuery('name', 'ovrhf003');<br />gr.query();<br />gr.next();<br />var domain = new Packages.java.lang.String(gr.getValue('os_domain'));<br />gs.log(domain.contains('ROCOCO'));</pre><br />This code works fine. While this example is kind of silly (see below for a better alternative), it's a good example of something to keep in mind when you get results in a script that you can't otherwise explain. Maybe you've got a JavaScript class instance where you expected a Java class instance, or <i>vice versa</i>.<br /><br />Here's an even better way to handle the problem above: this approach has the advantage of (a) working, and (b) avoiding conversion to a Java class instance:<br /><pre style="margin-left:20px;line-height:1;color:FireBrick;"><br />var gr = new GlideRecord('cmdb_ci_computer');<br />gr.addQuery('name', 'ovrhf003');<br />gr.query();<br />gr.next();<br />var domain = gr.getValue('os_domain');<br />gs.log(domain.indexOf('ROCOCO') &gt;= 0);</pre><br /><br />Today's photo is a close-up of the strings in a cactus stem. Pretty stringy, eh?</p>