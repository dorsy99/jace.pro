---
title: "Unexpected JavaScript"
date: 2010-01-25T02:57:12.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=b14d2229dbd0dbc01dcaf3231f961917"
---
<p><img  alt="" class="jive-image" src="8f6ea84edb5c57041dcaf3231f9619af.iix" style="width: auto; height: 278px;" />Every once in a while, I run across something completely unexpected in JavaScript. This morning was one of those times.<br /><br />In my code, I had the equivalent of this:<br /><pre __default_attr="plain" __jive_macro_name="code" class="jive_text_macro jive_macro_code"><br /><br />var x = 0;<br />if ('' == x)<br />    gs.log('What the???');<br />else<br />    gs.log('Ah, that was expected!');<br /></pre><br />Wanna take a guess which statement was logged?<br /><br />In JavaScript, an empty string evaluates as equal to a zero. Doesn't make any sense to me, but apparently it made sense to a JavaScript designer. I suspect what's going on here is that the empty string is <i>coerced</i> to a number (which would be zero) and is then compared to the number 0 in variable x. What I expected was the opposite: that the number 0 would be coerced to the string '0', and the comparison would have evaluated to a false.<br /><br />I fixed the code like this:<br /><pre __default_attr="plain" __jive_macro_name="code" class="jive_text_macro jive_macro_code"><br /><br />var x = 0;<br />if ('' == '' + x)<br />    gs.log('What the???');<br />else<br />    gs.log('Ah, that was expected!');<br /></pre><br />This forces the coercion to happen as I expected (and wanted) it to.<br /><br />Another day, another oddity!</p>