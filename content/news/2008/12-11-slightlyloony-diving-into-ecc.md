---
title: "Diving Into ECC Queue Attachments"
date: 2008-12-10T21:04:54.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=540de6a5dbd0dbc01dcaf3231f9619dc"
---
<p><img  alt="" class="jive-image" src="948c3b31db501344e9737a9e0f961959.iix" style="width: auto; height: 113px;" />I've discussed the <a title="lightlyLoony/blog/2008/11/5/1915" href="/community?id=community_blog&sys_id=786ceaa1dbd0dbc01dcaf3231f96193e">ECC Queue before</a>; it's the way that messages are sent from the Service-now instance to MID servers, and <i>vice versa</i>. Today I'm going to talk about a detail concerning these ECC Queue messages — specifically, how very large messages from the MID server to the instance are handled.<br /><br />Certain kinds of probes may return a lot of information. For instance, the list of running processes on a big, busy server can be many thousands of lines long. Another example is big "core" routers; these may have many thousands of routes.<!--break--> For most probes, this data gets stored in the <i>payload</i> field of the ECC Queue — but sometimes the data package is just too big to be conveniently stored in a database field.<br /><br />On the Hummingbird UAV pictured above, there's a similar problem: it can carry payloads that won't fit in its standard small payload compartment. They solved the problem by coming up with an attachment for the Hummingbird (that "pod" you see hanging below it). Discovery solves the problem in an analogous way — it stores large payloads in <i><a title="ki.service-now.com/index.php?title=Attachment" href="http://wiki.service-now.com/index.php?title=Attachment">attachments</a></i> to the ECC Queue record.<br /><br /><img  alt="" class="jive-image" src="767fdd02dbd8d304b322f4621f96195f.iix" style="width: auto; height: 76px;" />Let's start by looking at a normal ECC Queue record (screenshot at right). This is the response to a PortScanner probe, and you can see the data returned is directly stored in the payload field. Most of the probe responses you see will look much like this.<br /><br /><img  alt="" class="jive-image" src="77def4c2db909f048c8ef4621f961984.iix" style="width: auto; height: 67px;" />Now at left you can see an ECC Queue record where the payload data was stored in an attachment. It's pretty obvious what's going on: I've highlighted the big clue in green, where it says . Toward the top of the screenshot, I've highlighted the <tt>[view]</tt> link that you can click on to actually see the contents of the attachment in a pop-up window.<br /><br />There are some additional details worth knowing about:<br /><ul><li>A size threshold determines whether a particular payload is stored as an attachment. By default, that threshold is 512,000 bytes, but you can control it with the property <tt>glide.soapprocessor.large_field_patch_max</tt>. Note that this controls this behavior for <i>all</i> SOAP transactions, so be sure you know what you're doing before you muck around with this.</li><li>Ordinarily these ECC Queue attachments are deleted as soon as the information has been processed. This saves database space and increases performance, both good things — but if you're trying to troubleshoot a problem, it can be annoying. There's a property in Discovery (<b>Discovery Definitionâ†’Properties</b>) called <i>Save ECC Queue Attachments</i> that lets you turn this behavior off, either temporarily or permanently.</li><li>All of the data transmitted over the network between the MID server and the Service-now instance is compressed. Data stored directly in the ECC Queue payload field is <i>not</i> compressed; data stored in attachments <i>is</i> compressed.</li></ul><br /><br />Whew! Now you know all about Hummingbird Payload Modules and ECC Queue attachments...</p>