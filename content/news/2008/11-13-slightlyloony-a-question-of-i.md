---
title: "A Question of Identity"
date: 2008-11-12T20:19:21.000Z
authors: ["SlightlyLoony"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=7b0e6e2ddbd0dbc01dcaf3231f96196a"
---
<p><img  alt="" class="jive-image" src="49e0f379db18df04e9737a9e0f9619a7.iix" style="width: auto; height: 75px;" />Most of the time Discovery thinks of each IP address as representing a unique device, but there are times when this simple approach doesn't work. For example, consider the case of a workstation whose network address is configured by DHCP. For one discovery, it might be on 10.0.0.44, and on a subsequent discovery 10.0.0.65 — but they're really the same computer. A completely different case would be a server that has both 10.1.0.45 and 10.24.23.1 configured as static IP addresses on different NICs. Discovery will find both of these IP addresses, and explore them — but at some point it figures out that they both belong to the same server. How does Discovery handle these situations?<!--break--><br /><br />There are really two different questions here: <br />&nbsp;&nbsp;&nbsp;(1) how does Discovery determine that devices at different IP addresses are really the same one?<br />&nbsp;&nbsp;&nbsp;(2) what does Discovery do when it find two such devices?<br /><br />Discovery uses two mechanisms to determine if the devices at different IP addresses are really the identical device. If <i>either</i> mechanism detects a match, the devices are considered to be the same one. <br /><br />The first mechanism is the serial number, which is quite reliable for modern network gear (routers, switches, etc.). Its value for computer systems is dependent on the mix of platforms you have in your enterprise; some makes and models have reliably unique serial numbers, some don't. This mechanism is most important for any devices with dynamic network configurations (DHCP, BOOTP, etc.) — for such devices, the serial number is the only good mechanism available for determining identity. <br /><br />The second mechanism is identical network configurations, meaning the IP addresses and MAC addresses of all the NICs on the device. This mechanism is most useful in Discovery as a sort of "fallback" for those servers without serial numbers (or whose serial numbers cannot be discovered, as with Solaris).<br /><br />Once Discovery has detected that what look like two devices (at two different IP addresses) are really the same one, it figures out which one has been in the CMDB the longest, and deletes the other. Most of the time, that means it is deleting a CMDB entry that was just created moments ago in the discovery process. If the newly discovered IP address was previously assigned to a different device, the device that used to have that IP address is deleted from the CMDB. At the same time, the discovery process stops further exploration of the CMDB item that was deleted, and updates the Discovery IP Address table so that the new IP address is associated with the CMDB item that was retained.</p>