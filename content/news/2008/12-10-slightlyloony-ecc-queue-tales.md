---
title: "ECC Queue Tales With Power Comes Responsibility"
date: 2008-12-09T21:57:00.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=81bd2aa9dbd0dbc01dcaf3231f9619f9"
---
<p><img  alt="" class="jive-image" src="59bcdccedb185344e9737a9e0f96191a.iix" style="width: auto; height: 93px;" />Hopefully you're very careful when you start up a chainsaw, get behind the controls of a fighter jet, or pick up your shotgun. It's obvious in all those cases that you're controlling something very powerful, and if you misuse it there could be awful consequences.<br /><br />There are a few areas in Discovery that are also quite powerful, and misusing them can have some unhappy consequences (though nothing so horrible as, say, a misused shotgun!). There's one such area in particular that folks have stumbled into several times, so it's worth a brief discussion.<!--break--><br /><br />That "dangerous" area is the Discovery IP Ranges, which I've <a title="lightlyLoony/blog/2008/11/11/1919" href="/community?id=community_blog&sys_id=99dda6e9dbd0dbc01dcaf3231f96191c">posted about before</a>. The thing to watch out for is specifying a range that's too large (this is especially easy when specifying IP Ranges and IP Networks). To illustrate, I'll use a memorable example that someone tried a few months ago.<br /><br />This fellow said to himself (as he told me later): <br /><br /><div style="margin-left:30px;"><i>"Hmmm... I want to discover everything on our network, and we use 10-dot IP addresses for everything, so I'll make this easy on myself — I'll just enter a single IP Network range of 10.0.0.0/8!"</i></div><br /><br />What could possibly be wrong with that, right? Well, for starters let's consider the sheer size of that range: 16,777,214 IP addresses (that's 2^24 - 2, for the mathematically inclined). It takes a couple of seconds to ping each IP address, so to ping that entire range would take just over a year — probably not the desired result. With our new <a title="lightlyLoony/blog/2008/11/20/1926" href="/community?id=community_blog&sys_id=9eac6625dbd0dbc01dcaf3231f961919">chunky ping</a> feature, as devices were found they'd be explored — but unless your organization is <i>awfully</i> big, very few of those 16 million IP addresses are going to be in use. Most of that pinging will be just wasted time, because the reality (almost certainly) is that your actual devices occupy a well-defined (and much smaller!) piece of that IP address space. You would be much better served by defining IP address ranges that actually correspond to where your devices are.<br /><br />There's another problem as well, one that you need to know just a bit about networking to understand. This problem is caused by specifying IP ranges that cross subnet boundaries. Every organization I've ever seen that uses the private 10-dot IP address space <i>subnets</i> it, meaning that they divide the giant class "A" 10-dot into many smaller sub-networks. Most common (but by no means universal) is to divide the 10-dot space into many class "C" networks (/24s, or masks of 255.255.255.0); this is convenient and easy to understand. But here's the important bit: each of those subnets will have its own broadcast and network addresses, and pinging one of these addresses can have … interesting … consequences.<br /><br />For example, suppose your organization used the 10-dot space, but subnetted to /24s. You might then have a subnet defined as 10.0.100.0/24. That subnet's network address is 10.0.100.0, and its broadcast address is 10.0.100.255. Now suppose you defined an IP range for discovery of 10.0.0.0/24, as in my example above. Eventually the MID server would get around to pinging 10.0.100.0, and later, 10.0.100.255. When it does, <i>every device on that entire subnet</i> will respond to the broadcast address (and many will also respond to the ping of the network address). Discovery will then believe there is a device at that address, and begin exploring it with other probes. Once again, as it works, <i>every device on that entire subnet</i> will listen and respond, producing some really strange results. For example, an SNMP query to a broadcast address will cause every SNMP device on that subnet to respond — and Discovery will think there's a very strange device out there! Bottom line: don't include broadcast or network addresses for subnets within your Discovery IP ranges.<br /><br />With power comes responsiblity… Discovery's IP ranges don't have sharp edges, bullets, or bombs — but it's still worthwhile being very careful when you specify them, lest you end up with (a) very long-lasting discoveries, or (b) very odd devices in your CMDB!</p>