---
title: "Jakarta CMDB Changes"
date: 2017-11-27T19:56:24.000Z
authors: ["andrew.venables"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=64bc6a25dbd0dbc01dcaf3231f961916"
---
<p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif; color: #666666;"><strong>Introduction</strong></span></p><p><span style="font-family: arial, helvetica, sans-serif; color: #666666;">The ServiceNow Jakarta version of the platform introduces a number of new features that improve the customer experience both with new product functionality and performance improvements.</span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; color: #666666;">ServiceNow is constantly learning from customer's and partner's use of the platform and striving to improve the platform. One area that has been identified as a bottleneck on some large instances is the CMDB.</span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; color: #666666;">As such a new database table extension model for the CMDB has been introduced to deliver performance improvements.</span></p><p></p><h2><span style="font-family: arial, helvetica, sans-serif; color: #666666; font-size: 12pt;">ServiceNow Table Extension Models</span></h2><p><span style="font-family: arial, helvetica, sans-serif; color: #666666;">ServiceNow utilizes multiple table extension models (sometimes referred to as table flattening) to deliver the best possible performance across the platform.</span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; color: #666666;">In the Eureka release the <strong>"Table per hierarchy"</strong> model was introduced to improve performance of the task table, this was generally referred to as "Table Flattening" and can be described as all database columns on tables extended from the task table being mapped to columns on the task table itself. The database tables incident, problem, change_request etc are actually no longer present on instance databases!</span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; color: #666666;">This alteration is almost completely transparent to all users and developers of the ServiceNow platform. It's purely a different method of storing data in ServiceNow's database. It doesn't affect how users use the platform or developers develop on it, GlideRecord still works exactly as before and customer's don't need to do anything different in Transform Maps, Business Rules, Script Includes etc.</span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; color: #666666;">This change was applied to all instances whether on upgrade or new provisioning on Eureka or above.</span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; color: #666666;">Here is a table of the available extension models in the platform:</span></p><p><span style="font-family: arial, helvetica, sans-serif; color: #666666;"><img  alt="Picture1.png" class="image-2 jive-image" src="edc4efb1db5c5b048c8ef4621f961970.iix" style="width: 620px; height: 172px;"/></span></p><h2><span style="font-family: arial, helvetica, sans-serif; color: #666666; font-size: 12pt;">Jakarta CMDB Table Extension Model Change</span></h2><p><span style="font-family: arial, helvetica, sans-serif; color: #666666;">With the Jakarta release family the <strong>"Table per partition"</strong> extension model has been introduced, which improves performance across the CMDB, in addition the model removes certain inherent size restrictions that exist in the underlining MySQL database.</span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; color: #666666;">The new table per partition model creates each column and those of all its parents on the table itself. This removes the need for joins when the ServiceNow instance queries the database.</span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; color: #666666;">Again this change was applied to all instances whether on upgrade or new provision of an instance.</span></p><p></p><h2><span style="font-family: arial, helvetica, sans-serif; color: #666666; font-size: 12pt;">Table per partition extension model</span></h2><p><span style="font-family: arial, helvetica, sans-serif; color: #666666;">The new CMDB extension model is best illustrated with an example:</span></p><p></p><p><span style="color: #666666; font-size: 10pt; font-family: arial, helvetica, sans-serif;"><strong>Pre-Jakarta <span lang="MR">—</span> Table per class:</strong></span></p><table border="1" class="jiveBorder" jive-data-cell="{&quot;color&quot;:&quot;#3D3D3D&quot;,&quot;textAlign&quot;:&quot;left&quot;,&quot;padding&quot;:&quot;5&quot;,&quot;backgroundColor&quot;:&quot;transparent&quot;,&quot;fontFamily&quot;:&quot;Helvetica Neue,Helvetica,Arial,Lucida Grande,sans-serif&quot;,&quot;verticalAlign&quot;:&quot;baseline&quot;}" jive-data-header="{&quot;color&quot;:&quot;#505050&quot;,&quot;backgroundColor&quot;:&quot;#F2F2F2&quot;,&quot;textAlign&quot;:&quot;left&quot;,&quot;padding&quot;:&quot;5&quot;,&quot;fontFamily&quot;:&quot;Helvetica Neue,Helvetica,Arial,Lucida Grande,sans-serif&quot;,&quot;verticalAlign&quot;:&quot;baseline&quot;}" style="border: 1px solid #c6c6c6; width: 400px;"><tbody><tr><th style="text-align: left; background-color: #f2f2f2; color: #505050; padding: 5px;" valign="middle"><strong>Table<br/></strong></th><th style="text-align: left; background-color: #f2f2f2; color: #505050; padding: 5px;" valign="middle"><strong>Extends</strong></th><th style="text-align: left; background-color: #f2f2f2; color: #505050; padding: 5px; width: 244px;" valign="middle"><span style="color: #505050;"><strong>Example Columns</strong></span></th></tr><tr><td style="padding: 5px;">cmdb</td><td style="padding: 5px;"></td><td style="padding: 5px;">name</td></tr><tr><td style="padding: 5px;">cmdb_ci</td><td style="padding: 5px;">cmdb</td><td style="padding: 5px;">ip_address</td></tr><tr><td style="padding: 5px;">cmdb_ci_hardware</td><td style="padding: 5px;">cmdb_ci</td><td style="padding: 5px;">hardware_status</td></tr><tr><td style="padding: 5px;">cmdb_ci_computer</td><td style="padding: 5px;">cmdb_ci_hardware</td><td style="padding: 5px;">os</td></tr></tbody></table><p></p><p><span style="color: #666666; font-size: 10pt; font-family: arial, helvetica, sans-serif;"><strong>Jakarta <span lang="MR">—</span> Table per partition:</strong></span></p><table border="1" class="jiveBorder" jive-data-cell="{&quot;color&quot;:&quot;#3D3D3D&quot;,&quot;textAlign&quot;:&quot;left&quot;,&quot;padding&quot;:&quot;5&quot;,&quot;backgroundColor&quot;:&quot;transparent&quot;,&quot;fontFamily&quot;:&quot;Helvetica Neue,Helvetica,Arial,Lucida Grande,sans-serif&quot;,&quot;verticalAlign&quot;:&quot;baseline&quot;}" jive-data-header="{&quot;color&quot;:&quot;#505050&quot;,&quot;backgroundColor&quot;:&quot;#F2F2F2&quot;,&quot;textAlign&quot;:&quot;left&quot;,&quot;padding&quot;:&quot;5&quot;,&quot;fontFamily&quot;:&quot;Helvetica Neue,Helvetica,Arial,Lucida Grande,sans-serif&quot;,&quot;verticalAlign&quot;:&quot;baseline&quot;}" style="border: 1px solid #c6c6c6;"><tbody><tr><th style="padding: 5px; text-align: left; background-color: #f2f2f2; color: #505050;" valign="middle"><strong>Table<br/></strong></th><th style="padding: 5px; text-align: left; background-color: #f2f2f2; color: #505050;" valign="middle"><strong>Extends</strong></th><th style="padding: 5px; text-align: left; background-color: #f2f2f2; color: #505050;" valign="middle"><span style="color: #505050;"><strong>Example Columns</strong></span></th></tr><tr><td style="padding: 5px;">cmdb</td><td style="padding: 5px;"></td><td style="padding: 5px;">name</td></tr><tr><td style="padding: 5px;">cmdb_ci</td><td style="padding: 5px;">cmdb</td><td style="padding: 5px;">name, ip_address</td></tr><tr><td style="padding: 5px;">cmdb_ci_hardware</td><td style="padding: 5px;">cmdb_ci</td><td style="padding: 5px;">name, ip_address, hardware_status</td></tr><tr><td style="padding: 5px;">cmdb_ci_computer</td><td style="padding: 5px;">cmdb_ci_hardware</td><td style="padding: 5px;">name, ip_address, hardware_status, os</td></tr></tbody></table><p></p><p><span style="font-family: arial, helvetica, sans-serif; color: #666666;">The table per partition model is explained in some detail in the ServiceNow product documentation site: <span style="color: #666666;"><a title="ocs.servicenow.com/bundle/jakarta-servicenow-platform/page/administer/platform-performance/concept/c_TaskTableFlattening.html" href="https://docs.servicenow.com/bundle/jakarta-servicenow-platform/page/administer/platform-performance/concept/c_TaskTableFlattening.html">https://docs.servicenow.com/bundle/jakarta-servicenow-platform/page/administer/platform-performance/concept/c_TaskTableFlattening.html</a> </span></span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; color: #666666;">You can find which extension model is used on which table by using the following link (remember to change </span></p><p><span style="font-family: arial, helvetica, sans-serif; color: #666666;"><a href="https://%3Cinstance_name%3E.service-now.com/sys_db_object_list.do?sysparm_query=sys_update_nameISNOTEMPTY%5Eextension_model!%3DNULL"><span style="color: #666666;">https://&lt;instance_name&gt;.service-now.com/sys_db_object_list.do?sysparm_query=sys_update_nameISNOTEMPTY%5Eextension_model!%3DNULL</span></a> </span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; color: #666666;"><strong>Note:</strong> It is not recommended to change the extension model of any tables except in very rare circumstances, usually to address performance issues. Only alter the extension model of tables in conjunction with the ServiceNow TPP team and Customer Support.</span></p><p></p><h2><span style="font-family: arial, helvetica, sans-serif; color: #666666; font-size: 12pt;">Why the change?</span></h2><p><span style="font-family: arial, helvetica, sans-serif; color: #666666;">In general, the new structure provides performance Improvements by:</span></p><ul style="list-style-type: disc;"><li><span style="font-family: arial, helvetica, sans-serif; color: #666666;">Minimizing unnecessary database joins</span></li><li><span style="font-family: arial, helvetica, sans-serif; color: #666666;">Accommodating database covering indexes</span></li><li><span style="font-family: arial, helvetica, sans-serif; color: #666666;">Mitigate RDBMS storage limitations (MySQL: 64 indexes, 1000 columns, 8k on row storage)</span></li></ul><h2></h2><h2><span style="font-family: arial, helvetica, sans-serif; color: #666666; font-size: 12pt;">Managing the Jakarta CMDB Changes</span></h2><p><span style="font-family: arial, helvetica, sans-serif; color: #666666;">All Jakarta instances enforce the new CMDB model, even on upgrade, so once an instance has been upgraded the CMDB will be converted to the new extension model.</span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; color: #666666;">This means that apps developed on Jakarta will align to the <strong>new model </strong>and as such if the<strong> </strong>scoped app contains any custom CMDB columns <span style="text-decoration: underline;">the app will have the additional dictionary entries included in it</span>.</span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; color: #666666;">These additional dictionary entries are <strong>incompatible with previous versions</strong> of the platform and as such attempting to deploy an app with these additional dictionary entries on an earlier version (e.g. Istanbul or Helsinki) will generate errors and fail to deploy properly.</span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; color: #666666;">Therefore it's important for Technology Partners to develop on the <strong>earliest</strong> version they intend to support and test the application forward on newer releases. But don't deploy backwards. </span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; color: #666666;">Crucially, be aware that if you upgrade your development instance to Jakarta the app may no longer work with previous versions and you will only be able to list it on the ServiceNow store to customers on Jakarta.</span></p><p></p><h2><span style="font-family: arial, helvetica, sans-serif; color: #666666; font-size: 12pt;">Key Takeaway</span></h2><p><span style="font-family: arial, helvetica, sans-serif; color: #666666;">The most important aspect of this change is to understand that usually no action is required, the platform continues to function just as before and you shouldn't do anything differently.</span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; color: #666666;">You will however notice additional Dictionary entries for CMDB tables in Jakarta onwards, these additional entries are actually read-only and link back to the base dictionary entry they are mapped to.</span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; color: #666666;">If you have developed an application on Jakarta that includes CMDB columns and want to deploy that application to an instance with a version prior to Jakarta you should contact your TPP representative to work with them on migrating your app backwards to previous versions.</span></p>