---
title: "Scripts Select GlideRecord sysaudit"
date: 2017-11-25T09:00:05.000Z
authors: ["Tiago Macul"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=0c2de2e5dbd0dbc01dcaf3231f961939"
---
<p><a title="Como testar / debugar o seu script?" __default_attr="7466" __jive_macro_name="blogpost" class="jive_macro jive_macro_blogpost" data-orig-content="Como testar / debugar o seu script?" data-renderedposition="10_8_242_16" href="/community?id=community_blog&sys_id=65ace225dbd0dbc01dcaf3231f961952">Como testar / debugar o seu script?</a></p><p></p><p style="font-family: arial, sans-serif; color: #666666;">System Definition &gt; Scripts - Background</p><p></p><p><strong>Exemplo para Update</strong></p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="_jivemacro_uid_15114629677436789 jive_macro_code jive_text_macro" data-renderedposition="134_8_1192_384" jivemacro_uid="_15114629677436789"><p>//</p><p>var ObjAudit = new GlideRecord("sys_audit");</p><p>ObjAudit.addQuery("documentkey", "14d1e2de0fe20300975587ece1050e65");</p><p>ObjAudit.orderByDesc('sys_created_on');</p><p>ObjAudit.query();</p><p>ObjAudit.next();</p><p></p><p>gs.print("documentkey=" + ObjAudit.documentkey);</p><p>gs.print("fieldname=" + ObjAudit.fieldname);</p><p>gs.print("internal_checkpoint=" + ObjAudit.internal_checkpoint);</p><p>gs.print("internal_checkpoint=" + ObjAudit.internal_checkpoint);</p><p>gs.print("newvalue=" + ObjAudit.newvalue);</p><p>gs.print("oldvalue=" + ObjAudit.oldvalue);</p><p>gs.print("reason=" + ObjAudit.reason);</p><p>gs.print("sys_created_by=" + ObjAudit.sys_created_by);</p><p>gs.print("sys_created_on=" + ObjAudit.sys_created_on);</p><p>gs.print("sys_created_on=" + ObjAudit.sys_created_on);</p><p>gs.print("sys_id=" + ObjAudit.sys_id);</p><p>gs.print("tablename=" + ObjAudit.tablename);</p><p>gs.print("user=" + ObjAudit.user);</p><p></p><p>ObjAudit.user.setValue("TestA");</p><p>ObjAudit.update();</p><p>//</p></pre><p></p><p></p><p><strong>Exemplo para Insert</strong></p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="_jivemacro_uid_15117874518963454 jive_macro_code jive_text_macro" data-renderedposition="602_8_1192_160" jivemacro_uid="_15117874518963454"><p>var ObjAudit = new GlideRecord("sys_audit");   </p><p>ObjAudit.initialize();</p><p>ObjAudit.documentkey ="14d1e2de0fe20300975587ece1050e65";</p><p>ObjAudit.fieldname = "Attachment";</p><p>ObjAudit.sys_created_on = "2017-11-27 10:41:39";</p><p>ObjAudit.newvalue = "new attach";</p><p>ObjAudit.sys_created_by = "Tiago Macul";</p><p>ObjAudit.user = "Tiago Macul";</p><p>ObjAudit.insert();</p><p></p></pre><p></p><p>Onde verificar:</p><p><a href="https://dev14014.service-now.com/sys_audit_list.do?sysparm_query=documentkeySTARTSWITH14d1e2de0fe20300975587ece1050e65&amp;sysparm_first_row=1&amp;sysparm_view=" title="https://dev14014.service-now.com/sys_audit_list.do?sysparm_query=documentkeySTARTSWITH14d1e2de0fe20300975587ece1050e65&amp;sysparm_first_row=1&amp;sysparm_view=">https://&lt;InstanceName&gt;.service-now.com/sys_audit_list.do?sysparm_query=documentkeySTARTSWITH14d1e2de0fe20300975587ece1050e65&amp;sysparm_first_row=1&amp;sysparm_view=</a></p><p></p><p>XML</p><pre __default_attr="xml" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_15117875222736218 jive_text_macro" data-renderedposition="867_8_1192_352" jivemacro_uid="_15117875222736218"><pre __default_attr="xml" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_15117875222736218 jive_text_macro" data-renderedposition="867_8_1192_352" jivemacro_uid="_15117875222736218"><p class="line" style="color: #000000; font-family: monospace; font-size: 13px;"><span class="html-tag"></span></p><p class="line" style="color: #000000; font-family: monospace; font-size: 13px;"><span class="html-tag">&lt;xml&gt;</span></p><p class="collapsible-content" style="margin-left: 1em; color: #000000; font-family: monospace; font-size: 13px;"></p></pre></pre><div class="expanded"><div class="line"><span class="button collapse-button" style="margin-left: -10px; background-position: initial;"></span><span class="html-tag">&lt;sys_audit&gt;</span><p></p><p class="collapsible-content" style="margin-left: 1em;"></p><div class="line"><span class="html-tag">&lt;documentkey&gt;</span><span class="text">14d1e2de0fe20300975587ece1050e65</span><span class="html-tag">&lt;/documentkey&gt;</span><p></p><span class="text"></span><p class="line"><span class="html-tag">&lt;fieldname&gt;</span><span class="text">short_description</span><span class="html-tag">&lt;/fieldname&gt;</span></p><span class="text"></span><p class="line"><span class="html-tag">&lt;internal_checkpoint&gt;</span><span class="text">15fea2ae3830000001</span><span class="html-tag">&lt;/internal_checkpoint&gt;</span></p><span class="text"></span><p class="line"><span class="html-tag">&lt;newvalue&gt;</span><span class="text">teste update 10</span><span class="html-tag">&lt;/newvalue&gt;</span></p><span class="text"></span><p class="line"><span class="html-tag">&lt;oldvalue&gt;</span><span class="text">teste update 9</span><span class="html-tag">&lt;/oldvalue&gt;</span></p><span class="text"></span><p class="line"><span class="html-tag">&lt;reason/&gt;</span></p><span class="text"></span><p class="line"><span class="html-tag">&lt;record_checkpoint&gt;</span><span class="text">41</span><span class="html-tag">&lt;/record_checkpoint&gt;</span></p><span class="text"></span><p class="line"><span class="html-tag">&lt;sys_created_by&gt;</span><span class="text">admin</span><span class="html-tag">&lt;/sys_created_by&gt;</span></p><span class="text"></span><p class="line"><span class="html-tag">&lt;sys_created_on&gt;</span><span class="text">2017-11-23 18:36:40</span><span class="html-tag">&lt;/sys_created_on&gt;</span></p><span class="text"></span><p class="line"><span class="html-tag">&lt;sys_id&gt;</span><span class="text">e3c29b2a0f2e0300975587ece1050ecd</span><span class="html-tag">&lt;/sys_id&gt;</span></p><span class="text"></span><p class="line"><span class="html-tag">&lt;tablename&gt;</span><span class="text">incident</span><span class="html-tag">&lt;/tablename&gt;</span></p><span class="text"></span><p class="line"><span class="html-tag">&lt;user&gt;</span><span class="text">TestA</span><span class="html-tag">&lt;/user&gt;</span></p><span class="text"></span></div><p class="line"><span class="html-tag">&lt;/sys_audit&gt;</span></p></div></div><pre __default_attr="xml" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_15117875222736218 jive_text_macro" data-renderedposition="867_8_1192_352" jivemacro_uid="_15117875222736218"><p class="collapsible-content" style="margin-left: 1em; color: #000000; font-family: monospace; font-size: 13px;"><span class="text"></span></p><p class="line" style="color: #000000; font-family: monospace; font-size: 13px;"><span class="html-tag">&lt;/xml&gt;</span></p><p></p><p></p></pre><p>Rest API Explorer</p><p><a href="https://dev14014.service-now.com/nav_to.do?uri=/$restapi.do" title="https://dev14014.service-now.com/nav_to.do?uri=/$restapi.do">https://&lt;InstanceName&gt;.service-now.com/nav_to.do?uri=/$restapi.do</a></p><p></p><p>WSDL</p><p><span style="color: #343d47; font-family: SourceSansPro, 'Helvetica Neue', Arial; font-size: 13px;"><a title="" _jive_internal="true" href="https://" rel="nofollow" target="_blank">https://</a><span>&lt;InstanceName&gt;.service-now.com/api/now/table/sys_audit?sysparm_limit=1</span></span></p><p></p><p>WSDL Response Body</p><pre __jive_macro_name="quote" class="jive_macro_quote jive_text_macro" data-renderedposition="1374_8_1192_377"><span class="ng-binding">{<br/>   "result": [<br/>   {<br/>   "fieldname": "version",<br/>   "reason": "",<br/>   "sys_id": "21737a1337210200f212cc028e41f1ae",<br/>   "newvalue": "1.0",<br/>   "sys_created_on": "2015-04-22 22:27:44",<br/>   "documentkey": "27d3f35cc0a8000b001df42d019a418f",<br/>   "internal_checkpoint": "14ef5ad7c3b0000001",<br/>   "record_checkpoint": "10",<br/>   "tablename": "cmdb_ci_service",<br/>   "user": "admin",<br/>   "oldvalue": "",<br/>   "sys_created_by": "admin"<br/>   }<br/>   ]</span></pre><p></p><p></p><p></p><p><img alt="Image result for knowmore" class="jive-image" height="109" src="http://library.sbcc.edu/wp-content/uploads/2011/11/Know-More-Now-Logo.pdf.jpg" style="width: 173px; height: 108.884px;" width="173"/></p><p><a title="ServiceNow Scripting 101: Two Methods for Code Development" __default_attr="5416" __jive_macro_name="blogpost" class="jive_macro jive_macro_blogpost" data-orig-content="ServiceNow Scripting 101: Two Methods for Code Development" data-renderedposition="1958.875_8_414_16" href="/community?id=community_blog&sys_id=e81eae2ddbd0dbc01dcaf3231f96194f">ServiceNow Scripting 101: Two Methods for Code Development</a></p>