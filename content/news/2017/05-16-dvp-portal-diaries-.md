---
title: "Portal diaries Service Portal  Multiple Catalogs Part "
date: 2017-05-15T15:11:39.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=0b8de669dbd0dbc01dcaf3231f9619f8"
---
<p style="margin-bottom: .0001pt;">Finally I got sometime to finish off the Multiple Catalog series. In this part let's delve into search and breadcrumbs.</p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;">As we know the OOB Homepage and typeahead Search widget supports only single catalog. In order to support the search for multiple catalogs, we need to clone typeahead search widget and give an unique name to widget id.</p><p></p><p style="margin-bottom: .0001pt;">And in server script <strong>getCatalogItems </strong>function need to updated.</p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14945486300592288 jive_text_macro" data-renderedposition="156_8_1132_768" jivemacro_uid="_14945486300592288"><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;">function getCatalogItems() {</p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;"></p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;">   var catalogs = [];</p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;"></p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;">   var sc_cat = new GlideRecordSecure('sc_catalog');</p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;">   sc_cat.addQuery('active', true);</p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;">   sc_cat.query();</p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;"></p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;">   while(sc_cat.next())</p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;">   {</p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;">   catalogs.push(sc_cat.sys_id.toString());</p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;">   }</p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;"></p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;"></p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;">   var sc = new GlideRecord('sc_cat_item');</p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;">   sc.addQuery(textQuery, data.q);</p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;">   sc.addQuery('active',true);</p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;">   sc.addQuery('no_search', '!=', true);</p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;">   sc.addQuery('visible_standalone', true);</p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;">   sc.addQuery('sys_class_name', 'NOT IN', 'sc_cat_item_wizard');</p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;">   sc.addQuery('sc_catalogs', catalogs);</p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;">   sc.query();</p><p></p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;">   var catCount = 0;</p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;">   while (sc.next() &amp;&amp; catCount &lt; data.limit) {</p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;">   if (!$sp.canReadRecord(sc))</p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;">   continue;</p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;"></p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;">   var item = {};</p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;">   if (sc.getRecordClassName() == "sc_cat_item_guide")</p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;">   item.type = "sc_guide";</p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;">   else if (sc.getRecordClassName() == "sc_cat_item_content") {</p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;">   var gr = new GlideRecord('sc_cat_item_content');</p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;">   gr.get(sc.getUniqueValue());</p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;">   $sp.getRecordValues(item, gr, 'url,content_type,kb_article');</p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;">   item.type = "sc_content";</p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;">   }</p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;">   else</p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;">   item.type = "sc";</p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;"></p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;">   $sp.getRecordDisplayValues(item, sc, 'name,short_description,picture,price,sys_id');</p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;">   item.score = parseInt(sc.ir_query_score.getDisplayValue());</p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;">   item.label = item.name;</p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;">   data.results.push(item);</p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;">   catCount++;</p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;">   }</p><p style="font-size: 12px; font-family: 'Helvetica Neue'; color: #454545;">}</p><p></p></pre><p style="margin-bottom: .0001pt;">Once this widget is created, use the new widget ID in homepage search widget</p><p></p><p>data.typeAheadSearch = $sp.getWidget('<strong>new-typeahead-search</strong>', typeAheadSearchOpts);</p><p></p><p style="margin-bottom: .0001pt;">Once the widget is successfully created use the new typeahead search widget across all the pages.</p><p></p><p><strong>Breadcrumbs</strong></p><p></p><p>To point the correct breadcrumbs we have update the client controller in following widgets</p><ul style="list-style-type: disc;"><li>Multi SC categories widget that was created earlier</li><li>SC Category Page widget</li><li>SC catalog Item widget</li></ul><p></p><p style="margin-bottom: .0001pt;">Here is the sample script for multi SC categories client controller</p><p></p><p style="margin-bottom: .0001pt;">var bc = [{label: 'Catalogs', url: '?id=multi_catalog'}];</p><p></p><p style="margin-bottom: .0001pt;">if ($scope.data.sc_catalog) {</p><p style="margin-left: 27.0pt; margin-bottom: .0001pt;">bc[bc.length] = {label: $scope.data.catalog_name, url: '#'};</p><p style="margin-bottom: .0001pt;">}         </p><p style="margin-left: 27.0pt; margin-bottom: .0001pt;">$rootScope.$broadcast('sp.update.breadcrumbs', bc);</p><p style="margin-left: 27.0pt; margin-bottom: .0001pt;"></p><p style="margin-left: 27.0pt; margin-bottom: .0001pt;"><img   class="image-1 jive-image" src="3f3333b5dbdc93041dcaf3231f9619c3.iix" style="max-width: 1200px; max-height: 900px;"/></p><p style="margin-left: 27.0pt; margin-bottom: .0001pt;"></p><p style="margin-left: 27.0pt; margin-bottom: .0001pt;"><img   class="image-2 jive-image" src="04e5d50edb50d7041dcaf3231f961929.iix" style="max-width: 1200px; max-height: 900px;"/></p><p style="margin-left: 27.0pt; margin-bottom: .0001pt;"></p><p style="margin-left: 27.0pt; margin-bottom: .0001pt;">This concludes multiple catalog functionality in Service Portal.</p><p style="margin-left: 27.0pt; margin-bottom: .0001pt;"></p><p style="margin-left: 27.0pt; margin-bottom: .0001pt;"></p><p style="margin-left: 27.0pt; margin-bottom: .0001pt;"><span style="color: #666666; font-family: arial, sans-serif;"><strong>Previous Blogs in this series</strong></span></p><p style="margin-left: 27.0pt; margin-bottom: .0001pt;"><a title="Portal diaries: Service Portal — Multiple Catalogs (Part 1)" __default_attr="6616" __jive_macro_name="blogpost" class="jive_macro jive_macro_blogpost" data-orig-content="Portal diaries: Service Portal — Multiple Catalogs (Part 1)" data-renderedposition="1690.1875_44_369_16" href="/community?id=community_blog&sys_id=8e5da629dbd0dbc01dcaf3231f961907">Portal diaries: Service Portal — Multiple Catalogs (Part 1)</a></p><p style="margin-left: 27.0pt; margin-bottom: .0001pt;"><span style="color: #666666; font-family: arial, sans-serif;"><a title="Portal diaries: Service Portal — Multiple Catalogs (Part 2)" __default_attr="6636" __jive_macro_name="blogpost" class="jive_macro jive_macro_blogpost" data-orig-content="Portal diaries: Service Portal — Multiple Catalogs (Part 2)" data-renderedposition="1711.1875_44_370_16" href="/community?id=community_blog&sys_id=7b5e2eaddbd0dbc01dcaf3231f961990">Portal diaries: Service Portal — Multiple Catalogs (Part 2)</a> </span></p>