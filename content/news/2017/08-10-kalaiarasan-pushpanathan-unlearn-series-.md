---
title: "Unlearn Series  Missing Catalog Task Variables"
date: 2017-08-09T20:37:04.000Z
authors: ["Kalaiarasan Pushpanathan"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=fabc2e25dbd0dbc01dcaf3231f9619e5"
---
<p><span style="font-family: verdana, geneva; font-size: 10pt;">Building Service requests (</span>catalogs<span style="font-family: verdana, geneva; font-size: 10pt;">) are an integral part of ServiceNow. While creating a holistic workflow that is able to handle the entire fulfilment process is recommended, but more often than not, you might find the need to enable ad-hoc Catalog task creation to handle an unplanned effort by another team. </span></p><p></p><p><span style="font-family: verdana, geneva; font-size: 10pt;">Enabling the new task creation is simple but you don't get to see variable editor on such tasks that show the details which were filled on the </span>Service<span style="font-family: verdana, geneva; font-size: 10pt;"> request. The below solution would help you just do that.</span></p><p></p><p><span style="font-family: verdana, geneva; font-size: 10pt;"><strong>Edit:</strong> Updated the script to query the variables of catalog directly instead of using <strong style="font-family: verdana, geneva; font-size: 13.3333px;">sc_item_option_mtom </strong>for performance reasons.</span></p><p></p><p><span style="font-family: verdana, geneva; font-size: 10pt;">Begin by creating an After-Insert business rule on Catalog task table (<strong>sc_task</strong>).</span></p><p><span style="font-family: verdana, geneva; font-size: 10pt;"><strong>Condition:</strong> It depends on your need. You can either leave it blank or add a condition to limit it to a specific </span>catalog<span style="font-family: verdana, geneva; font-size: 10pt;"> request.</span></p><p><span style="font-size: 10pt; font-family: verdana, geneva;"><strong>Script: </strong></span></p><p></p><p><em style="font-size: 10pt; font-family: verdana, geneva;">var questions = [];</em></p><p><em style="font-size: 10pt; font-family: verdana, geneva;">var catalogItem = current.request_item.cat_item.toString();</em></p><p><em style="font-size: 10pt; font-family: verdana, geneva;">var variableSets = [];</em></p><p></p><p><em style="font-size: 10pt; font-family: verdana, geneva;">var getVariableSets = new GlideRecord('io_set_item');</em></p><p><em style="font-size: 10pt; font-family: verdana, geneva;">getVariableSets.addQuery('sc_cat_item',catalogItem);</em></p><p><em style="font-size: 10pt; font-family: verdana, geneva;">getVariableSets.query();</em></p><p><em style="font-size: 10pt; font-family: verdana, geneva;">while(getVariableSets.next()) {</em></p><p><em style="font-size: 10pt; font-family: verdana, geneva;">variableSets.push(getVariableSets.getValue('variable_set'));</em></p><p><em style="font-size: 10pt; font-family: verdana, geneva;">}</em></p><p></p><p><em style="font-size: 10pt; font-family: verdana, geneva;">var getCatalogVariables = new GlideRecord('item_option_new'); getCatalogVariables.addQuery('cat_item='+catalogItem+'^active=true^NQvariable_set.sys_idIN'+variableSets.toString()+'^active=true');</em></p><p><em style="font-size: 10pt; font-family: verdana, geneva;">getCatalogVariables.query();</em></p><p><em style="font-size: 10pt; font-family: verdana, geneva;">while(getCatalogVariables.next()) {</em></p><p><em style="font-size: 10pt; font-family: verdana, geneva;">questions.push(getCatalogVariables.getValue('sys_id'));</em></p><p><em style="font-size: 10pt; font-family: verdana, geneva;">}</em></p><p></p><p><em style="font-size: 10pt; font-family: verdana, geneva;">var variablesCount = questions.length;</em></p><p><em style="font-size: 10pt; font-family: verdana, geneva;">var currentTaskID = current.sys_id.toString();</em></p><p></p><p><em style="font-size: 10pt; font-family: verdana, geneva;">for(var i=0;i&lt;variablesCount;i++)</em></p><p><em style="font-size: 10pt; font-family: verdana, geneva;">{</em></p><p><em style="font-size: 10pt; font-family: verdana, geneva;">var getTaskVariables = new GlideRecord('sc_item_variables_task');</em></p><p><em style="font-size: 10pt; font-family: verdana, geneva;">getTaskVariables.addQuery('task',currentTaskID);</em></p><p><em style="font-size: 10pt; font-family: verdana, geneva;">getTaskVariables.addQuery('variable',questions[i]);</em></p><p><em style="font-size: 10pt; font-family: verdana, geneva;">getTaskVariables.setLimit(1);</em></p><p><em style="font-size: 10pt; font-family: verdana, geneva;">getTaskVariables.query();</em></p><p><em style="font-size: 10pt; font-family: verdana, geneva;">if(!getTaskVariables.hasNext())</em></p><p><em style="font-size: 10pt; font-family: verdana, geneva;">{</em></p><p><em style="font-size: 10pt; font-family: verdana, geneva;">getTaskVariables.initialize();</em></p><p><em style="font-size: 10pt; font-family: verdana, geneva;">getTaskVariables.setValue('task',currentTaskID);</em></p><p><em style="font-size: 10pt; font-family: verdana, geneva;">getTaskVariables.setValue('variable',questions[i]);</em></p><p><em style="font-size: 10pt; font-family: verdana, geneva;">getTaskVariables.insert();</em></p><p><em style="font-size: 10pt; font-family: verdana, geneva;">}</em></p><p><em style="font-size: 10pt; font-family: verdana, geneva;">}</em></p><p></p><p><span style="font-family: verdana, geneva; font-size: 10pt;"><strong>sc_item_variables_task</strong> table is a near equivalent table of <strong style="font-family: verdana, geneva; font-size: 13.3333px;">sc_item_option_mtom</strong><span style="font-family: verdana, geneva; font-size: 13.3333px;"> table</span> but this is related to the </span>catalog<span style="font-family: verdana, geneva; font-size: 10pt;"> task (sc_task) table. Interestingly, this table just holds the reference to the variable and not the variable value. ServiceNow magic uses the information from this table and builds the variable editor on </span>catalog<span style="font-family: verdana, geneva; font-size: 10pt;"> tasks.</span></p><p><em style="color: #666666; font-weight: inherit; font-size: 13.3333px; font-family: inherit;"></em></p><p><em style="color: #666666; font-weight: inherit; font-size: 13.3333px; font-family: inherit;"><em>If you liked the content, please share, like, bookmark or leave your valuable comments.</em></em></p>