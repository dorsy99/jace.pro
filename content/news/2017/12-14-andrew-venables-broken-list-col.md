---
title: "Broken list columns after publishing application"
date: 2017-12-13T19:05:48.000Z
authors: ["andrew.venables"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=996ceaa1dbd0dbc01dcaf3231f9619ca"
---
<p>There is a known issue that sometimes breaks the list columns on a published application.</p><p></p><p>The issues is caused by the publishing/development instance incorrectly including user personalised list layouts in the published application. The issue occurs when the publishing instance is Helsinki or Istanbul but not Jakarta.</p><p></p><p>The issue can be worked around by removing personalised lists before publishing. Use the following script to clean ALL personalised list layouts from the instance.</p><p><span style="color: #000000; font-family: 'Courier New'; font-size: 14.6667px;">// Remove all personalised lists from instance</span></p><p><span style="color: #000000; font-family: 'Courier New'; font-size: 14.6667px;">var listGR = new GlideRecord('sys_ui_list');</span></p><p><span style="color: #000000; font-family: 'Courier New'; font-size: 14.6667px;">listGR.addNotNullQuery('sys_user');</span></p><p><span style="color: #000000; font-family: 'Courier New'; font-size: 14.6667px;">listGR.query();</span></p><p><span style="color: #000000; font-family: 'Courier New'; font-size: 14.6667px;">while (listGR.next()) {</span></p><p><span style="color: #000000; font-family: 'Courier New'; font-size: 14.6667px;">   gs.info(listGR.getDisplayValue());</span></p><p><span style="color: #000000; font-family: 'Courier New'; font-size: 14.6667px;">   listGR.setWorkflow(false); // prevent sys_update_xml records being created.</span></p><p><span style="color: #000000; font-family: 'Courier New'; font-size: 14.6667px;">   listGR.deleteRecord();</span></p><p><span style="color: #000000; font-family: 'Courier New'; font-size: 14.6667px;">}</span></p><p>Once run the application can be published and deployed without breaking the lists.</p><p></p><p>However if the lists are already broken on the target instance then they also need addressing before publishing a new version. Use the following script to clean the target instance before updating the application:</p><p><span style="color: #000000; font-family: 'Courier New'; font-size: 14.6667px;">var appSysId = '&lt;sys_id of your scoped application&gt;';</span></p><p><span style="color: #000000; font-family: 'Courier New'; font-size: 14.6667px;">var appScopePrefix = '&lt;prefix of your scoped application&gt;';</span></p><p><span style="color: #000000; font-family: 'Courier New'; font-size: 14.6667px;">// Remove all (corrupted) lists associated with app from instance</span></p><p><span style="color: #000000; font-family: 'Courier New'; font-size: 14.6667px;">var listGR = new GlideRecord('sys_ui_list'); </span></p><p><span style="color: #000000; font-family: 'Courier New'; font-size: 14.6667px;">listGR.addEncodedQuery('nameSTARTSWITH'+<span style="color: #000000; font-family: 'Courier New'; font-size: 14.6667px;">appScopePrefix+'_</span>^ORsys_scope='+<span style="color: #000000; font-family: 'Courier New'; font-size: 14.6667px;">appSysId+'</span>^ORparentSTARTSWITH'+<span style="color: #000000; font-family: 'Courier New'; font-size: 14.6667px;">appScopePrefix+'</span>_');</span></p><p><span style="color: #000000; font-family: 'Courier New'; font-size: 14.6667px;">listGR.query();</span></p><p><span style="color: #000000; font-family: 'Courier New'; font-size: 14.6667px;">while (listGR.next()) {</span></p><p><span style="color: #000000; font-family: 'Courier New'; font-size: 14.6667px;">   gs.info(listGR.getDisplayValue());</span></p><p><span style="color: #000000; font-family: 'Courier New'; font-size: 14.6667px;">   listGR.setWorkflow(false); // <span style="color: #000000; font-family: 'Courier New'; font-size: 14.6667px;">prevent sys_update_xml records being created.</span></span></p><p><span style="color: #000000; font-family: 'Courier New'; font-size: 14.6667px;">   listGR.deleteRecord();</span></p><p><span style="color: #000000; font-family: 'Courier New'; font-size: 14.6667px;">}</span></p>