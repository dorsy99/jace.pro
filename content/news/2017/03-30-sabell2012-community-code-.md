---
title: "Community Code Snippet ServerSide Millisecond Time Logging"
date: 2017-03-29T19:31:13.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=107ceea1dbd0dbc01dcaf3231f9619be"
---
<p style="margin-bottom: 0.0001pt; font-family: arial, sans-serif; color: #666666;"><span style="font-weight: inherit; font-size: 10.5pt; font-family: inherit; font-style: inherit; background-position: initial;"><strong>NOTE</strong></span><span style="font-weight: inherit; font-style: inherit; font-size: 10.5pt; font-family: Arial, sans-serif; background-position: initial;">: MY POSTINGS REFLECT MY OWN VIEWS AND DO NOT NECESSARILY REPRESENT THE VIEWS OF MY EMPLOYER, ACCENTURE.</span></p><p></p><p style="margin-bottom: 0.0001pt; font-family: arial, sans-serif; color: #666666;"><span style="font-weight: inherit; font-style: inherit; font-size: 11pt; font-family: Arial, sans-serif; background-position: initial;">DIFFICULTY LEVEL:   </span><span style="color: #7f6000; font-weight: inherit; font-size: 14.6667px; font-family: inherit; font-style: inherit; background-position: initial;"><strong>INTERMEDIATE</strong></span></p><p style="margin-bottom: 0.0001pt; font-family: arial, sans-serif; color: #666666;"><span style="font-weight: inherit; font-style: inherit; font-size: 11pt; font-family: Arial, sans-serif; background-position: initial;">Assumes basic knowledge and/or familiarity of Server-Side Scripting in ServiceNow.</span></p><p style="margin-bottom: 0.0001pt; font-family: arial, sans-serif; color: #666666;"><span style="font-weight: inherit; font-style: inherit; font-size: 10.5pt; font-family: Arial, sans-serif; background-position: initial;">____________________________________________________________________________</span></p><p style="font-family: arial, sans-serif; color: #666666;"></p><p style="font-family: arial, sans-serif; color: #666666;"><span style="font-size: 12pt;">Recently I have been doing a lot of work with Scoped Applications, and found myself, once-again, wishing for in the System Log, a display of the record create time with milliseconds!   The current display has always been in seconds, and has always been inadequate for determining what was run and when.   Since the platform is so fast for most of what it does (a good thing) it has a tendency to log things down quick as well.   So debug code, etc. will often be displayed all at once within the same second (a BAD thing); which means that the log messages will often arrange themselves out of order (the reason it is a BAD thing).   I have connived, I have whined, I have blustered, I have tried various methods (crying and groveling didn't work either).   To get it included, but to no avail!</span></p><p style="font-family: arial, sans-serif; color: #666666;"></p><p style="font-family: arial, sans-serif; color: #666666;"><span style="font-size: 12pt;">So not being one to sit still very long on a problem <span style="color: #666666; font-family: arial, sans-serif; font-size: 16px;">(it has been since the beginning 2012 that I started making noises about this)</span>, I decided to do something about it!   For the longest time I utilized a method I have written about before: <a title="Community Code Snippets - System Log Ordering Problem Workaround" __default_attr="4498" __jive_macro_name="blogpost" class="jive_macro jive_macro_blogpost" data-orig-content="Community Code Snippets - System Log Ordering Problem Workaround" data-renderedposition="302_458.03125_530_17" href="/community?id=community_blog&sys_id=ee9d6e69dbd0dbc01dcaf3231f961951">Community Code Snippets - System Log Ordering Problem Workaround</a>.   That worked fine, but wasn't so great if I had to log call-outs, and the method I was calling contained logging as well.   I would, likely, still have an ordering issue!</span></p><p style="font-family: arial, sans-serif; color: #666666;"></p><p style="font-family: arial, sans-serif; color: #666666;"><span style="font-size: 12pt;">After noodling on it; I came up with a reasonable way of logging milliseconds in my log messages.   This new method allows me to see when things are really happening, and also gave me the ability to order my messages correctly.</span></p><p style="font-family: arial, sans-serif; color: #666666;"></p><p style="font-family: arial, sans-serif; color: #666666;"><span style="font-size: 12pt;">Let's take my original example from my Log Ordering article (and do terrible things to it)!</span></p><p style="font-family: arial, sans-serif; color: #666666;"></p><p style="font-family: arial, sans-serif; color: #666666;"><span style="font-size: 12pt;">Original (not allowed in a Scoped app btw):</span></p><p style="font-family: arial, sans-serif; color: #666666;"></p><pre __default_attr="javascript" __jive_macro_name="code" class="_jivemacro_uid_14906469480065555 jive_macro_code jive_text_macro" data-renderedposition="527_8_1192_64" jivemacro_uid="_14906469480065555"><p><span style="font-weight: inherit; font-style: inherit; color: black; background-color: inherit; font-size: 12pt;"><span style="font-weight: inherit; font-style: inherit; background-color: inherit;">gs.log(</span><span class="string" style="font-weight: inherit; font-style: inherit; color: blue; background-color: inherit;">'---&gt; 1. Hi there'</span><span style="font-weight: inherit; font-style: inherit; background-color: inherit;">);   </span></span></p><p><span style="font-weight: inherit; font-style: inherit; color: black; background-color: inherit; font-size: 12pt;">gs.log(<span class="string" style="font-weight: inherit; font-style: inherit; color: blue; background-color: inherit;">'---&gt; 2. This is message 2!'</span><span style="font-weight: inherit; font-style: inherit; background-color: inherit;">);   </span></span></p><p><span style="font-weight: inherit; font-style: inherit; color: black; background-color: inherit; font-size: 12pt;">gs.log(<span class="string" style="font-weight: inherit; font-style: inherit; color: blue; background-color: inherit;">'---&gt; 3. This is message 3!'</span><span style="font-weight: inherit; font-style: inherit; background-color: inherit;">);   </span></span></p><p><span style="font-weight: inherit; font-style: inherit; color: black; background-color: inherit; font-size: 12pt;">gs.log(<span class="string" style="font-weight: inherit; font-style: inherit; color: blue; background-color: inherit;">'---&gt; 4. Hi there, again!'</span><span style="font-weight: inherit; font-style: inherit; background-color: inherit;">); </span></span></p></pre><p></p><p style="font-family: arial, sans-serif; color: #666666;"></p><p style="font-family: arial, sans-serif; color: #666666;"><span style="font-size: 12pt;">Create a Fix Script and copy that code to it.   If you run that you might see something like this:</span></p><p style="font-family: arial, sans-serif; color: #666666;"></p><p style="font-family: arial, sans-serif; color: #666666;"><span style="font-size: 12pt;"><img   class="image-1 jive-image" height="208" src="ba10558edb589f048c8ef4621f961973.iix" style="max-width: 1200px; max-height: 900px; width: 647px; height: 208.092px;" width="647"/></span></p><p style="font-family: arial, sans-serif; color: #666666;"></p><p style="font-family: arial, sans-serif; color: #666666;"><span style="font-size: 12pt;">Nice.   Makes you want to cry in frustration doesn't it?   Ok, hang in there!</span></p><p style="font-family: arial, sans-serif; color: #666666;"></p><p style="font-family: arial, sans-serif; color: #666666;"><span style="font-size: 12pt;"><span style="color: #666666; font-family: arial, sans-serif; font-size: 16px;">Now using gs.info and variable substitution (see: </span><a __default_attr="5690" __jive_macro_name="blogpost" class="jive_macro jive_macro_blogpost" data-orig-content="Community Code Snippets - Logging: Some Notes on Variable Substitution" data-renderedposition="979_355.75_549_17" href="/community?id=community_blog&sys_id=ba8de669dbd0dbc01dcaf3231f96195b" modifiedtitle="true" title="Community Code Snippets - Logging: Some Notes on Variable Substitution">Community Code Snippets - Logging: Some Notes on Variable Substitution</a><span style="color: #666666; font-family: arial, sans-serif; font-size: 16px;">) c</span>hange the gs.log statements to gs.info (which are Scope safe).   Then add in a location variable (cool tip: you can use the type variable in a Script Include - this.type), and integrate that with our gs.info statements.   Thusly:</span></p><p style="font-family: arial, sans-serif; color: #666666;"></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code jive_text_macro _jivemacro_uid_14906474697595836" data-renderedposition="1069_8_1192_112" jivemacro_uid="_14906474697595836"><p>var location = 'FS: Millisecond logging'; // FS = Fix Script</p><p></p><p>gs.info('---&gt; [{0}] 1. Hi there', [location]);   </p><p>gs.info('---&gt; [{0}] 2. This is message 2!', [location]);   </p><p>gs.info('---&gt; [{0}] 3. This is message 3!', [location]);   </p><p>gs.info('---&gt; [{0}] 4. Hi there, again!', [location]);   </p><p></p></pre><p></p><p><span style="font-size: 12pt;">Next let's add in the milliseconds indicator so that we have something to find and sort against:</span></p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code jive_text_macro _jivemacro_uid_14906476207701337" data-renderedposition="1247_8_1192_112" jivemacro_uid="_14906476207701337"><p><span style="font-size: 12pt;">var location = 'FS: Millisecond logging'; // FS = Fix Script</span></p><p></p><p><span style="font-size: 12pt;">gs.info('---&gt; [{0}-{1}] 1. Hi there', [new GlideDateTime().getNumericValue(), location]);   </span></p><p><span style="font-size: 12pt;">gs.info('---&gt; [{0}-{1}] 2. This is message 2!', [new GlideDateTime().getNumericValue(), location]);       </span></p><p><span style="font-size: 12pt;">gs.info('---&gt; [{0}-{1}] 3. This is message 3!', [new GlideDateTime().getNumericValue(), location]);   </span></p><p><span style="font-size: 12pt;">gs.info('---&gt; [{0}-{1}] 4. Hi there, again!', [new GlideDateTime().getNumericValue(), location]);     </span></p><p></p></pre><p></p><p><span style="font-size: 12pt;">Remember the gs.info statement get's finicky inside of a Scoped Application, and thus the reason for the object array inside of the gs.info parameters.   It is best to get into the habit of just using the brackets anyway so that your code is always scope-safe.</span></p><p></p><p><span style="font-size: 12pt;">Okay, if we run this from our Fix Script what does it look like?   Ugly, but you can see the milliseconds in the message now.   Note that the Created column is next to useless here.   Also, Source is useless for debugging when migrating away from gs.log.</span></p><p></p><p><span style="font-size: 12pt;"><img   class="image-2 jive-image" height="175" src="ca7da08edb185f048c8ef4621f96196a.iix" style="max-width: 1200px; max-height: 900px; width: 720px; height: 175.2px;" width="720"/></span></p><p style="font-family: arial, sans-serif; color: #666666;"></p><p style="font-family: arial, sans-serif; color: #666666;"><span style="font-size: 12pt;">So let's add a filter for ---&gt; [149 and sort by Message descending.   Whoa!   Magic!   Now they are in order!</span></p><p style="font-family: arial, sans-serif; color: #666666;"></p><p style="font-family: arial, sans-serif; color: #666666;"><span style="font-size: 12pt;"><img   class="image-3 jive-image" height="181" src="445e0886db9c1344e9737a9e0f961931.iix" style="max-width: 1200px; max-height: 900px; width: 722px; height: 181.102px;" width="722"/></span></p><p style="font-family: arial, sans-serif; color: #666666;"></p><p style="font-family: arial, sans-serif; color: #666666;"><span style="font-size: 12pt;">However, the code is ugly.   We can clean this up a bit like this (notice any patterns dropping out of the code?):</span></p><p style="font-family: arial, sans-serif; color: #666666;"></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14906480672257941 jive_text_macro" data-renderedposition="2054_8_1192_176" jivemacro_uid="_14906480672257941"><p><span style="font-size: 12pt;">var location = 'FS: Millisecond logging'; // FS = Fix Script</span></p><p></p><p><span style="font-size: 12pt;">gs.info('---&gt; [{0}-{1}]\n1. Hi there', </span></p><p><span style="font-size: 12pt;">   [new GlideDateTime().getNumericValue(), location]);   </span></p><p><span style="font-size: 12pt;">gs.info('---&gt; [{0}-{1}]\n2. This is message 2!', </span></p><p><span style="font-size: 12pt;">   [new GlideDateTime().getNumericValue(), location]);       </span></p><p><span style="font-size: 12pt;">gs.info('---&gt; [{0}-{1}]\n3. This is message 3!', </span></p><p><span style="font-size: 12pt;">   [new GlideDateTime().getNumericValue(), location]);   </span></p><p><span style="font-size: 12pt;">gs.info('---&gt; [{0}-{1}]\n4. Hi there, again!', </span></p><p><span style="font-size: 12pt;">   [new GlideDateTime().getNumericValue(), location]); </span></p><p></p></pre><p style="font-family: arial, sans-serif; color: #666666;"></p><p style="font-family: arial, sans-serif; color: #666666;"><span style="font-size: 12pt;">Which will give us this:</span></p><p style="font-family: arial, sans-serif; color: #666666;"></p><p style="font-family: arial, sans-serif; color: #666666;"><span style="font-size: 12pt;"><img   class="jive-image image-4" height="193" src="b37a2b3ddbd0df04e9737a9e0f96197f.iix" style="max-width: 1200px; max-height: 900px; width: 719px; height: 192.932px;" width="719"/></span></p><p style="font-family: arial, sans-serif; color: #666666;"></p><p style="font-family: arial, sans-serif; color: #666666;"><span style="font-size: 12pt;"><span style="color: #666666; font-family: arial, sans-serif; font-size: 16px;">Better, but still the code looks a little cluttered.   </span>Also, we have a pattern!   That means at the very minimum: function!   Since the parameters are listed as an array we can use a combination of message, parameter values, and location and feed those into a function which will then handle the rest.   Something like this:</span></p><p style="font-family: arial, sans-serif; color: #666666;"></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14906490196525252 jive_text_macro" data-renderedposition="2603_8_1192_192" jivemacro_uid="_14906490196525252"><p><span style="font-size: 12pt;">var location = 'FS: Millisecond logging'; // FS = Fix Script</span></p><p></p><p><span style="font-size: 12pt;">logInfo('1. Hi there: {0}', location, ['Steve']); </span></p><p><span style="font-size: 12pt;">logInfo('2. This is message 2!', location);       </span></p><p><span style="font-size: 12pt;">logInfo('3. This is message 3!', location);   </span></p><p><span style="font-size: 12pt;">logInfo('4. Hi there, again {0}', location, ['Steve']);</span></p><p></p><p><span style="font-size: 12pt;">function logInfo(message, location, parms) {</span></p><p><span style="font-size: 12pt;">   message = '---&gt; [' + new GlideDateTime().getNumericValue() + '-' + location + ']\n' + message;</span></p><p><span style="font-size: 12pt;">   gs.info(message, parms);</span></p><p><span style="font-size: 12pt;">}</span></p><p></p></pre><p></p><p style="font-family: arial, sans-serif; color: #666666;"><span style="font-size: 12pt;">And that would give you exactly the same thing as earlier, but the log code is much cleaner (i.e. easier to maintain).</span></p><p style="font-family: arial, sans-serif; color: #666666;"></p><p style="font-family: arial, sans-serif; color: #666666;"><span style="font-size: 12pt;"><img   class="image-5 jive-image" height="195" src="377dc1c6db9413043eb27a9e0f961968.iix" style="max-width: 1200px; max-height: 900px; width: 729px; height: 194.4px;" width="729"/></span></p><p style="font-family: arial, sans-serif; color: #666666;"></p><p style="font-family: arial, sans-serif; color: #666666;"><span style="font-size: 12pt;">Obviously you can do all sorts of things to rearrange the function how you please.   My purpose was to give you an idea of how to do this sort of thing.   You could always put the function into a Script Include (and it <span style="text-decoration: underline;">is</span> scope safe) as part of a function library.   You could also rig this up to handle errors and warnings as well.</span></p><p style="font-family: arial, sans-serif; color: #666666;"></p><p style="font-family: arial, sans-serif; color: #666666;"><span style="font-size: 12pt;">Regardless of how you go about it you can see the value of having milliseconds in the log.   Maybe someday we will get this as part of the Created and Updated columns...maybe. Until then this your best bet.   :-)</span></p><p style="font-family: arial, sans-serif; color: #666666;"></p><p style="font-family: arial, sans-serif; color: #666666;"><span style="font-weight: inherit; font-style: inherit; font-size: 12pt; font-family: arial, helvetica, sans-serif;">Steven Bell</span></p><p dir="ltr" style="font-family: arial, sans-serif; color: #666666;"></p><p dir="ltr" style="font-family: arial, sans-serif; color: #666666;"><img   alt="Combined Logo Graphic_Operations.png" class="jive-image" src="989e2842dbd857049c9ffb651f961947.iix"/></p><p dir="ltr"></p><p dir="ltr" style="font-family: arial, sans-serif; color: #666666;"><span style="font-weight: bold; font-style: inherit; font-family: Arial;">For a list of all of my articles:   </span><a _jive_internal="true" href="/groups/servicenow-user-group-us-tx-north-texas/blog/2015/10/23/community-code-snippets-articles-list-to-date" style="font-weight: inherit; font-style: inherit; font-family: inherit; color: #266fc8;"><span style="font-weight: bold; font-style: inherit; font-family: Arial;">Community Code Snippets: Articles List to Date</span></a></p><p dir="ltr"></p><p dir="ltr" style="font-family: arial, sans-serif; color: #666666;"><span style="font-weight: inherit; font-style: inherit; font-size: 14.6667px; font-family: Arial; color: #eb7a3d;">Please Share, Like, Bookmark, Mark Helpful, or Comment this blog if you've found it helpful or insightful.</span></p><p dir="ltr"></p><p dir="ltr" style="font-family: arial, sans-serif; color: #666666;"><span style="font-weight: inherit; font-style: inherit; font-size: 14.6667px; font-family: Arial; color: #eb7a3d;">Also, if you are not already, I would like to encourage you to become a member of our blog!</span></p>