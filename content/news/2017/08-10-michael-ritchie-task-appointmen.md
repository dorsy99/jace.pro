---
title: "Task Appointment Scheduling"
date: 2017-08-09T20:01:17.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=e46e6eaddbd0dbc01dcaf3231f9619ba"
---
<p>Ever since the &#34;Genius Lounge&#34; concept was created by Apple many years ago many companies, including ServiceNow internally, have created walk up style technical support, especially as BYOD has gotten popular.   While ServiceNow is a powerful platform to schedule and capture the details of a task/request, it lacks a nice feature rich UI that allows users to easily schedule an appointment similar to OpenTable&#39;s view of making a restaurant reservation.   That is until now!</p>
<p> </p>
<p>This provides a &#34;no-code&#34; solution of defining how appointments should be scheduled and Service Portal widgets to allow users to schedule new appointments and view their existing appointments.</p>
<p> </p>
<p><img class="image-15 jive-image" style="max-width: 1200px; max-height: 900px;" src="5818890adb1413043eb27a9e0f961924.iix" alt="" /></p>
<p><img class="jive-image image-10" style="max-width: 1200px; max-height: 900px;" src="4536858adb10d304b322f4621f961989.iix" alt="" /></p>
<p> </p>
<p>The ServiceNow platform offers several features that make this solution possible:</p>
<ul><li>Feature Rich <a title="ocs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/task-table/concept/c_TaskTable.html" href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/task-table/concept/c_TaskTable.html" rel="nofollow">Task Table</a>:
<ul><li>The task table is the base table for most applications within ServiceNow.   Incident, Problem, Change, Case, etc all extend Task.   This table includes common attributes for any type of task/case and extending it speeds up development time and it brings many features along with it such as SLAs, On-Call Scheduling, etc.</li><li>The task table includes Start and End attributes that various applications leverage for the scheduling of work.   Because of this, this Task Appointment Scheduling solution can be applied to any application within your instance that extends the task table.</li></ul>
</li><li><a title="ocs.servicenow.com/bundle/istanbul-servicenow-platform/page/build/service-portal/concept/c_ServicePortal.html" href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/build/service-portal/concept/c_ServicePortal.html" rel="nofollow">Service Portal</a>:
<ul><li>The Service Portal, introduced in the Helsinki release, has brought a whole new dynamic of creating responsive and feature rich UI&#39;s that improves the usability of ServiceNow.</li><li>Using AnjularJS and Bootstrap, reusable widgets can be created that can be easily leveraged on any page within your Service Portals.</li><li>The Service Portal widget is reusable in that each instance of the widget is tied to Task Appointment Definition record.   So you could have two widgets on a page where one creates an Incident appointment while another one creates a Change appointment.</li></ul>
</li></ul>
<p> </p>
<p>Sush Chandrashekar(<a class="jive_macro jive_macro_user" title="sush_c" href="community?id&#61;community_user_profile&amp;user&#61;18919ae9db981fc09c9ffb651f961964" rel="nofollow">sush_c</a>) and I partnered up to come up with a Task based solution that allows you to:</p>
<ul><li>Define a <a title="ocs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/time/concept/c_UseSchedules.html" href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/time/concept/c_UseSchedules.html" rel="nofollow">schedule</a> for accepting appointments and a duration of time for each appointment</li><li>Set which Task table to use to store the appointments.   This can be any table that extends task, including out of the box tables like Incident, Problem, Change, Case, etc, or any custom table that extends task.</li><li>Set how many concurrent appointments that can be scheduled before marking an appointment time unavailable.   Default is 1.</li><li>Set template values that will be applied when the appointment record is created.</li><li>Set a date and time format to utilize in the Service Portal.</li><li>Set the style of how you want the available appointments to be presented within the Service Portal:
<ul><li>Timecards
<ul><li><img class="image-13 jive-image" style="max-width: 1200px; max-height: 900px;" src="9620a7b5dbd01704ed6af3231f9619ee.iix" alt="" /></li></ul>
</li></ul>
<ul><li>Chiclet Style Buttons
<ul><li><img class="image-12 jive-image" style="max-width: 1200px; max-height: 900px;" src="6391240adb1c5344e9737a9e0f96197c.iix" alt="" /></li></ul>
</li><li>Dropdown
<ul><li><img class="jive-image image-14" style="max-width: 1200px; max-height: 900px;" src="aab4e7bddb50dfc0b322f4621f961930.iix" alt="" /></li></ul>
</li></ul>
</li></ul>
<p> </p>
<p><span style="text-decoration: underline;"><strong>The Code:</strong></span></p>
<p>The solution involves several components that is available for download from ServiceNow Share: <a title="https://developer.servicenow.com/app.do#!/share/contents/8781058_task_appointment_scheduling?t&#61;PRODUCT_DETAILS" href="https://developer.servicenow.com/app.do#!/share/contents/8781058_task_appointment_scheduling?t&#61;PRODUCT_DETAILS" rel="nofollow">Task Appointment Scheduling</a>.   <strong>Download the update set from Share, load/preview/Commit it, and then you can leverage it in your instance.</strong></p>
<p> </p>
<p><span style="text-decoration: underline;"><strong>The Setup:</strong></span></p>
<ul><li>After committing the update set from Share, Navigate to Task Appointments\Task Appointments and click New.</li><li><img src="https://community.servicenow.com/8599e317dbed04d05129a851ca9619fc.iix" /><img style="max-width: 100%; max-height: 480px;" src="/undefined.iix" /></li><li><img src="https://community.servicenow.com/54636621db153388fece0b55ca961966.iix" /></li><li>
<ul><li>Give it a name</li><li>Set the schedule for the time frame that you wish to accept appointments and the duration of the appointments.   You may need to <a title="ocs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/time/task/t_DefineASchedule.html" href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/time/task/t_DefineASchedule.html" rel="nofollow">create a new schedule</a> if you don&#39;t already have one defined that matches the appointment schedule.</li><li>Optionally set the New Appointment Lead Time if you prefer to set a buffer on when the next available appointment can be scheduled.  For example if you set this value to 1 hour, the next available slot will be one hour from the current time assuming it is available.</li><li>Optionally set a group you wish to route the appointments to and set the number of concurrent appointments this group can accept.   You can also set the group in the Task Values instead.   The task values will override the value set in the Group field.</li><li>Set the Task Type to the table used to store the appointment records.</li><li>Set the date and time format to be utilized by the Service Portal Widgets.  With this setting being at the Task Appointment configuration level you have the ability to have regionalized task appointment scheduling.</li><li>In the New Appointment Section:</li><li>
<ul><li>Task User Field: Use this field to set which User reference field will get populated on the task record for the appointment.  By default it is set to Opened By, however you can override it to another field.  For example if your task table is Incident you can set the Caller field or if your task table is Request you can set the Requested For.  In the Appointment Scheduling widget options you can enable an Appointment For selection field allowing the user to designate who the appointment is for.  The value from that selection will populate into the task field designated.</li><li>Task Values: Use this template field to set any other fields in the task record such as short description, assignment group, category, etc which is applied as an appointment is created.</li></ul>
</li><li>In the Remove Appointment Section, designate the behavior when a user removes an appointment.</li><li>
<ul><li>If Delete Task is checked, the task record will be deleted when a user removes an appointment.</li><li>If Delete Task is unchecked, the Remove Task Values will be applied to the task.  It is important to set values for all fields that are required when closing/cancelling a task otherwise the appointment will not be deleted.</li></ul>
</li><li>Click Submit.</li></ul>
</li><li>Navigate to Service Portal\Service Portal Configuration and choose Designer to add the widgets to a page.
<ul><li>Search for the page that you wish to add this solution to or create a new page if necessary.</li><li>On the left under Widgets, you should find Appointment Scheduling and Appointments List, drag them onto to your page.</li><li>Once added, click the Pencil to edit the properties of the Appointment Scheduling widget.
<ul><li><img src="https://community.servicenow.com/b210cbc6dbc1885813b5fb2439961994.iix" /></li><li>Give the widget a Title that will appear above the widget.</li><li>Set the Task Appointment record to use from step 1.</li><li>Choose the layout of how you want to display the available appointments.   See a screenshot of the options above.</li><li>Set whether you wish to allow reminders to be sent prior to an appointment.   This utilizes a little known feature covered by <a class="jive_macro jive_macro_user" title="ctomasi" href="community?id&#61;community_user_profile&amp;user&#61;7ae05a61db981fc09c9ffb651f9619a2" rel="nofollow">ctomasi</a> in <a title="" href="community?id&#61;community_question&amp;sys_id&#61;8e4b0321db9cdbc01dcaf3231f961980" rel="nofollow">TechNow Episode 39</a>.</li><li>Set the maximum number of days out that you wish to allow appointments.   Default is 30 days.</li><li>Optionally you can allow a user to designate who the appointment is for.  You can also set the label for this prompt as well.  The logged in user will be the default value for this field.</li><li>If you would like to collect Short Description, Description, and Location when creating appointments, check the applicable box(s).</li><li>Click Save.</li></ul>
</li><li>Click the Pencil to edit the properties of the Appointments List widget.
<ul><li><img class="jive-image image-18" style="max-width: 1200px; max-height: 900px;" src="3fb64c86db9cd3041dcaf3231f96196d.iix" alt="" /></li><li>Give the widget a name and set the Task Appointment record to use from step 1.</li><li>If you would like to show Short Description and Location in the list, check the applicable box(s).</li><li>Click Save.</li></ul>
</li></ul>
</li><li>Enjoy!</li></ul>
<p> </p>
<p><span style="text-decoration: underline;"><strong>Other Important Notes:</strong></span></p>
<ul><li>The update set adds a new field to the out of the box Task table called Task Appointment (u_task_appointment) which is a reference to the Task Appointment (u_task_appointment) table.
<ul><li>This reference is utilized to link appointments back to the defined configuration record.   It is also leveraged when displaying a user&#39;s scheduled appointments.</li><li>This field is also why the update set takes longer than usual to commit.</li></ul>
</li><li>The work_start and work_end fields on the Task table are leveraged to store the appointment start and end time.   The out of the box labels for these fields are Actual Start and Actual End, but this could vary by instance and table.</li><li>A business rule called &#34;Enforce Task Appointment Schedule&#34; is included to:
<ul><li>Zero out the seconds associated to an appointment. This is important to track reserved time slots.</li><li>Ensure that the work_start and work_end values are valid for the schedule within the Task Appointment definition record
<ul><li>The work_end of a task can be extended beyond the Appointment Duration defined within the Task Appointment record, however it must conform to that duration time frame.   In other words if the Task Appointment Duration is set to 30 minutes, a task can have a duration of 1 hour, 1.5 hours, 2 hours, etc in 30 minute increments.</li><li>If the work_end date of a task is outside the duration time frame, the business rule will prevent the record from being saved and the following message will appear at the top of the screen to the user:
<ul><li>End time must be in X minute intervals.</li><li>This message can be modified in the TaskAppointmentUtils Script Include, checkTaskDates function.</li></ul>
</li></ul>
</li><li>A link to this script is provided in the Task Appointment application navigator.</li></ul>
</li><li>The TaskAppointmentUtils Script Include defines all the API&#39;s leveraged by the Service Portal Widget.
<ul><li>Each function is documented within the script include.</li><li>This script can be edited to provide further detail in the widget or change data that gets set as appointments are created, updated, and deleted.</li><li>A link to this script is provided in the Task Appointment application navigator.</li></ul>
</li></ul>