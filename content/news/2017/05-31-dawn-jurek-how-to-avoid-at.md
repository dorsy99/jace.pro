---
title: "How to avoid ATF testing failures"
date: 2017-05-31T04:44:22.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=84dc2665dbd0dbc01dcaf3231f96190f"
---
<p>The <a title="ocs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/auto-test-framework/concept/atf-overview.html" href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/auto-test-framework/concept/atf-overview.html">Automated Test Framework</a> (ATF) allows you to create and run automated tests on your ServiceNow instance to confirm that the instance still works as designed after being upgraded or modified. Awesome! This should save you a lot of testing time, right?</p><p></p><p>So you set your automated tests in motion and go out for a long lunch, expecting to blow your boss's mind with how fast you were able to regression-test everything (we promise we won't give away your secret). But when you return, this is what you find:</p><p style="text-align: center;"><img   alt="ATF_Time+Out_Locked+Screen.png" class="image-1 jive-image" src="fbd17046db1c5f048c8ef4621f9619c6.iix" style="width: 620px; height: 96px;"/></p><p></p><p><span style="color: #666666; font-family: arial, sans-serif;">Arggggg....what happened? In this installment of our </span><a title="" _jive_internal="true" href="/content?filterID=all~objecttype~objecttype%5Bblogpost%5D&amp;filterID=all~tag%5Bnowsupport+best+practices+series%5D&amp;query=nowsupport+best+practices" style="font-family: arial, sans-serif; color: #3778c7;">best practices series</a><span style="color: #666666; font-family: arial, sans-serif;">, we look at what went wrong with your ATF tests, and how to prevent it from happening.</span></p><p></p><h2>Why did my ATF tests fail?</h2><p></p><p>The tests timed out. There are several possible root causes for this, including the tester failing to open the Client Test Runner, logging out of the session, or clearing the browser history on another tab, which affects all tabs. But inadequate central processing unit (CPU) power due to browser "throttling" is often at fault. Here's how that works.</p><p></p><p>The ATF requires high performance from a browser tab or window. However, several browser manufacturers—in an effort to avoid CPU overuse—dramatically throttle back the amount of CPU power allocated to:</p><ul><li>Browser tabs that do not have focus (also called non-active or background tabs)</li><li>Browser windows that are minimized or completely occluded by other windows</li><li>The entire browser when the system lock screen is displayed</li></ul><p></p><p>Browser manufacturers consider throttling to be a desirable feature, and sometimes it is, but...</p><p></p><p>In the case of the ATF, CPU resources are desired for the tab or window where tests run. Unfortunately, some browser manufacturers don't provide a mechanism to indicate that preference or to start the browser with a command-line flag to disable the throttling behavior. This often means laptops and unattended machines that run tests can be placed in a state where test execution timeouts are frequent.</p><p></p><p>As of this writing, the affected supported browsers are Chrome, Firefox, and Safari (Mac OS X).</p><pre __default_attr="info" __jive_macro_name="alert" alert="info" class="jive_text_macro jive_macro_alert" data-renderedposition="708.1875_8_1192_64"><p>NOTE: Throttles are an area of active development for almost all of the major browser manufacturers, so if you're reading this article months after it was published, you should probably double-check with the browser manufacturer and/or comments section below to get the latest information.</p></pre><p></p><h2>How can I work around browser throttling so that my ATF tests won't fail?</h2><p></p><p>When running ATF tests, make sure your browser has plenty of power. ServiceNow has no control over browser throttling behavior, but we do have some workarounds. Here are a few:</p><ul><li>Run unattended tests on a machine that does not automatically lock the screen.</li><li>Browser test through the ATF either by leaving the Client Test Runner as the foreground window or by making sure that the browser tab for the ATF is in its own window and has sufficient screen real estate (i.e., shows through to the user in a large enough percentage of the screen) that the browser grants it the full allotment of CPU time.</li><li>Other workarounds are listed in <a title="i.service-now.com/kb_view.do?sysparm_article=KB0621889" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0621889">KB0621889</a> on HI.</li></ul><p></p><p>For more information, see:</p><ul><li><a title="i.service-now.com/kb_view.do?sysparm_article=KB0621889" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0621889">PRB822056: ATF: Invisible browser throttling can cause poor test performance (KB0621889</a>)</li><li><a title="ocs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/auto-test-framework/concept/atf-overview.html" href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/auto-test-framework/concept/atf-overview.html">Automated Test Framework</a></li><li><a title="ocs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/auto-test-framework/reference/atf-client-test-runner-module.html" href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/auto-test-framework/reference/atf-client-test-runner-module.html">Automated Test Framework Client Test Runner module</a></li><li><a title="henextweb.com/apps/2017/01/26/chrome-throttle-background-tabs-google" href="https://thenextweb.com/apps/2017/01/26/chrome-throttle-background-tabs-google">Chrome will aggressively throttle background tabs — as a feature, not a bug</a></li></ul><p style="font-weight: inherit; font-style: inherit; font-family: inherit; color: #666666;">--</p><p></p><p style="font-weight: inherit; font-style: inherit; font-family: inherit; color: #666666;">Behind the scenes here at ServiceNow, the Knowledge Management and Multimedia teams work closely with subject matter experts to disseminate critical information to our customers. We've found that certain topics come up frequently, in the form of best practices that can help you keep your ServiceNow instances running smoothly. This series targets those topics so that you and your organization can benefit from our collective expertise. If you have a best practices topic you'd like us to cover in this series, please let us know in the comments below.</p><p></p><p style="font-weight: inherit; font-style: inherit; font-family: inherit; color: #666666;"><span style="font-weight: inherit; font-style: inherit; font-family: inherit;">To access all of the blog posts in this series, search for "</span><span style="font-weight: inherit; font-family: inherit; font-style: inherit;"><strong>nowsupport best practices series</strong></span><span style="font-weight: inherit; font-style: inherit; font-family: inherit;">."</span></p>