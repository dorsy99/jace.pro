---
title: "Portal diaries Service Portal  Approval Summarizer in Portal"
date: 2017-02-07T18:56:30.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=ac4daee5dbd0dbc01dcaf3231f96193b"
---
<p>Here is the second article in the series of Portal diaries. In this article, I would like to discuss about displaying the summary of approval record in Service Portal. As customers started using ServiceNow widely the idea of approval process drifted into other modules like Resource plans, Issues, stories, hr case, test plans which are just a few to mention.</p><p></p><p>In my opinion the OOB approval page in Service Portal is only focusing on RITM approval displaying all the variables whereas for other tables it is only showing the following four fields (Short description, Opened by, Start and End dates if applicable).</p><p></p><p>Backend form view of ServiceNow approval record displays the approving field summary with the help of approval summarizer UI macro. If the specific table has approval view the UI macro (Approval Summarizer) displays fields of this view, if not the default view of form is shown.</p><p></p><p>Here is the screenshot of a change request fields in an approval record using approval summarizer.</p><p><img   class="image-1 jive-image" src="f245ed46db18d7041dcaf3231f9619db.iix" style="max-height: 900px; max-width: 1200px;"/></p><p></p><p>This similar solution can be implemented on Service Portal via a custom script include taking GlideReocrd as an input and outputting the fields of a default view along with its field positions. When I was working on a different requirement I came across one of the methods in $sp portal API called <strong><em>getForm</em></strong> and a <strong><em>&lt;sp-model&gt;</em></strong> tag to the render form.</p><p></p><p>Here is the format for calling getForm api and using it in HTML view</p><p></p><p><strong>HTML Template</strong></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14863445704649167 jive_text_macro" data-renderedposition="613.5416870117188_7.986111640930176_1191_16" jivemacro_uid="_14863445704649167"><p>&lt;sp-model form-model="data.f" mandatory="mandatory"&gt;&lt;/sp-model&gt;</p></pre><p></p><p><strong>Server Code</strong></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14863450392999885 jive_text_macro" data-renderedposition="669.0972290039062_7.986111640930176_1191_16" jivemacro_uid="_14863450392999885"><p>data.f = $sp.getForm( table_name, sys_id_of_record);</p></pre><p></p><p>This solution seemed clean until I realized that the <strong>getForm</strong> method display fields with edit access   which is undesired. But on a positive note getForm method returns the fields after all the rules like UI policies, client scripts, ACL's and even dictionary level read only. This generates me an idea of forcing all the fields to be read only <span __jive_emoticon_name="grin" __jive_macro_name="emoticon" class="jive_emote jive_macro" data-renderedposition="724.65283203125_892.2569580078125_16_16" src="/8.0.4.21bdc7e/images/emoticons/grin.png"></span>.</p><p></p><p>In order to make all the fields read only, I hacked the <strong>data.f</strong> object and updated the <strong>sys_readonly</strong> property.</p><p></p><p>Here is the server script to make all the fields of a record read only</p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14863450803887310 jive_text_macro" data-renderedposition="845.763916015625_7.986111640930176_1191_78" jivemacro_uid="_14863450803887310"><p>data.f = $sp.getForm( table_name, sys_id);</p><p></p><p>for (var field_name in data.f._fields) {</p><p>         data.f._fields[field_name]["sys_readonly"] = true;</p><p>}</p></pre><p><span style="; font-size: 8pt; font-family: Calibri;"><em><span lang="EN"></span></em></span><span style="; font-size: 8pt; font-family: Calibri;"><em><br/></em></span></p><p></p><p>Screenshot of Story form in approval widget</p><p><img   class="image-2 jive-image" src="63d34dcedb9013043eb27a9e0f961942.iix" style="max-height: 900px; max-width: 1200px;"/></p><p></p><p>Screenshot of HR case form in approval widget</p><p><img   class="image-3 jive-image" src="95726842db50dfc03eb27a9e0f9619ec.iix" style="max-height: 900px; max-width: 1200px;"/></p><p></p><p>Here is more info about what all the getForm returns</p><p></p><p>gs.log('display value: ' + data.f.display_value)</p><p>gs.log('ui acations: ' + data.f._ui_actions)</p><p>gs.log('short description: ' + data.f.short_description)</p><p>gs.log('plural : ' + data.f.plural)</p><p>gs.log('view_titile: ' + data.f.view_title)</p><p>gs.log('_pref: ' + data.f._perf)</p><p>gs.log('_sections: ' + data.f._sections)</p><p>gs.log('label: ' + data.f.label)</p><p>gs.log('title: ' + data.f.title)</p><p>gs.log('_fields: ' + data.f._fields)</p><p>gs.log('_formatters: ' + data.f._formatters)</p><p>gs.log('sys_id: ' + data.f.sys_id)</p><p>gs.log('view: ' + data.f.view)</p><p>gs.log('scratchpad: ' + data.f.g_scratchpad)</p><p>gs.log('_view: ' + data.f._view)</p><p>gs.log('attachmentGUID: ' + data.f._attachmentGUID)</p><p>gs.log('client_script: ' + data.f.client_script)</p><p>gs.log('related_list: ' + data.f._related_lists)</p><p>gs.log('table: ' + data.f.table)</p><p>gs.log('policy: ' + data.f.policy)</p><p></p><p>As in this article I talked more about properties of fields. Here are the all the properties of a field</p><p></p><p>gs.log('sys_mandatory : ' + data.f._fields.cmdb_ci.sys_mandatory)</p><p>gs.log('visible : ' + data.f._fields.cmdb_ci.visible)</p><p>gs.log('dependentField : ' + data.f._fields.cmdb_ci.dependentField)</p><p>gs.log('dbType : ' + data.f._fields.cmdb_ci.dbType)</p><p>gs.log('label : ' + data.f._fields.cmdb_ci.label)</p><p>gs.log(<strong>'sys_readonly</strong> : ' + data.f._fields.cmdb_ci.sys_readonly)</p><p>gs.log('type : ' + data.f._fields.cmdb_ci.type)</p><p>gs.log('mandatory : ' + data.f._fields.cmdb_ci.mandatory)</p><p>gs.log('refTable : ' + data.f._fields.cmdb_ci.refTable)</p><p>gs.log('displayValue : ' + data.f._fields.cmdb_ci.displayValue)</p><p>gs.log('readonly : ' + data.f._fields.cmdb_ci.readonly)</p><p>gs.log('hint : ' + data.f._fields.cmdb_ci.hint)</p><p>gs.log('name : ' + data.f._fields.cmdb_ci.name)</p><p>gs.log('attributes : ' + data.f._fields.cmdb_ci.attributes)</p><p>gs.log('reference_key : ' + data.f._fields.cmdb_ci.reference_key)</p><p>gs.log('readonlyClickthrough : ' + data.f._fields.cmdb_ci.readonlyClickthrough)</p><p>gs.log('choice : ' + data.f._fields.cmdb_ci.choice)</p><p>gs.log('value : ' + data.f._fields.cmdb_ci.value)</p><p>gs.log('max_length : ' + data.f._fields.cmdb_ci.max_length)</p><p>gs.log('ed : ' + data.f._fields.cmdb_ci.ed)</p><p></p><p>Please find the attached XML of updated <strong>Approval Record</strong> widget.</p><p></p><p>Edit: updated the widget to include record attachments</p><p></p><p>Previous blogs in this series</p><p><a title="Portal diaries: Service Portal — Making Rejection Comments Mandatory on Approval Record" __default_attr="6415" __jive_macro_name="blogpost" class="jive_macro jive_macro_blogpost" data-orig-content="Portal diaries: Service Portal — Making Rejection Comments Mandatory on Approval Record" data-renderedposition="2783.541748046875_7.986111640930176_588_16" href="/community?id=community_blog&sys_id=228da669dbd0dbc01dcaf3231f9619f3">Portal diaries: Service Portal — Making Rejection Comments Mandatory on Approval Record</a></p><p><a title="Portal diaries: Service Portal — Multiple Catalogs (Part 1)" __default_attr="6616" __jive_macro_name="blogpost" class="jive_macro jive_macro_blogpost" data-orig-content="Portal diaries: Service Portal — Multiple Catalogs (Part 1)" data-renderedposition="2803.541748046875_7.986111640930176_369_16" href="/community?id=community_blog&sys_id=8e5da629dbd0dbc01dcaf3231f961907">Portal diaries: Service Portal — Multiple Catalogs (Part 1)</a></p>