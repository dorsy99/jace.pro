---
title: "Six common performance pitfalls in Service Portal and how to diagnose them"
date: 2017-07-21T01:27:21.000Z
authors: ["jesseadams"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=dffda62ddbd0dbc01dcaf3231f9619b1"
---
<p>Diagnosing Service Portal-related performance issues can be challenging. Service Portal is still very new technology and we all still have a lot to learn about troubleshooting when things go wrong. In this post, I will share some of the things I have commonly seen cause performance issues in the Service Portal so that if you run into performance issues, you'll know where to look in order to start diagnosing the problem and figuring out how to deal with it.</p><p></p><h1>6 common performance issues in Service Portal</h1><p></p><h2><strong>Service Portal and Internet Explorer</strong></h2><p>It's impossible to talk about Service Portal performance without addressing everybody's favorite topic — Internet Explorer. I have already written about <a title="" _jive_internal="true" href="/community?id=community_blog&sys_id=76bdeaa9dbd0dbc01dcaf3231f9619cd">how to avoid performance issues caused by IE's memory management issues</a> at length here, so to summarize let me just say this: IE has several know memory leak bugs. It is no longer supported by Microsoft and these will not be fixed. As a result, we as developers have to take a few extra steps to ensure that we are working around these issues the best we can.</p><p></p><p>You can read about that in much greater detail in this post: <a title="" _jive_internal="true" href="/community?id=community_blog&sys_id=76bdeaa9dbd0dbc01dcaf3231f9619cd">Best practices for avoiding memory leaks in Service Portal when using Internet Explorer</a></p><p></p><h2><strong>Auto-refreshing widgets</strong></h2><p>This is another topic I have already written about but, again, it's impossible to talk about performance issues related to the Service Portal without addressing this. Auto-refreshing widgets can cause major performance issues. This is usually seen instance-wide in the form of semaphore exhaustion.</p><p></p><p>You can read more about this issue and how to avoid it here: <a title="" _jive_internal="true" href="/community?id=community_blog&sys_id=377de269dbd0dbc01dcaf3231f96194b">Are your auto-refreshing widgets causing instance slowdowns?</a> But for now, know it's a problem and you should avoid creating widgets that auto-refresh as much as possible.</p><p></p><h2><strong>Server scripts using large datasets or inefficient queries</strong></h2><p>One of the easiest ways to cause performance issues in your portal is by working with too much data. In extreme cases this can run an instance out of memory, but in most cases it simply causes pages that widget is used on to load slowly. A good thing to remember here is that the Service Portal was created as a visual layer on top of ServiceNow in order to allow users to easily find what they need, make requests, and check status of their open tickets. The trick to successfully achiev<span style="color: #505050;">ing that without impacting performance is</span> by asking yourself, "How much of this data do my users actually need to see?" For example, your users probably don't need to see every incident they have ever opened. They probably only care about the ones that are open now.</p><p></p><h3><span style="color: #505050;"><span style="color: #505050;">What is the issue with large data sets?</span> </span></h3><p>There are a few reasons why large datasets can be problematic here.</p><ol style="list-style-type: decimal;"><li>Querying the data, evaluating ACLs, and running business rules takes time. This is true anywhere in the platform, of course, but it is no less true in the portal.</li><li>Your data will be sent to the controller via the $scope.data object. The size of this object will have a direct relation to the amount of time it takes to JSON encode, send via HTTP and then unpack in the browser.</li><li>If you have to iterate through your data and do some processing on each record, this can be very expensive in terms of CPU cycles. Again, this is true anywhere but we need to keep it in mind when designing a portal.</li></ol><p></p><h3><span style="color: #3d3d3d;">So what are the best ways to avoid processing large amounts of data?</span></h3><ol style="list-style-type: decimal;"><li><span style="color: #3d3d3d;"><a href="https://docs.servicenow.com/bundle/jakarta-servicenow-platform/page/use/using-lists/concept/c_Filters.html"><span style="color: #3d3d3d;">Use effective filters</span></a> to show users only the data they really need.</span></li><li>Do as little processing to the data as you need to.</li><li>Isolate widgets that you know will require a lot of data or processing to their own separate pages in your portal. This way, the other pages that do not use as much data won't be affected.</li></ol><p></p><h2><strong>Scripted menu items</strong></h2><p>Scripted menu items are one of the most useful features in the Service Portal. It's great to be able to display a dynamic list   of a user's open requests that updates in real time, but just like the server script in your widget, you can run into trouble if you're showing too much data here. Remember, these scripts run every time you navigate in the portal so having an inefficient script in your menu can cause every page to load slowly in the portal.</p><p><img   alt="scripted menu_requests.JPG" class="image-4 jive-image" height="253" src="83c9ff71db945704ed6af3231f961994.iix" style="height: 253px; width: 322.225px; display: block; margin-left: auto; margin-right: auto;" width="322"/></p><p style="text-align: left;">For the most part, the technical reasons why this can be problematic are the same as I described for a server script and likewise, so are the ways to avoid issues. It's worth remembering here, though, that these will add loading overhead to every page on your portal so it's likely you'll see the impact of a bad query in a scripted list menu item more quickly than you would see the impact of a bad query in one widget instance.</p><p></p><h2><strong>Loading large files and attachments</strong></h2><p>Another place where we commonly run into performance troubles is loading large files and attachments. In many cases these files are high-def media files or fonts that are stored in the sys_attachment table. In general, these may take a littlelonger to load but it isn't seen as an issue because we expect large, high-def files to take a little longer. What I want to point out here is that if you're loading a lot of these files, or if you have several large fonts files that are being re-loaded in different parts of your portal, it can be a problem. Especially if you have a very large attachment table.</p><p></p><p style="text-align: center;"><img   alt="giphy.gif" class="image-3 jive-image" src="5719148edbd45304b322f4621f961997.iix" style="width: auto; height: auto;"/></p><h2><strong>Order Guides are slow</strong></h2><p>Similar to IE, you can't talk about Service Portal performance without bringing this up.</p><p>We have two known issues which cause order guides to be slow. In case you have not seen them, they are documented here:</p><ul><li><a title="i.service-now.com/kb_view.do?sysparm_article=KB0610428" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0610428">Variable sets with containers in order guides with cascade variables enabled cause excessive memory usage (KB0610428)</a></li><li><a title="i.service-now.com/kb_view.do?sysparm_article=KB0610410" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0610410">Poor performance for Order Guide with large number of included items and variables (KB0610410)</a></li></ul><p></p><p>The <span style="color: #485563; background: white; font-size: 10.0pt; font-family: 'Helvetica Neue';"><a title="i.service-now.com/kb_view.do?sysparm_article=KB0610428" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0610428">variable set issue</a></span> is fixed in Helsinki Patch 10 and Jakarta, but the other is still being worked on by development. The <span style="color: #485563; background: white; font-size: 10.0pt; font-family: 'Helvetica Neue';"><a title="i.service-now.com/kb_view.do?sysparm_article=KB0610410" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0610410">issue with order guides having poor performance</a></span> largely comes down to what I have already mentioned. Order guides containing a lot of items result in very large JSON objects being sent back and forth to the server constantly. These large objects take time to send and process and the frequency at which we send them can cause big performance problems.</p><p></p><p>One way to minimize the impact of this issue is to limit the size of your order guides as much as possible but in some cases, you may not be able to. If that is the case we do have a workaround documented for this issue here: <a title="Service Catalog on Service Portal" __default_attr="6706" __jive_macro_name="blogpost" class="jive_macro jive_macro_blogpost" data-orig-content="Service Catalog on Service Portal" data-renderedposition="1781.765625_287.546875_228_16" href="/community?id=community_blog&sys_id=e00d2aa5dbd0dbc01dcaf3231f96194c">Service Catalog on Service Portal</a></p><p></p><h1><strong>How to diagnose performance issues in Service Portal</strong></h1><p>Now that we know what things commonly cause performance issues, let's look at how to use that knowledge to diagnose performance issues in your portal.</p><p></p><p><strong>Try it in the platform</strong>. A great first step to take if something in your portal is slow is to try doing the same thing in the platform UI. In many cases, people spend a good deal of time troubleshooting why something is slow in the Service Portal without realizing that it is slow everywhere else too. That can drastically change the direction you take in your troubleshooting so it's important to know right away if it's really an issue specific to your portal or one that's a <a title="ocs.servicenow.com/bundle/jakarta-servicenow-platform/page/administer/core-configuration/topic/p_PlatformPerformance.html" href="https://docs.servicenow.com/bundle/jakarta-servicenow-platform/page/administer/core-configuration/topic/p_PlatformPerformance.html">platform-wide performance problem</a>.</p><p></p><p><strong>Try another browser.</strong> Since we know that certain browsers handle things differently, try to reproduce the slowness in a different browser. This is especially important if Internet Explorer is your go-to browser because we know there are a lot of known issues with it.</p><p></p><p><strong>Observe whether the slowness is in all pages the portal.</strong> A good way to narrow down some of the issues we talked about above is to check whether all pages in your portal are slow. If so, you probably want to look at your header menu to check if scripted lists could be an issue. You probably also want to find out if your theme is loading any large font files or anything like that.</p><p></p><p><strong>Observe whether the slowness is on one page across all portals</strong>. If you see that a certain page or group of pages loads slowly in every portal, then the issue probably isn't the theme or scripted menu items unless you're using the same one in all of your portals. If you are, try opening the page in the $sp portal. This opens the page without any portal so there won't be a theme or header menu on the page. If that page still loads slowly then you'll want to focus on the widgets on the page to see which one might be causing the slowness.</p><p></p><p><strong>Look at your browser's dev tools.</strong> Two places to look here are the javascript console and the network tab. If you're seeing errors in the javascript console, they could be the cause of your slowdown and are worth tracking down. You may also see a large number of HTTP requests or one or more HTTP requests that take a long time to resolve. If you do, this is another good place to start your investigation.</p><p style="text-align: center;"><img   alt="javascript console.JPG" class="image-5 jive-image" src="e9da95cedb18d304b322f4621f96195c.iix" style="width: 620px; height: 194px;"/></p><pre __jive_macro_name="quote" class="jive_macro_quote jive_text_macro" data-renderedposition="2489.765625_8_1192_105"><p><span style="color: #767171;"><strong><em>A quick note about HTTP requests:</em></strong></span><span style="color: #767171;"><em> Service Portal is a single-page application and most of the communication with the server is done via REST. This can make it difficult sometimes to know where the request came from. One of the most common requests you'll see is to /api/now/sp/rectangle/ followed by some sys_id. This will always come from a widget making a call to the server via server.update() or some similar function. That sys_id will be the widget instance making the request. Knowing that can make it much easier to determine which widget is causing slowness.</em></span></p></pre><p></p><p><strong>Look at the syslog table.</strong> I already mentioned that large JSON objects can cause slowness. Oftentimes this will produce a warning in the syslog table about a large JSON object. If you see these warnings when you load the portal page or perform whatever action is causing slowness, it's a good indication that one of your widgets is working with a very large dataset that may need to be trimmed down.</p><p></p><p><strong>Remove widgets one by one.</strong> If none of the above help you narrow down the issue, try removing the widgets form your page one by one to see which one is causing the issue. The easiest way to do this is to set the widget instance to <strong>inactive</strong>.</p><p></p><h2><strong>Conclusion</strong></h2><p>Now that you know some of the common performance pitfalls with Service Portal and how to start diagnosing them, hopefully you will be well on your way to a lightning fast portal. I want to point out here that many of the areas discussed in this article are not inherently problematic things which should be avoided altogether. On the contrary, most are very good and useful features that I hope you will take advantage of, but like most things that are good and useful, you have to be careful not to overdo it.</p><p></p><h2>Additional resources for performance issues</h2><p>If you're looking for more information on troubleshooting performance issues, here are a few of great posts you can check out as well.</p><ul><li><span class="s1"><a title="" _jive_internal="true" href="/community?id=community_blog&sys_id=a6ecae65dbd0dbc01dcaf3231f961969">5 Ways to Troubleshoot your Instance Performance</a> by <a title="nisha.narayanakurup" __default_attr="19521" __jive_macro_name="user" class="jive_macro jive_macro_user" data-orig-content="nisha.narayanakurup" data-renderedposition="2945.5625_380.796875_149_16" href="/community?id=community_user_profile&user=4a4e0ea5dbd41fc09c9ffb651f9619bf">nisha.narayanakurup</a><br/></span></li><li><a title="" _jive_internal="true" href="/community?id=community_blog&sys_id=47bc6e25dbd0dbc01dcaf3231f961967">Six Ways to Improve the Performance of Client Script</a> by <a title="dawnjurek" __default_attr="42030" __jive_macro_name="user" class="jive_macro jive_macro_user" data-orig-content="dawnjurek" data-renderedposition="2969.359375_394.25_84_16" href="/community?id=community_user_profile&user=6222d665dbd81fc09c9ffb651f9619db">dawnjurek</a></li><li><a title="" _jive_internal="true" href="/community?id=community_blog&sys_id=590e6a2ddbd0dbc01dcaf3231f9619b7">Debug slow performance on the client side using Chrome</a> by <a title="shruti.tyagi" __default_attr="26970" __jive_macro_name="user" class="jive_macro jive_macro_user" data-orig-content="shruti.tyagi" data-renderedposition="2993.15625_420.484375_88_16" href="/community?id=community_user_profile&user=6dcf8aeddb181fc09c9ffb651f961940">shruti.tyagi</a></li></ul>