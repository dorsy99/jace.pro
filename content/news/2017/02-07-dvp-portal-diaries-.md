---
title: "Portal diaries Service Portal  Making Rejection Comments Mandatory on Approval Record"
date: 2017-02-06T07:43:52.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=228da669dbd0dbc01dcaf3231f9619f3"
---
<p>In this series, I would like to share the solutions that are missing in Service Portal. Today I would to discuss about how to make rejection comments mandatory in Service Portal.</p><p></p><p>Approvals in ServiceNow are handled either via emails or through an approval record. One of the significant reasons to use approvals via form is the ability to capture comments when rejecting a record. In a form view there is an OOB UI policy <span style="color: #0000ff; text-decoration: underline;">Comments mandatory on rejection</span><span style="font-size: 12pt; font-family: Calibri;">, that makes comments field mandatory while rejecting a record.</span></p><p></p><p><span style="font-size: 12pt; font-family: Calibri;"><img   class="image-1 jive-image" src="ab81f886db189304b322f4621f96199e.iix" style="max-height: 900px; max-width: 1200px;"/></span></p><p>When I initially started playing with Portal, I did not find a way to capture comments in OOB approval widgets. So I cloned the OOB <strong>Approval info</strong> widget and added a new text box</p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14863421467371240 jive_text_macro" data-renderedposition="271_8_1192_16" jivemacro_uid="_14863421467371240"><p>&lt;textarea ng-model="c.data.comment" style="color: grey; width: 100%; margin-top: .5em;" placeholder="Rejection Comments" class="form-control" rows="5"&gt;&lt;/textarea&gt;</p></pre><p></p><p>Below   is the screenshot of comments box</p><p><img   class="image-2 jive-image" height="465" src="ee49d002db185304b322f4621f9619bf.iix" style="max-height: 900px; max-width: 1200px;" width="313"/></p><p></p><p>In order to make the comments field required while rejecting, first validate whether it is empty or not. If it is then stop the approval process.</p><p>After adding couple lines in server and client controller I'm able stop the rejection when the comments are NULL and an alert box will pop out as shown in the image below.</p><p><img   class="image-3 jive-image" src="7f2e377ddbd4d3041dcaf3231f9619ff.iix" style="max-height: 900px; max-width: 1200px;"/></p><p></p><p>Here is the code that has to be updated in server and client controller blocks of a cloned widget.</p><p></p><p><strong>Server Code</strong></p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code jive_text_macro _jivemacro_uid_14863422448085887" data-renderedposition="1349_8_1192_64" jivemacro_uid="_14863422448085887"><p>if (input.comment){</p><p><span lang="FR">         gr.comments = input.comment;</span></p><p>         gr.update();</p><p>}</p></pre><p></p><p><span style="; font-size: 12pt; font-family: Calibri;"><strong>Client Controller</strong></span></p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14863423296864676 jive_text_macro" data-renderedposition="1479_8_1192_176" jivemacro_uid="_14863423296864676"><p>c.action = function(state) {</p><p></p><p>         if( (c.data.comment ==   undefined || c.data.comment ==   '' )&amp;&amp; state == 'rejected'){</p><p>                   $window.alert('Rejection Comments cannot be empty');</p><p>                   return false;</p><p></p><p>         }</p><p>         c.data.op = state;</p><p>         c.data.state = state;</p><p>         c.server.update();</p><p>}</p></pre><p></p><p></p><p></p><p>Please find the attached XML of updated Approval info widget.</p><p></p><p></p><p>Blogs in this series</p><p><a title="Portal diaries: Service Portal — Approval Summarizer in Portal" __default_attr="6416" __jive_macro_name="blogpost" class="jive_macro jive_macro_blogpost" data-orig-content="Portal diaries: Service Portal — Approval Summarizer in Portal" data-renderedposition="1804_8_407_16" href="/community?id=community_blog&sys_id=ac4daee5dbd0dbc01dcaf3231f96193b">Portal diaries: Service Portal — Approval Summarizer in Portal</a></p><p><a title="Portal diaries: Service Portal — Multiple Catalogs (Part 1)" __default_attr="6616" __jive_macro_name="blogpost" class="jive_macro jive_macro_blogpost" data-orig-content="Portal diaries: Service Portal — Multiple Catalogs (Part 1)" data-renderedposition="1825_8_375_16" href="/community?id=community_blog&sys_id=8e5da629dbd0dbc01dcaf3231f961907">Portal diaries: Service Portal — Multiple Catalogs (Part 1)</a> </p>