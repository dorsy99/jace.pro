---
title: "Multiple Choice Lists for State Field"
date: 2017-03-02T13:16:01.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=649d6a69dbd0dbc01dcaf3231f9619ed"
---
<p>This post was inspired by a question posted here - <a title="Dependent Choice List in Requested Items" __default_attr="255215" __jive_macro_name="thread" class="jive_macro_thread jive_macro" data-orig-content="Dependent Choice List in Requested Items" data-renderedposition="10_328.25_287_16" href="/community?id=community_question&sys_id=17def2e5db58dbc01dcaf3231f9619be">Dependent Choice List in Requested Items</a></p><p></p><p>The poster wanted to add 2 extra choices to the State field based on what Catalog Item was ordered. If a particular item was ordered, he wanted to add "On Hold" and "Awaiting User Info" as valid choices to the State field.   Of course the often used "g_form.addOption" and "g_form.removeOption" methods were suggested (guilty) as a means to solve the issue, but anything running client-side really runs the risk of causing issues.   One issue is the choice list would not be updated in list views.</p><p></p><p>So after some playing around, the solution can actually be handled with Dependent Values.   I spent a bit of time experimenting with it and came up with the following that works:</p><p></p><p>1. Add a new field called "State Set" on the Task table (you might want to use it elsewhere) with a default value of "default"</p><p></p><p>2. Add a Dictionary Override on the Task.State field for the Requested Item table with "Override dependent" selected and "u_state_set" in the "Dependent" field:</p><p><img   class="image-1 jive-image" src="620faccadb58dfc03eb27a9e0f96194b.iix" style="max-width: 1200px; max-height: 900px;"/></p><p></p><p>3. Add 2 new sets of choices for the sc_req_item.state field, one where the Dependent value field is "default" for your default set of choices and the other "hold" that includes the default values and the 2 new ones:</p><p><img   class="image-2 jive-image" height="228" src="821d04cadb1417049c9ffb651f961997.iix" width="696"/></p><p></p><p><strong>Be careful when adding new "Values" for the State field</strong> - use a unique and higher number for any custom choices you add, as shown above (I like to start at 100), and do NOT re-use any out-of-box values as they mean something to the OOB code base.</p><p></p><p>4. Build a Business Rule to populate the "State Set" field based on whatever criteria you need (e.g. set to "hold" when the "Item" field is the particular catalog item, etc...)</p><p></p><p>5. The proper set of choices will now display in the form and list views:</p><p><img   class="image-3 jive-image" src="b8b7a735db14dfc0b322f4621f96198c.iix" style="max-width: 1200px; max-height: 900px;"/></p><p><img   class="jive-image image-4" src="8cd39142db18130468c1fb651f9619f6.iix" style="max-width: 1200px; max-height: 900px;"/></p><p><img   class="image-5 jive-image" src="4912f842db5cd704ed6af3231f961972.iix" style="max-width: 1200px; max-height: 900px;"/></p><p></p><p>6. Add an Access Control rule on the State Set field that only allows users with the "admin" role to edit it.   <strong>There is an issue with this, however</strong> - the State field will not be editable either in a list view because it is dependent on the State Set field which is not editable.   I consider this to be a bug or at least an oversight.   I think it is an acceptable use case to restrict write access to the parent field in the dependency but allow the child to be edited.   The reverse is not, however.</p><p></p><p>So this allows you to create a number of choice list "sets" based on the State Set field without having to worry about adding or removing options through client scripts.   It means some extra choices to maintain, but usually you will not have to edit them very often, if ever, once configured.</p><p></p><p>This was tested in Istanbul.</p>