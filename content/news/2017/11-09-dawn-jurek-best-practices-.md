---
title: "Best practices for MID Server setup and tuning"
date: 2017-11-09T01:30:39.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=9d1deea5dbd0dbc01dcaf3231f961939"
---
<p>A ServiceNow <em><a title="ocs.servicenow.com/bundle/jakarta-it-operations-management/page/product/mid-server/reference/r-MIDServer.html" href="https://docs.servicenow.com/bundle/jakarta-it-operations-management/page/product/mid-server/reference/r-MIDServer.html">MID Server</a></em> enables ServiceNow applications like <a title="ocs.servicenow.com/bundle/jakarta-it-operations-management/page/product/discovery/reference/r-discovery.html" href="https://docs.servicenow.com/bundle/jakarta-it-operations-management/page/product/discovery/reference/r-discovery.html">Discovery</a> and <a title="ocs.servicenow.com/bundle/jakarta-it-operations-management/page/product/event-management/concept/c_EM.html" href="https://docs.servicenow.com/bundle/jakarta-it-operations-management/page/product/event-management/concept/c_EM.html">Event Management</a> to communicate with external systems, or <em>targets</em>, on the enterprise's local network or in the public cloud. The MID Server software runs on a host computer on the enterprise's network or in the cloud.</p><p></p><p>In this installment of our <a title="" _jive_internal="true" data-containerid="2927" data-containertype="37" data-objectid="7090" data-objecttype="38" href="/community?id=community_blog&sys_id=6e7d6269dbd0dbc01dcaf3231f9619c0" style="font-weight: inherit; font-style: inherit; font-family: inherit; color: #3778c7;">NOWSupport best practices series</a>, you can learn more about MID Servers, including best practices for setup and tuning.</p><p></p><p>For a quick introduction, watch this video on our <a title="ww.youtube.com/user/servicenowdemo" href="https://www.youtube.com/user/servicenowdemo">NOWSupport YouTube channel</a>:</p><p></p><p style="text-align: center;"><iframe frameborder="0" height="360" src="https://www.youtube.com/embed/-Y7zULTiyAc?rel=0" width="640"> 
</iframe></p><p></p><h2>How many MID Servers do I need, and where should they be located?</h2><p></p><p>An enterprise can have many MID Servers to handle larger networks, more targets, and more data. How many do you need, and where should they be located? Here are a few guidelines:</p><p></p><p><strong>Quantities:</strong> The number of MID Servers depends on several factors, like network size, number of targets, and amount of traffic.</p><p></p><p><strong>Location:</strong> Place your MID Server hosts close to their targets. That'll improve performance by reducing distance and the number of hops. For global deployments, your hosts should be on the same continent as their targets.</p><p></p><p><strong>Security:</strong> Communication between the MID Server and the ServiceNow instance is always initiated by the MID Server. That lets you locate your MID Servers inside secure zones without the need to open up security rules to allow access from outside.</p><p></p><p>After evaluating these criteria, check out this video to help you set up your MID Server(s):</p><p></p><p style="text-align: center;"><iframe frameborder="0" height="360" src="https://www.youtube.com/embed/Pgi3WZAqmq0?rel=0" width="640"> 
</iframe></p><p></p><h2><span style="font-family: Arial;"><strong>How to get the most out of your MID Server</strong></span></h2><p></p><p>Each MID Server should be on its own dedicated host, installed on a local drive. MID Server performance can suffer if the host is running more than one MID Server or performing other functions.</p><p></p><p>As supplied, the MID Server is configured to place relatively low resource requirements on the host. You can adjust the MID Server's resource limits to meet varying demand. Two key resources to adjust are <em>threads</em> and <em>memory</em>.</p><p></p><p><strong>Threads:</strong>   The MID Server JVM allows an application to execute in multiple threads concurrently. As supplied, the maximum number of concurrent MID Server threads is 25. This maximum is set in the /agent/conf.xml file:</p><p></p><p style="padding-left: 30px;"><span style="font-size: 9.0pt; font-family: Courier;">&lt;!-- Controls the number of execution threads (simultaneous work) that may be used by probes. --!&gt;<br/> &lt;parameter name="threads.max" value="25"/&gt;</span></p><p></p><p>You may be able to speed up the performance of Discovery and other applications by increasing this maximum. Try a maximum of 50 or 100.</p><p></p><p><strong>Memory:</strong> As supplied, the memory limit for the MID Server is 1024 MB. This maximum is set in the /agent/conf/wrapper-override.conf file.</p><p></p><p style="padding-left: 30px;"><span style="font-size: 9.0pt; font-family: Courier;"># OPTIONAL: Maximum Java Heap Size (in MB)<br/> #wrapper.java.maxmemory=1024</span></p><p></p><p>You can increase this maximum as needed to support more threads.</p><p></p><p><strong>Monitoring:</strong> When you increase the maximum for threads and memory, you can monitor the effects in a couple different ways. For a quick view, check the MID Server dashboard at <strong>MID Server &gt; Dashboard</strong>. A pair of charts on the default dashboard shows the average CPU and memory utilization for each MID Server.</p><p></p><p style="text-align: center;"><img   alt="MID Server dashboard CPU and memory.png" class="image-1 jive-image" src="de8cdc42db985304b322f4621f961934.iix" style="width: 1000px; height: 550px;"/></p><p></p><p>You can get more details on CPU and memory utilization in a pair of related lists on the MID Server form:</p><p></p><ul><li>ECC Agent Scalar Metric-&gt;MID Server</li><li>ECC Agent Memory Metric-&gt;MID Server</li></ul><p></p><p>If you're using the default form, you'll need to use <strong>Configure &gt; Related Lists</strong> to add these lists to the form:</p><p></p><p><img   alt="configure_MID_Server_form.png" class="image-4 jive-image" src="cd1c3c42db509f048c8ef4621f961929.iix" style="width: 620px; height: 299px; display: block; margin-left: auto; margin-right: auto;"/></p><p style="text-align: center;"></p><p>The <strong>scalar metric</strong> shows the host's minimum, maximum, and average CPU utilization measured over 10â€‘minute periods.</p><p></p><p><img   alt="MID Server Scalar Metrics.png" class="image-2 jive-image" src="9f5cffbddb101344e9737a9e0f961958.iix" style="width: 1000px; height: 186px; display: block; margin-left: auto; margin-right: auto;"/></p><p></p><p>The <strong>memory metric</strong> shows the MID Server application's memory utilization measured over 10â€‘minute periods. In particular:</p><p></p><ul><li>Max available bytes</li><li>Max allocated bytes</li><li>Max used bytes</li></ul><p><img   alt="MID Server Memory Metrics.png" class="image-3 jive-image" src="e1fe1d42db1c130468c1fb651f96192c.iix" style="width: 1000px; height: 186px; display: block; margin-left: auto; margin-right: auto;"/></p><p></p><p>As the number of threads increases, so will the CPU and memory utilization. Try to keep the CPU and memory utilization at about 80 percent of full utilization when the MID Server is running at full scale.</p><p></p><h2>For more information:</h2><ul><li><a title="ocs.servicenow.com/bundle/jakarta-it-operations-management/page/product/mid-server/concept/c_MIDServerConfiguration.html" href="https://docs.servicenow.com/bundle/jakarta-it-operations-management/page/product/mid-server/concept/c_MIDServerConfiguration.html">MID Server configuration</a> (product documentation)</li><li><span style="color: #9900ff;"><a title="i.service-now.com/kb_view.do?sysparm_article=KB0540193" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0540193">Discovery and MID Server Resources page (KB0540193)</a></span></li><li><span style="color: #9900ff;"><a title="i.service-now.com/kb_view.do?sysparm_article=KB0597571" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0597571">Troubleshooting paths for MID Server issues (KB0597571)</a></span></li></ul><p></p><p>--</p><p></p><p>Behind the scenes here at ServiceNow, the Knowledge Management and Multimedia teams work closely with subject matter experts to disseminate critical information to our customers. We've found that certain topics come up frequently, in the form of best practices that can help you keep your ServiceNow instances running smoothly. This series targets those topics so that you and your organization can benefit from our collective expertise. If you have a best practices topic you'd like us to cover in this series, please let us know in the comments below.</p><p></p><p>To access all of the blog posts in this series, see our <a title="" _jive_internal="true" data-containerid="2927" data-containertype="37" data-objectid="7090" data-objecttype="38" href="/community?id=community_blog&sys_id=6e7d6269dbd0dbc01dcaf3231f9619c0" style="font-weight: inherit; font-style: inherit; font-family: inherit; color: #3778c7;">NOWSupport best practices series list.</a></p>