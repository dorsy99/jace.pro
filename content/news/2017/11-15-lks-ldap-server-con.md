---
title: "LDAP Server Connection Fails and User Login Failures"
date: 2017-11-14T20:45:50.000Z
authors: ["lks"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=457dae29dbd0dbc01dcaf3231f9619f6"
---
<p><strong><a title="ocs.servicenow.com/bundle/istanbul-servicenow-platform/page/integrate/ldap/concept/c_LDAPIntegration.html" href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/integrate/ldap/concept/c_LDAPIntegration.html">LDAP Integration</a></strong> allows ServiceNow instances communicating with <strong>Active Directory (AD)</strong>. This integration facilitates customers in following:</p><p></p><ol><li>Importing Users/Groups/Roles from AD to ServiceNow instance</li><li>Schedule this import so as to keep the data in sync with AD</li><li>Authenticate users from AD when login ServiceNow instance</li></ol><p></p><p>Hence, ServiceNow does not store LDAP user's password as they are authenticated from the AD. ServiceNow instance resides on cloud/on premise and AD is installed on a different server.</p><p></p><p>At times, LDAP connection to AD fails due to whatever reason and no LDAP user is able to login. This leaves a big impact on business and cause a P1 incident. The root cause of this connection failure can be anything like a local network outage in customer area, incorrect LDAP connection attempts post cloning, LDAP credentials change on AD etc.</p><p></p><p>ServiceNow datacenter hosts excellent monitoring tools which polls LDAP test connections in customer instances and if a test connection fails, it generates an alert which in turn generates a high priority incident. Be it an issue on ServiceNow instance side or in a local network on customer side, the major impact is LDAP users cannot login and cannot work unless the issue is fixed.</p><p></p><p>In order to mitigate the impact, ServiceNow has introduced <strong><a title="ocs.servicenow.com/bundle/istanbul-servicenow-platform/page/integrate/ldap/task/t_SendOneTimePassword.html" href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/integrate/ldap/task/t_SendOneTimePassword.html">LDAP One Time Password</a></strong> feature from Istanbul release onwards.</p><p></p><h2>What is LDAP One Time Password?</h2><p></p><p>This is a new feature introduced with ServiceNow Istanbul release assisting LDAP users generating a temporary local password to login ServiceNow when LDAP Server is down. This is available and enabled Out of the Box and requires no plugin activation. It is controlled using below system properties:</p><p></p><ol><li>glide.ldap.onetime.password.enabled - It's a boolean property used to enable/disable this feature</li><li>glide.authenticate.onetime.password.validity - It's an integer property indicating temporary password validity in minutes</li></ol><p></p><h2>How Does This Feature work?</h2><p></p><h3>OLD Situation: Login error message when LDAP is unreachable:</h3><p><img   alt="Old_Situation.png" class="image-1 jive-image" src="933bd942db58d304b322f4621f96197d.iix" style="width: 620px; height: 158px; display: block; margin-left: auto; margin-right: auto;"/></p><p>Error message on screen: <span style="color: #e23d39;"><em>Your account is configured to use LDAP authentication, and we cannot currently connect to the LDAP server. Please contact your ServiceDesk to resolve this issue.</em></span></p><p></p><h3>New Situation: Login error message when LDAP is unreachable</h3><p><img   alt="New_Situation.png" class="image-2 jive-image" src="1afb7042db509f048c8ef4621f961900.iix" style="width: 620px; height: 166px; display: block; margin-left: auto; margin-right: auto;"/></p><p>Here is the difference in error message: <span style="color: #e23d39;"><em>Your account is configured to use LDAP authentication, and we cannot currently connect to the LDAP server. Please contact your ServiceDesk to resolve this issue. To obtain a password for one-time login, click here. An email message containing the password will be sent to you.</em></span></p><p></p><p>User clicks the hyper link <strong>click here</strong> and platform sends a one-time password to user's email address for next login as shown in below screen:</p><p><img   alt="Temp_Pass_Gen.png" class="image-3 jive-image" src="8e56d04edb9817049c9ffb651f9619dc.iix" style="width: 620px; height: 370px; display: block; margin-left: auto; margin-right: auto;"/></p><h2>Behind The Interface In Platform:</h2><ol><li>When user clicks on link <strong>click here</strong>, platform generates a one-time password in security_nonce table which can be used once and expires after used.</li><li>By default this password is valid for 10 minutes but can be configured with system property glide.authenticate.onetime.password.validity.</li><li>Post one-time password generation, platform generates an event password.online.</li><li>This event in turn triggers email notification OneTimePasswordEmailNotification.</li></ol><p></p><h2>Troubleshooting Tips when user does not receive One Time Password:</h2><ol><li>Login as an admin and check password.online in event logs.</li><li>If event log is there, make sure notification OneTimePasswordEmailNotification is enabled in user profile.</li><li>User profile has a valid email address.</li><li>Open a Hi incident when you see steps 1 to 3 are OK and user still missing one-time password email.</li></ol><p></p><p>This is a small feature but I find it a great enhancement as it brings down the impact of LDAP user login issue tremendously when LDAP Server is down and generates a big value for ServiceNow customers in terms of business continuity.</p><p></p><h2>Resources:</h2><p><a title="ocs.servicenow.com/bundle/istanbul-servicenow-platform/page/integrate/ldap/concept/c_LDAPIntegrationSetup.html" href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/integrate/ldap/concept/c_LDAPIntegrationSetup.html">LDAP Integration Setup</a></p><p><a title="ocs.servicenow.com/bundle/istanbul-servicenow-platform/page/integrate/ldap/reference/r_LDAPIntegrationFAQs.html" href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/integrate/ldap/reference/r_LDAPIntegrationFAQs.html">LDAP Integration FAQs</a></p><p><a title="ocs.servicenow.com/bundle/istanbul-servicenow-platform/page/integrate/ldap/concept/c_LDAPIntegrationTroubleshooting.html" href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/integrate/ldap/concept/c_LDAPIntegrationTroubleshooting.html">LDAP Integration Troubleshooting</a></p>