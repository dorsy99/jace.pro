---
title: "How to avoid untranslated characters  in your XML data"
date: 2017-02-01T00:42:53.000Z
authors: ["jonnyseymour"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=b0fda22ddbd0dbc01dcaf3231f961964"
---
<p>After <a title="ocs.servicenow.com/bundle/istanbul-servicenow-platform/page/integrate/web-services/reference/r_AvailableWebServices.html" href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/integrate/web-services/reference/r_AvailableWebServices.html">web services</a> were first introduced, they became very popular. Web services is a great tool to exchange information. ServiceNow implementations of the web services are top notch. When encoding international characters, the safest option points to <a title="n.wikipedia.org/wiki/Unicode" href="https://en.wikipedia.org/wiki/Unicode">Unicode</a>. One of the most popular implementations is UTF-8, which is the one adopted by us.   If you need to connect to your instance and use non-ascii characters, you should read this blog. Specially if you are seeing ï¿½ or questions marks (?) as part of the data received using web services. Luckily the solution is very simple by safe-encoding non-ascii characters before sending them (see below) if you are not using UTF-8.</p><p></p><p><a href="https://en.wikipedia.org/wiki/UTF-8"><img   alt="Utf8webgrowth.png" class="image-11 jive-image" src="0d08abfddb50df04e9737a9e0f9619e3.iix" style="height: auto; display: block; margin-left: auto; margin-right: auto;"/></a></p><pre __default_attr="warning" __jive_macro_name="alert" alert="warning" class="jive_text_macro jive_macro_alert" data-renderedposition="380_8_1087_86"><p>Outside encoding, incoming SOAP requests with characters like "<span style="color: #f89838;">&amp;", "&lt;" or "&gt;" </span> on the data can cause errors. Those characters are reserved as they are part of the XML tags used to delimiter the data. If used on the data, they interfere with the SOAP message itself. If they are passed on the data and read on ServiceNow, they will show as "<strong>Unable to parse SOAP document</strong>"</p></pre><h1>Recommendations to safely pass non-ascii characters</h1><p>I will focus on <a title="ocs.servicenow.com/bundle/istanbul-servicenow-platform/page/integrate/inbound-soap/concept/c_SOAPWebService.html" href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/integrate/inbound-soap/concept/c_SOAPWebService.html">SOAP web services</a>. They use <a title="ocs.servicenow.com/bundle/istanbul-servicenow-platform/page/integrate/inbound-soap/concept/c_SOAPWebService.html" href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/integrate/inbound-soap/concept/c_SOAPWebService.html">SOAP messages</a> to exchange data between the soap nodes (e.g. your soap client and the instance). However, while the data is provided on the message, both parties need to agree on the "<a title="n.wikipedia.org/wiki/Character_encoding" href="https://en.wikipedia.org/wiki/Character_encoding">encoding.</a>" We make it easy, we would use <a title="n.wikipedia.org/wiki/UTF-8" href="https://en.wikipedia.org/wiki/UTF-8">UTF-8</a> to encode characters.</p><p></p><p><img   alt="unicode-shield.png" class="image-12 jive-image" height="304" src="8c08d94adb90d7041dcaf3231f961933.iix" style="display: block; margin-left: auto; margin-right: auto; height: 304px; width: 566.006px;" width="566"/></p><p></p><p>If you are interacting with your instance and you use a different encoding with special characters on your data, you may face problems if you are not using Unicode. However, XML offers the option to safe encoding most characters into <a title="n.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references" href="https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references">escape characters (safe encoded)</a>.</p><p></p><table border="1" cellpadding="0" style="border: solid windowtext 1.0pt;" width="557"><tbody><tr><td style="border: solid windowtext 1.0pt; background: #DEEAF6; padding: .75pt .75pt .75pt .75pt;" width="142"><p style="margin-top: auto; margin-bottom: auto;"><span style="color: black; font-size: 8.5pt; font-family: Verdana;"><strong>For SOAP Message</strong></span></p></td><td style="border: solid windowtext 1.0pt; background: #DEEAF6; padding: .75pt .75pt .75pt .75pt;" width="147"><p style="margin-top: auto; margin-bottom: auto;"><span style="color: black; font-size: 8.5pt; font-family: Verdana;"><strong>If the message is </strong></span></p><p style="margin-top: auto; margin-bottom: auto;"><span style="color: black; font-size: 8.5pt; font-family: Verdana;"><strong>encoded on UTF-8</strong></span></p></td><td style="border: solid windowtext 1.0pt; background: #DEEAF6; padding: .75pt .75pt .75pt .75pt;" width="263"><p style="margin-top: auto; margin-bottom: auto;"><span style="color: black; font-size: 8.5pt; font-family: Verdana;"><strong>Recommendation: The message needs to be safe encoded</strong></span></p></td></tr><tr><td style="border: solid windowtext 1.0pt; background: #FFF2CC; padding: .75pt .75pt .75pt .75pt;"><p style="margin-top: auto; margin-bottom: auto;"><span style="font-size: 8.5pt; font-family: Verdana; color: black;">Incoming to the instance</span></p></td><td style="border: solid windowtext 1.0pt; background: #FFF2CC; padding: .75pt .75pt .75pt .75pt;"><p style="margin-top: auto; margin-bottom: auto;"><span style="font-size: 8.5pt; font-family: Verdana; color: black;">Yes</span></p></td><td style="border: solid windowtext 1.0pt; background: #FFF2CC; padding: .75pt .75pt .75pt .75pt;"><p style="margin-top: auto; margin-bottom: auto;"><span style="font-size: 8.5pt; font-family: Verdana; color: black;">No, it is not necessary. </span></p><p style="margin-top: auto; margin-bottom: auto;"><span style="font-size: 8.5pt; font-family: Verdana; color: black;">If safe encoded, it will also work.</span></p></td></tr><tr><td style="border: solid windowtext 1.0pt; background: #FFF2CC; padding: .75pt .75pt .75pt .75pt;"><p style="margin-top: auto; margin-bottom: auto;"><span style="font-size: 8.5pt; font-family: Verdana; color: black;">Incoming to the instance</span></p></td><td style="border: solid windowtext 1.0pt; background: #FFF2CC; padding: .75pt .75pt .75pt .75pt;"><p style="margin-top: auto; margin-bottom: auto;"><span style="font-size: 8.5pt; font-family: Verdana; color: black;">No </span></p></td><td style="border: solid windowtext 1.0pt; background: #FFF2CC; padding: .75pt .75pt .75pt .75pt;"><p style="margin-top: auto; margin-bottom: auto;"><span style="font-size: 8.5pt; font-family: Verdana; color: red;">Yes, safe encode the data to avoid ? or ï¿½ characters</span></p></td></tr><tr><td style="border: solid windowtext 1.0pt; background: #E2EFD9; padding: .75pt .75pt .75pt .75pt;"><p style="margin-top: auto; margin-bottom: auto;"><span style="font-size: 8.5pt; font-family: Verdana; color: black;">Outbound from the instance</span></p></td><td style="border: solid windowtext 1.0pt; background: #E2EFD9; padding: .75pt .75pt .75pt .75pt;"><p style="margin-top: auto; margin-bottom: auto;"><span style="font-size: 8.5pt; font-family: Verdana; color: black;">Yes</span></p></td><td style="border: solid windowtext 1.0pt; background: #E2EFD9; padding: .75pt .75pt .75pt .75pt;"><p style="margin-top: auto; margin-bottom: auto;"><span style="font-size: 8.5pt; font-family: Verdana; color: red;">Yes, if target is not UTF-8 to avoid ? or ï¿½ characters</span></p></td></tr><tr><td style="border: solid windowtext 1.0pt; background: #E2EFD9; padding: .75pt .75pt .75pt .75pt;"><p style="margin-top: auto; margin-bottom: auto;"><span style="font-size: 8.5pt; font-family: Verdana; color: black;">Outbound from the instance</span></p></td><td style="border: solid windowtext 1.0pt; background: #E2EFD9; padding: .75pt .75pt .75pt .75pt;"><p style="margin-top: auto; margin-bottom: auto;"><span style="font-size: 8.5pt; font-family: Verdana; color: black;">No </span></p></td><td style="border: solid windowtext 1.0pt; background: #E2EFD9; padding: .75pt .75pt .75pt .75pt;"><p style="margin-top: auto; margin-bottom: auto;"><span style="font-size: 8.5pt; font-family: Verdana; color: red;">Yes, always safe encode the data</span></p></td></tr></tbody></table><p></p><pre __default_attr="warning" __jive_macro_name="alert" alert="warning" class="jive_text_macro jive_macro_alert" data-renderedposition="1212.5_8_1087_43"><p>The outbound soap messages from the instance are always on UTF-8, so the messages are always encoded on UTF-8</p></pre><p></p><p>"Incoming" means that SOAP calls toward your instance. "Outbound" means SOAP calls from the instance to your end-point. To safely encode the message, you need to transform any non-ascii character into a XML code.</p><p></p><p></p><h2>Example of a message sent to the instance using an Unicode (UTF-8) encoding</h2><p>On the following example, I will use SOAP UI, to transfer "comments" that contains non-ascii characters and "work_notes" that contains the same characters safely encoded. I would expect the system will have NO problem with the characters as both soap nodes are using UTF-8.</p><p></p><p><strong>Using SOAP UI looks like:</strong></p><p><img   alt="SOAP ui.jpg" class="image-7 jive-image" src="022aeb35db94dfc0b322f4621f9619c6.iix" style="width: 620px; height: 194px; display: block; margin-left: auto; margin-right: auto;"/></p><p></p><p>In more detail, the message looks like:</p><pre __default_attr="xml" __jive_macro_name="code" class="_jivemacro_uid_14798261278665260 jive_macro_code jive_text_macro" data-renderedposition="1748.5_8_1087_448" jivemacro_uid="_14798261278665260"><p><span>&lt;soapenv:Envelope xmlns:soapenv="</span><a title="" _jive_internal="true" href="http://schemas.xmlsoap.org/soap/envelope/" rel="nofollow" target="_blank">http://schemas.xmlsoap.org/soap/envelope/</a><span>" xmlns:inc="</span><a title="" _jive_internal="true" href="http://www.service-now.com/incident" rel="nofollow" target="_blank">http://www.service-now.com/incident</a><span>"&gt;</span></p><p>     &lt;soapenv:Header/&gt;</p><p>     &lt;soapenv:Body&gt;</p><p>           &lt;inc:insert&gt;</p><p>                 &lt;short_description&gt;Testing with encoding characters characters&lt;/short_description&gt;</p><p>                 &lt;comments&gt;Testing with encoding characters characters -not safe encoded</p><p>Basic Latin</p><p>! " # $ % &amp;amp; ' ( ) * + , - . / 0 1 2 3 4 5 6 7 8 9 : ; &amp;#x3C; = &amp;#x3E; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ \ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~</p><p>Latin-1 Supplement</p><p>    ¡  ¢  £  ¤  ¥  ¦  §  ¨  ©  ª  «  ¬  ­  ®  ¯  °  ±  ²  ³  ´  µ  ¶  ·  ¸  ¹  º  »  ¼  ½  ¾  ¿ í€ í� Â íƒ í„ í… í† í‡ íˆ É íŠ í‹ íŒ í� íŽ í� í� í‘ í’ í“ í” í• í– × í˜ í™ íš í› íœ í� íž ß í  á â ã ä å æ ç è é ê í« ì í­ î í¯ í° ñ ò ó ô õ ö í· ø ù ú û ü ý í¾ í¿</p><p>Latin Extended-A</p><p>Ä€ Đ Ä‚ Äƒ Ä„ Ä… Ä† Ä‡ Äˆ Ä‰ ÄŠ Ä‹ ÄŒ Đ ÄŽ Đ Đ đ Ä’ Ä“ Ä” Ä• Ä– Ä— Ä˜ Ä™ Äš Ä› Äœ Đ Äž ÄŸ Ä  Ä¡ Ä¢ Ä£ Ä¤ Ä¥ Ä¦ Ä§ Ä¨ Ä© Äª Ä« Ä¬ Ä­ Ä® Ä¯ Ä° Ä± Ä² Ä³ Ä´ Äµ Ä¶ Ä· Ä¸ Ä¹ Äº Ä» Ä¼ Ä½ Ä¾ Ä¿ Å€ Ł Å‚ Åƒ Å„ Å… Å† Å‡ Åˆ Å‰ ÅŠ Å‹ ÅŒ Ł ÅŽ Ł Ł Å‘ Å’ œ Å” Å• Å– Å— Å˜ Å™ Åš Å› Åœ Ł Åž ÅŸ Å  š Å¢ Å£ Å¤ Å¥ Å¦ Å§ Å¨ ũ Åª Å« Å¬ Å­ Å® Å¯ Å° Å± Å² Å³ Å´ Åµ Å¶ Å· Å¸ Å¹ Åº Å» Å¼ Å½ ž Å¿</p><p>Latin Extended-B</p><p>Æ€ Æ� Æ‚ Æƒ Æ„ Æ… Æ† Æ‡ Æˆ Æ‰ ÆŠ Æ‹ ÆŒ Æ� ÆŽ Æ� Æ� Æ‘ Æ’ Æ“ Æ” Æ• Æ– Æ— Æ˜ Æ™ Æš Æ› Æœ Æ� Æž ÆŸ Æ  ơ Æ¢ Æ£ Æ¤ Æ¥ Æ¦ Æ§ Æ¨ Æ© Æª Æ« Æ¬ Æ­ Æ® Æ¯ ư Æ± Æ² Æ³ Æ´ Æµ Æ¶ Æ· Æ¸ Æ¹ Æº Æ» Æ¼ Æ½ Æ¾ Æ¿ Ç€ Ç� Ç‚ Çƒ Ç„ Ç… Ç† Ç‡ Çˆ Ç‰ ÇŠ Ç‹ ÇŒ Ç� ÇŽ Ç� Ç� Ç‘ Ç’ Ç“ Ç” Ç• Ç– Ç— Ç˜ Ç™ Çš Ç› Çœ Ç� Çž ÇŸ Ç  Ç¡ Ç¢ Ç£ Ç¤ Ç¥ Ç¦ Ç§ Ç¨ Ç© Çª Ç« Ç¬ Ç­ Ç® Ç¯ Ç° Ç± Ç² Ç³ Ç´ Çµ Ç¶ Ç· Ç¸ Ç¹ Çº Ç» Ç¼ Ç½ Ç¾ Ç¿ ...&lt;/comments&gt;</p><p>&lt;/comments&gt;</p><p>                 &lt;work_notes&gt;Testing with encoding characters characters -safe encoded</p><p>Basic Latin</p><p>! &amp;#x22; # $ % &amp;#x26; &amp;#x27; ( ) * + , - . / 0 1 2 3 4 5 6 7 8 9 : ; &amp;#x3C; = &amp;#x3E; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ \ ] ^ _ &amp;#x60; a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~</p><p>Latin-1 Supplement</p><p>   &amp;#xA1; &amp;#xA2; &amp;#xA3; &amp;#xA4; &amp;#xA5; &amp;#xA6; &amp;#xA7; &amp;#xA8; &amp;#xA9; &amp;#xAA; &amp;#xAB; &amp;#xAC; &amp;#xAD; &amp;#xAE; &amp;#xAF; &amp;#xB0; &amp;#xB1; &amp;#xB2; &amp;#xB3; &amp;#xB4; &amp;#xB5; &amp;#xB6; &amp;#xB7; &amp;#xB8; &amp;#xB9; &amp;#xBA; &amp;#xBB; &amp;#xBC; &amp;#xBD; &amp;#xBE; &amp;#xBF; &amp;#xC0; &amp;#xC1; &amp;#xC2; &amp;#xC3; &amp;#xC4; &amp;#xC5; &amp;#xC6; &amp;#xC7; &amp;#xC8; &amp;#xC9; &amp;#xCA; &amp;#xCB; &amp;#xCC; &amp;#xCD; &amp;#xCE; &amp;#xCF; &amp;#xD0; &amp;#xD1; &amp;#xD2; &amp;#xD3; &amp;#xD4; &amp;#xD5; &amp;#xD6; &amp;#xD7; &amp;#xD8; &amp;#xD9; &amp;#xDA; &amp;#xDB; &amp;#xDC; &amp;#xDD; &amp;#xDE; &amp;#xDF; &amp;#xE0; &amp;#xE1; &amp;#xE2; &amp;#xE3; &amp;#xE4; &amp;#xE5; &amp;#xE6; &amp;#xE7; &amp;#xE8; &amp;#xE9; &amp;#xEA; &amp;#xEB; &amp;#xEC; &amp;#xED; &amp;#xEE; &amp;#xEF; &amp;#xF0; &amp;#xF1; &amp;#xF2; &amp;#xF3; &amp;#xF4; &amp;#xF5; &amp;#xF6; &amp;#xF7; &amp;#xF8; &amp;#xF9; &amp;#xFA; &amp;#xFB; &amp;#xFC; &amp;#xFD; &amp;#xFE; &amp;#xFF;</p><p>Latin Extended-A</p><p>&amp;#x100; &amp;#x101; &amp;#x102; &amp;#x103; &amp;#x104; &amp;#x105; &amp;#x106; &amp;#x107; &amp;#x108; &amp;#x109; &amp;#x10A; &amp;#x10B; &amp;#x10C; &amp;#x10D; &amp;#x10E; &amp;#x10F; &amp;#x110; &amp;#x111; &amp;#x112; &amp;#x113; &amp;#x114; &amp;#x115; &amp;#x116; &amp;#x117; &amp;#x118; &amp;#x119; &amp;#x11A; &amp;#x11B; &amp;#x11C; &amp;#x11D; &amp;#x11E; &amp;#x11F; &amp;#x120; &amp;#x121; &amp;#x122; &amp;#x123; &amp;#x124; &amp;#x125; &amp;#x126; &amp;#x127; &amp;#x128; &amp;#x129; &amp;#x12A; &amp;#x12B; &amp;#x12C; &amp;#x12D; &amp;#x12E; &amp;#x12F; &amp;#x130; &amp;#x131; &amp;#x132; &amp;#x133; &amp;#x134; &amp;#x135; &amp;#x136; &amp;#x137; &amp;#x138; &amp;#x139; &amp;#x13A; &amp;#x13B; &amp;#x13C; &amp;#x13D; &amp;#x13E; &amp;#x13F; &amp;#x140; &amp;#x141; &amp;#x142; &amp;#x143; &amp;#x144; &amp;#x145; &amp;#x146; &amp;#x147; &amp;#x148; &amp;#x149; &amp;#x14A; &amp;#x14B; &amp;#x14C; &amp;#x14D; &amp;#x14E; &amp;#x14F; &amp;#x150; &amp;#x151; &amp;#x152; &amp;#x153; &amp;#x154; &amp;#x155; &amp;#x156; &amp;#x157; &amp;#x158; &amp;#x159; &amp;#x15A; &amp;#x15B; &amp;#x15C; &amp;#x15D; &amp;#x15E; &amp;#x15F; &amp;#x160; &amp;#x161; &amp;#x162; &amp;#x163; &amp;#x164; &amp;#x165; &amp;#x166; &amp;#x167; &amp;#x168; &amp;#x169; &amp;#x16A; &amp;#x16B; &amp;#x16C; &amp;#x16D; &amp;#x16E; &amp;#x16F; &amp;#x170; &amp;#x171; &amp;#x172; &amp;#x173; &amp;#x174; &amp;#x175; &amp;#x176; &amp;#x177; &amp;#x178; &amp;#x179; &amp;#x17A; &amp;#x17B; &amp;#x17C; &amp;#x17D; &amp;#x17E; &amp;#x17F;</p><p>Latin Extended-B</p><p>&amp;#x180; &amp;#x181; &amp;#x182; &amp;#x183; &amp;#x184; &amp;#x185; &amp;#x186; &amp;#x187; &amp;#x188; &amp;#x189; &amp;#x18A; &amp;#x18B; &amp;#x18C; &amp;#x18D; &amp;#x18E; &amp;#x18F; &amp;#x190; &amp;#x191; &amp;#x192; &amp;#x193; &amp;#x194; &amp;#x195; &amp;#x196; &amp;#x197; &amp;#x198; &amp;#x199; &amp;#x19A; &amp;#x19B; &amp;#x19C; &amp;#x19D; &amp;#x19E; &amp;#x19F; &amp;#x1A0; &amp;#x1A1; &amp;#x1A2; &amp;#x1A3; &amp;#x1A4; &amp;#x1A5; &amp;#x1A6; &amp;#x1A7; &amp;#x1A8; &amp;#x1A9; &amp;#x1AA; &amp;#x1AB; &amp;#x1AC; &amp;#x1AD; &amp;#x1AE; &amp;#x1AF; &amp;#x1B0; &amp;#x1B1; &amp;#x1B2; &amp;#x1B3; &amp;#x1B4; &amp;#x1B5; &amp;#x1B6; &amp;#x1B7; &amp;#x1B8; &amp;#x1B9; &amp;#x1BA; &amp;#x1BB; &amp;#x1BC; &amp;#x1BD; &amp;#x1BE; &amp;#x1BF; &amp;#x1C0; &amp;#x1C1; &amp;#x1C2; &amp;#x1C3; &amp;#x1C4; &amp;#x1C5; &amp;#x1C6; &amp;#x1C7; &amp;#x1C8; &amp;#x1C9; &amp;#x1CA; &amp;#x1CB; &amp;#x1CC; &amp;#x1CD; &amp;#x1CE; &amp;#x1CF; &amp;#x1D0; &amp;#x1D1; &amp;#x1D2; &amp;#x1D3; &amp;#x1D4; &amp;#x1D5; &amp;#x1D6; &amp;#x1D7; &amp;#x1D8; &amp;#x1D9; &amp;#x1DA; &amp;#x1DB; &amp;#x1DC; &amp;#x1DD; &amp;#x1DE; &amp;#x1DF; &amp;#x1E0; &amp;#x1E1; &amp;#x1E2; &amp;#x1E3; &amp;#x1E4; &amp;#x1E5; &amp;#x1E6; &amp;#x1E7; &amp;#x1E8; &amp;#x1E9; &amp;#x1EA; &amp;#x1EB; &amp;#x1EC; &amp;#x1ED; &amp;#x1EE; &amp;#x1EF; &amp;#x1F0; &amp;#x1F1; &amp;#x1F2; &amp;#x1F3; &amp;#x1F4; &amp;#x1F5; &amp;#x1F6; &amp;#x1F7; &amp;#x1F8; &amp;#x1F9; &amp;#x1FA; &amp;#x1FB; &amp;#x1FC; &amp;#x1FD; &amp;#x1FE; &amp;#x1FF; </p><p>&lt;/work_notes&gt; </p><p>           &lt;/inc:insert&gt;</p><p>     &lt;/soapenv:Body&gt;</p><p>&lt;/soapenv:Envelope&gt;</p></pre><p></p><p>Once processed into the target table, the characters are correctly displayed.</p><p><img   alt="UTF 8 ENCODED.jpg" class="image-8 jive-image" src="fb7e8542db54d344e9737a9e0f96197f.iix" style="width: 620px; height: 509px; display: block; margin-left: auto; margin-right: auto;"/></p><p>This shows that the data is processed without any problems.</p><p></p><h2>Example of a message sent to the instance using a non-Unicode (ISO-8859-1) encoding</h2><p>Similarly to the previous example, I will use SOAP UI, to transfer "comments" that contains non-ascii characters and "work_notes" that contains the same characters safely encoded. This time I will encode on 'iso-8859-1'. I would expect the system will try to match the characters against UTF-8.</p><p></p><p><strong>Using soap UI looks like:</strong></p><p><img   alt="non unicode 8 soap ui.jpg" class="image-9 jive-image" src="fb2e648adb18dfc068c1fb651f961927.iix" style="width: 620px; height: 186px; display: block; margin-left: auto; margin-right: auto;"/></p><p>In more detail looks like:</p><pre __default_attr="xml" __jive_macro_name="code" class="jive_macro_code jive_text_macro _jivemacro_uid_14798261833169810" data-renderedposition="3158.5_8_1087_416" jivemacro_uid="_14798261833169810"><p><span>&lt;soapenv:Envelope xmlns:soapenv="</span><a title="" _jive_internal="true" href="http://schemas.xmlsoap.org/soap/envelope/" rel="nofollow" target="_blank">http://schemas.xmlsoap.org/soap/envelope/</a><span>" xmlns:inc="</span><a title="" _jive_internal="true" href="http://www.service-now.com/incident" rel="nofollow" target="_blank">http://www.service-now.com/incident</a><span>"&gt;</span></p><p>     &lt;soapenv:Header/&gt;</p><p>     &lt;soapenv:Body&gt;</p><p>           &lt;inc:insert&gt;</p><p>                 &lt;short_description&gt;Testing with encoding characters characters&lt;/short_description&gt;</p><p>                 &lt;comments&gt;Testing with encoding characters characters -not safe encoded</p><p>Basic Latin</p><p> ! " # $ % ' ( ) * + , - . / 0 1 2 3 4 5 6 7 8 9 : ;   @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ \ ] ^ _ ` a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~</p><p>Latin Extended-A</p><p>A a Ä‚ Äƒ Ä„ Ä… Ä† Ä‡ C c C c ÄŒ Đ ÄŽ Đ Đ đ E e E e E e Ä˜ Ä™ Äš Ä› G g G g G g G g H h H h I i I i I i I i I i J j K k Ä¹ Äº L l Ä½ Ä¾ Ł Å‚ Åƒ Å„ N n Å‡ Åˆ O o O o Ł Å‘ O o Å” Å• R r Å˜ Å™ Åš Å› S s Åž ÅŸ Å  š Å¢ Å£ Å¤ Å¥ T t U u U u U u Å® Å¯ Å° Å± U u W w Y y Y Å¹ Åº Å» Å¼ Å½ ž </p><p>Latin Extended-B</p><p>b Đ F f I l O O o t T U u z | ! A a I i O o U u U u U u U u U u A a G g G g K k O o O o j</p><p>&lt;/comments&gt;</p><p>                 &lt;work_notes&gt;Testing with encoding characters characters -safe encoded</p><p>Basic Latin</p><p>! &amp;#x22; # $ % &amp;#x26; &amp;#x27; ( ) * + , - . / 0 1 2 3 4 5 6 7 8 9 : ; &amp;#x3C; = &amp;#x3E; ? @ A B C D E F G H I J K L M N O P Q R S T U V W X Y Z [ \ ] ^ _ &amp;#x60; a b c d e f g h i j k l m n o p q r s t u v w x y z { | } ~</p><p>Latin-1 Supplement</p><p>   &amp;#xA1; &amp;#xA2; &amp;#xA3; &amp;#xA4; &amp;#xA5; &amp;#xA6; &amp;#xA7; &amp;#xA8; &amp;#xA9; &amp;#xAA; &amp;#xAB; &amp;#xAC; &amp;#xAD; &amp;#xAE; &amp;#xAF; &amp;#xB0; &amp;#xB1; &amp;#xB2; &amp;#xB3; &amp;#xB4; &amp;#xB5; &amp;#xB6; &amp;#xB7; &amp;#xB8; &amp;#xB9; &amp;#xBA; &amp;#xBB; &amp;#xBC; &amp;#xBD; &amp;#xBE; &amp;#xBF; &amp;#xC0; &amp;#xC1; &amp;#xC2; &amp;#xC3; &amp;#xC4; &amp;#xC5; &amp;#xC6; &amp;#xC7; &amp;#xC8; &amp;#xC9; &amp;#xCA; &amp;#xCB; &amp;#xCC; &amp;#xCD; &amp;#xCE; &amp;#xCF; &amp;#xD0; &amp;#xD1; &amp;#xD2; &amp;#xD3; &amp;#xD4; &amp;#xD5; &amp;#xD6; &amp;#xD7; &amp;#xD8; &amp;#xD9; &amp;#xDA; &amp;#xDB; &amp;#xDC; &amp;#xDD; &amp;#xDE; &amp;#xDF; &amp;#xE0; &amp;#xE1; &amp;#xE2; &amp;#xE3; &amp;#xE4; &amp;#xE5; &amp;#xE6; &amp;#xE7; &amp;#xE8; &amp;#xE9; &amp;#xEA; &amp;#xEB; &amp;#xEC; &amp;#xED; &amp;#xEE; &amp;#xEF; &amp;#xF0; &amp;#xF1; &amp;#xF2; &amp;#xF3; &amp;#xF4; &amp;#xF5; &amp;#xF6; &amp;#xF7; &amp;#xF8; &amp;#xF9; &amp;#xFA; &amp;#xFB; &amp;#xFC; &amp;#xFD; &amp;#xFE; &amp;#xFF;</p><p>Latin Extended-A</p><p>&amp;#x100; &amp;#x101; &amp;#x102; &amp;#x103; &amp;#x104; &amp;#x105; &amp;#x106; &amp;#x107; &amp;#x108; &amp;#x109; &amp;#x10A; &amp;#x10B; &amp;#x10C; &amp;#x10D; &amp;#x10E; &amp;#x10F; &amp;#x110; &amp;#x111; &amp;#x112; &amp;#x113; &amp;#x114; &amp;#x115; &amp;#x116; &amp;#x117; &amp;#x118; &amp;#x119; &amp;#x11A; &amp;#x11B; &amp;#x11C; &amp;#x11D; &amp;#x11E; &amp;#x11F; &amp;#x120; &amp;#x121; &amp;#x122; &amp;#x123; &amp;#x124; &amp;#x125; &amp;#x126; &amp;#x127; &amp;#x128; &amp;#x129; &amp;#x12A; &amp;#x12B; &amp;#x12C; &amp;#x12D; &amp;#x12E; &amp;#x12F; &amp;#x130; &amp;#x131; &amp;#x132; &amp;#x133; &amp;#x134; &amp;#x135; &amp;#x136; &amp;#x137; &amp;#x138; &amp;#x139; &amp;#x13A; &amp;#x13B; &amp;#x13C; &amp;#x13D; &amp;#x13E; &amp;#x13F; &amp;#x140; &amp;#x141; &amp;#x142; &amp;#x143; &amp;#x144; &amp;#x145; &amp;#x146; &amp;#x147; &amp;#x148; &amp;#x149; &amp;#x14A; &amp;#x14B; &amp;#x14C; &amp;#x14D; &amp;#x14E; &amp;#x14F; &amp;#x150; &amp;#x151; &amp;#x152; &amp;#x153; &amp;#x154; &amp;#x155; &amp;#x156; &amp;#x157; &amp;#x158; &amp;#x159; &amp;#x15A; &amp;#x15B; &amp;#x15C; &amp;#x15D; &amp;#x15E; &amp;#x15F; &amp;#x160; &amp;#x161; &amp;#x162; &amp;#x163; &amp;#x164; &amp;#x165; &amp;#x166; &amp;#x167; &amp;#x168; &amp;#x169; &amp;#x16A; &amp;#x16B; &amp;#x16C; &amp;#x16D; &amp;#x16E; &amp;#x16F; &amp;#x170; &amp;#x171; &amp;#x172; &amp;#x173; &amp;#x174; &amp;#x175; &amp;#x176; &amp;#x177; &amp;#x178; &amp;#x179; &amp;#x17A; &amp;#x17B; &amp;#x17C; &amp;#x17D; &amp;#x17E; &amp;#x17F;</p><p>Latin Extended-B</p><p>&amp;#x180; &amp;#x181; &amp;#x182; &amp;#x183; &amp;#x184; &amp;#x185; &amp;#x186; &amp;#x187; &amp;#x188; &amp;#x189; &amp;#x18A; &amp;#x18B; &amp;#x18C; &amp;#x18D; &amp;#x18E; &amp;#x18F; &amp;#x190; &amp;#x191; &amp;#x192; &amp;#x193; &amp;#x194; &amp;#x195; &amp;#x196; &amp;#x197; &amp;#x198; &amp;#x199; &amp;#x19A; &amp;#x19B; &amp;#x19C; &amp;#x19D; &amp;#x19E; &amp;#x19F; &amp;#x1A0; &amp;#x1A1; &amp;#x1A2; &amp;#x1A3; &amp;#x1A4; &amp;#x1A5; &amp;#x1A6; &amp;#x1A7; &amp;#x1A8; &amp;#x1A9; &amp;#x1AA; &amp;#x1AB; &amp;#x1AC; &amp;#x1AD; &amp;#x1AE; &amp;#x1AF; &amp;#x1B0; &amp;#x1B1; &amp;#x1B2; &amp;#x1B3; &amp;#x1B4; &amp;#x1B5; &amp;#x1B6; &amp;#x1B7; &amp;#x1B8; &amp;#x1B9; &amp;#x1BA; &amp;#x1BB; &amp;#x1BC; &amp;#x1BD; &amp;#x1BE; &amp;#x1BF; &amp;#x1C0; &amp;#x1C1; &amp;#x1C2; &amp;#x1C3; &amp;#x1C4; &amp;#x1C5; &amp;#x1C6; &amp;#x1C7; &amp;#x1C8; &amp;#x1C9; &amp;#x1CA; &amp;#x1CB; &amp;#x1CC; &amp;#x1CD; &amp;#x1CE; &amp;#x1CF; &amp;#x1D0; &amp;#x1D1; &amp;#x1D2; &amp;#x1D3; &amp;#x1D4; &amp;#x1D5; &amp;#x1D6; &amp;#x1D7; &amp;#x1D8; &amp;#x1D9; &amp;#x1DA; &amp;#x1DB; &amp;#x1DC; &amp;#x1DD; &amp;#x1DE; &amp;#x1DF; &amp;#x1E0; &amp;#x1E1; &amp;#x1E2; &amp;#x1E3; &amp;#x1E4; &amp;#x1E5; &amp;#x1E6; &amp;#x1E7; &amp;#x1E8; &amp;#x1E9; &amp;#x1EA; &amp;#x1EB; &amp;#x1EC; &amp;#x1ED; &amp;#x1EE; &amp;#x1EF; &amp;#x1F0; &amp;#x1F1; &amp;#x1F2; &amp;#x1F3; &amp;#x1F4; &amp;#x1F5; &amp;#x1F6; &amp;#x1F7; &amp;#x1F8; &amp;#x1F9; &amp;#x1FA; &amp;#x1FB; &amp;#x1FC; &amp;#x1FD; &amp;#x1FE; &amp;#x1FF; </p><p>&lt;/work_notes&gt; </p><p>           &lt;/inc:insert&gt;</p><p>     &lt;/soapenv:Body&gt;</p><p>&lt;/soapenv:Envelope&gt;</p></pre><p></p><p>Below, you can see some characters would be translated. However, with XML encoded characters, you can safely send <a title="n.wikipedia.org/wiki/UTF-8" href="https://en.wikipedia.org/wiki/UTF-8">UTF-8</a> characters.</p><p><img   alt="incorrectly translated UTF .jpg" class="image-10 jive-image" src="dfba880adb5017041dcaf3231f961969.iix" style="width: 620px; height: 472px; display: block; margin-left: auto; margin-right: auto;"/></p><p>Using non-ascii characters can cause them to get transferred incorrectly. However, using XML encoded characters you can safely transfer those characters.</p><pre __default_attr="info" __jive_macro_name="alert" alert="info" class="jive_text_macro jive_macro_alert" data-renderedposition="4147.5_8_1087_43"><p>Using XML encoded characters, you can safely transfer non-ascii characters when encoding is not UTF-8. </p></pre><p></p><h1>How to safely encode XML data</h1><p>There are several methods to achieve the data to be encoded. Below is a simple script that can encode the data transferred.</p><p></p><p>Here is a simple background script function that encode data:</p><pre __default_attr="javascript" __jive_macro_name="code" class="_jivemacro_uid_14798284149181852 jive_macro_code jive_text_macro" data-renderedposition="4324.5_8_1087_144" jivemacro_uid="_14798284149181852"><p>// Simple encoding XML data function - Do not double-escape any characters.</p><p>function escapeXMLEntities(xmldata) {</p><p>       return xmldata.replace(/[\u00A0-\u2666&lt;&gt;\&amp;]/g, function (a) {</p><p>               return "&amp;#" + a.charCodeAt(0) + ";"</p><p>       })</p><p>};</p><p></p><p>var str = "A a Ä‚ Äƒ Ä„ Ä… Ä† Ä‡ C c C c ÄŒ Đ ÄŽ Đ Đ đ E e E e E e Ä˜ Ä™ Äš Ä› G g G g G g G g H h H h I i I i I i I i I i J j K k Ä¹ Äº L l Ä½ Ä¾ Ł Å‚ Åƒ Å„ N n Å‡ Åˆ O o O o Ł Å‘ O o Å” Å• R r Å˜ Å™ Åš Å› S s Åž ÅŸ Å  š Å¢ Å£ Å¤ Å¥ T t U u U u U u Å® Å¯ Å° Å± U u W w Y y Y Å¹ Åº Å» Å¼ Å½ ž";</p><p>gs.print(escapeXMLEntities(str));</p></pre><p></p><p>Result:</p><pre __jive_macro_name="quote" class="jive_macro_quote jive_text_macro" data-renderedposition="4520.5_8_1087_125"><p>Script completed in scope global: script</p><p>*** Script: A a &amp;#258; &amp;#259; &amp;#260; &amp;#261; &amp;#262; &amp;#263; C c C c &amp;#268; &amp;#269; &amp;#270; &amp;#271; &amp;#272; &amp;#273; E e E e E e &amp;#280; &amp;#281; &amp;#282; &amp;#283; G g G g G g G g H h H h I i I i I i I i I i J j K k &amp;#313; &amp;#314; L l &amp;#317; &amp;#318; &amp;#321; &amp;#322; &amp;#323; &amp;#324; N n &amp;#327; &amp;#328; O o O o &amp;#336; &amp;#337; O o &amp;#340; &amp;#341; R r &amp;#344; &amp;#345; &amp;#346; &amp;#347; S s &amp;#350; &amp;#351; &amp;#352; &amp;#353; &amp;#354; &amp;#355; &amp;#356; &amp;#357; T t U u U u U u &amp;#366; &amp;#367; &amp;#368; &amp;#369; U u W w Y y Y &amp;#377; &amp;#378; &amp;#379; &amp;#380; &amp;#381; &amp;#382;</p></pre><p></p><p>When using SOAP messages, ensure you are using UTF-8 to transfer the data, or ensure non-ascii characters are escaped safely into XML safe codes. A good note, this can also be used on many other situations. Luckily, programmatically, it is not a big challenge.</p><p></p><p>More information can be found here:</p><ul><li><a href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/integrate/inbound-soap/concept/c_SOAPWebService.html" title="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/integrate/inbound-soap/concept/c_SOAPWebService.html">SOAP web service</a></li><li><a title="i.service-now.com/kb_view.do?sysparm_article=KB0538864" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0538864">Unable to specify character encoding "UTF-8" for JDBC connection to SQL server (KB0538864)</a><a title="i.service-now.com/kb_view.do?sysparm_article=KB0550868" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0550868">https://hi.service-now.com/kb_view.do?sysparm_article=KB0550868</a></li><li><a title="i.service-now.com/kb_view.do?sysparm_article=KB0550868" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0550868">Data imported using an outbound SOAP function via a MID server displays two-byte utf-8 characters incorrectly (KB0550868)</a><a title="i.service-now.com/kb_view.do?sysparm_article=KB0621602" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0621602">https://hi.service-now.com/kb_view.do?sysparm_article=KB0621602</a></li><li><a title="i.service-now.com/kb_view.do?sysparm_article=KB0621602" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0621602">Four-byte UTF-8 emojis cause email to be truncated in database (KB0621602)</a></li><li><a title="i.service-now.com/kb_view.do?sysparm_article=KB0538864" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0538864">Unable to specify character encoding "UTF-8" for JDBC connection to SQL server (KB0538864)</a></li><li><a href="https://en.wikipedia.org/wiki/UTF-8" title="https://en.wikipedia.org/wiki/UTF-8">UTF-8 - Wikipedia</a></li><li><a href="https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references" title="https://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references">List of XML and HTML character entity references - Wikipedia</a></li><li><a href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/integrate/web-services/reference/r_AvailableWebServices.html" title="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/integrate/web-services/reference/r_AvailableWebServices.html">Web services</a></li><li><a href="https://en.wikipedia.org/wiki/Character_encoding" title="https://en.wikipedia.org/wiki/Character_encoding">Character encoding - Wikipedia</a></li><li><a _jive_internal="true" href="/people/jonnyseymour/content" title="https://community.servicenow.com/people/jonnyseymour/content">My other blogs</a></li></ul>