---
title: "Filling PDF forms in ServiceNow"
date: 2017-10-12T04:05:17.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=4acc6265dbd0dbc01dcaf3231f961949"
---
<p>Complex web applications often require the ability to generate documents, and PDF is the obvious format for doing so as it's the de-facto standard for digital documents.</p><p></p><p>PDF generation in ServiceNow can be done in various ways, however today I'm going to cover what I feel is a very simple yet powerful method: leveraging the PDF form handling capabilities of the <strong>PDF Generator</strong> plugin.</p><p></p><p>The power of this method comes from the fact that any PDF form can be directly consumed, and no time needs to be spent rebuilding an existing PDF form in a format like HTML (which needs to be done when using most other methods).</p><p></p><p>I created a simple PDF form to use in my examples below, which I've attached to this blog so that you can download it and work along with me. You can find the attachment at the bottom of this article.</p><p></p><p><img   alt="Screen-Shot-2017-09-30-at-9.36.36-pm-1-1600x689.png" class="image-1 jive-image" src="ae824142db5897041dcaf3231f96190a.iix" style="width: 620px; height: 267px;"/></p><p></p><p><span style="font-size: 18pt;">GeneralPdfUtils</span></p><p>The PDF Generator plugin comes with a script include called <em>GeneralPdfUtils</em>, which contains the majority of the functions which we can use to interact with PDF forms.</p><p></p><p><em>Note: usage of the PDF Generator plugin may have licensing implications.</em></p><p></p><p><span style="font-size: 18pt;">Detecting fillable fields</span></p><p>Every PDF form is unique, and has different fields which can be completed. We thus need a way to get a list of all the fields that exist on the form so that we know what we can plug into it. To do this we can use the <strong>getPDFFields()</strong> function:</p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_15077619162919052 jive_text_macro" data-renderedposition="772_8_1177_128" jivemacro_uid="_15077619162919052"><p><code>var pdf = new global.GeneralPdfUtils();</code></p><p></p><p><code>// Sys ID of a PDF form attached to any record</code></p><p><code>var attachmentSysId = '0fd6278d4f25c70022f40ccf0310c7c8';</code></p><p></p><p><code>var fieldsString = pdf.getPDFFields(attachmentSysId);</code></p><p></p><p><code>var fields = JSON.parse(fieldsString);</code></p></pre><p></p><p>When running the above code on my example PDF, the <span style="font-family: 'andale mono', times;">fields</span> variable contains the JavaScript object shown below:</p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_15077619733559849 jive_text_macro" data-renderedposition="963_8_1177_96" jivemacro_uid="_15077619733559849"><p><code>{</code></p><p>     "Read Terms and Conditions": "",</p><p>     "First name": "",</p><p>     "Gender": "",</p><p>     "Last name": ""</p><p>}</p></pre><p></p><p>When we fill the form later on, you will see that the function to do this ingests it's data in this exact format. This means that now that the <span style="font-family: 'andale mono', times;">fields</span> variable contains this structure, we can directly manipulate it and feed it back into the form. We could also loop over it and check if a field of that name exists on a certain table in ServiceNow. If it does, we can set that PDF form field to the value of the field in that table. This is very powerful stuff!</p><p></p><p><span style="font-size: 18pt;">Detecting the types of fields</span></p><p>There are multiple types of fields which can exist on a PDF form. We can use the <span style="font-family: 'andale mono', times;">getFieldType()</span> function to do this.</p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="_jivemacro_uid_15077620180143251 jive_macro_code jive_text_macro" data-renderedposition="1242_8_1177_128" jivemacro_uid="_15077620180143251"><p>var pdf = new global.GeneralPdfUtils();</p><p></p><p>// Sys ID of a PDF form attached to any record</p><p>var attachmentSysId = '0fd6278d4f25c70022f40ccf0310c7c8';</p><p></p><p>var fieldTypesString = pdf.getFieldType(attachmentSysId);</p><p></p><p>var fieldTypes = JSON.parse(fieldTypesString);</p></pre><p></p><p>When running the above code on my example PDF, the <span style="font-family: 'andale mono', times;">fieldTypes</span> variable contains the JavaScript object shown below:</p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="_jivemacro_uid_15077620418278113 jive_macro_code jive_text_macro" data-renderedposition="1433_8_1177_352" jivemacro_uid="_15077620418278113"><p>{</p><p>       "Read Terms and Conditions":</p><p>       {</p><p>               "true_value": "[Off, Yes]",</p><p>               "field_type": "2"</p><p>       },</p><p>       "First name":</p><p>       {</p><p>               "true_value": "",</p><p>               "field_type": "4"</p><p>       },</p><p>       "Gender":</p><p>       {</p><p>               "true_value": "",</p><p>               "field_type": "3"</p><p>       },</p><p>       "Last name":</p><p>       {</p><p>               "true_value": "",</p><p>               "field_type": "4"</p><p>       }</p><p>}</p></pre><p></p><p>You can see that the <strong>Read Terms and Conditions</strong> field is a checkbox (<em>field_type = 2</em>) with a <em>Yes</em> (checked) and <em>Off</em> (unchecked) state. <strong>First name</strong> and <strong>Last name</strong> are both text fields (<em>field_type = 4</em>), and <strong>Gender</strong> is a radio field (<em>field_type = 3</em>).</p><p></p><p><span style="font-size: 18pt;">Fill the form</span></p><p>We can now use the knowledge we've gained about the PDF form to fill in the form using the <span style="font-family: 'andale mono', times;">prefillPDF()</span> function.</p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="_jivemacro_uid_15077620786142922 jive_macro_code jive_text_macro" data-renderedposition="1949_8_1177_320" jivemacro_uid="_15077620786142922"><p>var pdf = new global.GeneralPdfUtils();</p><p>   </p><p>// Sys ID of an attachment</p><p>var attachmentSysId = '0fd6278d4f25c70022f40ccf0310c7c8';</p><p></p><p>var jsonObject = {</p><p>       "Read Terms and Conditions": "Yes",</p><p>       "First name": "Dylan",</p><p>       "Gender": "Male",</p><p>       "Last name": "Lindgren"</p><p>};</p><p></p><p>var jsonString = JSON.stringify(jsonObject);</p><p>   </p><p>var destinationTableName = 'incident';</p><p>var destinationTableSysId = '9de878bf4f34c300ab4450af0310c722';</p><p>   </p><p>var pdfName = 'my-completed-form.pdf';</p><p></p><p>pdf.prefillPdf(jsonString, destinationTableSysId, attachmentSysId, destinationTableName, pdfName);</p></pre><p></p><p>If we go into the record we've targeted in the <span style="font-family: 'andale mono', times;">destinationTableSysId</span> variable, we will see that we have a new attachment called <span style="font-family: 'andale mono', times;">my-completed-form.pdf</span> which is a completed PDF form with the values we supplied!</p><p></p><p><img   alt="Screen-Shot-2017-09-30-at-9.34.51-pm-768x389.png" class="image-2 jive-image" src="aabf10c2db1c5304b322f4621f961914.iix" style="width: 620px; height: 314px;"/></p><p></p><p><span style="font-size: 18pt;">Other functions</span></p><p>There's a number of other functions in the GeneralPdfUtils script include, some of which I feel will be worth investigating:</p><p></p><ul><li><span style="font-family: 'andale mono', times;">isFillable()</span></li><li><span style="font-family: 'andale mono', times;">mergeImageToPdf()</span></li><li><span style="font-family: 'andale mono', times;">isValidPdfTemplateForPreFill()</span></li></ul><p></p><p>Depending on their usefulness, I may write a follow up blog post covering under what situations one would use these, along with examples.</p><p></p><p><span style="font-size: 18pt;">Conclusion</span></p><p>Hopefully this post has revealed a new, simple, but powerful way you can work with PDF files in ServiceNow.</p><p></p><p>Feel free to reach out to me on Twitter <a title="witter.com/dylanlindgren" href="https://twitter.com/dylanlindgren">@dylanlindgren</a> with any questions, or leave a comment below.</p>