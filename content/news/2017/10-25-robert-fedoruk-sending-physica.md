---
title: "Sending physical attachments on outbound email"
date: 2017-10-24T23:03:19.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=e32de6e5dbd0dbc01dcaf3231f96197a"
---
<p>Hello friends!   A frequent request from stakeholders is physical attachments on outbound email.   Its most common with Approvals.   Change approvers are blind to info in attachments like non-tracked CIs, back out plans, deployment / testing instructions, etc.   Its even more frequent on custom applications.   Most commonly hyperlinks to attachments are placed in outbound messages, but this has a critical weakness: role requirements.   It's also a high-friction user experience as people are already instinctively used to file attachment on email.</p><p></p><p>The good news is, its a REALLY simple feature once you understand how GlideSysAttachment.copy works.   You may have used this to copy attachments between records before, but you may not have known that attachments made to sys_email records before they're send will physically attach them to the email.</p><p></p><h1><strong>GlideSysAttachment.copy Parameters</strong></h1><p>GlideSysAttachment.copy(source table, source_id, target table, target_id)</p><p></p><p><strong>Source Table:</strong>   what table is the attachment associated with.   You need to be more careful here than usual because the implied "records are in the table they're extended from" doesn't apply here.   You can't say "task", for example, you must use the specific task table the record can be found in.</p><p><strong>Source ID:</strong>   The sys_id of the record the attachment is associated with</p><p><strong>Target Table: </strong> The table containing the record the attachments will be copied to.   Remember, the same specificity requirements as source_table.</p><p><strong>Target ID:</strong>   The sys_id of the record the you copy attachments to.</p><p></p><p><span style="color: #909090;"><strong>BTW, Why do I need to know the table AND the sys_ID?<br/></strong>Attachments aren't stored ON the table you attach them to.   If you add a file to an incident, you're storing it in the sys_attachments table, and that holds references to the record you attached to.   To save itself from searching the entire platform for a single sys_id, the sys_attachment table first specifies the table the containing record resides (since attachments can be added to dang near everything).</span></p><p></p><h1>GETTING FANCY WITH PARAMETERS FOR EMAIL ATTACHMENTS</h1><p>In my case I wanted physical attachments for approvals.   So I had a couple issues:</p><p></p><p><strong>STEP 1 - Intercepting the sys_email record before it sends.</strong></p><p>Easy enough with a before-insert business rule:</p><p><img   class="image-1 jive-image" src="f9f589cadbd013043eb27a9e0f9619c8.iix" style="max-width: 1200px; max-height: 900px;"/></p><p>- I had a further condition to ensure this only fired for Approvals</p><p></p><p><strong>STEP 2 - Fancy parameters</strong></p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_15088687008775475 jive_text_macro" data-renderedposition="1240_8_1192_128" jivemacro_uid="_15088687008775475"><p>(function executeRule(current, previous /*null when async*/) {</p><p>//remember:   current is the email record being generated</p><p>var source = current.instance.document_id; //Instance is the reference to the record triggering email. document ID is the reference to what the approval record approves</p><p>var source_table = current.instance.source_table //ask what table the record triggering the email resides in</p><p>var target = current.sys_id; //attaching to this specific email record</p><p>GlideSysAttachment.copy(source_table, source, 'sys_email', target);</p><p></p><p>})(current, previous);</p></pre><p></p><p>Et voila!   ALL approvals now carry the physical attachments of whatever record you're approving.</p>