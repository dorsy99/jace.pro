---
title: "How to address the character limit on condition filters for catalog variables"
date: 2017-07-02T03:54:46.000Z
authors: ["GianLuca Giustiniani"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=bdfce2a5dbd0dbc01dcaf3231f96193c"
---
<p>On instances before the <strong>Istanbul</strong><strong></strong> release, the '<strong>Reference qual condition</strong>' field used for catalog variables was limited to a maximum length of <strong>255</strong> characters. If the translated query string exceeds this limit, a truncation occurs with no logged error or warning (<a title="i.service-now.com/kb_view.do?sysparm_article=KB0623315" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0623315">KB0623315</a>). This causes conditions to be stored corrupted and unusable in the system. If you are lucky enough to be at least be aware of this limitation, typically, you would know not not be able to add conditions over five or six rows in the wizard variable reference field in order to make it work safely.</p><p style="text-align: center;"><img   alt="reference qualifier.jpeg" class="image-5 jive-image" src="7b570486db1017049c9ffb651f961916.iix" style="width: 620px; height: 223px;"/></p><p></p><p>You can reproduce this issue with the following steps:</p><ol><li>Navigate to <strong>Service Catalog </strong>&gt;<strong> Catalog Variables </strong>&gt;<strong> All Variables</strong>.</li><li>Select a <strong>Reference type</strong> variable that uses a simple reference qualifier, i.e. the Question = "Select an Export Target".</li><li>Within the variable form, click on the <strong>Type Specifications</strong> section tab.</li><li>Add several conditions as shown below and save the record.</li></ol><p style="text-align: center;"><img   alt="simple reference qualifier.png" class="image-6 jive-image" src="5053673ddbd01fc068c1fb651f9619ca.iix" style="width: 620px; height: 364px;"/></p><p></p><p>If you now use the variable and review the actual query being executed, you will notice that Â  some bottom conditions have disappeared!</p><p>How irritating can that be?</p><p></p><p>The culprit table column on the dictionary is [<strong>question</strong>].[<strong>reference_qual_condition</strong>]. The Tables &amp; Columns tool will help you identify it.</p><p style="text-align: center;"><img   alt="dictionary table column.png" class="image-7 jive-image" src="ae9c8dc2db14d344e9737a9e0f96192d.iix" style="width: 620px; height: 296px;"/></p><p></p><p>A limit of 255 characters is usually too short for this purpose. Other similar fields in the platform are usually 1000 or 4000 characters long. However, this field needs to be left OOB and the max length should not be altered, as it may cause issues in other areas of the platform.</p><p></p><p>Since Istanbul, the new reference qualifier condition field max length has been increased to 4000 characters.</p><p></p><h1>Avoid query truncation on catalog variable reference qualifier conditions</h1><p>If an upgrade to Istanbul is not yet possible, as a workaround you can set up an advanced reference qualifier instead of a simple one, and write a script to implement the query needed to return the wanted filtered values. The <strong>Reference qual</strong> field should contain the javascript call to your scripted function, ideally stored in a <strong>Script Include</strong>.</p><p style="text-align: center;"><img   alt="reference qual field.png" class="image-8 jive-image" src="7425ec4edb9457041dcaf3231f961984.iix" style="width: 620px; height: 99px;"/></p><p></p><p>For further information on how to proceed with the implementation of your script, the available documentation pages below can be of help:</p><ul><li><a href="https://docs.servicenow.com/bundle/helsinki-servicenow-platform/page/administer/users-and-groups/concept/c_CreateAnAdvancedRefQualifier.html" title="https://docs.servicenow.com/bundle/helsinki-servicenow-platform/page/administer/users-and-groups/concept/c_CreateAnAdvancedRefQualifier.html">Create an advanced reference qualifier</a></li><li><a href="https://docs.servicenow.com/bundle/helsinki-servicenow-platform/page/script/server-scripting/concept/c_AdvancedReferenceQualifierExample.html" title="https://docs.servicenow.com/bundle/helsinki-servicenow-platform/page/script/server-scripting/concept/c_AdvancedReferenceQualifierExample.html">Advanced reference qualifier example</a></li></ul>