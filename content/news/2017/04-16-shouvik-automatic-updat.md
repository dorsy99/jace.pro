---
title: "Automatic update fields based on selection"
date: 2017-04-15T12:15:10.000Z
authors: ["shouvik"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=809d6a69dbd0dbc01dcaf3231f961955"
---
<p>The reference variable is for the User(sys_user) table. When you select a user, email and department from sys_user are copied to email and department variables. This could be a very common use case for all catalog admins. But what if I tell you that you can achieve the entire flow <strong>without</strong> writing a <strong>single line of code</strong>?</p><p></p><p><iframe id='video_tinymce_9122' style='width: 100%; height: 480px;' src=https://youtube.com/embed/bMpLBaqBYqQ?showinfo=0></iframe></p><p>Let's see how we can use the power of Service Catalog and achieve this without writing a single line of code. The short answer to the magic is <a title="ocs.servicenow.com/bundle/istanbul-it-service-management/page/product/service-catalog-management/concept/c_ServiceCatalogDataLookup.html" href="https://docs.servicenow.com/bundle/istanbul-it-service-management/page/product/service-catalog-management/concept/c_ServiceCatalogDataLookup.html">Catalog Data Lookup</a>. Catalog Data Lookup lets you define a custom lookup table (extending dl_matcher). Then you can have the matcher define which can set the variable with values defined in the setter, when a valid match is found. But in the example we are using, the sys_user table that does not extend dl_matcher. So ho did the Data Lookup work?</p><p></p><h1>How to configure Data Lookup</h1><p>1. Go to <strong>System Definition &gt; Tables &gt; Data Lookup Definitions(dl_definition)</strong>.</p><p style="text-align: center;"><img   alt="data look up definition.jpg" class="image-12 jive-image" src="b2fdefbddb981fc068c1fb651f961993.iix" style="width: 620px; height: 332px;"/></p><p></p><p>2. Under the Columns tab, select <strong>Matcher Table</strong>.</p><p>3. Under the Dictionary Overrides tab, click <strong>New.</strong> From Table drop-down list, select <strong>Catalog Data Lookup Definitions.</strong> Select the <strong>Override Attributes</strong> checkbox and then enter <strong>base_table=</strong></p><p style="text-align: center;"><img   alt="dictionary overrides.jpg" class="image-13 jive-image" src="4371194adb989f048c8ef4621f961916.iix" style="width: 620px; height: 271px;"/></p><p></p><p>4. Create a Catalog Item; for example, create a Test Item (Testing Lookup) with the following variables:</p><p>         a) Type:                   Reference</p><p>                 Name:               requested_for</p><p>                 Question:     Requested For</p><p>                 <span style="color: #343d47; font-family: SourceSansPro, 'Helvetica Neue', Arial; font-size: 13px; text-align: right;">Reference:     sys_user</span></p><p></p><p><span style="color: #343d47; font-family: SourceSansPro, 'Helvetica Neue', Arial; font-size: 13px; text-align: right;">         b) Type:                                                     Lookup Select Box</span></p><p><span style="color: #343d47; font-family: SourceSansPro, 'Helvetica Neue', Arial; font-size: 13px; text-align: right;">                   Name:                                               dept</span></p><p><span style="color: #343d47; font-family: SourceSansPro, 'Helvetica Neue', Arial; font-size: 13px; text-align: right;">                   Question:                                     Department</span></p><p><span style="color: #343d47; font-family: SourceSansPro, 'Helvetica Neue', Arial; font-size: 13px; text-align: right;">                   Lookup from table:       cmn_department</span></p><p><span style="color: #343d47; font-family: SourceSansPro, 'Helvetica Neue', Arial; font-size: 13px; text-align: right;">                   Lookup value field:       sys_id</span></p><p><span style="color: #343d47; font-family: SourceSansPro, 'Helvetica Neue', Arial; font-size: 13px; text-align: right;">                   Lookup label field(s): name</span></p><p><span style="color: #343d47; font-family: SourceSansPro, 'Helvetica Neue', Arial; font-size: 13px; text-align: right;">                   Include None:                       Checked</span></p><p></p><p><span style="color: #343d47; font-family: SourceSansPro, 'Helvetica Neue', Arial; font-size: 13px; text-align: right;">         c) Type:                               Single Line Text</span></p><p><span style="color: #343d47; font-family: SourceSansPro, 'Helvetica Neue', Arial; font-size: 13px; text-align: right;">                   Name:                         email</span></p><p><span style="color: #343d47; font-family: SourceSansPro, 'Helvetica Neue', Arial; font-size: 13px; text-align: right;">                   Question:                 Email</span></p><p></p><p style="text-align: center;">       <img   alt="catalog items.jpg" class="image-14 jive-image" src="7bdfe0cedbd857049c9ffb651f9619bc.iix" style="width: 620px; height: 77px;"/></p><p></p><p><span style="color: #343d47; font-family: SourceSansPro, 'Helvetica Neue', Arial; font-size: 13px; text-align: right;">5. Create a Catalog UI Policy</span></p><p><span style="color: #343d47; font-family: SourceSansPro, 'Helvetica Neue', Arial; font-size: 13px; text-align: right;">         Name: Make Readonly</span></p><p><span style="color: #343d47; font-family: SourceSansPro, 'Helvetica Neue', Arial; font-size: 13px; text-align: right;">         Policy Action: Make Department and Email readonly</span></p><p style="text-align: center;">       <img   alt="Catalog ui policy.jpg" class="image-15 jive-image" src="5953104edbd417041dcaf3231f96199f.iix" style="width: 620px; height: 120px;"/></p><p></p><p>6. Navigate to <strong>System Policy &gt; Rules &gt; Data Lookup Definitions</strong>. Click <strong>New</strong> and select <strong>Catalog Data Lookup Rule</strong>.</p><p style="text-align: center;"><img   alt="data lookup rule.jpg" class="image-16 jive-image" src="c16dabbddb18dfc0b322f4621f961929.iix" style="width: 620px; height: 197px;"/></p><p>7. Create a Catalog Lookup Definition.</p><p style="text-align: center;"><img   alt="catalog lookup.jpg" class="image-17 jive-image" src="5bbce4c2db185f048c8ef4621f961946.iix" style="width: 620px; height: 128px;"/></p><p></p><p>8. Create a Catalog Matcher Variable Definition.</p><p style="text-align: center;"><img   alt="catalog matcher.jpg" class="image-18 jive-image" src="5a09cc8edb109704ed6af3231f961934.iix" style="width: 620px; height: 85px;"/></p><p></p><p>9. Create Catalog Setter Variable Definitions.</p><p style="text-align: center;"><img   alt="variable definition.jpg" class="image-19 jive-image" src="a3fd2331db1c93049c9ffb651f9619fa.iix" style="width: 620px; height: 107px;"/></p><p></p><p>That is all! The catalog item is ready for the magic shown.</p><p style="text-align: center;"><img   alt="ezgif.com-video-to-gif (2).gif" class="image-11 jive-image" src="e109cccadb5017049c9ffb651f9619c6.iix" style="height: auto;"/></p><p style="text-align: center;"></p><p>Plugin required: Data Lookup and Record Matching Support for Service Catalog (com.glide.data_lookup.catalog).</p><p></p><p>This works on any field type, but the only limitation is that, Catalog Data Lookup works only on field change. So update your workflow to work with the field change. From Jakarta, the same setup works for Service Portal as well.</p><p></p><p style="text-align: center;"><img   alt="ezgif.com-video-to-gif (1).gif" class="image-10 jive-image" src="36bce8c2db18dfc03eb27a9e0f9619c7.iix" style="height: auto;"/></p>