---
title: "Example of an import set table staging table with reference fields"
date: 2017-02-04T05:12:56.000Z
authors: ["jonnyseymour"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=894deee5dbd0dbc01dcaf3231f961937"
---
<p>Oops!... I did it again. While I was testing out <a title="ocs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/import-sets/task/t_CreateNewDataSource.html" href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/import-sets/task/t_CreateNewDataSource.html">data sources</a>, I was tampering some <a title="ocs.servicenow.com/bundle/geneva-servicenow-platform/page/administer/import_sets/task/t_ImportDataUsingImportSets.html" href="https://docs.servicenow.com/bundle/geneva-servicenow-platform/page/administer/import_sets/task/t_ImportDataUsingImportSets.html">import set tables</a> by setting some "string fields" to "<a title="ocs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/field-administration/concept/c_ReferenceField.html" href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/field-administration/concept/c_ReferenceField.html">reference fields</a>." However, I noticed some extra data got created before the transformation, when loading data into them. With my raised eyebrows I was not expecting this so I thought I would share my findings. Reference fields are very useful to normalise and organise data. Sometimes reference fields can be too powerful. Bow down before reference fields.</p><p><img   alt="did it again.gif" class="image-5 jive-image" src="3069a802dbd4d704ed6af3231f96197b.iix" style="height: auto; display: block; margin-left: auto; margin-right: auto;"/></p><h1>Changing the field 'name' from type String to Reference</h1><p>In this example I will show you what happens when you change the field 'name' from type String to reference fields to the sys_user table. I wanted to have the sys_id on the field, instead of the full name. Â  If you need to replace ugly sys_id with the actual data "Display" values, or to normalize the data, or better relate your data, you may choose to set the field as a reference field. This is a very unusual case.</p><p><img   alt="sysid field.jpg" class="image-9 jive-image" src="530c8102db14d344e9737a9e0f9619b4.iix" style="width: 620px; height: 344px; display: block; margin-left: auto; margin-right: auto;"/></p><p>Normally, we would expect to import most string values as String types.</p><p><img   alt="string types.jpg" class="image-7 jive-image" src="03c68c86db981304b322f4621f961983.iix" style="width: 620px; height: 415px; display: block; margin-left: auto; margin-right: auto;"/></p><p></p><p>However, tables are flexible and you can customize some of those to be reference fields.</p><p><img   alt="customize ref field.jpg" class="image-8 jive-image" src="3964a335dbdc9f04e9737a9e0f961940.iix" style="width: 620px; height: 483px; display: block; margin-left: auto; margin-right: auto;"/></p><p></p><h2>Misspellings when importing records</h2><p>The problem is that if we have a simple spelling mistake like "Boris Catino <strong>X</strong>", the data load could create a new record or set the reference field to NULL.</p><p></p><pre __default_attr="info" __jive_macro_name="alert" alert="info" class="jive_text_macro jive_macro_alert" data-renderedposition="1908_8_917_43"><p>This data is inserted on the "Load all data" stage and there is NO transformation map executed yet. </p></pre><p></p><p>Here is the result of my testings:</p><table border="1" cellpadding="0" height="180" style="border: 1pt solid windowtext; width: 809px; height: 137px;" width="808"><tbody><tr><td style="border: solid windowtext 1.0pt; background: #FFC000; padding: .75pt .75pt .75pt .75pt;" width="75"><p><strong>Import data</strong></p></td><td style="border: solid windowtext 1.0pt; background: #FFC000; padding: .75pt .75pt .75pt .75pt;" width="75"><p><strong>Expected</strong></p></td><td style="border: solid windowtext 1.0pt; background: #FFC000; padding: .75pt .75pt .75pt .75pt;" width="75"><p><strong>Match Display valued</strong></p></td><td style="border: solid windowtext 1.0pt; background: #FFC000; padding: .75pt .75pt .75pt .75pt;" width="75"><p><strong>Result</strong></p></td><td style="border: solid windowtext 1.0pt; background: #FFC000; padding: .75pt .75pt .75pt .75pt;" width="75"><p><strong>Additional notes</strong></p></td></tr><tr><td style="border: solid windowtext 1.0pt; padding: .75pt .75pt .75pt .75pt;" width="75"><p>beverly campbel</p></td><td style="border: solid windowtext 1.0pt; padding: .75pt .75pt .75pt .75pt;" width="75"><p>Beverly Campbel</p></td><td style="border: solid windowtext 1.0pt; padding: .75pt .75pt .75pt .75pt;" width="75"><p>Yes</p></td><td style="border: solid windowtext 1.0pt; background: #E7E6E6; padding: .75pt .75pt .75pt .75pt;" width="75"><p>Sysid of matching record</p></td><td style="border: solid windowtext 1.0pt; background: #E7E6E6; padding: .75pt .75pt .75pt .75pt;" width="75"><p>Match is no case sensitive</p></td></tr><tr><td style="border: solid windowtext 1.0pt; padding: .75pt .75pt .75pt .75pt;" width="75"><p>Billie Cowley</p></td><td style="border: solid windowtext 1.0pt; padding: .75pt .75pt .75pt .75pt;" width="75"><p>Billie Cowley</p></td><td style="border: solid windowtext 1.0pt; padding: .75pt .75pt .75pt .75pt;" width="75"><p>Yes</p></td><td style="border: solid windowtext 1.0pt; background: #E7E6E6; padding: .75pt .75pt .75pt .75pt;" width="75"><p>Sysid of matching record</p></td><td style="border: solid windowtext 1.0pt; background: #E7E6E6; padding: .75pt .75pt .75pt .75pt;" width="75"><p></p></td></tr><tr><td style="border: solid windowtext 1.0pt; padding: .75pt .75pt .75pt .75pt;" width="75"><p>Boris Catino X</p></td><td style="border: solid windowtext 1.0pt; padding: .75pt .75pt .75pt .75pt;" width="75"><p>Boris Catino</p></td><td style="border: solid windowtext 1.0pt; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="color: #2e75b6;">No</span></p></td><td style="border: solid windowtext 1.0pt; background: #E7E6E6; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="background: yellow;">New record sysid</span></p></td><td style="border: solid windowtext 1.0pt; background: #E7E6E6; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="background: yellow;">New record created as display value does not match. On some cases can return false<br/></span></p></td></tr></tbody></table><p></p><p>You want to avoid the new records created by the reference fields themselves. Those records can cause confusion. If the records are not handled carefully, the loaded data could be set to null if there is no matching of the display value. This also applies if the data is passed for a reference field.</p><p><img   alt="user ref fields.jpg" class="image-10 jive-image" src="8a2d2046db549304b322f4621f96190a.iix" style="width: 620px; height: 459px; display: block; margin-left: auto; margin-right: auto;"/></p><p></p><p>Using reference fields is very useful if you are importing accurate data, or the sys_id of the records directly. If the imported data is flaky, keep the fields as Strings. You can then use the <a title="ocs.servicenow.com/bundle/istanbul-service-management-for-the-enterprise/page/product/facilities-service-management/concept/c_TransformMap.html" href="https://docs.servicenow.com/bundle/istanbul-service-management-for-the-enterprise/page/product/facilities-service-management/concept/c_TransformMap.html">transformation maps </a> to gain control on how to process the data and when the new data is created.</p><p></p><p>More information here:</p><ul><li><a href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0541631" title="https://hi.service-now.com/kb_view.do?sysparm_article=KB0541631">Import and Export Resources Page (KB0541631)</a> </li><li><a href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/import-sets/concept/c_ImportDataUsingImportSets.html" title="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/import-sets/concept/c_ImportDataUsingImportSets.html">Docs: Importing data using import sets</a> </li><li><a href="https://docs.servicenow.com/bundle/istanbul-service-management-for-the-enterprise/page/product/facilities-service-management/concept/c_TransformMap.html" title="https://docs.servicenow.com/bundle/istanbul-service-management-for-the-enterprise/page/product/facilities-service-management/concept/c_TransformMap.html">Docs: Transform map</a> </li><li><a href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/import-sets/concept/c_DataSources.html" title="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/import-sets/concept/c_DataSources.html">Docs: Data sources</a> </li><li><a href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/field-administration/concept/c_ReferenceField.html" title="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/field-administration/concept/c_ReferenceField.html">Docs: Reference fields</a> </li><li><a _jive_internal="true" href="/search.jspa?q=jonnyseymour&amp;type=post" title="https://community.servicenow.com/search.jspa?q=jonnyseymour&amp;type=post">My other blogs</a></li></ul>