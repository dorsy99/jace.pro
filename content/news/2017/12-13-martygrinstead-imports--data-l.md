---
title: "Imports data loads and transforms fail after Jakarta upgrade"
date: 2017-12-13T05:04:18.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=1b4da229dbd0dbc01dcaf3231f961969"
---
<p><span style="color: #3d3d3d;">As a Technical Support Engineer (TSE), most of my blogs come from experiences encountered by our customer base. PRBs are never nice, but they do offer great opportunities for blog posts. One in particular is KB0639042, which is causing some issues while running transforms after upgrading to Jakarta.</span></p><p></p><p><span style="color: #3d3d3d;">The tricky part about this PRB is that the import set only reports a</span> <span style="color: #e23d39;"><strong>java.lang.NullPointerException</strong></span><span style="color: #303030;">, s<span style="color: #3d3d3d;">o we need to dig into the log file to determine the underlying issue.</span></span></p><p></p><p><span style="color: #3d3d3d;">Looking in the system logs, we get a better idea of where the exception happened:</span></p><p></p><p><span style="color: #3d3d3d;">SEVERE *** ERROR *** com.glide.system_import_set.ImportSetTransformerWorker</span></p><p><span style="color: #3d3d3d;">java.lang.NullPointerException</span></p><p>               at <span style="color: #e23d39;"><strong>java.util.Calendar.setTime(Calendar.java:1770)</strong></span></p><p>               at java.text.SimpleDateFormat.format(SimpleDateFormat.java:943)</p><p>               at java.text.SimpleDateFormat.format(SimpleDateFormat.java:936)</p><p>               at java.text.DateFormat.format(DateFormat.java:345)</p><p>               at com.glide.db.impex.transformer.TransformEntry.getDateString(TransformEntry.java:126)</p><p>               at com.glide.db.impex.transformer.TransformerField.getSourceValue(TransformerField.java:116)</p><p>               at com.glide.db.impex.transformer.TransformerField.transformField(TransformerField.java:88)</p><p>               at com.glide.db.impex.transformer.TransformRow.transformCurrent(TransformRow.java:100)</p><p>               at com.glide.db.impex.transformer.TransformRow.transform(TransformRow.java:69)</p><p>               at com.glide.db.impex.transformer.Transformer.transformBatch(Transformer.java:154)</p><p>               at com.glide.db.impex.transformer.Transformer.transform(Transformer.java:79)</p><p>               at com.glide.system_import_set.ImportSetTransformerImpl.transformEach(ImportSetTransformerImpl.java:239)</p><p>               at com.glide.system_import_set.ImportSetTransformerImpl.transformAllMaps(ImportSetTransformerImpl.java:91)</p><p>               at com.glide.system_import_set.ImportSetTransformerWorker.startWork(ImportSetTransformerWorker.java:40)</p><p>               at com.glide.worker.AbstractProgressWorker.startAndWait(AbstractProgressWorker.java:116)</p><p>               at com.glide.worker.ProgressWorker.startAndWait(ProgressWorker.java:52)</p><p>               at com.glide.worker.BackgroundProgressJob.execute(BackgroundProgressJob.java:54)</p><p>               at com.glide.schedule.JobExecutor.executeJob(JobExecutor.java:103)</p><p>               at com.glide.schedule.JobExecutor.execute(JobExecutor.java:89)</p><p>               at com.glide.schedule.GlideScheduleWorker.executeJob(GlideScheduleWorker.java:219)</p><p>               at com.glide.schedule.GlideScheduleWorker.lambda$process$48(GlideScheduleWorker.java:161)</p><p>               at com.glide.schedule.GlideScheduleWorker$$Lambda$30/3401850.run(Unknown Source)</p><p>               at com.glide.worker.TransactionalWorkerThread.executeInTransaction(TransactionalWorkerThread.java:35)</p><p>               at com.glide.schedule.GlideScheduleWorker.process(GlideScheduleWorker.java:161)</p><p>               at com.glide.schedule.GlideScheduleWorker.run(GlideScheduleWorker.java:72)</p><p></p><p>From the error stack, we can see that we are dealing with a date/time column.</p><p></p><h2><span style="color: #505050;">Underlying causes of transform issues after upgrading to Jakarta</span></h2><p></p><p><span style="color: #303030;">There are two specific PRBs that we have identified as the source of these data load and transform issues.</span></p><ul><li><strong><a title="i.service-now.com/kb_view.do?sysparm_article=KB0639042" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0639042">KB0639042: Transforming a "Basic Date/Time" to "Date/Time" field creates null pointer exception</a></strong> has been identified as the underlying issue.<br/><br/>This PRB is specific to Jakarta, and as the short description indicates, when the import set (staging) table has a column with a data type of "Basic date/time", we encounter this exception.<br/><br/>The workaround for this PRB is to modify the import set table and change all of the data types from "Basic date/time" to "Date/Time" (or "String"). This <span style="color: #303030;">fix </span>has been incorporated into Jakarta Patch 5 and Kingston.</li></ul><p></p><ul><li><span style="color: #303030;"><span style="color: #303030;"><strong><a title="i.service-now.com/kb_view.do?sysparm_article=KB0639046" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0639046">KB0639046: Loading data using Oracle JDBC data source via MID server fails with NPE while querying table that contains column of type timestamp with null values</a></strong></span>. <span style="color: #303030;">This is a similar issue that occurs when loading data through a data source that uses a MID server, resulting </span></span><span style="color: #9900ff; font-size: 10pt; font-family: arial, helvetica, sans-serif;"><span style="color: #303030;">in the following error message:</span><br/></span></li></ul><p style="padding-left: 60px;"><span style="color: #000000; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 10pt;">M<span style="font-family: arial, helvetica, sans-serif;">ID Server reported error: <span style="color: #e23d39;"><strong>java.lang.NullPointerException</strong></span></span></span></p><p style="padding-left: 60px;"><span style="color: #000000; font-family: arial, helvetica, sans-serif; font-size: 10pt;">at <span style="color: #e23d39;"><strong>java.util.Calendar.setTime(Calendar.java:1770)</strong></span></span></p><p style="padding-left: 60px;"><span style="color: #000000; font-family: arial, helvetica, sans-serif; font-size: 10pt;">at java.text.SimpleDateFormat.format(SimpleDateFormat.java:943)</span></p><p style="padding-left: 60px;"><span style="color: #000000; font-family: arial, helvetica, sans-serif; font-size: 10pt;">at java.text.SimpleDateFormat.format(SimpleDateFormat.java:936)</span></p><p style="padding-left: 60px;"><span style="color: #000000; font-family: arial, helvetica, sans-serif; font-size: 10pt;">at java.text.DateFormat.format(DateFormat.java:345)</span></p><p style="padding-left: 60px;"><span style="color: #000000; font-family: arial, helvetica, sans-serif; font-size: 10pt;">at com.service_now.monitor.jdbc.JDBCRowSet.next(JDBCRowSet.java:181)</span></p><p style="padding-left: 60px;"><span style="color: #000000; font-family: arial, helvetica, sans-serif; font-size: 10pt;">at com.service_now.monitor.jdbc.JDBCMultiRowSet.next(JDBCMultiRowSet.java:19)</span></p><p style="padding-left: 60px;"><span style="color: #000000; font-family: arial, helvetica, sans-serif; font-size: 10pt;">at com.service_now.mid.probe.JDBCProbe.doSelect(JDBCProbe.java:319)</span></p><p style="padding-left: 60px;"><span style="color: #000000; font-family: arial, helvetica, sans-serif; font-size: 10pt;">at com.service_now.mid.probe.JDBCProbe.doQuery(JDBCProbe.java:198)</span></p><p style="padding-left: 60px;"><span style="color: #000000; font-family: arial, helvetica, sans-serif; font-size: 10pt;">at com.service_now.mid.probe.JDBCProbe.probe(JDBCProbe.java:123)</span></p><p style="padding-left: 60px;"><span style="color: #000000; font-family: arial, helvetica, sans-serif; font-size: 10pt;">at com.service_now.mid.probe.AProbe.process(AProbe.java:81)</span></p><p style="padding-left: 60px;"><span style="color: #000000; font-family: arial, helvetica, sans-serif; font-size: 10pt;">at com.service_now.mid.queue_worker.AWorker.runWorker(AWorker.java:119)</span></p><p style="padding-left: 60px;"><span style="color: #000000; font-family: arial, helvetica, sans-serif; font-size: 10pt;">at com.service_now.mid.queue_worker.AWorkerThread.run(AWorkerThread.java:20)</span></p><p style="padding-left: 60px;"><span style="color: #000000; font-family: arial, helvetica, sans-serif; font-size: 10pt;">at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1142)</span></p><p style="padding-left: 60px;"><span style="color: #000000; font-family: arial, helvetica, sans-serif; font-size: 10pt;">at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:617)</span></p><p style="padding-left: 60px;"><span style="color: #000000; font-family: arial, helvetica, sans-serif; font-size: 10pt;">at java.lang.Thread.run(Thread.java:745)</span></p><p style="padding-left: 60px;"></p><p style="padding-left: 60px;"><span style="color: #000000; font-family: arial, helvetica, sans-serif; font-size: 10pt;">This PRB has been fixed in <span style="color: #303030;">Jakarta Patch 2 Hot Fix 1, </span>Jakarta Patch 3 (and all subsequent Jakarta patches), and Kingston.</span></p><p></p><p><span style="color: #000000; font-family: arial, helvetica, sans-serif; font-size: 10pt;">So, when you upgrade to Jakarta, you can either examine all of your import set row tables, checking for Basic date/time data types, or simply upgrade to <a title="ocs.servicenow.com/bundle/jakarta-release-notes/page/release-notes/quality/jakarta-patch-5.html" href="https://docs.servicenow.com/bundle/jakarta-release-notes/page/release-notes/quality/jakarta-patch-5.html">Jakarta Patch 5</a> and avoid these issues altogether!</span></p>