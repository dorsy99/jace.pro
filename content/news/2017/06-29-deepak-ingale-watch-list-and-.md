---
title: "Watch list and work notes list  Prevent unwanted email ids from certain domains"
date: 2017-06-28T22:20:08.000Z
authors: ["Deepak Ingale"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=6dbcaa25dbd0dbc01dcaf3231f9619a6"
---
<p dir="ltr" style="font-family: arial, sans-serif; color: #666666;"><span style="font-weight: bold; font-style: inherit; font-size: 12px; font-family: 'Times New Roman';">NOTE</span><span style="font-weight: inherit; font-style: inherit; font-size: 12px; font-family: Arial;">: </span><span style="font-weight: inherit; font-style: inherit; font-size: 12px; font-family: 'Times New Roman';">MY POSTINGS REFLECT MY OWN VIEWS AND DO NOT NECESSARILY REPRESENT THE VIEWS OF MY EMPLOYER, ACCENTURE.</span></p><p><span style="font-weight: inherit; font-style: inherit; font-size: 12px; font-family: 'Times New Roman';"> </span></p><p>Ever come across the scenario where you want to restrict the entries in watch list and work notes list on incident form to particular domains or want to allow all domains but prevent certain?</p><p></p><p>Below solution is a customization to out of the box functionality.</p><p></p><p>1) Configure a property as shown below. You may want to make changes to name of the property. Set the value of this property as comma separated domain ids like yahoo.com, gmail.com etc.</p><p></p><p><img   class="image-1 jive-image" src="beea808edbd81344e9737a9e0f9619a9.iix" style="max-width: 1200px; max-height: 900px;"/></p><p></p><p>2) Configure display business rule on incident form to set scratchpad variable value from system property created in step 1</p><p></p><p><img   class="image-2 jive-image" src="108567f1dbd41704ed6af3231f961947.iix" style="max-width: 1200px; max-height: 900px;"/></p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14986699748026610 jive_text_macro" data-renderedposition="888_8_1175_144" jivemacro_uid="_14986699748026610"><p>(function executeRule(current, previous /*null when async*/) {</p><p></p><p></p><p>// Add your code here</p><p>g_scratchpad.blackListedDomains = gs.getProperty('u_black_listed_domains');</p><p></p><p></p><p>})(current, previous);</p><p></p></pre><p></p><p></p><p></p><p>3) Configure onLoad client script on incident form.</p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code jive_text_macro _jivemacro_uid_14986700078072145" data-renderedposition="1137_8_1175_736" jivemacro_uid="_14986700078072145"><p>function onLoad() {</p><p>     //Type appropriate comment here, and begin script below</p><p>     alertOnBlackListedDomains();</p><p>}</p><p>//addEmailAddressToList('select_0incident.watch_list', gel('text.value.incident.watch_list'), 'Email address is invalid'</p><p>function alertOnBlackListedDomains() {</p><p>var blackListedDomains = g_scratchpad.blackListedDomains.split(',');</p><p></p><p></p><p>try {</p><p>var emailIcons = document.getElementsByClassName('icon icon-mail');</p><p>if (emailIcons) {</p><p>var watchListIcon = emailIcons.item(0);</p><p>var worknoteListIcon = emailIcons.item(1);</p><p></p><p></p><p>watchListIcon.addEventListener('click', function(){</p><p>var emailUserInput = gel('text.value.incident.watch_list').value;</p><p></p><p></p><p>for ( var i = 0 ; i &lt; blackListedDomains.length; i++ ) {</p><p>if (emailUserInput.indexOf(blackListedDomains[i]) &gt; -1) {</p><p>g_form.showFieldMsg('watch_list' , 'Email id entered is from black listed domains' , 'error');</p><p>gel('text.value.incident.watch_list').value = ' ';</p><p>}</p><p>}</p><p>});</p><p></p><p></p><p>worknoteListIcon.addEventListener('click', function(){</p><p>var emailUserInput = gel('text.value.incident.work_notes_list').value;</p><p></p><p></p><p>for ( var i = 0 ; i &lt; blackListedDomains.length; i++ ) {</p><p>if (emailUserInput.indexOf(blackListedDomains[i]) &gt; -1) {</p><p>g_form.showFieldMsg('work_notes_list' , 'Email id entered is from black listed domains' , 'error');</p><p>gel('text.value.incident.work_notes_list').value = ' ';</p><p>}</p><p>}</p><p>});</p><p>}</p><p>}</p><p>catch(e){</p><p>jslog("Error occurred onLoad script " +e);</p><p>}</p><p>}</p></pre><p></p><p><span>4) To test, go to incident form and try to enter email id as </span><a title="k-email-small" class="jive-link-email-small" href="mailto:abc@yahoo.com">abc@yahoo.com</a><span> in watch list of work note list field , you will notice email address is not written inside that field and error message is displayed at the bottom of the field.</span></p><p></p><p><img   class="image-3 jive-image" src="cc0a85c2db5413043eb27a9e0f9619ad.iix" style="max-width: 1200px; max-height: 900px;"/></p><p></p><p>5) This solution is built around the principal that certain domain email ids must be blacklisted. You may have a reverse requirement, like allow certain domains only. In that case, you will require to make changes to property name , associated changes to display business rule and onLoad client script function logic.</p><p></p><p>Note : This is a custom solution which uses DOM or document object manipulation. If ServiceNow happen to change any underlying class associated with dom element, this solution will require maintenacne.</p>