---
title: "Monitoring your instance using Servlet Performance Graphs"
date: 2017-02-23T02:27:01.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=eafd662ddbd0dbc01dcaf3231f9619e7"
---
<p>ServiceNow performance graphs, especially the <a href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/platform-performance/concept/c_ServiceNowServlet.html" title="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/platform-performance/concept/c_ServiceNowServlet.html">ServiceNow servlet performance metrics</a>, are very useful in understanding the performance of your instance. Â  There is a lot of useful information about the attributes which can be found by <a href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/platform-performance/concept/c_MonitorPerformanceOnThreads.html" style="text-decoration: underline;" title="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/platform-performance/concept/c_MonitorPerformanceOnThreads.html">monitoring thread performance.</a></p><p></p><p>There always seems to be a lot of confusion as to which graphs are most useful in gauging system performance. The ones that we are concerned more about belong to the ServiceNow Servlet graphs. The key point here is understanding the trends of how the system has been performing post major events on the instance (ex: Upgrades, Update sets, Data imports, Script changes etc).</p><p></p><p>Lets delve further into this.</p><p></p><table border="1" class="jiveBorder" style="border: 1px solid #c6c6c6; width: 100%;"><tbody><tr><th style="text-align: left; background-color: #f2f2f2; color: #505050; padding: 6px;" valign="middle"><h1>System Overview Graphs</h1></th></tr><tr><td style="padding: 6px;"><center><p><img   alt="servlet performance graph.png" class="image-9 jive-image" src="1f11d5c2db94d344e9737a9e0f96199e.iix" style="width: 620px; height: 188px;"/></p></center><p></p><p>If you look at the System overview graphs here, there is a spike around midnight on Sunday. Something happened which caused the increase of concurrency mean in active threads.</p><p></p><p>The way these graphs are calculated is consider a stack (Last In First Out) taking in metrics like business rule time, concurrency, cpu, db, network. During the lifecycle of the transaction based on where it is at it gets the status to report and construct performance charts.</p><p></p><p><strong>Legend:</strong></p><p><em>database_mean</em> will be mean of the threads that are waiting on the database</p><p><em>business_rule_mean</em>: Thread utilization while the instance is running the BR logic (sync/async) minus the querying to the database.</p><p><em>concurrency_mean</em> : Mean of the threads waiting on a semaphore / session synchronization. This will correspond to the the session queue wait spike as well which can be seen in the graphs. A steady rise over a period of time should be investigated.</p><p></p><p>Ask yourself "Is this a transient issue or is this becoming a pattern every week which wasn't the case before?" How are the response times looking during the peaks?</p><p></p><p><strong>Steps to take for validation: </strong></p><ul><li>Go back further to 30 days to see if every week at the same day similar trends are being seen.</li><li>Compare the <strong>average response</strong> times and <strong>transaction count</strong> from the syslog_transaction table(Transaction module) logs for those days to determine if the average response times are indeed higher during the seen spikes to average days.</li><li>If concurrency is high it means that the node is waiting on a semaphore to complete the transaction or is in session synchronization. Is the transaction count higher then usual?</li><li>ServiceNow Instances are being used for different purposes by the customers and the number of users accessing them will not be the same thus thresholds can be slightly different. Hence the above checks become important.</li><li>If the spikes are apparent and consistent unlike before this needs to be looked into.</li></ul></td></tr></tbody></table><p></p><table border="1" class="jiveBorder" style="border: 1px solid #c6c6c6; width: 100%;"><tbody></tbody></table><table border="1" class="jiveBorder" style="border: 1px solid #c6c6c6; width: 100%;"><tbody><tr><th style="text-align: left; background-color: #f2f2f2; color: #505050; padding: 6px;" valign="middle"><h1>Active Sessions Graph<strong><br/></strong></h1></th></tr><tr><td style="padding: 6px;"><p>Another graphs that is really helpful is the active session graphs. The X-axis denotes the date/time and the Y-axis denotes the number of sessions.</p><p></p><p>If there has been a steady rise in the number of session in the 30 days graphs , we need to figure out what has been causing the gradual increase in sessions. Whether these are user sessions or integrations creating multiple sessions. Along with the gradual uptick look for reoccurring sudden session spike as well.</p><center><p><img   alt="session performance graph.png" class="image-8 jive-image" src="a4fc2f71dbd893049c9ffb651f961990.iix" style="width: 620px; height: 153px;"/></p></center><p></p><p>Sessions during the end of peak / business hours usually take a dip as they get timed out because of no user activity. Times they remain constant is because of session retention or when you have users logging in from different TZ owing to you being a 24/7 shop with global users.</p><p></p><center><p><img   alt="active sessions.png" class="image-10 jive-image" src="f92d2c82db9857049c9ffb651f96199a.iix" style="width: 620px; height: 195px;"/></p></center><p></p><p>Check also to see if sessions persists. Default user session timeout is 30 minutes.</p><p></p><pre __default_attr="warning" __jive_macro_name="alert" alert="warning" class="jive_text_macro jive_macro_alert" data-renderedposition="1664.801025390625_13.906249046325684_1124_65"><p>It is not recommend going beyond 120 minutes for security reasons as well as being a good memory management practice. Idle sessions wait to be timed out which is a waste of JAVA heap space memory.</p></pre></td></tr></tbody></table><table border="1" class="jiveBorder" style="border: 1px solid #c6c6c6; width: 100%;"><tbody><tr><th style="text-align: left; background-color: #f2f2f2; color: #505050; padding: 6px;" valign="middle"><h1>Memory Graph</h1></th></tr><tr><td style="padding: 6px;"><p>Each ServiceNow node has approximately 2GB worth of memory. Checking the memory <a title="ocs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/platform-performance/concept/c_NodeMetrics.html" href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/platform-performance/concept/c_NodeMetrics.html">stats of a node</a> is an indicator of the health of the system.</p><center><p><img   alt="java memory.png" class="image-11 jive-image" src="36bc04c6dbd09704ed6af3231f961955.iix" style="width: 620px; height: 162px;"/></p></center><ul><li>X-axis denotes the time duration</li><li>Y-axis denotes the heap memory utilization in MB.</li></ul><p></p><p>A normal memory graph would be like a "sea saw" pattern, with garbage collection showing the dips while reclaiming the objects no longer being referenced.</p><p></p><center><p><img   class="image-6 jive-image" height="160" src="b19fa4cadb9c57041dcaf3231f961906.iix" style="width: 545px; height: 159.984px;" width="545"/></p></center><p>If the memory of node constantly remains high in the bracket of 1.7k-1.9 or a gradual uptick in over a period of time could indicate a "memory leak" situation. In this example above, an event the memory took an upswing hitting 2GB at a point of time.</p></td></tr></tbody></table><p></p><table border="1" class="jiveBorder" style="border: 1px solid #c6c6c6; width: 100%;"><tbody><tr><th style="text-align: left; background-color: #f2f2f2; color: #505050; padding: 6px;" valign="middle"><h1>Transaction Count Graph<strong><br/></strong></h1></th></tr><tr><td style="padding: 6px;"><p>The below graph corresponds to the number of transaction being handled by the node.</p><center><p><img   alt="tranaction.png" class="image-7 jive-image" height="166" src="4a03d8cadb549fc03eb27a9e0f961928.iix" style="width: 540px; height: 166.355px;" width="540"/></p></center><ul><li>X-axis the time duration, Y-axis denotes the number of transactions handled by minute.</li><li>A node seeing usually seeing more then 200 transactions / minute per node as a continuous pattern should be investigated.</li></ul></td></tr></tbody></table><p></p><p>The ServiceNow Performance graphs can be very helpful in determining overall instance health as well as seeing changes affecting the performance of an instance post an event. Customer Support Performance have additional internal tools to check the overall instance health to see if there indeed is an issue with the overall system performance.</p>