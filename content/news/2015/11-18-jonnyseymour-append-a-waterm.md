---
title: "Append a watermark to the email subject"
date: 2015-11-18T02:24:32.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=36cda2e9dbd0dbc01dcaf3231f961946"
---
<p>Adding a watermark in the subject takes an enviable position at the top of emails sent, backing its presence on the body and offering an alternative option to match with existing records.</p><p></p><p>I'll show you examples of:</p><ul><li>Mail Scripts to implement the email subject changes</li><li>Appending the notification watermark into the subject</li><li>Why would you append the watermark in the subject</li></ul><p></p><p>Watermarks are relevant when working with incoming emails classified as <strong>reply</strong> by an<a title="ki.servicenow.com/images/7/77/Inbound_email_action_type.png" href="http://wiki.servicenow.com/images/7/77/Inbound_email_action_type.png"> algorithm</a>. By default, the system generates a <em>watermark </em>label at the bottom of each notification email to allow <a href="http://wiki.servicenow.com/index.php?title=Inbound_Email_Actions#Matching_Incoming_Email_to_Existing_Records" title="Inbound Email Actions">matching incoming email to existing records</a>. The watermark always includes "Ref:" and a customizable prefix (default MSG), followed by the auto-numbered identifier of the source record (such as incident, problem, or change request). For example, Ref:MSG3846157</p><p></p><p>You have the option on the email notifications to add or omit the watermarks. However, you do not have the choice to add it to the subject. That is the reason we will need to implement a mail script to add the watermark into the subject.</p><p></p><p><img   alt="email-validation-terms-21a.png" class="image-8 jive-image" height="129" src="9b059142db18d344e9737a9e0f96192b.iix" style="width: 129px; height: 129px; display: block; margin-left: auto; margin-right: auto;" width="129"/></p><p></p><h2>Mail Scripts to implement the subject changes</h2><p><a title="ki.servicenow.com/?title=Scripting_for_Email_Notifications#gsc.tab=0" href="http://wiki.servicenow.com/?title=Scripting_for_Email_Notifications#gsc.tab=0">Mail scripts</a> allow for business rule-like scripting within an outbound email message. With mail scripts, you can dynamically change the email output of your system based on different criteria. Mail scripts allow you to perform simple tasks, such as displaying incident data, and complex ones, such as making advanced database queries.</p><p></p><p>Create mail scripts in System Policy &gt; Email &gt; Notification Email Script</p><p>To make them run, then add a <tt>${mail_script:<em>script name</em>}</tt> embedded script tag to the body of the <a href="http://wiki.servicenow.com/index.php?title=Email_Notifications" title="Email Notifications">email notification</a> or <a href="http://wiki.servicenow.com/index.php?title=Email_Templates" title="Email Templates">template</a>,replacing <tt><em>script name</em></tt> with the name of the script you created. This makes it easy to use the same scripts in multiple email notifications or templates.</p><p></p><p>We will be using the email properties to modify the subject of the notification.</p><p></p><h2>Appending the notification watermark into the subject</h2><p>To append the watermark into the subject of the notification, I created a new mail script.</p><p>Name = subject_watermark</p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_1446455964506628 jive_text_macro" data-renderedposition="865.2000122070312_8_902_96" jivemacro_uid="_1446455964506628"><p>addwatermarktosubject();</p><p>// This function will attach the watermark at the end of the subject</p><p>function addwatermarktosubject() {</p><p>       var vsubject = [email.getSubject(), email.watermark ].join(' ');</p><p>       email.setSubject(vsubject);</p><p>}</p></pre><p></p><p style="text-align: left;"><img   alt="mail script.jpg" class="image-5 jive-image" src="6e7da086db9857049c9ffb651f9619fd.iix" style="width: 620px; height: 270px; display: block; margin-left: auto; margin-right: auto;"/></p><p>Then I created a notification with the following qualities:</p><p></p><table border="1" cellpadding="0" cellspacing="0" style="border: none; padding: 0 5.4pt 0 5.4pt;"><tbody><tr><td style="border: solid windowtext 1.0pt; background: #C6D9F1; padding: 0 5.4pt 0 5.4pt;" valign="top" width="148">Notification</td><td style="border: solid windowtext 1.0pt; border-left: none; background: #C6D9F1; padding: 0 5.4pt 0 5.4pt;" valign="top" width="24"><p></p></td><td style="border: solid windowtext 1.0pt; border-left: none; background: #C6D9F1; padding: 0 5.4pt 0 5.4pt;" valign="top" width="271"><p></p></td></tr><tr><td style="border: solid windowtext 1.0pt; border-top: none; padding: 0 5.4pt 0 5.4pt;" valign="top" width="148"><p>Name</p></td><td style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0 5.4pt 0 5.4pt;" valign="top" width="24"><p>=</p></td><td style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0 5.4pt 0 5.4pt;" valign="top" width="271"><p>test_subject</p></td></tr><tr><td style="border: solid windowtext 1.0pt; border-top: none; padding: 0 5.4pt 0 5.4pt;" valign="top" width="148"><p>Table</p></td><td style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0 5.4pt 0 5.4pt;" valign="top" width="24"><p></p></td><td style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0 5.4pt 0 5.4pt;" valign="top" width="271"><p>incident</p></td></tr><tr><td style="border: solid windowtext 1.0pt; border-top: none; padding: 0 5.4pt 0 5.4pt;" valign="top" width="148"><p>Inserted</p></td><td style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0 5.4pt 0 5.4pt;" valign="top" width="24"><p></p></td><td style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0 5.4pt 0 5.4pt;" valign="top" width="271"><p>CHECKED</p></td></tr><tr><td style="border: solid windowtext 1.0pt; border-top: none; padding: 0 5.4pt 0 5.4pt;" valign="top" width="148"><p>Updated</p></td><td style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0 5.4pt 0 5.4pt;" valign="top" width="24"><p></p></td><td style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0 5.4pt 0 5.4pt;" valign="top" width="271"><p>CHECKED</p></td></tr><tr><td style="border: solid windowtext 1.0pt; border-top: none; padding: 0 5.4pt 0 5.4pt;" valign="top" width="148"><p>Users</p></td><td style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0 5.4pt 0 5.4pt;" valign="top" width="24"><p></p></td><td style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0 5.4pt 0 5.4pt;" valign="top" width="271"><p><a title="k-email-small" class="jive-link-email-small" href="mailto:ae@example.com">ae@example.com</a></p></td></tr><tr><td style="border: solid windowtext 1.0pt; border-top: none; padding: 0 5.4pt 0 5.4pt;" valign="top" width="148"><p>Subject</p></td><td style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0 5.4pt 0 5.4pt;" valign="top" width="24"><p></p></td><td style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0 5.4pt 0 5.4pt;" valign="top" width="271"><p>Any Subject</p></td></tr><tr><td style="border: solid windowtext 1.0pt; border-top: none; padding: 0 5.4pt 0 5.4pt;" valign="top" width="148"><p>Message</p></td><td style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0 5.4pt 0 5.4pt;" valign="top" width="24"><p></p></td><td style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0 5.4pt 0 5.4pt;" valign="top" width="271"><p>Test</p><p>${mail_script:subject_watermark}</p></td></tr></tbody></table><p></p><p><img   alt="test email.jpg" class="image-6 jive-image" src="f188c0c6db9c5fc03eb27a9e0f96190e.iix" style="width: 620px; height: 486px; display: block; margin-left: auto; margin-right: auto;"/></p><p></p><p>When I make a change on the incident table, the result is a<span style="line-height: 1.5;"> notification is triggered and the email subject has the watermark appended as intended.</span></p><p><img   alt="append watermark email.jpg" class="image-7 jive-image" src="308cebf1db1c1704ed6af3231f9619a0.iix" style="width: 620px; height: 230px; display: block; margin-left: auto; margin-right: auto;"/></p><p></p><p></p><h2>Why would you append the watermark in the subject</h2><p>There are several reasons you would like to make the watermark part of the subject. First, the system will first search the watermark on the subject. Second, watermarks on the body can be deleted without noticing them. Third, it makes watermark importance more evident for the customer. And finally, the text "Ref:" can be found on the body without being a real watermark.</p><p></p><p>There are a few cons, or negatives, about including a watermark in the email subject. Watermarks can not be hidden in the HTML body. It is also aesthetically not as pleasing as having the subject alone, without the watermark. It also makes the subject longer, which can be a turn off.</p><p></p><p>Adding the watermark on the subject provides flexibility when working with reply emails. It just requires creating a mail script that appends the watermark to the subject.</p><p></p><p></p><p>I tested this on Fuji with Chrome as browser.</p><p></p><p>More information on email watermarks see:</p><ul><li><a title="i.service-now.com/kb_view.do?sysparm_article=KB0540674" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0540674">Email Resources Page (KB0540674)</a></li><li><a title="" _jive_internal="true" href="/community?id=community_blog&sys_id=bc7c22e1dbd0dbc01dcaf3231f961996">Incoming email classified as reply to 'null' via watermark</a></li><li><a title="" _jive_internal="true" href="/community?id=community_blog&sys_id=3a8c2ae1dbd0dbc01dcaf3231f9619fc">Two watermarks in incoming Email messages</a></li><li><a title="" _jive_internal="true" href="/community?id=community_blog&sys_id=ae9caee1dbd0dbc01dcaf3231f96193c">3 steps to determine if and why the event processor is unable to start</a></li><li><a title="" _jive_internal="true" href="/community?id=community_blog&sys_id=f0dc6665dbd0dbc01dcaf3231f961955">Diagnosing and remedying stuck event processes</a></li><li><a title="" _jive_internal="true" href="/community?id=community_blog&sys_id=c8edaae9dbd0dbc01dcaf3231f96199b">Docs: Additional email properties</a></li><li><a title="ocs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/reference-pages/reference/r_AvailableSystemProperties.html" href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/reference-pages/reference/r_AvailableSystemProperties.html">Docs: Available system properties</a></li><li><a title="ocs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/wizards/task/t_CreateTheEmailNotification.html" href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/wizards/task/t_CreateTheEmailNotification.html">Docs: Create an email notification</a></li><li><a title="ocs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/notification/concept/c_NotificationExamples.html" href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/notification/concept/c_NotificationExamples.html">Docs: Notification examples</a></li><li><a title="ocs.servicenow.com/bundle/istanbul-servicenow-platform/page/script/server-scripting/concept/c_ScriptingForEmailNotifications.html" href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/script/server-scripting/concept/c_ScriptingForEmailNotifications.html">Docs: Notifications</a></li><li><a title="ocs.servicenow.com/bundle/istanbul-servicenow-platform/page/script/server-scripting/concept/c_ScriptingForEmailNotifications.html" href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/script/server-scripting/concept/c_ScriptingForEmailNotifications.html">Docs: Scripting for email notifications</a></li><li><a title="ocs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/notification/reference/notifications.html" href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/notification/reference/notifications.html">Troubleshooting email notifications - Send to the Event Creator</a></li><li><a title="i.service-now.com/kb_view.do?sysparm_article=KB0547784" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0547784">Troubleshooting Outbound Email (KB0521382)</a></li><li><a title="i.service-now.com/kb_view.do?sysparm_article=KB0547784" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0547784">Troubleshooting stuck event process (KB0547784)</a></li><li><a title="i.service-now.com/kb_view.do?sysparm_article=KB0528669" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0528669">Verifying the recipient has an email address (KB0528669)</a></li><li><a title="i.service-now.com/kb_view.do?sysparm_article=KB0528671" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0528671">Verifying the recipient's email address is properly formatted (KB0528671)</a></li><li><a title="" _jive_internal="true" href="/community?id=community_blog&sys_id=932e6a6ddbd0dbc01dcaf3231f961953">Speed up your email delivery by validating recipients</a></li><li><a title="" _jive_internal="true" href="/people/jonnyseymour/content?filterID=contentstatus%5Bpublished%5D%7Eobjecttype%7Eobjecttype%5Bblogpost%5D">My other blogs</a></li></ul>