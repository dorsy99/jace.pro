---
title: "Possible productivity enhancements via GlideRecord extension methodsproperties"
date: 2015-11-10T23:30:47.000Z
authors: ["treycarroll"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=29dda6e9dbd0dbc01dcaf3231f96197e"
---
<p>We have a team of developers building catalog items.   As I review the code that they are writing, I'm finding that much of it is extremely repetitive.     We've built out a library of Script includes to support common operations, but I was brainstorming some ways to accelerate development with some "syntactic sugar".   Granted, it's only a couple of lines difference when you consider that we already have script includes to do these things, but I personally find that little stuff like this "breaks my flow".</p><p></p><p>This idea was not universally well-received on our dev team, so I'm looking for some feedback from the community.   <a title="sabell2012" __default_attr="7849" __jive_macro_name="user" class="jive_macro jive_macro_user" data-orig-content="sabell2012" data-renderedposition="96.80000305175781_728.0875244140625_86_16" href="/community?id=community_user_profile&user=838f86e9db181fc09c9ffb651f9619d9">sabell2012</a> I would appreciate your feedback.</p><p></p><p>Here they are:</p><p></p><p>1. The currentUser property gives you instant access to any property on the current user.</p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="_jivemacro_uid_14471749120884737 jive_macro_code jive_text_macro" data-renderedposition="224_8_1193_96" jivemacro_uid="_14471749120884737"><p>GlideRecord.prototype.currentUser = (function () {</p><p>       var gr = new GlideRecord('sys_user');</p><p>       if (gr.get(new GlideSystem().getUserID())) {</p><p>               return gr;</p><p>       }</p><p>})();</p></pre><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code jive_text_macro _jivemacro_uid_1447174884984165" data-renderedposition="341.6000061035156_8_1193_96" jivemacro_uid="_1447174884984165"><p>var gr = new GlideRecord('sc_task');</p><p>gr.addQuery('assigned_to.email', gr.currentUser.email); //Yes, this is contrived.   We could have just used the sys_id</p><p>gr.query();</p><p>while (gr.next()) {</p><p>       //Do something awesome here</p><p>}</p></pre><p></p><p></p><p>2. The getUser method gives you quick access to properties on any user where you have the sys_id, the user_name or the email.</p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code jive_text_macro _jivemacro_uid_14471738612687159" data-renderedposition="524_8_1193_144" jivemacro_uid="_14471738612687159"><p>GlideRecord.prototype.getUser = function () {</p><p>       var gr = new GlideRecord('sys_user');</p><p>       gr.addEncodedQuery('sys_id=' + arguments[0] + '^ORuser_name=' + arguments[0] + '^ORemail=' + arguments[0]);</p><p>       gr.query();</p><p></p><p>       if (gr.next()) {</p><p>               return gr;</p><p>       }</p><p>};</p></pre><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="_jivemacro_uid_14471754519494596 jive_macro_code jive_text_macro" data-renderedposition="689.6000366210938_8_1193_128" jivemacro_uid="_14471754519494596"><p>//Assuming that we're in a workflow on a catalog item</p><p>var gr = new GlideRecord('incident');</p><p>gr.addQuery('assignment_group.manager.email', <em><strong>gr.getUser(current.variables.requested_for).email</strong></em>);//This is contrived.   Email is not necessary</p><p>gr.query();</p><p></p><p>while (gr.next()) {</p><p>       //Do something awesome here</p><p>}</p></pre><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code jive_text_macro _jivemacro_uid_14472534962335877" data-renderedposition="839.2000122070312_8_1193_144" jivemacro_uid="_14472534962335877"><p>// From an INC Business Rule</p><p>var gr = new GlideRecord('sys_email');</p><p>gr.addQuery('recipients', 'CONTAINS', <em><strong>gr.getUser(current.assigned_to).email</strong></em>);</p><p>gr.addQuery('subject', 'CONTAINS', current.number);</p><p>gr.query();</p><p></p><p>while (gr.next()) {</p><p>       //Do something awesome here</p><p>}</p></pre><p></p><p></p><p>3. currentUserGroups gives quick access to a list of the current user's groups.<span style="color: rgba(0, 0, 0, 0); font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px;">urrent</span></p><p><span style="color: rgba(0, 0, 0, 0); font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px;">UserGrcuoup</span></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code jive_text_macro _jivemacro_uid_14471752389818810" data-renderedposition="1065.5999755859375_8_1193_272" jivemacro_uid="_14471752389818810"><p>GlideRecord.prototype.currentUserGroups = (function () {</p><p>       var grps = {};//object keys are unique so we use it to avoid duplication of ids</p><p>       var gr = new GlideRecord('sys_user_grmember');</p><p>       gr.addQuery('user', new GlideSystem().getUserID());</p><p>       gr.query();</p><p></p><p>       while (gr.next()) {</p><p>               grps[gr.group.sys_id.toString()] = true;</p><p>       }</p><p>       var ret = '';</p><p>       for (var k in grps) {</p><p>               ret += k + ',';</p><p>       }</p><p>       ret = ret.slice(0, -1);//remove the final comma</p><p>       return ret;</p><p>})();</p><p></p></pre><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14471756160009849 jive_text_macro" data-renderedposition="1359.2000732421875_8_1193_160" jivemacro_uid="_14471756160009849"><p></p><p>var g = new GlideRecord('sys_user_grmember'); //Another highly contrived example.   It shows the group names for the current user. <br/>g.addQuery('user', g.currentUser.sys_id); <br/>g.addQuery('group', 'IN', <em><strong>g.currentUserGroups</strong></em>); <br/>g.query(); </p><p></p><p>while (g.next()) { <br/>     gs.print(g.group.name); <br/>}</p><p></p></pre><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="_jivemacro_uid_14472531611177021 jive_macro_code jive_text_macro" data-renderedposition="1540.800048828125_8_1193_112" jivemacro_uid="_14472531611177021" modifiedtitle="true"><p>var gr = new GlideRecord('incident');</p><p>gr.addQuery('assignment_group','IN', <em><strong>gr.currentUserGroups</strong></em>);</p><p>gr.query();</p><p></p><p>while (gr.next()) {</p><p>       //Do something awesome here</p><p>}</p></pre><p></p><p>Opinions/concerns that were raised:</p><p>1) An extension method is not justifiable unless it addresses a problem; syntactic sugar is not a good reason for a creating an extension method.</p><p>2) SN may remove our ability to inject things via prototype in the future, which would cause significant rework on all code written using these methods and properties.</p>