---
title: "SOAP Web Service and time zones examples"
date: 2015-07-14T14:14:17.000Z
authors: ["jonnyseymour"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=15bcaa25dbd0dbc01dcaf3231f96199f"
---
<p>After reading this documents, you should understand:</p><ul><li>What is the impact of different time zones on Web Services</li><li>How to pass the time in client time to be converted into UTC</li><li>How does it look on a simple web service</li><li>How does it look on a scripted web service</li></ul><p></p><p><img   alt="time-zone-clocks-618x350.png" class="image-6 jive-image" height="120" src="44e1a506dbdcd344e9737a9e0f9619ac.iix" style="width: 211px; height: 119.498px; display: block; margin-left: auto; margin-right: auto;" width="211"/></p><p></p><h2>Different time zones</h2><p></p><p>The system has a default time zone usually as US/Pacific (PDT = UTC-7).</p><p>That difference is considered when saving the date/time fields from clients.   At database level, they are stored as UTC.</p><p>Web services are very consistent but time-zones has a few considerations:</p><ul><li>On WS messages, TRY to pass the INPUT date/time fields as UTC. If you pass the information as TEXT (not inside javascript), it's considered as UTC.</li><li>If a CLIENT need to pass client date/time, USE glide construction javascript (gs.dateGenerate). The server will transform into UTC later on.</li><li>The WS date/time responses come back in UTC as well.</li></ul><p></p><p>e.g. On a SOAP request, if you use</p><p>...</p><p>&lt;input xxxx&gt; javascript:gs.dateGenerate(&amp;#39;2015-05-09&amp;#39;,&amp;#39;00:00:00&amp;#39;) &lt;/input xxxx&gt;</p><p>...</p><p>That ensure the date will be consider NON-UTC and transformed into client the timezone for the queries so it will retrieve the same results</p><p>as when searching on the Web interface that tend to be confusing to customer. Note the response* date/time fields will be on UTC as well.</p><p></p><p>Below are a few cases of the behavior when date/time fields are used:</p><p></p><table border="1" cellpadding="0" cellspacing="0" height="308" style="border: 1pt solid black; width: 623px; height: 302px;"><tbody><tr><td style="border: solid black 1.0pt; background: #ED7D31;" width="78"><p><strong style="color: white;">User has US/Pacific time zone</strong></p></td><td style="border: solid black 1.0pt; background: #ED7D31;" width="142"><p><strong style="color: white;">Date/time</strong></p></td><td style="border: solid black 1.0pt; background: #ED7D31;" width="111"><p><strong style="color: white;">UTC</strong></p></td><td style="border: solid black 1.0pt; background: #ED7D31;" valign="top" width="119"><p><strong style="color: white;">RESULT</strong></p></td></tr><tr><td style="border: solid black 1.0pt;" width="78"><p>User Browser</p></td><td style="border: solid black 1.0pt;" width="142"><p>2015-06-26 <span style="color: #c00000;">03</span>:11:41</p></td><td style="border: solid black 1.0pt;" width="111"><p>2015-06-26 <span style="color: #c00000;">10</span>:11:41</p></td><td style="border: solid black 1.0pt;" valign="top" width="119"><p>Set Display time</p></td></tr><tr><td style="border: solid black 1.0pt;" width="78"><p>Database</p></td><td style="border: solid black 1.0pt;" width="142"><p>2015-06-26 10:11:41</p></td><td style="border: solid black 1.0pt;" width="111"><p>2015-06-26 10:11:41</p></td><td style="border: solid black 1.0pt; background: #A8D08D;" valign="top" width="119"><p>No difference</p></td></tr><tr><td style="border: solid black 1.0pt; background: #FFF2CC;" width="78"><p>Web Service</p></td><td style="border: solid black 1.0pt; background: #FFF2CC;" width="142"><p>2015-06-26 10:11:41</p></td><td style="border: solid black 1.0pt; background: #FFF2CC;" width="111"><p>2015-06-26 10:11:41</p></td><td style="border: solid black 1.0pt; background: #A8D08D;" valign="top" width="119"><p>No difference</p></td></tr><tr><td style="border: solid black 1.0pt; background: #FFF2CC;" width="78"><p>Web Service</p></td><td style="border: solid black 1.0pt; background: #FFF2CC;" width="142"><p>2015-06-26 03:11:41</p></td><td style="border: solid black 1.0pt; background: #FFF2CC;" width="111"><p>2015-06-26 03:11:41</p></td><td style="border: solid black 1.0pt; background: #A8D08D;" valign="top" width="119"><p>No difference</p></td></tr><tr><td style="border: solid black 1.0pt; background: #FFF2CC;" width="78"><p>Web Service</p></td><td style="border: solid black 1.0pt; background: #FFF2CC;" width="142"><p>gs.DateGenerate('2015-06-26','<strong style="color: #c00000;">10</strong>:11:41')</p></td><td style="border: solid black 1.0pt; background: #FFF2CC;" width="111"><p>2015-06-26 <strong style="color: #c00000;">17</strong>:11:41</p></td><td style="border: solid black 1.0pt; background: #FFF2CC;" valign="top" width="119"><p>Set Display time</p></td></tr><tr><td style="border: solid black 1.0pt; background: #FFF2CC;" width="78"><p>Web Service</p></td><td style="border: solid black 1.0pt; background: #FFF2CC;" width="142"><p>gs.DateGenerate('2015-06-26','<strong style="color: #c00000;">03</strong>:11:41')</p></td><td style="border: solid black 1.0pt; background: #FFF2CC;" width="111"><p>2015-06-26 <strong style="color: #c00000;">10</strong>:11:41</p></td><td style="border: solid black 1.0pt; background: #FFF2CC;" valign="top" width="119"><p>Set Display time</p></td></tr><tr><td style="border: solid black 1.0pt; border-bottom: none;" width="78"><p>Web service Response</p></td><td style="border: solid black 1.0pt; border-bottom: none;" width="142"><p>2015-06-26 10:11:41</p></td><td style="border: solid black 1.0pt; border-bottom: none;" width="111"><p>2015-06-26 10:11:41</p></td><td style="border: solid black 1.0pt; border-bottom: none; background: #A8D08D;" valign="top" width="119"><p>No difference. </p><p>It is UTC</p></td></tr></tbody></table><p></p><p>If I create a new incident. Based on an incident INCD045006 with field</p><p>* open_at=10:11:41 UTC,</p><p>the following is the expected behavior with getRecords operation:</p><p></p><p>Users browsing the incident form will see the date on their local time zone.</p><p><img   alt="Unknown.png" src="77267f75db1cdf04e9737a9e0f9619ab.iix"/></p><p></p><p>That is because the user has US/Pacific (PDT = UTC-7) set on their User profile form.</p><p>That is UTC = 10:11:41 ==&gt; UTC-7 = 03:11:41</p><p></p><p><img   alt="Unknown-1.png" class="image-1 jive-image" src="6746fc8edb1cdfc068c1fb651f96196d.iix" style="height: auto;"/></p><h2>Here is what we know SOAP will handle those time zones on Get Operations:</h2><h2></h2><p>On SOAP getRecords operation, you can input the date/time fields:</p><p></p><p>1.       With dates as text — you need to use UTC times</p><p>2.       With dates created with glide — you need to use User localized times</p><p></p><p></p><p>Here are some examples:</p><p></p><p><strong>Case 1: Using the date as text: Use UTC times to match your records</strong></p><p><img   alt="Unknown-2.png" class="jive-image image-4" src="0d211cc2db905304b322f4621f96199b.iix" style="height: 97px; width: 620px;"/></p><p>As you can see, you need to submit the date/time input AS TEXT in UTC times (not client times)</p><p></p><p>Here is the text for the query-using date in text:</p><pre __default_attr="xml" __jive_macro_name="code" class="_jivemacro_uid_14798460425628704 jive_macro_code jive_text_macro" data-renderedposition="1939.699951171875_8_902_144" jivemacro_uid="_14798460425628704"><p><span style="color: #800000;"><em><span>&lt;soapenv:Envelope xmlns:soapenv="</span><a title="k-external-small" class="jive-link-external-small" href="http://schemas.xmlsoap.org/soap/envelope/" rel="nofollow" target="_blank">http://schemas.xmlsoap.org/soap/envelope/</a><span>" xmlns:inc="</span><a title="k-external-small" class="jive-link-external-small" href="http://www.service-now.com/incident" rel="nofollow" target="_blank">http://www.service-now.com/incident</a><span>"&gt;</span></em></span></p><p><span style="color: #800000;"><em>   &lt;soapenv:Header/&gt;</em></span></p><p><span style="color: #800000;"><em>   &lt;soapenv:Body&gt;</em></span></p><p><span style="color: #800000;"><em>           &lt;inc:getRecords&gt;</em></span></p><p><span style="color: #800000;"><em>                       &lt;__encoded_query&gt;opened_at&amp;gt;2015-06-26T10:00:00</em></span></p><p><span style="color: #800000;"><em>                                                                                       ^opened_at&amp;lt;2015-06-26T10:12:00&lt;/__encoded_query&gt;</em></span></p><p><span style="color: #800000;"><em>&lt;/inc:getRecords&gt;</em></span></p><p><span style="color: #800000;"><em>   &lt;/soapenv:Body&gt;</em></span></p><p><span style="color: #800000;"><em>&lt;/soapenv:Envelope&gt;</em></span></p></pre><p></p><p></p><p><strong>Case 2: Using glide to generate times: Use the time on the SOAP user localized times.</strong></p><p><img   alt="Unknown-3.png" class="image-5 jive-image" src="357f2339db98dfc0b322f4621f961951.iix" style="height: auto;"/></p><p>As you can see, when using glide based data/time, you need to provide the date as the client time-zone set. However, notice the result will be back in UTC.</p><p></p><p>Here is the request for the query-using glide:</p><pre __default_attr="xml" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14798460790887921 jive_text_macro" data-renderedposition="2354.949951171875_8_902_144" jivemacro_uid="_14798460790887921"><p><span style="color: #800000;"><em><span>&lt;soapenv:Envelope xmlns:soapenv="</span><a title="k-external-small" class="jive-link-external-small" href="http://schemas.xmlsoap.org/soap/envelope/" rel="nofollow" target="_blank">http://schemas.xmlsoap.org/soap/envelope/</a><span>" xmlns:inc="</span><a title="k-external-small" class="jive-link-external-small" href="http://www.service-now.com/incident" rel="nofollow" target="_blank">http://www.service-now.com/incident</a><span>"&gt;</span></em></span></p><p><span style="color: #800000;"><em>   &lt;soapenv:Header/&gt;</em></span></p><p><span style="color: #800000;"><em>   &lt;soapenv:Body&gt;</em></span></p><p><span style="color: #800000;"><em>           &lt;inc:getRecords&gt;</em></span></p><p><span style="color: #800000;"><em>                       &lt;__encoded_query&gt;opened_at&amp;gt;javascript:gs.dateGenerate(&amp;#39;2015-06-26&amp;#39;,&amp;#39;03:11:00&amp;#39;)</em></span></p><p><span style="color: #800000;"><em>                       ^opened_at&amp;lt;javascript:gs.dateGenerate(&amp;#39;2015-06-26&amp;#39;,&amp;#39;03:12:00&amp;#39;)&lt;/__encoded_query&gt;</em></span></p><p><span style="color: #800000;"><em>           &lt;/inc:getRecords&gt;</em></span></p><p><span style="color: #800000;"><em>   &lt;/soapenv:Body&gt;</em></span></p><p><span style="color: #800000;"><em>&lt;/soapenv:Envelope&gt;</em></span></p></pre><p></p><p></p><h2>FOR SCRIPTED WEB-SERVICES</h2><p></p><p>You can modify the normal behavior on your script itself. By default, text is considered as UTC date/time.</p><p>If changes on the scripting side are required, you could use setDisplayValue(data) to get the transformation into UTC wanted from the client text submitted.</p><p></p><p>Below is an example:</p><p>If you are passing the date/time information as text, you could set them as follow:</p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14798461126191060 jive_text_macro" data-renderedposition="2739.199951171875_8_902_48" jivemacro_uid="_14798461126191060"><p><span style="; color: #800000;"><em>// scripted webservice snip </em></span></p><p><span style="color: #800000;"><em>var gdt1 = new GlideDateTime();</em></span></p><p><span style="color: #800000;"><em>gdt1.setDisplayValue(request.start_date);   &lt;-- IF THE INPUT WAS DATE/TIME TEXT, the script will consider it as client date INSTEAD of UTC (default)</em></span></p></pre><p></p><p>Considering request.start date is the date/field passed as input to the Scripted Web Service.</p><p>You can also perform a similar script to provide the date/time fields responses into the client time instead of UTC.</p><p></p><p>More information here:</p><ul><li><a title="" _jive_internal="true" href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/time/reference/r_TimeZones.html" rel="nofollow" target="_blank">Docs: Time zones</a></li><li><a title="" _jive_internal="true" href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/time/task/t_SetASystemTimeZone.html" rel="nofollow" target="_blank">Docs: Set a system time zone</a></li><li><a title="" _jive_internal="true" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0522354&sysparm_topic=Known+Error+Database" rel="nofollow" target="_blank">Daylight saving time problem in filtering in reports (KB0522354)</a></li><li><a title="" _jive_internal="true" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0534829" rel="nofollow" target="_blank">ODBC Driver returns incorrect time adjustments during Daylight Saving (Summer Time) change (KB0534829)</a></li><li><a title="" _jive_internal="true" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0594661" rel="nofollow" target="_blank">Time zone representation (all releases) (KB0594661)</a></li><li><a title="" _jive_internal="true" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0594664" rel="nofollow" target="_blank">Clarification of the GlideDateTime API (KB0594664)</a></li><li><a title="" _jive_internal="true" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0594666" rel="nofollow" target="_blank">Do not use gs.nowDateTime() in a GlideDateTime constructor   (KB0594666)</a></li><li><a title="" _jive_internal="true" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0594661" rel="nofollow" target="_blank">Time zone representation (all releases) (KB0594661)</a></li><li><a title="" _jive_internal="true" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0594663" rel="nofollow" target="_blank">gs.dateDiff() (Global GlideSystem) returns invalid results (KB0594663)</a></li><li><a title="" _jive_internal="true" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0596114" rel="nofollow" target="_blank">Differences between user, system, and internal date and time formats (KB0596114 - Requires Hi Login)</a></li><li><a title="" _jive_internal="true" data-containerid="-1" data-containertype="-1" data-objectid="45437" data-objecttype="3" href="/people/jonnyseymour/content?filterID=contentstatus%5Bpublished%5D%7Eobjecttype%7Eobjecttype%5Bblogpost%5D&amp;sortKey=contentstatus%5Bpublished%5D%7EcreationDateDesc&amp;sortOrder=0">My other blogs</a></li></ul><p></p><p><span class="tab_section tabs2_section_2 tabs2_section" data-header-only="false" data-section-id="6fea3264879b90c0957bb3aeef434d07"><span class="section" data-header-only="false"><span class="activity_update_group"><span class="tab_section tabs2_section_2 tabs2_section" data-header-only="false" data-section-id="6fea3264879b90c0957bb3aeef434d07"><span class="section" data-header-only="false"><span class="activity_update_group">NOTES: Tested on Fuji, Firefox 38.05 and Soap UI 5.1.3</span></span></span></span></span></span></p><p><span class="tab_section tabs2_section_2 tabs2_section" data-header-only="false" data-section-id="6fea3264879b90c0957bb3aeef434d07"><span class="section" data-header-only="false"><span class="activity_update_group"><span class="tab_section tabs2_section_2 tabs2_section" data-header-only="false" data-section-id="6fea3264879b90c0957bb3aeef434d07"><span class="section" data-header-only="false"><span class="activity_update_group">Let me know if you have found a different behavior</span></span></span></span></span></span></p><p><span class="tab_section tabs2_section_2 tabs2_section" data-header-only="false" data-section-id="6fea3264879b90c0957bb3aeef434d07"><span class="section" data-header-only="false"><span class="activity_update_group"><span class="tab_section tabs2_section_2 tabs2_section" data-header-only="false" data-section-id="6fea3264879b90c0957bb3aeef434d07"><span class="section" data-header-only="false"><span class="activity_update_group"> <br/></span></span></span></span></span></span></p>