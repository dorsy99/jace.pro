---
title: " ways to avoid canceled transactions with large tables"
date: 2015-06-24T03:41:03.000Z
authors: ["kim.purcell"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=090d6aa5dbd0dbc01dcaf3231f9619a2"
---
<p>If you are trying to <a title="i.service-now.com/kb_view.do?sysparm_article=KB0547328" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0547328">add a field to a large table, such as a Task</a>, you may encounter a couple of issues on your instance. If you are trying to add a field to the Task table and it is taking much longer than the default UI transaction quote rule of 5 minutes, you may experience a blank screen and the change will not show up on the update set. Although the field has been created in the table, it may impact your instance in two ways:</p><ol><li>You'll have no record of it in the current update set.</li><li>The field is created on the database, but the Dictionary record is missing.<br/><br/></li></ol><p>This is likely occurring because your transaction is being timed out and canceled by a UI transactions quota rule. <a title="ki.servicenow.com/index.php?title=Transaction_Quotas#gsc.tab=0" href="http://wiki.servicenow.com/index.php?title=Transaction_Quotas#gsc.tab=0">Transaction quotas</a> allow administrators to define a quota policy for different types of transactions. Once defined, the quota rule can cancel any transaction that doesn't follow the policy and notifies you that it has been canceled. Typically, you'll get cancellation message like this:</p><p></p><p><img   alt="Transaction_cancelled.jpg" class="image-0 jive-image" src="5230fc82db1c57049c9ffb651f9619a7.iix" style="height: 213px; width: 620px; display: block; margin-left: auto; margin-right: auto; border: #BDBDBD 4px solid; border-radius: 15px;"/></p><p></p><p>The log also shows that this was canceled by the UI transactions quota rule (see also <a title="ki.servicenow.com/index.php?title=Transaction_Quotas#Viewing_Cancelled_Transactions" href="http://wiki.servicenow.com/index.php?title=Transaction_Quotas#Viewing_Cancelled_Transactions">Viewing Cancelled Transactions</a>):</p><p></p><p><img   alt="Transaction_cancelled_log.jpg" class="image-1 jive-image" src="2a019482db905304b322f4621f96190b.iix" style="height: 227px; width: 620px; display: block; margin-left: auto; margin-right: auto; border: #BDBDBD 4px solid; border-radius: 15px;"/></p><p></p><p>Administrators set transaction quotas to prevent poorly performing queries from using up system resources and preventing other transactions from running. <span style="font-size: 10pt; line-height: 1.5em;">To avoid this issue, you can reduce the size of the affected table or adjust the quota rules to allow the system modules to wait for the transaction to complete.</span></p><h2></h2><h2>Clean up the affected table</h2><p>To reduce the size of the table, you can delete unused records and/or columns to decrease the time required for the database transaction. By default, <em>background script</em>s are exempt from UI transactions quota. Importing an update set to an instance where a table size is not reduced will <em>not</em> have the same issue as transactions from the update set import that will not time out.</p><p></p><h2>Adjust the quota rules</h2><p>This will allow the system modules to wait for the transaction to complete.</p><ol><li>Navigate to <strong>System Definition &gt; Quota Rules</strong>.</li><li>Select the <strong>UI Transactions</strong> rule.</li><li>Add these conditions:<ul><li>[URL] [does not contain] [sys_dictionary] — This allows deletion from the dictionary.</li><li>[URL] [does not contain] [sys_db_object] — This allows creation from the table.</li><li>[URL] [does not contain] [slushbucket.do] — This allows creation from the form.</li><li>[URL] [does not contain] [sys_remote_update_set.do] — This allows creation from an remote update set.</li><li>[URL] [does not contain] [sys_update_set.do] —   This allows creation from an update set.<br/><br/></li></ul></li></ol><p>The example below shows the <strong>[URL] [does not contain] [sys_dictionary]</strong> condition added to the transaction quota rule:</p><p></p><p><img   alt="Quota_Transaction_Rule.jpg" class="jive-image image-2" src="fe70f37ddb5c1fc03eb27a9e0f961909.iix" style="height: 303px; width: 620px; display: block; margin-left: auto; margin-right: auto; border: #BDBDBD 4px solid; border-radius: 15px;"/><br/>This issue has been seen in quite a few patches and hot fixes in Calgary, Dublin and Eureka. You can subscribe to <a title="i.service-now.com/kb_view.do?sysparm_article=KB0547328" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0547328">KB0547328: Adding a field to a large table such as Task is canceled by the "UI Transactions" Quota Rule, failing to add the change to an update set</a> to be notified when the workaround, fixed in or description has been updated.</p>