---
title: "Examples of incoming emails  matching inbound actions without a real update"
date: 2015-12-02T02:10:47.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=a1ed2ee9dbd0dbc01dcaf3231f9619d6"
---
<p>Inbound email actions are a truly stunning feature for <a title="ki.servicenow.com/?title=Inbound_Email_Actions#gsc.tab=0" href="http://wiki.servicenow.com/?title=Inbound_Email_Actions#gsc.tab=0">'processing emails.'</a> It is scalable and simple design to a high standard that does not require expertise to develop them. Incoming emails with matching inbound actions are an ideal combination to provide a fine level for processing for incoming emails. It provides real feel of control and the <a title="ki.servicenow.com/index.php?title=Script_in_ServiceNow#gsc.tab=0" href="http://wiki.servicenow.com/index.php?title=Script_in_ServiceNow#gsc.tab=0">scripting power</a> mixed with modern <a title="ki.servicenow.com/index.php?title=Email_Properties#gsc.tab=0" href="http://wiki.servicenow.com/index.php?title=Email_Properties#gsc.tab=0">email settings</a> for very different scenarios. Independently tucked away, the <a title="ki.servicenow.com/?title=Inbound_Email_Actions#gsc.tab=0" href="http://wiki.servicenow.com/?title=Inbound_Email_Actions#gsc.tab=0">inbound actions</a> are executed by matching the incoming emails.</p><p></p><p><img  alt="no_update.png" class="image-23 jive-image" height="127" src="c8f99082dbd89fc068c1fb651f961911.iix" style="width: 143px; height: 126.793px; display: block; margin-left: auto; margin-right: auto;" width="143"/></p><p></p><p>Let's talk about incoming email actions that do not have a real update. Not all emails that are processed will have a target set, even if the system has classified it as a reply with a matching record. This is normal.</p><p></p><p>Lets talk about:</p><ul><li>Incoming emails and matching inbound actions</li><li>What is a 'real' update</li><li>Examples to test incoming emails with no 'real' updates</li><li>How to force the incoming email target</li><li>Advanced cases when target table is none in the inbound actions</li></ul><p></p><h2>Incoming emails and matching inbound actions</h2><p>Incoming emails are emails sent to the instance. The incoming emails are classified <a title="ki.servicenow.com/images/7/77/Inbound_email_action_type.png" href="http://wiki.servicenow.com/images/7/77/Inbound_email_action_type.png"> following an algorithm</a> as New, Reply or Forward. <span style="line-height: 1.5;">Inbound email actions enable an administrator to define the actions ServiceNow takes when receiving emails. </span>The feature itself offers a superb level for scripting<a title="ki.servicenow.com/index.php?title=Script_in_ServiceNow#gsc.tab=0" href="http://wiki.servicenow.com/index.php?title=Script_in_ServiceNow#gsc.tab=0"> </a>and a well balanced design for classified emails, saves you time on coding, and guarantees a clear understanding to expand and keep your email actions up-to-date.</p><p></p><p><span style="line-height: 1.5;">Inbound email actions are similar to business rules, using both conditions and scripts. If the conditions are met, the inbound email actions run the script. </span>The inbound action's conditions include the Type, the Target Table and the condition itself. The 'Type' can be None, New, Reply or Forward to match the classified emails. None will match all types of incoming emails. The target table in the inbound action will help to define the GlideRecord created for '<a title="ki.servicenow.com/index.php?title=GlideSystem#gsc.tab=0" href="http://wiki.servicenow.com/index.php?title=GlideSystem#gsc.tab=0">current.</a>' For inbound actions, the "current" is a GlideRecord based on the target table and the information gathered by the email system.</p><p></p><p>Here is a table to show the relationship between incoming email received type and matching inbound actions:</p><p></p><table border="1" cellpadding="0" cellspacing="0" class="MsoNormalTable" height="283" style="margin-left: 4.65pt; border-collapse: collapse; width: 780px; height: 274px;"><tbody><tr style="mso-yfti-irow: 0; mso-yfti-firstrow: yes;"><td style="border-style: solid solid none; border-top-color: windowtext; border-top-width: 1.5pt; border-left-color: windowtext; border-left-width: 1.5pt; border-right-color: windowtext; border-right-width: 1pt; padding: 0cm 5.4pt; text-align: center; background: #ffc000;"><p class="MsoNormal"><strong>Incoming</strong></p></td><td nowrap="nowrap" style="border-style: solid solid solid none; border-top-color: windowtext; border-top-width: 1.5pt; border-bottom-color: windowtext; border-bottom-width: 1pt; border-right-color: windowtext; border-right-width: 1pt; padding: 0cm 5.4pt; text-align: center; background: #ffc000;"><p class="MsoNormal"><strong>Received type</strong></p></td><td nowrap="nowrap" style="border-style: solid solid solid none; border-top-color: windowtext; border-top-width: 1.5pt; border-bottom-color: windowtext; border-bottom-width: 1pt; border-right-color: windowtext; border-right-width: 1pt; padding: 0cm 5.4pt; text-align: center;"><p class="MsoNormal"><strong>Classified as New</strong></p></td><td nowrap="nowrap" style="border-style: solid solid solid none; border-top-color: windowtext; border-top-width: 1.5pt; border-bottom-color: windowtext; border-bottom-width: 1pt; border-right-color: windowtext; border-right-width: 1pt; padding: 0cm 5.4pt; text-align: center; background: #d9d9d9;"><p class="MsoNormal"><strong>Classified as Reply</strong></p></td><td nowrap="nowrap" style="border-style: solid solid solid none; border-top-color: windowtext; border-top-width: 1.5pt; border-bottom-color: windowtext; border-bottom-width: 1pt; border-right-color: windowtext; border-right-width: 1.5pt; padding: 0cm 5.4pt; text-align: center;"><p class="MsoNormal"><strong>Classified</strong><strong> as Forward</strong></p></td></tr><tr style="mso-yfti-irow: 1;"><td style="border-top: none; border-left: solid windowtext 1.5pt; border-bottom: none; border-right: solid windowtext 1.0pt; mso-border-left-alt: solid windowtext 1.5pt; mso-border-right-alt: solid windowtext .5pt; background: #FFC000; padding: 0cm 5.4pt 0cm 5.4pt;"><p class="MsoNormal">Emails</p></td><td nowrap="nowrap" style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; mso-border-top-alt: solid windowtext .5pt; mso-border-left-alt: solid windowtext .5pt; mso-border-alt: solid windowtext .5pt; background: #FFC000; padding: 0cm 5.4pt 0cm 5.4pt;"><p class="MsoNormal">Target record</p></td><td nowrap="nowrap" style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; mso-border-top-alt: solid windowtext .5pt; mso-border-left-alt: solid windowtext .5pt; mso-border-alt: solid windowtext .5pt; padding: 0cm 5.4pt 0cm 5.4pt;"><p class="MsoNormal">-</p></td><td nowrap="nowrap" style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; mso-border-top-alt: solid windowtext .5pt; mso-border-left-alt: solid windowtext .5pt; mso-border-alt: solid windowtext .5pt; background: #D9D9D9; mso-background-themecolor: background1; mso-background-themeshade: 217; padding: 0cm 5.4pt 0cm 5.4pt;"><p class="MsoNormal">Found</p></td><td nowrap="nowrap" style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.5pt; mso-border-top-alt: solid windowtext .5pt; mso-border-left-alt: solid windowtext .5pt; mso-border-alt: solid windowtext .5pt; mso-border-right-alt: solid windowtext 1.5pt; padding: 0cm 5.4pt 0cm 5.4pt;"><p class="MsoNormal">-</p></td></tr><tr style="mso-yfti-irow: 2;"><td style="border-top: none; border-left: solid windowtext 1.5pt; border-bottom: none; border-right: solid windowtext 1.0pt; mso-border-left-alt: solid windowtext 1.5pt; mso-border-right-alt: solid windowtext .5pt; background: #FFC000; padding: 0cm 5.4pt 0cm 5.4pt;"><p class="MsoNormal"></p></td><td nowrap="nowrap" style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; mso-border-top-alt: solid windowtext .5pt; mso-border-left-alt: solid windowtext .5pt; mso-border-alt: solid windowtext .5pt; background: #FFC000; padding: 0cm 5.4pt 0cm 5.4pt;"><p class="MsoNormal">Target record if success</p></td><td nowrap="nowrap" style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; mso-border-top-alt: solid windowtext .5pt; mso-border-left-alt: solid windowtext .5pt; mso-border-alt: solid windowtext .5pt; padding: 0cm 5.4pt 0cm 5.4pt;"><p class="MsoNormal">New</p></td><td nowrap="nowrap" style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; mso-border-top-alt: solid windowtext .5pt; mso-border-left-alt: solid windowtext .5pt; mso-border-alt: solid windowtext .5pt; background: #D9D9D9; mso-background-themecolor: background1; mso-background-themeshade: 217; padding: 0cm 5.4pt 0cm 5.4pt;"><p class="MsoNormal">Found if data updated</p></td><td nowrap="nowrap" style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.5pt; mso-border-top-alt: solid windowtext .5pt; mso-border-left-alt: solid windowtext .5pt; mso-border-alt: solid windowtext .5pt; mso-border-right-alt: solid windowtext 1.5pt; padding: 0cm 5.4pt 0cm 5.4pt;"><p class="MsoNormal">New</p></td></tr><tr style="mso-yfti-irow: 3;"><td style="border-top: none; border-left: solid windowtext 1.5pt; border-bottom: none; border-right: solid windowtext 1.0pt; mso-border-left-alt: solid windowtext 1.5pt; mso-border-right-alt: solid windowtext .5pt; background: #FFC000; padding: 0cm 5.4pt 0cm 5.4pt;"><p class="MsoNormal"></p></td><td nowrap="nowrap" style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; mso-border-top-alt: solid windowtext .5pt; mso-border-left-alt: solid windowtext .5pt; mso-border-alt: solid windowtext .5pt; background: #FFC000; padding: 0cm 5.4pt 0cm 5.4pt;"><p class="MsoNormal">Notes</p></td><td nowrap="nowrap" style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; mso-border-top-alt: solid windowtext .5pt; mso-border-left-alt: solid windowtext .5pt; mso-border-alt: solid windowtext .5pt; padding: 0cm 5.4pt 0cm 5.4pt;"><p class="MsoNormal">Target set based on inbound</p><p class="MsoNormal">action target table</p></td><td nowrap="nowrap" style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; mso-border-top-alt: solid windowtext .5pt; mso-border-left-alt: solid windowtext .5pt; mso-border-alt: solid windowtext .5pt; background: #D9D9D9; mso-background-themecolor: background1; mso-background-themeshade: 217; padding: 0cm 5.4pt 0cm 5.4pt;"><p class="MsoNormal">Target set based on</p><p class="MsoNormal">target found on reply</p></td><td nowrap="nowrap" style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.5pt; mso-border-top-alt: solid windowtext .5pt; mso-border-left-alt: solid windowtext .5pt; mso-border-alt: solid windowtext .5pt; mso-border-right-alt: solid windowtext 1.5pt; padding: 0cm 5.4pt 0cm 5.4pt;"><p class="MsoNormal">Target set based on</p><p class="MsoNormal">inbound action target table</p></td></tr><tr style="mso-yfti-irow: 4;"><td style="border-top: none; border-left: solid windowtext 1.5pt; border-bottom: solid windowtext 1.5pt; border-right: solid windowtext 1.0pt; mso-border-left-alt: solid windowtext 1.5pt; mso-border-bottom-alt: solid windowtext 1.5pt; mso-border-right-alt: solid windowtext .5pt; background: #FFC000; padding: 0cm 5.4pt 0cm 5.4pt;"><p class="MsoNormal"></p></td><td nowrap="nowrap" style="border-top: none; border-left: none; border-bottom: solid windowtext 1.5pt; border-right: solid windowtext 1.0pt; mso-border-top-alt: solid windowtext .5pt; mso-border-left-alt: solid windowtext .5pt; mso-border-alt: solid windowtext .5pt; mso-border-bottom-alt: solid windowtext 1.5pt; background: #FFC000; padding: 0cm 5.4pt 0cm 5.4pt;"><p class="MsoNormal">Logs if there</p><p class="MsoNormal">is no update</p></td><td nowrap="nowrap" style="border-top: none; border-left: none; border-bottom: solid windowtext 1.5pt; border-right: solid windowtext 1.0pt; mso-border-top-alt: solid windowtext .5pt; mso-border-left-alt: solid windowtext .5pt; mso-border-alt: solid windowtext .5pt; mso-border-bottom-alt: solid windowtext 1.5pt; padding: 0cm 5.4pt 0cm 5.4pt;"><p class="MsoNormal">Skipping 'xxx', did not create</p><p class="MsoNormal">or update incident</p></td><td nowrap="nowrap" style="border-top: none; border-left: none; border-bottom: solid windowtext 1.5pt; border-right: solid windowtext 1.0pt; mso-border-top-alt: solid windowtext .5pt; mso-border-left-alt: solid windowtext .5pt; mso-border-alt: solid windowtext .5pt; mso-border-bottom-alt: solid windowtext 1.5pt; background: #D9D9D9; mso-background-themecolor: background1; mso-background-themeshade: 217; padding: 0cm 5.4pt 0cm 5.4pt;"><p class="MsoNormal">Skipping 'xxx', did not</p><p class="MsoNormal">create or update</p></td><td nowrap="nowrap" style="border-top: none; border-left: none; border-bottom: solid windowtext 1.5pt; border-right: solid windowtext 1.5pt; mso-border-top-alt: solid windowtext .5pt; mso-border-left-alt: solid windowtext .5pt; padding: 0cm 5.4pt 0cm 5.4pt;"><p class="MsoNormal">Skipping 'xxx', did not</p><p class="MsoNormal">create or update</p></td></tr><tr style="mso-yfti-irow: 5;"><td style="border-top: none; border-left: solid windowtext 1.5pt; border-bottom: none; border-right: solid windowtext 1.0pt; mso-border-top-alt: solid windowtext 1.5pt; mso-border-left-alt: solid windowtext 1.5pt; mso-border-right-alt: solid windowtext .5pt; background: #E5B8B7; mso-background-themecolor: accent2; mso-background-themetint: 102; padding: 0cm 5.4pt 0cm 5.4pt;"><p class="MsoNormal">Matching</p></td><td nowrap="nowrap" style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; mso-border-top-alt: solid windowtext 1.5pt; mso-border-left-alt: solid windowtext .5pt; mso-border-alt: solid windowtext .5pt; background: #E5B8B7; mso-background-themecolor: accent2; mso-background-themetint: 102; padding: 0cm 5.4pt 0cm 5.4pt;"><p class="MsoNormal">Type</p></td><td nowrap="nowrap" style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; mso-border-top-alt: solid windowtext 1.5pt; mso-border-left-alt: solid windowtext .5pt; mso-border-alt: solid windowtext .5pt; padding: 0cm 5.4pt 0cm 5.4pt;"><p class="MsoNormal">New or None</p></td><td nowrap="nowrap" style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; mso-border-top-alt: solid windowtext 1.5pt; mso-border-left-alt: solid windowtext .5pt; mso-border-alt: solid windowtext .5pt; background: #D9D9D9; mso-background-themecolor: background1; mso-background-themeshade: 217; padding: 0cm 5.4pt 0cm 5.4pt;"><p class="MsoNormal">Reply or None</p></td><td nowrap="nowrap" style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.5pt; mso-border-top-alt: 1.5pt; mso-border-left-alt: .5pt; mso-border-bottom-alt: .5pt; mso-border-right-alt: 1.5pt; mso-border-color-alt: windowtext; mso-border-style-alt: solid; padding: 0cm 5.4pt 0cm 5.4pt;"><p class="MsoNormal">Forward or None</p></td></tr><tr style="mso-yfti-irow: 6;"><td style="border-top: none; border-left: solid windowtext 1.5pt; border-bottom: none; border-right: solid windowtext 1.0pt; mso-border-left-alt: solid windowtext 1.5pt; mso-border-right-alt: solid windowtext .5pt; background: #E5B8B7; mso-background-themecolor: accent2; mso-background-themetint: 102; padding: 0cm 5.4pt 0cm 5.4pt;"><p class="MsoNormal">Inbound</p><p class="MsoNormal">Action</p></td><td nowrap="nowrap" style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; mso-border-top-alt: solid windowtext .5pt; mso-border-left-alt: solid windowtext .5pt; mso-border-alt: solid windowtext .5pt; background: #E5B8B7; mso-background-themecolor: accent2; mso-background-themetint: 102; padding: 0cm 5.4pt 0cm 5.4pt;"><p class="MsoNormal">Usual inbound</p><p class="MsoNormal">action update</p></td><td style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; mso-border-top-alt: solid windowtext .5pt; mso-border-left-alt: solid windowtext .5pt; mso-border-alt: solid windowtext .5pt; padding: 0cm 5.4pt 0cm 5.4pt;"><p class="MsoNormal">current.insert()<br/> current.update()</p></td><td nowrap="nowrap" style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; mso-border-top-alt: solid windowtext .5pt; mso-border-left-alt: solid windowtext .5pt; mso-border-alt: solid windowtext .5pt; background: #D9D9D9; mso-background-themecolor: background1; mso-background-themeshade: 217; padding: 0cm 5.4pt 0cm 5.4pt;"><p class="MsoNormal">current.update()</p></td><td style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.5pt; mso-border-top-alt: solid windowtext .5pt; mso-border-left-alt: solid windowtext .5pt; mso-border-alt: solid windowtext .5pt; mso-border-right-alt: solid windowtext 1.5pt; padding: 0cm 5.4pt 0cm 5.4pt;"><p class="MsoNormal">current.insert()<br/> current.update()</p></td></tr><tr style="mso-yfti-irow: 7; mso-yfti-lastrow: yes;"><td style="border-top: none; border-left: solid windowtext 1.5pt; border-bottom: solid windowtext 1.5pt; border-right: solid windowtext 1.0pt; mso-border-left-alt: solid windowtext 1.5pt; mso-border-bottom-alt: solid windowtext 1.5pt; mso-border-right-alt: solid windowtext .5pt; background: #E5B8B7; mso-background-themecolor: accent2; mso-background-themetint: 102; padding: 0cm 5.4pt 0cm 5.4pt;"><p class="MsoNormal"></p></td><td nowrap="nowrap" style="border-top: none; border-left: none; border-bottom: solid windowtext 1.5pt; border-right: solid windowtext 1.0pt; mso-border-top-alt: solid windowtext .5pt; mso-border-left-alt: solid windowtext .5pt; mso-border-alt: solid windowtext .5pt; mso-border-bottom-alt: solid windowtext 1.5pt; background: #E5B8B7; mso-background-themecolor: accent2; mso-background-themetint: 102; padding: 0cm 5.4pt 0cm 5.4pt;"><p class="MsoNormal">Target table</p></td><td nowrap="nowrap" style="border-top: none; border-left: none; border-bottom: solid windowtext 1.5pt; border-right: solid windowtext 1.0pt; mso-border-top-alt: solid windowtext .5pt; mso-border-left-alt: solid windowtext .5pt; mso-border-alt: solid windowtext .5pt; mso-border-bottom-alt: solid windowtext 1.5pt; padding: 0cm 5.4pt 0cm 5.4pt;"><p class="MsoNormal">Set</p></td><td nowrap="nowrap" style="border-top: none; border-left: none; border-bottom: solid windowtext 1.5pt; border-right: solid windowtext 1.0pt; mso-border-top-alt: solid windowtext .5pt; mso-border-left-alt: solid windowtext .5pt; mso-border-alt: solid windowtext .5pt; mso-border-bottom-alt: solid windowtext 1.5pt; background: #D9D9D9; mso-background-themecolor: background1; mso-background-themeshade: 217; padding: 0cm 5.4pt 0cm 5.4pt;"><p class="MsoNormal">Set — it needs to match</p><p class="MsoNormal">email target found</p><p class="MsoNormal">with this table</p></td><td nowrap="nowrap" style="border-top: none; border-left: none; border-bottom: solid windowtext 1.5pt; border-right: solid windowtext 1.5pt; mso-border-top-alt: solid windowtext .5pt; mso-border-left-alt: solid windowtext .5pt; padding: 0cm 5.4pt 0cm 5.4pt;"><p class="MsoNormal">Set</p></td></tr></tbody></table><p></p><p>The table shows the incoming emails are classified then matched to the respective inbound actions. Setting the target table makes the <a title="ki.servicenow.com/?title=Inbound_Email_Actions#gsc.tab=0" href="http://wiki.servicenow.com/?title=Inbound_Email_Actions#gsc.tab=0">inbound actions</a> much easier to understand. Also, setting the inbound action type to None, increases the complexity as the rule matches all received types.</p><p></p><h2>A 'real' update</h2><p>A real update means that at least one field on the 'current' record has been changed or the 'current' record has been created. If after receiving an incoming email there is not real* update on the inbound action 'current' record, the target field on the matching incoming email will remain empty.</p><p></p><p>It makes sense as a way to control which emails would <a title="" _jive_internal="true" href="/community/service-automation-platform/notifications/blog/2015/09/25/journals-with-activity-formatter-do-not-show-all-sendreceive-emails">display in the activity formatter.</a></p><pre __default_attr="info" __jive_macro_name="alert" alert="info" class="jive_text_macro jive_macro_alert" data-renderedposition="1333.5999755859375_8_917_64"><p><strong>The Incoming email target is only set if the 'current' record is updated or inserted in the inbound action. Otherwise, it remains empty<br/></strong></p></pre><p></p><h2>Examples to test incoming emails with no 'real' updates</h2><p>Besides inbound actions that do not meet the conditions, there are a few cases where the current.update() does not execute because the data has not changed.</p><p></p><p>I've created the following incoming email action to validate the behaviour:</p><p></p><table border="1" cellpadding="0" cellspacing="0" style="border: none; padding: 0 5.4pt 0 5.4pt;"><tbody><tr><td style="border: solid windowtext 1.0pt; border-right: none; background: #C6D9F1; padding: 0 5.4pt 0 5.4pt;" valign="top" width="158"><p style="margin-bottom: .0001pt;">Inbound action</p></td><td style="border-top: solid windowtext 1.0pt; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: none; background: #C6D9F1; padding: 0 5.4pt 0 5.4pt;" valign="top" width="57"><p></p></td><td style="border: solid windowtext 1.0pt; border-left: none; background: #C6D9F1; padding: 0 5.4pt 0 5.4pt;" valign="top" width="401"><p></p></td></tr><tr><td style="border: solid windowtext 1.0pt; border-top: none; padding: 0 5.4pt 0 5.4pt;" valign="top" width="158"><p style="margin-bottom: .0001pt;">Name</p></td><td style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0 5.4pt 0 5.4pt;" valign="top" width="57"><p style="margin-bottom: .0001pt;">=</p></td><td style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0 5.4pt 0 5.4pt;" valign="top" width="401"><p style="margin-bottom: .0001pt;">Update Incident.JS</p></td></tr><tr><td style="border: solid windowtext 1.0pt; border-top: none; padding: 0 5.4pt 0 5.4pt;" valign="top" width="158"><p style="margin-bottom: .0001pt;">Target table</p></td><td style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0 5.4pt 0 5.4pt;" valign="top" width="57"><p style="margin-bottom: .0001pt;">=</p></td><td style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0 5.4pt 0 5.4pt;" valign="top" width="401"><p style="margin-bottom: .0001pt;">Incident</p></td></tr><tr><td style="border: solid windowtext 1.0pt; border-top: none; padding: 0 5.4pt 0 5.4pt;" valign="top" width="158"><p style="margin-bottom: .0001pt;">Type</p></td><td style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0 5.4pt 0 5.4pt;" valign="top" width="57"><p style="margin-bottom: .0001pt;">=</p></td><td style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0 5.4pt 0 5.4pt;" valign="top" width="401"><p style="margin-bottom: .0001pt;">Reply</p></td></tr><tr><td style="border: solid windowtext 1.0pt; border-top: none; padding: 0 5.4pt 0 5.4pt;" valign="top" width="158"><p style="margin-bottom: .0001pt;">Condition</p></td><td style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0 5.4pt 0 5.4pt;" valign="top" width="57"><p style="margin-bottom: .0001pt;">=</p></td><td style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0 5.4pt 0 5.4pt;" valign="top" width="401"><p>current.getTableName() == 'incident'</p></td></tr></tbody></table><p></p><p>Script is</p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14469074699464014 jive_text_macro" data-renderedposition="1721.5999755859375_8_917_192" jivemacro_uid="_14469074699464014"><p>gs.log('CS - Update Incident.JS starts'); // comment on prod</p><p></p><p>// the following line set impact to 2 = Medium</p><p>current.impact = 2;   </p><p></p><p>// As the previous change is a static field, </p><p>// if current is already 2, no update happens</p><p>current.update();</p><p></p><p>// No further inbound actions are required - stopping them</p><p>event.state="stop_processing";</p><p>gs.log('CS - Update Incident.JS ends'); // comment on prod </p></pre><p></p><p>The inbound action looks as follow:</p><p><img   alt="real update1.jpg" class="image-14 jive-image" src="ed9d85c2db1897049c9ffb651f96194e.iix" style="width: 620px; height: 345px; display: block; margin-left: auto; margin-right: auto;"/></p><p></p><p>For the test, I have created an incident 'TETS' with impact = 3.</p><p><img   alt="real update 2.jpg" class="image-15 jive-image" src="5f7d6486db9857049c9ffb651f961909.iix" style="width: 620px; height: 308px; display: block; margin-left: auto; margin-right: auto;"/></p><p></p><table border="1"><tbody><tr><td><h3>Example #1: First reply email to the instance to update 'Incident: TETS'.</h3><p>After sending an inbound email to the instance, once it get processed the first time, the following is the result:</p><p></p><p><img   alt="real update 3.jpg" class="image-16 jive-image" src="6a884002db981344e9737a9e0f961971.iix" style="width: 620px; height: 173px; display: block; margin-left: auto; margin-right: auto;"/></p><p><img   alt="real update 4.jpg" class="image-17 jive-image" src="199cab3ddb9893049c9ffb651f96198e.iix" style="width: 620px; height: 31px; display: block; margin-left: auto; margin-right: auto;"/></p><p></p><p>The incoming email target is set to 'Incident: TETS' as expected. This is because current.impact was 3, then the script change it to 2, causing the current.update() to execute, the the system will set the target to current.</p></td></tr></tbody></table><p></p><p></p><table border="1"><tbody><tr><td><h3>Example #2: Second reply email to the instance to update 'Incident: TETS'.</h3><p>After sending a second inbound email to the instance, once it get processed, the following is the result:</p><p></p><p><img   alt="real update 5.jpg" class="image-18 jive-image" src="cc15d50adb18130468c1fb651f961964.iix" style="width: 620px; height: 358px; display: block; margin-left: auto; margin-right: auto;"/></p><p>The incoming email target is set to (empty) as expected. This is because current.impact was already 2, then the script set it to 2 again, which is not causing any change, then the current.update() do not to execute. Then the system will set the target to (empty). This does not mean the watermark did not match.</p></td></tr></tbody></table><p></p><table border="1"><tbody><tr><td><h3>Example #3: Inserting a different record than 'current'</h3><p>I've created a new inbound action that creates a new problem called "vproblem." It looks like follow:</p><p><img   alt="current 1.jpg" class="image-19 jive-image" src="93884086db5017049c9ffb651f9619da.iix" style="width: 620px; height: 299px; display: block; margin-left: auto; margin-right: auto;"/></p><p></p><p>After sending an inbound email to the instance, once it get processed, the following is the result:</p><p><img   alt="current 2.jpg" class="image-20 jive-image" src="1f9c2331db981fc068c1fb651f9619cf.iix" style="width: 620px; height: 234px; display: block; margin-left: auto; margin-right: auto;"/></p><p>Results: The incoming email target is set to (empty) as expected. This is because the system only tracks the inbound action 'current' to set the incoming email target.</p><p>As current did not have any update or insert, the the system will set the target to (empty). That is the reason I prefer to use 'current' on inbound actions.</p></td></tr></tbody></table><p></p><h2>Force the incoming email target</h2><p>You can manupulate <strong>sys_email.instance</strong> to set the target and <strong>sys_email.target_table</strong> to set the target_table.</p><p></p><p>The following is an example of an incoming email action that explicitly set the incoming email target:</p><table border="1" cellpadding="0" cellspacing="0" style="border: none; padding: 0 5.4pt 0 5.4pt;"><tbody><tr><td style="border: solid windowtext 1.0pt; border-right: none; background: #C6D9F1; padding: 0 5.4pt 0 5.4pt;" valign="top" width="158"><p style="margin-bottom: .0001pt;">Inbound action</p></td><td style="border-top: solid windowtext 1.0pt; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: none; background: #C6D9F1; padding: 0 5.4pt 0 5.4pt;" valign="top" width="57"><p></p></td><td style="border: solid windowtext 1.0pt; border-left: none; background: #C6D9F1; padding: 0 5.4pt 0 5.4pt;" valign="top" width="401"><p></p></td></tr><tr><td style="border: solid windowtext 1.0pt; border-top: none; padding: 0 5.4pt 0 5.4pt;" valign="top" width="158"><p style="margin-bottom: .0001pt;">Name</p></td><td style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0 5.4pt 0 5.4pt;" valign="top" width="57"><p style="margin-bottom: .0001pt;">=</p></td><td style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0 5.4pt 0 5.4pt;" valign="top" width="401"><p style="margin-bottom: .0001pt;">Update Incident.JS_1</p></td></tr><tr><td style="border: solid windowtext 1.0pt; border-top: none; padding: 0 5.4pt 0 5.4pt;" valign="top" width="158"><p style="margin-bottom: .0001pt;">Target table</p></td><td style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0 5.4pt 0 5.4pt;" valign="top" width="57"><p style="margin-bottom: .0001pt;">=</p></td><td style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0 5.4pt 0 5.4pt;" valign="top" width="401"><p style="margin-bottom: .0001pt;">Incident</p></td></tr><tr><td style="border: solid windowtext 1.0pt; border-top: none; padding: 0 5.4pt 0 5.4pt;" valign="top" width="158"><p style="margin-bottom: .0001pt;">Type</p></td><td style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0 5.4pt 0 5.4pt;" valign="top" width="57"><p style="margin-bottom: .0001pt;">=</p></td><td style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0 5.4pt 0 5.4pt;" valign="top" width="401"><p style="margin-bottom: .0001pt;">Reply</p></td></tr><tr><td style="border: solid windowtext 1.0pt; border-top: none; padding: 0 5.4pt 0 5.4pt;" valign="top" width="158"><p style="margin-bottom: .0001pt;">Condition</p></td><td style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0 5.4pt 0 5.4pt;" valign="top" width="57"><p style="margin-bottom: .0001pt;">=</p></td><td style="border-top: none; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0 5.4pt 0 5.4pt;" valign="top" width="401"><p>current.getTableName() == 'incident'</p></td></tr></tbody></table><p></p><p>Script is</p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14469084479747932 jive_text_macro" data-renderedposition="4709.60009765625_8_917_320" jivemacro_uid="_14469084479747932"><p>gs.log('CS - Update Incident.JS_1 starts'); // comment on prod</p><p></p><p>// the following lines will create a new incident</p><p>var vproblem =   new GlideRecord('problem');</p><p>vproblem.priority=2;</p><p>vproblem.short_description = 'New incident - test - short';</p><p>vproblem.description = 'New incident - test - descr ';</p><p>vproblem.insert();</p><p></p><p>// No further inbound actions are required - stopping them</p><p>event.state="stop_processing";</p><p>gs.log('CS - Update Incident.JS_1 ends '); // comment on prod </p><p></p><p>// WORKAROUND: To force setting the email target (not recommended)</p><p>// This set it to the new record vproblem created </p><p>sys_email.instance = vproblem.sys_id;</p><p>sys_email.target_table = vproblem.getTableName();</p><p>           // Or if you need to be set to current</p><p>           // sys_email.instance = current.sys_id;</p><p>           // sys_email.target_table = current.getTableName();</p></pre><p></p><p>The inbound action looks like:</p><p><img   alt="inbound action.jpg" class="image-21 jive-image" src="e8151542db18d344e9737a9e0f9619cf.iix" style="width: 620px; height: 480px; display: block; margin-left: auto; margin-right: auto;"/></p><p></p><p>After sending an inbound email to the instance, once it get processed, the following is the result:</p><p><img   alt="inbound action.jpg" class="image-22 jive-image" src="1f98740adbd89344e9737a9e0f96192c.iix" style="width: 620px; height: 215px; display: block; margin-left: auto; margin-right: auto;"/></p><p></p><p>The incoming email target is force to be set to the problem created. This is because we manipulated the sys_email record on the script. It could be forced to any record. If the target is empty on the incoming emails, we can assume there were no valid update on the matching inbound actions. Sometimes simple is more.</p><p></p><p>I have tested this with Fuji and Chrome as the browser.</p><p></p><p>More information here:</p><ul><li><a title="" _jive_internal="true" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0540674" rel="nofollow" target="_blank">Email Resources Page (KB0540674)</a></li><li><a title="" _jive_internal="true" href="http://www.servicenowguru.com/system-definition/inbound-email-new-reply-forward/" rel="nofollow" target="_blank">Inbound Email - New, Reply, and Forward - ServiceNow Guru</a></li><li><a title="" _jive_internal="true" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0524472" rel="nofollow" target="_blank">Inbound Email Troubleshooting (KB0524472)</a></li><li><a title="" _jive_internal="true" href="https://www.youtube.com/watch?v=tbeGSYFG828" rel="nofollow" target="_blank">Part Three | Verifying Inbound Email User and Incident Creation Settings - YouTube</a></li><li><a title="" _jive_internal="true" data-containerid="1007" data-containertype="37" data-objectid="4826" data-objecttype="38" href="/community?id=community_blog&sys_id=bc7c22e1dbd0dbc01dcaf3231f961996">Incoming email classified as reply to 'null' via watermark</a></li><li><a title="" _jive_internal="true" href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/notification/concept/inbound-action-processing.html" rel="nofollow" target="_blank">Docs: Inbound action processing</a></li><li><a title="" _jive_internal="true" href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/notification/concept/c_InboundEmailActions.html" rel="nofollow" target="_blank">Docs: Inbound email actions</a></li><li><a title="" _jive_internal="true" data-containerid="-1" data-containertype="-1" data-objectid="45437" data-objecttype="3" href="/people/jonnyseymour/content?filterID=contentstatus%5Bpublished%5D%7Eobjecttype%7Eobjecttype%5Bblogpost%5D">My other blogs</a></li></ul>