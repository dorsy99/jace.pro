---
title: "MiniLab A Query Business Rule Demonstration"
date: 2015-10-20T19:00:14.000Z
authors: ["sabell2012"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=d96eeeaddbd0dbc01dcaf3231f96190c"
---
<p><span style="line-height: 1.5em; font-size: 12pt; font-family: arial, helvetica, sans-serif;">There are several ways of limiting records to be displayed to the user.   Of these there are three out-of-the-box (OOtB) that are most widely used:</span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"> <span style="font-size: 16px;">       </span>ACLs</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">   <span style="font-size: 16px;">   </span>Data Policy</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">   <span style="font-size: 16px;">   </span>Query Business Rule</span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">Of the above I like the Query Business Rule (BR) as it gives a seamless user experience. With this article we will be exploring the Query BR, and how you can limit user access to data.</span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">In this example I will give a couple of best practices:</span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   Requirements and Design gathering</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   Role to Group Association</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"> <span style="font-size: 16px;">       </span>Using a Query BR to Limit Data exposure</span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><strong>Requirements:   </strong></span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">Our fictitious company Wigit-Inators would like to constrain all user access to widget Incidents.   The desire is to limit these records to be viewed by only authorized personnel.   This Widget Analyst would be allowed to see all incident records including Widget incident records.   These records will also be those that include the word Wire (just to give us more to see).   All other Itil users would be excluded from seeing Widget and Wire Incidents</span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">1. Create a new Role: Widget Analyst</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">2. Limit access to widget records in the Incident table to be viewable only by those with the Widget Analyst role.   Keep the other Itil user(s) from seeing Widget Incident records.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">3. Only records with the word "wire" or "widget" will be affected.<br/></span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">4. ServiceNow admins will also have access</span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><strong>Design:</strong></span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">1. Create new role: widget_analyst</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">2. Create new group: Widget Analysts</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">3. Create new Query BR:   Widget Exclude that:</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">       a. Will allow only analysts with the widget_analyst role to see widget records. </span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">       b. The widget records will not be visible to those without the widget_analyst role.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   c. Admins will be allowed to see widget records as well.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">       d. Widget Analysts will be able to see all other Incidents as well as widget records.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">       e. Widget Analysts and Admins will be able to see Incidents with the words "wire" or "widget in the short_description field.   All other Itil users will not be able to see these incident records.</span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="color: #ff0000;"><strong>NOTE</strong></span>: <strong>Best Practice</strong>: Always assign roles to a group, then assign users to the group.   Never assign roles directly to users.   With roles it is much easier to maintain a group than individual users.   <br/></span></p><p></p><p></p><p><span style="font-family: inherit; font-style: inherit; color: #666666; line-height: 1.5em; font-size: 18.6667px;"><strong>Lab 1.1 — Limiting Data Access With a Query BR</strong></span></p><p><span style="font-size: 18.6667px; font-style: inherit; font-family: inherit; font-weight: inherit;"><strong> </strong></span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">1. Create new role</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   a. Navigate to User Administration -&gt; Roles. The Roles list view will be displayed.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   b. Click on the New button.   The New Role form will be displayed.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   c. Fill in the form with the following:</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   <span style="font-size: 16px;">   <span style="font-size: 16px;">   </span></span></span>   i.     <strong>Name</strong>: widget_analyst</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">       <span style="font-size: 16px;">   <span style="font-size: 16px;">   </span></span></span> ii.   <strong>Description</strong>: Persons who analyzes widgets</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   <span style="font-size: 16px;">   <span style="font-size: 16px;">   <span style="font-size: 16px;">   </span></span></span></span>iii. Click the Submit button to save the new role.</span></p><p></p><p><img   alt="x.widget_analyst role.png" class="image-0 jive-image" src="b906b3b5db50d3041dcaf3231f9619f7.iix" style="height: 156px; width: 620px; display: block; margin-left: auto; margin-right: auto;"/></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">2. Create new group</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   a. Navigate to User Administration -&gt; Groups. The Groups list view will be displayed.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   b. Click on the New button.   The New Group form will be displayed.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   c. Fill in the form with the following:</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   <span style="font-size: 16px;">   <span style="font-size: 16px;">   </span></span></span>   i.     <strong>Name</strong>: Widget Analysts</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   <span style="font-size: 16px;">   <span style="font-size: 16px;">   </span></span></span>   ii.   <strong>Description</strong>: People with the Widget Analyst role</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"> <span style="font-size: 16px;">       </span>d. Right-click on the form header to bring up the form context menu. Click on the Save option to save your work.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   e. Scroll to the bottom of the Group form and choose the Roles tab.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   <span style="font-size: 16px;">   <span style="font-size: 16px;">   </span></span></span>   i.     Click the Edit button.   The Edit Members form will be displayed.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   <span style="font-size: 16px;">   <span style="font-size: 16px;">   </span></span></span>   ii.   Choose the <strong>Itil</strong> role.   The users will need full access to all incidents.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   <span style="font-size: 16px;">   <span style="font-size: 16px;">   </span></span></span>   iii. Choose the <strong>widget_analyst</strong> role.   These users will be able to view the widget incident records.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   <span style="font-size: 16px;">   <span style="font-size: 16px;">   </span></span></span>   iv.   Click the Save button to save your work and return to the Group form.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">       <span style="font-size: 16px;">   <span style="font-size: 16px;">   </span></span></span> v.     You will see information messages displayed at the top of the form notifying you of the role assignments to the group.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"> </span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><img   alt="x.widget analyst group.png" class="image-1 jive-image" src="37161942db58d344e9737a9e0f96190d.iix" style="height: 315px; width: 620px; display: block; margin-left: auto; margin-right: auto;"/><br/></span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"> </span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   f. Choose the Group Members tab.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   <span style="font-size: 16px;">   <span style="font-size: 16px;">   </span></span></span>   i.     Click the Edit button.   The Edit Members form will be displayed.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   <span style="font-size: 16px;">   <span style="font-size: 16px;">   </span></span></span>   ii.   Choose your favorite user(s) that you want to be widget people.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   <span style="font-size: 16px;">   <span style="font-size: 16px;">   </span></span></span>   iii. Click the Save button to save your work and return to the Group form.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   <span style="font-size: 16px;">   <span style="font-size: 16px;">   </span></span></span>   iv.   You will see information messages displayed at the top of the form notifying you of the role assignments now given to the users assigned to the group.</span></p><p></p><p><img   alt="x.user assignment.png" class="image-2 jive-image" src="39633482db5097041dcaf3231f961996.iix" style="height: 154px; width: 620px; display: block; margin-left: auto; margin-right: auto;"/></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">3. Create new <strong>Query BR</strong></span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">       </span>a. Navigate to System Definition -&gt; Business Rules.   The Business Rules list view will be displayed.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">       </span>b. Click on the New button.   The New Business Rule form will be displayed.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">     </span> c. Fill in the form with the following:</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   <span style="font-size: 16px;">   <span style="font-size: 16px;">   </span></span></span>   i.     <strong>Name</strong>: Widget Exclude</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   <span style="font-size: 16px;">   <span style="font-size: 16px;">   </span></span></span>   ii.   <strong>Table</strong>: Incident</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   <span style="font-size: 16px;">   <span style="font-size: 16px;">   </span></span></span>   iii.   <strong>Active</strong>: Checked</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   <span style="font-size: 16px;">   <span style="font-size: 16px;">   </span></span></span>   iv.   <strong>Advanced</strong>: Checked</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   d. Click on the When To Run tab</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"> <span style="font-size: 16px;">         <span style="font-size: 16px;"> <span style="font-size: 16px;">     </span></span></span>i.     <strong>When</strong>: before</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   <span style="font-size: 16px;">   <span style="font-size: 16px;">   </span></span></span>   ii.   <strong>Order</strong>: 100</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   <span style="font-size: 16px;">   <span style="font-size: 16px;">   </span></span></span>   iii. <strong>Query</strong>: checked</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"> </span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><img   alt="x.display br.png" class="jive-image image-4" src="9a44180adb1817041dcaf3231f96198f.iix" style="height: 251px; width: 620px; display: block; margin-left: auto; margin-right: auto;"/><br/></span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"> </span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"> <span style="font-size: 16px;">     </span>e. Click on the Advanced tab</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   <span style="font-size: 16px;">   <span style="font-size: 16px;">   </span></span></span>   i.     <strong>Condition</strong>: None.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"> <span style="font-size: 16px;">   <span style="font-size: 16px;">       <span style="font-size: 16px;">   </span></span></span> ii.   <strong>Script</strong></span></p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="_jivemacro_uid_14453483870686230 jive_macro_code jive_text_macro" data-renderedposition="3209.88623046875_7.997159004211426_1192_278" jivemacro_uid="_14453483870686230"><p>function onBefore(current, previous) {</p><p><span style="font-size: 13.3333px;">   </span>   // Look for these words in the short descript and use it as a filter</p><p>   <span style="font-size: 13.3333px;">   </span>// This script adds to the overall list view query that is used to display</p><p>   <span style="font-size: 13.3333px;">   </span>// the list view</p><p><span style="font-size: 13.3333px;">   </span> if (gs.hasRole("widget_analyst") || gs.hasRole("admin")) {</p><p><span style="font-size: 13.3333px;">   <span style="font-size: 13.3333px;">   </span></span>       var incidentInclusion = current.addOrCondition('short_description', 'CONTAINS', 'widget')</p><p><span style="font-size: 13.3333px;">   <span style="font-size: 13.3333px;">   <span style="font-size: 13.3333px;">   <span style="font-size: 13.3333px;">   </span></span></span></span>       .addOrCondition('short_description', 'CONTAINS', 'wire');</p><p><span style="font-size: 13.3333px;">   </span> }</p><p>   <span style="font-size: 13.3333px;">   </span>else {</p><p><span style="font-size: 13.3333px;">   <span style="font-size: 13.3333px;">   <span style="font-size: 13.3333px;">   </span></span></span>   var incidentExclusion = current.addQuery('short_description', 'DOES NOT CONTAIN', 'widget')</p><p>       <span style="font-size: 13.3333px;">   <span style="font-size: 13.3333px;">   <span style="font-size: 13.3333px;">   <span style="font-size: 13.3333px;">   </span></span></span></span>.addQuery('short_description', 'DOES NOT CONTAIN', 'wire');</p><p>   <span style="font-size: 13.3333px;">   </span>}</p><p>}</p>       </pre><p><span style="font-size: 16px; font-family: arial, helvetica, sans-serif;"> </span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   f. Click on the Submit button to save your work.</span></p><p></p><p><img   alt="x.display br advanced tab.png" class="image-10 jive-image" src="ec265106dbd4d304b322f4621f961925.iix" style="height: 269px; width: 620px; display: block; margin-left: auto; margin-right: auto;"/></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">We are done!   Now let's test our new BR!</span></p><p></p><p></p><p><span style="font-family: inherit; font-style: inherit; color: #666666; line-height: 1.5em; font-size: 18.6667px;"><strong>Lab 1.2 — Testing the Business Rule</strong></span></p><p><span style="font-size: 18.6667px; font-style: inherit; font-family: inherit; font-weight: inherit;"><strong> </strong></span></p><p><span style="font-size: 12pt; line-height: 1.5em;"><strong>NOTE</strong>: For more information on impersonating a user see this wiki <a title="ki.servicenow.com/index.php?title=Impersonating_a_User" href="http://wiki.servicenow.com/index.php?title=Impersonating_a_User">article</a> which is a bit dated, but conveys the idea.<br/></span></p><p><span style="font-size: 12pt; line-height: 1.5em;"> </span></p><p><span style="font-size: 12pt; line-height: 1.5em;">1. Navigate to Incident -&gt; Open.   This will display a list view of open Incidents.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"> <span style="font-size: 16px;">       </span>a. Edit the description field of two or three of these to include the word "widget", or "wire".   These will be picked up by our new BR.</span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">2. Navigate to User Administration -&gt; Roles.   The display view of roles will appear.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   a. Filter for the Itil role</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   b. Click on the Itil role</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   c. Click on the Users tab</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   d. Observe a user who is not in your Widget Analyst group.</span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">3. Impersonate one of the users in your Widget Analyst group and test for access.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">       </span>a. Click on the impersonate button.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   b. Pick your user.</span><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><br/></span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><img   alt="x.impersonate allowed user.png" class="image-5 jive-image" src="d7577fb9dbdc9b048c8ef4621f96192e.iix" style="height: auto; display: block; margin-left: auto; margin-right: auto;"/><br/></span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   c. Navigate to Incident -&gt; Open</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   d. If the Short Description field is not visible on the list view then personalize your list view to add it.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">   <span style="font-size: 16px;">   </span>e. Filter on all records with the words "widget", or "wire".</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"> <span style="font-size: 16px;">       </span>f. Expected result: You should see these records in the list view.</span></p><p></p><p><img   alt="x.user in group.png" class="image-7 jive-image" src="d3687c8adbdc57049c9ffb651f961943.iix" style="height: 190px; width: 620px; display: block; margin-left: auto; margin-right: auto;"/></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">3. Impersonate one of the Itil users not in your Widget Analyst group and test for access.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>     a. Click on the impersonate button.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">         </span>b. Pick your user.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">         </span>c. Navigate to Incident -&gt; Open</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">   <span style="font-size: 16px;">     </span>d. Filter on all records with the words "widget", or "wire".</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">         </span>e. Expected result: No records should be displayed.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"> </span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><img   alt="x.user not in group.png" class="jive-image image-8" src="7595d0c2db189fc068c1fb651f961974.iix" style="height: 214px; width: 620px; display: block; margin-left: auto; margin-right: auto;"/><br/></span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">4. Change back to the Administrator and test for access.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>     a. Click on the impersonate button.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>     b. Pick the Administrator user.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">         </span>c. Navigate to Incident -&gt; Open</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>     d. Filter on all records with the words "widget", or "wire".</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>     e. Expected result: You should see these records in the list view.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"> </span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><img   alt="x.admin user.png" class="image-9 jive-image" src="2a067bb5dbd05704ed6af3231f9619d0.iix" style="height: 189px; width: 620px; display: block; margin-left: auto; margin-right: auto;"/><br/></span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">And our testing is completed!   Wigit-Inators is ecstatic over the new functionality you have provided!   :-)<br/></span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">As you can see the user without access will not even be aware that records are being filtered.   There is absolutely no indication on the list view.   I really like that feature of Query BRs!</span></p><p></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">BTW, with a little thought you could refactor the BR script to be the following:</span></p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code jive_text_macro _jivemacro_uid_14453483870494748" data-renderedposition="6055.72412109375_7.997159004211426_1192_216" jivemacro_uid="_14453483870494748"><p>function onBefore(current, previous) {</p><p><span style="font-size: 13.3333px;">   </span>   // Look for these words in the short descript and use it as a filter</p><p><span style="font-size: 13.3333px;">   </span>   // This script adds to the overall list view query that is used to display</p><p><span style="font-size: 13.3333px;">   </span> // the list view</p><p><span style="font-size: 13.3333px;">   </span>   if (!gs.hasRole("widget_analyst") &amp;&amp; !gs.hasRole("admin")) {</p><p>   <span style="font-size: 13.3333px;">   <span style="font-size: 13.3333px;">   <span style="font-size: 13.3333px;">   <span style="font-size: 13.3333px;">   </span></span></span></span>var incidentExclusion = current.addQuery('short_description', 'DOES NOT CONTAIN', 'widget')</p><p>   <span style="font-size: 13.3333px;">   <span style="font-size: 13.3333px;">   </span></span>   <span style="font-size: 13.3333px;">   <span style="font-size: 13.3333px;">   <span style="font-size: 13.3333px;">   </span></span></span>.addQuery('short_description', 'DOES NOT CONTAIN', 'wire');</p><p><span style="font-size: 13.3333px;">   </span>   }</p><p>}</p>       </pre><p></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">I will leave you to do the testing!   :-)</span></p><p></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Steven Bell</span></p><p></p><p><span style="color: #800080; font-family: arial, sans-serif; font-size: 16px; font-weight: bold;">If you find this article helps you, don't forget to log in and "like" it!   </span></p><p><span style="color: #800080; font-family: arial, sans-serif; font-size: 16px; font-weight: bold;"> </span></p><p><span style="color: #800080; font-family: arial, sans-serif; font-size: 16px; font-weight: bold;">Also, if you are not already, I would like to encourage you to become a member of our blog!</span></p>