---
title: "Community Code Snippets  Creating Your Own AD Server"
date: 2015-10-27T18:43:18.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=c77ce2e1dbd0dbc01dcaf3231f96195a"
---
<p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">I did this for myself some time ago, and thought I would pass along the steps I used. Here I will detail how I created my own real (sic. non-virtual) server device. </span></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">I used an older computer case I had sitting around collecting dust, and re-purposed it. I obtained a Microsoft 2008 Server Enterprise license (via <a title="tps//www.visualstudio.com/products/how-to-buy-vs" href="http://https//www.visualstudio.com/products/how-to-buy-vs">MSDN</a> - This can be SIGNIFICANTLY cheaper than buying just the operating system).   Fortunately, I had all of the needed equipment and software on-hand (I only tricked it out a bit with a couple of LED case fans).</span></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"><span style="font-size: 12pt;"><strong>Some assumptions:</strong></span></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px; padding-left: 30px;"><span style="font-size: 12pt;">1. You know computer hardware and how to install and configure it.</span></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px; padding-left: 30px;"><span style="line-height: 1.5; font-size: 12pt;">2. You know how to create a workflow.</span></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"><span style="font-size: 12pt;"><strong>Design:</strong></span></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"></p><ol style="list-style-type: lower-alpha;"><ol><li><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">Build server.</span></li><li><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">Install operating system.</span></li><li><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">Install Fuji Mid Server, and configure to point at the personal instance.</span></li><li><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">Install the Orchestration plug-in on your personal instance.</span></li><li><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">Install Active Directory services.</span></li><li><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt; line-height: 1.5;">Create Domain Admin: </span><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt; line-height: 1.5;">Create AD credentials with new Domain Admin UserID and Password.</span></li></ol></ol><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;"><strong>Implementation:</strong></span></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">1. Server (most any medium sized box should work - 4+ Gb of RAM, 100Gb disk minimum).   My configuration:</span></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px; padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><strong>Motherboard</strong>: Gigabyte GA-MA69VM-S2 (on-board VGA and 100 mbs ethernet).   <a title="tp//www.gigabyte.com/products/product-page.aspx?pid=2500#ov" href="http://http//www.gigabyte.com/products/product-page.aspx?pid=2500#ov">link</a>                       </span><br/><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><strong>CPU</strong>: AMD Sempron 3600+ (old 64 bit single-core, again, lying around collecting dust).   <a title="w.cpu-world.com/CPUs/K8/AMD-Sempron%2064%203600%2B%20-%20SDA3600IAA3CN%20(SDA3600CNBOX).html" href="http://www.cpu-world.com/CPUs/K8/AMD-Sempron%2064%203600%2B%20-%20SDA3600IAA3CN%20(SDA3600CNBOX).html">link</a>                       </span><br/><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><strong>RAM</strong>: 6 Gb (667 DIMM 2x2, 2x1.   All I had lying around.   Have you priced this lately???   wow!)</span><br/><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><strong>Harddrive</strong>: 100 Gb (an old unused drive sitting around)</span><br/><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><strong>Operating System</strong>: Windows Server 2008 Enterprise (standard should work fine). </span></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px; padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">I also downloaded all patches and updates including .Net 4.5.   <a title="w.newegg.com/Product/Product.aspx?Item=N82E16832416834&cm_re=microsoft_2008_server_standard-_-32-416-834-_-Product" href="http://www.newegg.com/Product/Product.aspx?Item=N82E16832416834&amp;cm_re=microsoft_2008_server_standard-_-32-416-834-_-Product">link</a> &lt;-- Just one vendor; you might look around.</span><br/><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">                       </span><br/><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">Old DVD drive sitting around.</span></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px; padding-left: 30px;"><br/><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">Powersupply: 500W.</span></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px; padding-left: 30px;"><br/><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">2x new spiffy red-LED case fans.   :-)   <a title="tp//www.amazon.com/4-LED-Light-Computer-Clear-Cooling/dp/B00QLD1JTQ/ref=sr_1_2?s=pc&ie=UTF8&qid=1432677310&sr=1-2&keywords=red+led+case+fans" href="http://http//www.amazon.com/4-LED-Light-Computer-Clear-Cooling/dp/B00QLD1JTQ/ref=sr_1_2?s=pc&amp;ie=UTF8&amp;qid=1432677310&amp;sr=1-2&amp;keywords=red+led+case+fans">link</a></span><br/><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">                                                 </span><br/><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">Dusty old Asus case.</span></p><p style="padding-left: 30px;"></p><p style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><strong>NOTE</strong>: Did a lot of vacuuming!   Everything had been sitting in a corner after all!</span></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px; padding-left: 30px;"></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px; padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">a. Assembled the hardware.   Validated that everything was working right.   Spent some time poring over documentation to make sure I didn't need to make any BIOS updates or had any hardware incompatibilities.</span></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px; padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">b. Installed the operating system.   This was actually pretty straightforward.   <span style="font-family: arial, helvetica, sans-serif; font-size: 16px;">   </span><a title="tps//technet.microsoft.com/en-us/library/dd379511(v=ws.10).aspx" href="http://https//technet.microsoft.com/en-us/library/dd379511(v=ws.10).aspx" style="font-family: arial, helvetica, sans-serif; font-size: 16px;">link</a></span></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px; padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">c. Downloaded and installed the patches and updates (this took quite a bit of time).</span></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px; padding-left: 30px;"></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px; padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">Totally bare bones!   Here is what it looked like when I had finished.   Those fans really made it look awesome!</span></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px; text-align: center;"><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><img   alt="steve_server.jpg" class="image-1 jive-image" src="8e556f71dbd41704ed6af3231f961906.iix" style="height: auto;"/></span></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">3. ServiceNow Installation:</span></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px; padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">a. Installed the Fuji MIDServer and configured it to point to my personal instance.   <a title="tps//www.cloudsherpas.com/partner-servicenow/servicenow-discovery-101-setting-local-mid-server/" href="http://https//www.cloudsherpas.com/partner-servicenow/servicenow-discovery-101-setting-local-mid-server/">link</a></span><br/><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">b. Installed Discovery and Orchestration plug-ins on my personal instance.   <a title="" _jive_internal="true" href="/groups/servicenow-user-group-us-tx-north-texas/blog/2015/09/01/community-code-snippets--requesting-a-plugin-for-your-personal-instance">link</a></span></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px; padding-left: 30px;"></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">4. Followed the following article in setting up my Active Directory services:   <a title="tp//www.howtogeek.com/99323/installing-active-directory-on-server-2008-r2/" href="http://http//www.howtogeek.com/99323/installing-active-directory-on-server-2008-r2/">link</a></span></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">           </span></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">5. Created a Domain Admin account that would provide the credentials for my personal instance to access the AD server.   <a title="tp//download.swsoft.com/virtuozzo/virtuozzo4.0/docs/en/win/VzWindowsClustering/21394.htm" href="http://http//download.swsoft.com/virtuozzo/virtuozzo4.0/docs/en/win/VzWindowsClustering/21394.htm">link</a></span></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">And that is all to get things up and running.</span></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">6. The final step is to create a quick-and-dirty test Orchestration workflow:</span></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">           a. Go to the AD services and create a new user. I used myself.   <a title="tps//technet.microsoft.com/en-us/library/cc784390(v=ws.10).aspx" href="http://https//technet.microsoft.com/en-us/library/cc784390(v=ws.10).aspx">link</a></span><br/><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">           b. Go to your personal instance. </span></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"><br/><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">                       1. Create a new Workflow project.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">                                   i.     <strong>Name</strong>: AD Server Test</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">                                   ii.   <strong>Table</strong>: Global</span></p><p></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">                       2. Add a Query AD activity.</span><br/><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">                                   i.     <strong>Name</strong>: Check Local AD Server</span><br/><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">                                   ii.   <strong>Domain Controller</strong>: the local IP of your AD Server (or 127.0.0.1)</span><br/><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">                                   iii. <strong>Search filter</strong>: (givenName=Steven) or the first name of your new user.</span></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"><span style="color: #000000; font-size: 12pt; font-family: arial, helvetica, sans-serif;">                                   iv. Save your work.</span></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"><span style="font-size: 12pt;"><img class="jive-image" height="422" src="https://csbasecamp.service-now.com/sys_attachment.do?sys_id=17a11f8555d40600bbb1ceb319668c6a" style="width: 741px; height: 422.14px; display: block; margin-left: auto; margin-right: auto;" width="741"/></span></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px; padding-left: 30px;"><br/><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">3. Run the workflow</span></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px; padding-left: 30px;"></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"><img  alt="7.Successful Run.JPG" class="image-2 jive-image" src="e697c10adb541b04ed6af3231f9619a5.iix" style="width: 620px; height: 386px; display: block; margin-left: auto; margin-right: auto;"/></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px; padding-left: 30px;"><br/><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">4. After the workflow completes go to Orchestration &gt; ECC Queue and look for an input entry with the name: Windows - Powershell (nodes: 3) with the source of your server's local IP.</span></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px; padding-left: 60px;"><br/><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">i. This title indicates that there was a successful run.</span><br/><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">ii. Edit up the ECC Queue record and bring up the XML. You should see the query return with your user and all additional information.</span></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"><img  alt="8.AD Return.JPG" class="image-3 jive-image" src="62572c86db9457049c9ffb651f961994.iix" style="width: 620px; height: 384px; display: block; margin-left: auto; margin-right: auto;"/></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">And that is all there is to it!   :-)</span></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"></p><p style="font-family: arial, sans-serif; color: #666666;"><span style="font-weight: inherit; font-style: inherit; font-family: arial, helvetica, sans-serif; font-size: 12pt;">Steven Bell</span></p><p style="font-family: arial, sans-serif; color: #666666;"></p><p></p><p style="font-family: arial, sans-serif; color: #666666;"><span style="font-weight: bold; font-style: inherit; font-size: 12pt; color: #800080;">If you find this article helps you, don't forget to log in and "like" it! </span></p><p style="font-family: arial, sans-serif; color: #666666;"></p><p style="font-family: arial, sans-serif; color: #666666;"><span style="font-weight: bold; font-style: inherit; font-size: 12pt; color: #800080;">Also, if you are not already, I would like to encourage you to become a member of our blog!</span></p><p style="color: #000000; font-family: Arial, Verdana, Helvetica, sans-serif; font-size: 13.3333px;"><br/><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><br/></span></p>