---
title: "Removing duplicate icons in the Mobile UI"
date: 2015-09-22T23:36:48.000Z
authors: ["april.mcgehee"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=5ded2ee9dbd0dbc01dcaf3231f96196c"
---
<p>Seeing double? Double mobile icons that is. Users on a Eureka or Fuji release may be experiencing <a title="i.service-now.com/kb_view.do?sysparm_article=KB0546754" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0546754">duplicate icons</a> in their ServiceNow instances on mob<span style="color: #575757;">ile. </span><span style="color: #575757;">Icons such as Help, Service Catalog, My Incidents, Contacts, Follow-up, and High Priority, may appear more than once when you are in the mobile UI.</span> The issue is caused by the unintentional creation of duplicate records on the following tables:</p><ul style="list-style-type: disc;"><li>sys_ui_home_favorite table</li><li>sys_ui_home_section table</li><li>label records</li></ul><p></p><p><img   alt="Duplicate icons.jpg" class="image-0 jive-image" src="d0919906db581b04ed6af3231f961982.iix" style="height: 322px; width: 620px; display: block; margin-left: auto; margin-right: auto;"/></p><p>When users are removed the records are not getting cleaned up so duplicates are generated in the system.</p><p>You may experience upwards of 1,000 duplicate icons if things get messy. Now, that is a sight for sore eyes. Well I've got two troubleshooting paths that will help you remove the home favorite records, home section records, and label records.</p><p></p><h3>To revert your icons to their unique buttons:</h3><p>Delete the sys_ui_home_favorite records:</p><ol><li>Navigate to <strong>System Mobile UI &gt; Home Page Favorites</strong>.</li><li>Filter the list for records where the <strong>User</strong> field matches the affected user. The filtered list shows the user's favorites. There may be multiple copies of each favorite.</li><li>Delete the extra records.</li></ol><p>Delete the sys_ui_home_section records:</p><ol><li>Navigate to <strong>System Mobile UI &gt; Home Page Sections</strong>.</li><li>Filter the list for records where the <strong>User</strong> field matches the affected user. The filtered list shows the user's sections. There may be multiple copies of each section.</li><li>Delete the extra records.</li></ol><p>Delete the label records:</p><ol><li>Navigate to <strong>System Definition &gt; Tags</strong>. (Tags were originally called labels. While the terminology has changed, these records are still stored on the "label" table).</li><li>Filter the list for records where the <strong>Owner</strong> field matches the affected user. The filtered list shows the user's tags. There may be multiple copies of each tag.</li><li>Delete the extra records.</li></ol><p></p><p>This step can also be done by simply running a script in the <strong>Scripts- Background</strong>.</p><pre __default_attr="plain" __jive_macro_name="code" class="_jivemacro_uid_14430434564007188 jive_text_macro jive_macro_code" jivemacro_uid="_14430434564007188">
<p class="p1">(function() {</p>
<p class="p1">deleteDuplicates('sys_ui_home_section', ['user', 'table', 'label']);<span class="s1"><br/> </span>deleteDuplicates('sys_ui_home_favorite', ['user', 'table', 'label', 'icon']);<span class="s1"><br/> </span>deleteDuplicates('label', ['owner', 'name', 'short_description', 'background_color', 'color', 'icon']);</p>
<p class="p1">// table :: string, fields :: [string]<span class="s1"><br/> </span>function deleteDuplicates(table, fields) {<span class="s1"><br/> </span>var current = new GlideRecord(table),<span class="s1"><br/> </span>prior = new GlideRecord(table);</p>
<p class="p1">// ordering will not work on records created by snc hop access due to missing sys_user records<span class="s1"><br/> </span>current.addQuery('sys_created_by', 'DOES NOT CONTAIN', '@snc');<span class="s1"><br/> </span>prior.addQuery('sys_created_by', 'DOES NOT CONTAIN', '@snc');</p>
<p class="p1">// ditch if there are no fields<span class="s1"><br/> </span>if(fields.length &lt; 1) {<span class="s1"><br/> </span>gs.log('deleteDuplicates requires at least one field');<span class="s1"><br/> </span>return false;<span class="s1"><br/> </span>}</p>
<p class="p2"></p>
<p class="p1">// order by array of fields passed in<span class="s1"><br/> </span>for(i = 0; i &lt; fields.length; i++) {<span class="s1"><br/> </span>current.orderBy(fields[i]);<span class="s1"><br/> </span>prior.orderBy(fields[i]);<span class="s1"><br/> </span>}</p>
<ol class="ol1">
<li>current.query();<span class="s1"><br/> </span>prior.query();</li>
</ol>
<p>// bail if the query returns nothing<span class="s1"><br/> </span>if(!current.hasNext()) {<span class="s1"><br/> </span>gs.log('no records returned');<span class="s1"><br/> </span>return true;<span class="s1"><br/> </span>}</p>
<p class="p1">// current will always be one ahead of prior<span class="s1"><br/> </span>current._next();</p>
<p class="p1">// loop through...<span class="s1"><br/> </span>var dups = 0;<span class="s1"><br/> </span>while(current._next() &amp;&amp; prior._next()) {<span class="s1"><br/> </span>var i;<span class="s1"><br/> </span>// ...and compare adjacent records<span class="s1"><br/> </span>for(i = 0; i &lt; fields.length; i++) {<span class="s1"><br/> </span>if( current.getValue(fields[i]) != prior.getValue(fields[i]) ) break;<span class="s1"><br/> </span>}<span class="s1"><br/> </span>if(i == fields.length) {<span class="s1"><br/> </span>//gs.log('duplicate detected: current[' + current.sys_id + '] prior[' + prior.sys_id + ']');<span class="s1"><br/> </span>//gs.log('deleting [' + prior.sys_id + ']');<span class="s1"><br/> </span>prior.deleteRecord();<span class="s1"><br/> </span>dups++;<span class="s1"><br/> </span>}<span class="s1"><br/> </span>}</p>
<ol class="ol1">
<li>gs.log("Removed " + dups + " duplicates from " + table);</li>
</ol>
<p class="p1">return true;<span class="s1"><br/> </span>}</p>
<p class="p1"><span class="s1"><br/> </span>})();</p>








</pre><p style="margin-bottom: 6.75pt; background: white;"></p><p></p><p>This business rule can also be loaded into the affected instance as an XML file to prevent a re-occurrence of the issue until a fix is released. You can download the file from <a title="i.service-now.com/kb_view.do?sysparm_article=KB0546754" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0546754">here</a>.</p><p></p><h3>To <a href="http://wiki.servicenow.com/index.php?title=Exporting_and_Importing_XML_Files#Import_Records_as_XML_Data" title="">Import records as XML data:</a></h3><ol><li>Sign in as an admin to the instance that should receive the data.</li><li>Navigate to any list in the system.<dl style="margin-bottom: 0.5em; margin-top: 0.2em;"><dd style="margin-bottom: 0.1em; margin-left: 1.6em;">Any list can be used because the XML file contains the destination table name for the records.</dd></dl></li><li>Right-click the list header and select <strong>Import XML</strong>.</li><li>In the import screen, click <strong>Choose File </strong>and select the previously exported XML file.<p><img   alt="Import.png" class="image-0 jive-image" src="0bfde44edb549304b322f4621f961977.iix" style="height: auto;"/></p></li><li>Click <strong>Upload</strong>.</li></ol><p></p><p>Now that you've fixed your duplicate icons you can cancel that eye appointment use the mobile app with ease!</p>