---
title: "Service Level Agreements Business Hours Schedules  Time Zones"
date: 2015-12-17T03:30:51.000Z
authors: ["edwajs"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=e30e6e2ddbd0dbc01dcaf3231f961920"
---
<p>A Service Level Agreement (SLA) definition may need to apply only during the business hours of an associated group or organization.   To define business hours, you need a schedule with entries for the working hours and exceptions for holidays. Since 8AM to 5PM in London is going to be 3AM to 12PM in New York, you also need the relevant time zone to apply to the calculations.</p><p></p><p>If the definition does not have a schedule, then only actual hours need to be calculated, and it is normal date arithmetic, i.e., you are not needing to subtract the time outside the schedule.   If you create a 24x7 schedule and apply it to your SLA, the business values will be calculated but they will be the same as the actual values and it is wasted work.</p><p></p><h2>Defining the Schedule and Time Zone</h2><p>You specify the schedule and time zone to use with the following two properties:</p><ul><li>com.snc.sla.schedule.source</li><li>com.snc.sla.timezone.source</li></ul><p></p><p>These properties are available under the SLA Properties module in the Service Level Management application.   In Geneva and newer, this has been changed to Properties &gt; SLA Engine.</p><p><img   alt="define schedule.jpg" class="image-20 jive-image" src="f825cd0adb10d344e9737a9e0f9619dc.iix" style="width: 620px; height: 197px; display: block; margin-left: auto; margin-right: auto;"/></p><p>For the time zone, there are five choices provided in the base system; and these are probably sufficient for the majority of customers:</p><p><img   alt="time zone sla.jpg" class="image-21 jive-image" src="8954ec4adb505f048c8ef4621f96198d.iix" style="width: 620px; height: 226px; display: block; margin-left: auto; margin-right: auto;"/></p><p>For the schedule, there are only two choices provided in the base system:</p><p><img   alt="sla definition schedule.jpg" class="image-22 jive-image" src="a2434c0edb985fc03eb27a9e0f9619f7.iix" style="width: 620px; height: 131px; display: block; margin-left: auto; margin-right: auto;"/></p><p></p><p>Based on these properties, when a new SLA data record (task_sla) is created, the corresponding schedule and time zone are applied to the calculations.   The schedule reference and time zone are stored in the SLA data record and used for future updates.</p><p></p><p>There are two drawbacks:</p><ol><li>The number of possible sources of the schedule is limited in the base system.</li><li>You cannot override the schedule and time zone with a before-insert-update business rule on task_sla, because the initial set of calculations occurs before the business rule can override the values.</li></ol><p></p><p>The reason for the second drawback is because the SLASchedule and SLATimezone script includes are called in the early stages when the SLA Engine creates a new SLA data record.</p><p>These script includes do the processing of the system properties and fetch the specified schedule and time zone.</p><p></p><h4>Changing the Schedule and Time Zone Sources for Service Level Agreements</h4><p>There are two steps involved in providing additional choices for either the schedule or the time zone:</p><ol><li>Edit the Choices field of the desired property to provide any additional label/value pairs you want to add.</li><li>Edit the SLASchedule or SLATimezone script include, as appropriate, so it supports your additional choices.</li></ol><p></p><p>The important thing to remember about editing either SLASchedule or SLATimezone is to make sure the function is returning the expected value.   SLASchedule returns a reference value (sys_id) to a valid existing cmn_schedule record in the instance.   SLATimezone returns a string which needs to be a valid <a title="n.wikipedia.org/wiki/List_of_tz_database_time_zones" href="https://en.wikipedia.org/wiki/List_of_tz_database_time_zones">Olson time zone.</a></p><p></p><h2>Example of Changing Properties, SLASchedule, and SLATimezone</h2><p>Business Requirements:</p><ul><li>Add a schedule field and a time zone field to the task table.</li><li>Set the schedule and the time zone via a business rule.</li><li>Use the new task schedule and time zone fields in SLA processing.</li></ul><p></p><h4>Add a schedule field and a time zone field to the task table</h4><p>To add these fields to the task table:</p><ol><ol><li>Navigate to task.do?sys_id=-1</li><li>On the task form, use Configure &gt; Form Layout to add the two new fields.<p><img   alt="schedule field.jpg" class="image-18 jive-image" src="960404cedbd85fc068c1fb651f9619ad.iix" style="width: 620px; height: 256px; display: block; margin-left: auto; margin-right: auto;"/></p><p><img   alt="create new field.jpg" class="image-19 jive-image" src="64e5ebf5dbd41704ed6af3231f96190b.iix" style="width: 620px; height: 194px; display: block; margin-left: auto; margin-right: auto;"/></p></li><li>For the new u_sla_time field, configure the sys_dictionary entry to use the choices for time_zone from the sys_user table.<p><img   alt="configure dictionary.jpg" class="image-23 jive-image" src="2050eb75db1c9f04e9737a9e0f9619dc.iix" style="width: 620px; height: 377px; display: block; margin-left: auto; margin-right: auto;"/></p></li></ol></ol><p><span style="line-height: 1.5;"><strong>Set the schedule and the time zone via a business rule</strong></span></p><p>For the purposes of this example, we want to use the schedule and time zone of the task's assigned_to user for our SLA calculations.   All we need is a simple before insert and update business rule on task where, if assigned_to is not empty, we set the new u_sla_schedule and u_sla_timezone fields to the dot-walked values from the assigned_to reference.</p><p><img   alt="SLA+Blog+07.jpg" class="image-24 jive-image" src="177bc586dbd497049c9ffb651f9619a3.iix" style="width: 620px; height: 312px; display: block; margin-left: auto; margin-right: auto;"/></p><p><img   alt="SLA+Blog+07a.jpg" class="image-25 jive-image" src="435be48adbd857041dcaf3231f9619c4.iix" style="width: 620px; height: 132px; display: block; margin-left: auto; margin-right: auto;"/></p><p></p><p><strong>Use the new task schedule and time zone fields in SLA processing</strong></p><p>Here is the changed com.snc.sla.schedule.source system property:</p><p><img   alt="task sla.jpg" class="image-26 jive-image" src="11fac8cadb109fc068c1fb651f96195e.iix" style="width: 620px; height: 214px; display: block; margin-left: auto; margin-right: auto;"/></p><p><img   alt="SLA+Blog+08a.jpg" class="image-27 jive-image" src="00b6a3b1dbd41fc03eb27a9e0f9619eb.iix" style="height: auto; display: block; margin-left: auto; margin-right: auto;"/></p><p></p><p>Here is the changed com.snc.sla.timezone.source system property:</p><p><img   alt="source system property.jpg" class="image-28 jive-image" src="748acd4adb90d304b322f4621f961983.iix" style="width: 620px; height: 220px; display: block; margin-left: auto; margin-right: auto;"/></p><p><img   alt="timezone sla.jpg" class="image-29 jive-image" src="cb97e006db14dfc068c1fb651f9619c3.iix" style="height: auto; display: block; margin-left: auto; margin-right: auto;"/></p><p>With the properties updated, the final steps are to update the SLASchedule and SLATimezone script includes so they support the new properties.</p><p>First SLASchedule:</p><p><img   alt="SLA+Blog+10.jpg" class="image-30 jive-image" src="a150a37ddbdc53049c9ffb651f9619c5.iix" style="width: 620px; height: 276px; display: block; margin-left: auto; margin-right: auto;"/></p><p><span style="line-height: 1.5;">Then SLATimezone: </span></p><p><img   alt="SLA+Blog+11.jpg" class="image-31 jive-image" src="777b018adbd49f048c8ef4621f961923.iix" style="width: 620px; height: 354px; display: block; margin-left: auto; margin-right: auto;"/></p><p>Now, when a new task_sla record is created, the schedule and time zone applied are going to be from the task record; however, the values in the task record are pulled from the assigned_to reference.</p><p></p><p>In this case, I have populated a sys_user record with a time zone of US/Eastern and the schedule 8 to 5 weekdays excluding holidays.   Here are the results of creating a new priority 1 incident assigned to that user:</p><p><img   alt="SLA+Blog+12.jpg" class="image-32 jive-image" src="fb5b680adbd09344e9737a9e0f96193c.iix" style="width: 620px; height: 233px; display: block; margin-left: auto; margin-right: auto;"/></p><p><img   alt="SLA+Blog+12a.jpg" class="image-33 jive-image" src="0afa000edb109fc068c1fb651f961960.iix" style="width: 620px; height: 169px; display: block; margin-left: auto; margin-right: auto;"/></p><p>In summary, Service Level Agreements will always calculate Actual values of based on no schedules. Once you apply a schedule and a time zone for a Service Level Agreement, you need to define Business hours so business values can also be calculated.</p><p></p><p>The base system provides the capability of choosing between five different sources for the time zone and two different sources for the schedule to apply to the SLA calculations. If you want to override the base capabilities, the example illustrates the required changes to the system properties and script includes. Finally, if you have business requirements to have different time zone and schedule behavior for different task types, you can accomplish this by following the example, but implementing different business rule logic for each different task type.</p>