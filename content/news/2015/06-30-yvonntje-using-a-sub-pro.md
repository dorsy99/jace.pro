---
title: "Using a Subproduction instance as a guideline for upgrading a Prod instance to Fuji"
date: 2015-06-29T06:53:01.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=0a5e6aaddbd0dbc01dcaf3231f9619d7"
---
<p><a title="i.service-now.com/kb_view.do?sysparm_article=KB0546127" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0546127">Upgrading a Production instance to Fuji </a>may take unexpectedly long when you use a sub-production upgrade time as a guideline. <span style="font-size: 10pt; line-height: 1.5em;">The reason it is taking such a long time is because in clones to sub-production, by default, one or more big tables are excluded. The attachments tables and the logs table are just two examples of large tables that are excluded when cloning during an upgrade. </span><span style="font-size: 10pt; line-height: 1.5em;">Often this is done simply to get the clone to work, but if the upgrade tries to alter that table, the duration will be quite different from what was seen in the test.</span></p><p></p><p>In addition,<a title="" _jive_internal="true" href="/community?id=community_blog&sys_id=40dde2e9dbd0dbc01dcaf3231f9619a4"> online alters</a> of large tables require a lot of temporary space on the database instance, which may also come as a surprise. <span style="font-size: 10pt; line-height: 1.5em;">In the logs you will see snippets similar to this one:</span></p><table border="1"><tbody><tr><td style="text-align: center;">2015-05-03 16:11:54 (465) worker.6 worker.6 Online alter: CREATE TABLE tmp_s18935572491 like sys_email0031</td></tr></tbody></table><p></p><h3>Further symptoms are a heavy write to:</h3><ul><li><span style="font-size: 10pt; line-height: 1.5em;">sys_import_import_row </span></li><li>sys_import_import_row_error</li></ul><p></p><p style="text-align: center;"><em>NOTE: This might even cause running out of disk space for on premise instances due to unexpected size of the creation of the temporary tables</em></p><p></p><h3><span style="color: #575757;">To get a better idea of the time an upgrade will take you can do the following:</span></h3><ol><li>Upgrade an instance that is comparable to the Production instance (amount of data etc.) and upgrade.</li><li>Check the duration and the logs for log snippets regarding the online alters.</li><li>Use this upgrade time as an estimate for the Production upgrade and <a title="i.service-now.com/kb_view.do?sysparm_article=KB0535200" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0535200">keep an eye on the logs.</a></li></ol>