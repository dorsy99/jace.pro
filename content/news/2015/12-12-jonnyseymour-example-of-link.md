---
title: "Example of links with parameters that contains reserved characters"
date: 2015-12-12T01:57:27.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=ea1d62e5dbd0dbc01dcaf3231f96193a"
---
<p>The traditional URLs that work for most cases have reserved characters that throw a spanner in the works. Following <a __default_attr="37423" __jive_macro_name="user" class="jive_macro jive_macro_user" data-orig-content="Shahid" data-renderedposition="10.25_740.1500244140625_63_17" href="/community?id=community_user_profile&user=399fc22ddb181fc09c9ffb651f9619c9" modifiedtitle="true" title="Shahid">Shahid</a>'s blog about <a title="Getting your ServiceNow URLs right" __default_attr="4004" __jive_macro_name="blogpost" class="jive_macro jive_macro_blogpost" data-orig-content="Getting your ServiceNow URLs right" data-renderedposition="31.25_8_245_17" href="/community?id=community_blog&sys_id=710daaa5dbd0dbc01dcaf3231f9619e8">Getting your ServiceNow URLs right</a>, here are my examples to show how to make URLs that have reserved characters work fine.</p><p></p><p><span>Let's talk about redirection links and the parameters passed to them.</span></p><p></p><p><span><img   alt="jeroglifics.png" class="image-6 jive-image" height="170" src="2d9c15c6db1c13043eb27a9e0f961977.iix" style="width: 140px; height: 170.435px; display: block; margin-left: auto; margin-right: auto;" width="140"/></span></p><p></p><h2><span>Redirection links</span></h2><p><span>Direct links are the address to the target pages themselves (e.g. httÏ�s://&lt;instance&gt;<span style="font-family: 'Arial','sans-serif'; color: black;">.service-now.com</span><span style="font-family: 'Arial','sans-serif'; color: black;">/reviewurlparameters.do</span>). They are useful when the users are already logged in.<br/></span></p><p><span>They usually open without the usual left and top menus.</span></p><p></p><p><a title="n.wikipedia.org/wiki/URL_redirection" href="https://en.wikipedia.org/wiki/URL_redirection">Redirection pages</a> are called "navigational pages". They are forms created to direct users to the target landing pages (e.g httÏ�s://<span style="font-family: 'Arial','sans-serif'; color: black;">&lt;instance&gt;.service-now.com/nav_to.do<span>?uri=&lt;target page&gt;</span></span>). They can contain the target page which can include some parameters. Most links send to final users will be redirection links to maintain consistency whether the users are logged in or not. The most common navigation pages are: nav.do, navigator.do, navpage.do, nav_to.do and navigator_change.do. They usually open within the frame of ServiceNow left and top menus.</p><p></p><h3>Navigation pages need to remain public</h3><p>It is important to notice navigational pages need to remain <a title="ki.servicenow.com/index.php?title=Making_a_Page_Public#gsc.tab=0" href="http://wiki.servicenow.com/index.php?title=Making_a_Page_Public#gsc.tab=0">public pages.</a> You can ensure they stay public by checking that they are set to True on the sys_public table. This could be confusing because it creates the idea that they will give access to the target pages themselves. They don't. Even when the navigation pages are public, the system will correctly authenticate when reaching the target pages that are not set public. See the example below:</p><p><img   alt="infinite logout loop.jpg" class="image-1 jive-image" src="9eca3086db1c9344e9737a9e0f961941.iix" style="width: 620px; height: 227px; display: block; margin-left: auto; margin-right: auto;"/></p><p></p><p>Navigational pages are key when working with <a title="ki.servicenow.com/index.php?title=SAML_2.0_Web_Browser_SSO_Profile#Adding_Support_for_Deep_Linking" href="http://wiki.servicenow.com/index.php?title=SAML_2.0_Web_Browser_SSO_Profile#Adding_Support_for_Deep_Linking">SSO deep-linking</a>, <a title="ki.servicenow.com/index.php?title=Managing_Multiple_Service_Catalogs#Setting_URLs_For_Catalog_Modules" href="http://wiki.servicenow.com/index.php?title=Managing_Multiple_Service_Catalogs#Setting_URLs_For_Catalog_Modules">service catalog</a> and the infamous <a title="ki.servicenow.com/index.php?title=SAML_2.0_Web_Browser_SSO_Profile#3._Respond_with_an_SAMLResponse_and_RelayState&gsc.tab=0" href="http://wiki.servicenow.com/index.php?title=SAML_2.0_Web_Browser_SSO_Profile#3._Respond_with_an_SAMLResponse_and_RelayState&amp;gsc.tab=0">SAML RelayState </a>information. When SSO is enabled, multiple re-directions may happens.</p><pre __default_attr="warning" __jive_macro_name="alert" alert="warning" class="jive_text_macro jive_macro_alert" data-renderedposition="1004.933349609375_8_917_64"><p>If the navigation pages are not made public and SSO is enabled, when you click to logout, you would be asked to login immediately after. <a title="" _jive_internal="true" href="/community/service-automation-platform/authentication/blog/2015/11/10/why-links-on-public-pages-are-asking-for-sso-authentication">This is a logout loop.</a> Normally you should be redirected to a logout page. So keep navigation pages public.</p></pre><p></p><h2>Redirection link parameters</h2><p>We need the navigation pages to piggyback the target page information with the parameters encoded in a proper way.</p><p>Without the URL properly URI encoded, the final target page could lose or truncate some parameter and their values.</p><p>That could cause that form data get truncated or missing, or even opening the wrong page.</p><p>There is a trade between consistency and convenience.</p><pre __default_attr="info" __jive_macro_name="alert" alert="info" class="jive_text_macro jive_macro_alert" data-renderedposition="1231.933349609375_8_917_64"><p>Most URL works fine when the parameters do not contain reserved characters. However, if reserved characters like ?#[]@!$&amp;'()*+,;= $&amp;+,/:;="&lt;&gt; are present in the parameters data, please consider URL encoding them. </p></pre><p><a title="n.wikipedia.org/wiki/Percent-encoding" href="https://en.wikipedia.org/wiki/Percent-encoding">URL encoding</a> is a mechanism for encoding information in a Uniform Resource Identifier (URI) as is often used in the submission of HTML form data in HTTP requests.</p><p>Example: This is text "<span style="color: #e23d39;">._~:/?#[]@!,</span>" URL encoded looks like <span style="color: #e23d39;"><span style="color: #303030;">"</span>._~%3A/%3F%23%5B%5D%40!%2C<span style="color: #303030;">"</span></span>.</p><p></p><h3>Testing the parameters passed for direct and navigational links</h3><p>I have created the following <a title="ki.servicenow.com/index.php?title=Tutorial_4_Creating_a_Custom_Processor#gsc.tab=0" href="http://wiki.servicenow.com/index.php?title=Tutorial_4_Creating_a_Custom_Processor#gsc.tab=0">ServiceNow processor</a> to validate the parameters passed to the instance:</p><p></p><table border="1" cellpadding="0" cellspacing="0" style="margin-left: 12.5pt; border: 0; padding: 0 5.4pt 0 5.4pt;"><tbody><tr><td colspan="3" style="border: solid windowtext 1.0pt; background: #ffc000; padding: 0 5.4pt 0 5.4pt;" valign="top" width="407"><p style="margin-bottom: .0001pt;">Processor</p></td></tr><tr><td style="border: solid windowtext 1.0pt; border-top: 0; padding: 0 5.4pt 0 5.4pt;" valign="top" width="63"><p style="margin-bottom: .0001pt;">Name</p></td><td style="border-top: 0; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0 5.4pt 0 5.4pt;" valign="top" width="29"><p style="margin-bottom: .0001pt;">=</p></td><td style="border-top: 0; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0 5.4pt 0 5.4pt;" valign="top" width="315"><p style="margin-bottom: .0001pt;">reviewurlparameters</p></td></tr><tr><td style="border: solid windowtext 1.0pt; border-top: 0; padding: 0 5.4pt 0 5.4pt;" valign="top" width="63"><p style="margin-bottom: .0001pt;">Type</p></td><td style="border-top: 0; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0 5.4pt 0 5.4pt;" valign="top" width="29"><p style="margin-bottom: .0001pt;">=</p></td><td style="border-top: 0; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0 5.4pt 0 5.4pt;" valign="top" width="315"><p style="margin-bottom: .0001pt;">script</p></td></tr><tr><td style="border: solid windowtext 1.0pt; border-top: 0; padding: 0 5.4pt 0 5.4pt;" valign="top" width="63"><p style="margin-bottom: .0001pt;">Path</p></td><td style="border-top: 0; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0 5.4pt 0 5.4pt;" valign="top" width="29"><p style="margin-bottom: .0001pt;">=</p></td><td style="border-top: 0; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0 5.4pt 0 5.4pt;" valign="top" width="315"><p style="margin-bottom: .0001pt;">reviewurlparameters</p></td></tr><tr><td style="border: solid windowtext 1.0pt; border-top: 0; padding: 0 5.4pt 0 5.4pt;" valign="top" width="63"><p style="margin-bottom: .0001pt;">Active</p></td><td style="border-top: 0; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0 5.4pt 0 5.4pt;" valign="top" width="29"><p style="margin-bottom: .0001pt;">=</p></td><td style="border-top: 0; border-left: none; border-bottom: solid windowtext 1.0pt; border-right: solid windowtext 1.0pt; padding: 0 5.4pt 0 5.4pt;" valign="top" width="315"><p style="margin-bottom: .0001pt;">TRUE</p></td></tr></tbody></table><p></p><p>Script:</p><pre __default_attr="javascript" __jive_macro_name="code" class="_jivemacro_uid_14487215129725131 jive_macro_code jive_text_macro" data-renderedposition="1613.933349609375_8_917_288" jivemacro_uid="_14487215129725131"><p>// vstringtosend contains the final text to print</p><p>var vstringtosend = "----------PASSING PARAMETERS TESTER ---------\n" </p><p>       + print_parameters(g_request.getParameterNames());</p><p>g_processor.writeOutput("text/plain", vstringtosend);</p><p></p><p>// Function will walk on the parameters to create the final string</p><p>function print_parameters(v_pnames) {</p><p>       var vparam_string = "";</p><p>       while (v_pnames.hasMoreElements()) {</p><p>               var vkey = v_pnames.nextElement();</p><p>               // To allow triple URI encoding - decode data</p><p>               var vvalue = decodeURIComponent(g_request.getParameter(vkey));</p><p>               // To allow tripple URI encoding - decode data</p><p>               vkey = decodeURIComponent(vkey);</p><p>               vparam_string += vkey + " = " + vvalue + "\n";</p><p>       }</p><p>       return vparam_string;</p><p>}</p></pre><p></p><p>If have the following parameters to pass to the application:</p><p></p><table border="1" cellpadding="0" cellspacing="0" style="border: solid windowtext 1.0pt;" width="100%"><tbody><tr><td colspan="3" style="border: solid windowtext 1.0pt; background: #FFC000;" width="346"><p><strong>Parameters name/Value</strong></p></td></tr><tr><td style="border: solid windowtext 1.0pt;" width="44"><p>ParA</p></td><td style="border: solid windowtext 1.0pt;" width="17"><p>=</p></td><td style="border: solid windowtext 1.0pt;" width="284"><p>test1</p></td></tr><tr><td style="border: solid windowtext 1.0pt; background: #FBE4D5;" width="44"><p>A</p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5;" width="17"><p>=</p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5;" width="284"><p>This is text ._~:/?#[]@!$&amp;'()*+,;= $&amp;+,/:;=?@"&lt;&gt;#%{}|\^~[]` that could cause problems</p></td></tr><tr><td style="border: solid windowtext 1.0pt;" width="44"><p>ParB</p></td><td style="border: solid windowtext 1.0pt;" width="17"><p>=</p></td><td style="border: solid windowtext 1.0pt;" width="284"><p>test2</p></td></tr><tr><td style="border: solid windowtext 1.0pt; background: #FBE4D5;" width="44"><p>B</p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5;" width="17"><p>=</p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5;" width="284"><p>1234567879</p></td></tr></tbody></table><p></p><p>Then I prepared the links to send to the instance as follow:</p><p><a title="w.w3schools.com/code/tryit.asp?filename=FABZS6UAL9R2" href="http://www.w3schools.com/code/tryit.asp?filename=FABZS6UAL9R2">You could generate the final links here </a></p><p></p><table border="1" cellpadding="0" cellspacing="0" style="border: 1pt solid windowtext; width: 100%;"><tbody><tr><td style="border: solid windowtext 1.0pt; background: #FFC000;" valign="top" width="55"><p><span style="color: black; font-size: 8.5pt; font-family: Verdana;"><strong>Link</strong></span></p></td><td style="border: solid windowtext 1.0pt; background: #FFC000;" valign="top" width="253"><p><span style="color: black; font-size: 8.5pt; font-family: Verdana;"><strong>What is the link to the instance</strong></span></p></td></tr><tr><td style="border: solid windowtext 1.0pt;" valign="top" width="55"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">Direct URL</span></p></td><td style="border: solid windowtext 1.0pt;" valign="top" width="253"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">&lt;instance&gt;/reviewurlparameters.do?ParA=A&amp;ParB=B</span></p></td></tr><tr><td style="border: solid windowtext 1.0pt; background: #FBE4D5;" valign="top" width="55"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">Direct URL</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">when data contains reserved characters</span></p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5;" valign="top" width="253"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">&lt;instance&gt;/reviewurlparameters.do?ParA=urlencode(urlencode(A))+ &amp; + ParB= + urlencode(urlencode (B))</span></p></td></tr><tr><td style="border: solid windowtext 1.0pt;" valign="top" width="55"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">Redirection link</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">URL</span></p></td><td style="border: solid windowtext 1.0pt;" valign="top" width="253"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">&lt;instance&gt;/nav_to.do?uri=reviewurlparameters.do%3F + urlencode (ParA=) + urlencode (urlencode (A)) + urlencode(&amp;) + urlencode (ParB=) + urlencode (urlencode(B))</span></p></td></tr><tr><td style="border: solid windowtext 1.0pt; background: #FBE4D5;" valign="top" width="55"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">Redirection link</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">URL when data contains reserved characters</span></p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5;" valign="top" width="253"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">&lt;instance&gt;/nav_to.do?uri=reviewurlparameters.do%3F + urlencode (ParA=) + urlencode (urlencode (urlencode (A))) + urlencode (&amp;) + urlencode (ParB=) + urlencode (urlencode (urlencode (B)))</span></p></td></tr></tbody></table><p></p><p></p><p>The following are the results:</p><p></p><table border="1" cellpadding="0" cellspacing="0" style="border: 1pt solid windowtext; width: 100%;"><tbody><tr><td style="border: solid windowtext 1.0pt; background: #FFC000;" width="12%"><p><span style="color: black; font-size: 8.5pt; font-family: Verdana;"><strong>Link</strong></span></p></td><td style="border: solid windowtext 1.0pt; background: #FFC000;" width="20%"><p><span style="color: black; font-size: 8.5pt; font-family: Verdana;"><strong>Expected URL</strong></span></p></td><td style="border: solid windowtext 1.0pt; background: #FFC000;" width="41%"><p><span style="color: black; font-size: 8.5pt; font-family: Verdana;"><strong>Parameters passed to the example</strong></span></p></td><td style="border: solid windowtext 1.0pt; background: #FFC000;" width="24%"><p><span style="color: black; font-size: 8.5pt; font-family: Verdana;"><strong>Result</strong></span></p></td></tr><tr><td style="border: solid windowtext 1.0pt;" width="12%"><p><span style="color: black; font-size: 8.5pt; font-family: Verdana;"><strong>Direct URL</strong></span></p></td><td style="border: solid windowtext 1.0pt;" width="20%"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">ParA=A&amp;ParB=B</span></p></td><td style="border: solid windowtext 1.0pt;" width="41%"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">test1=This is text ._~:/?#[]@!$&amp;'()*+,;= $&amp;+,/:;=?</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">@"&lt;&gt;#%{}|\^~[]` that could cause</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">problems&amp;test2=1234567879</span></p></td><td style="border: solid windowtext 1.0pt;" width="24%"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;"><span style="color: #e23d39;">Data is truncated</span>*</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">Parameter test2 is missing</span></p></td></tr><tr><td style="border: solid windowtext 1.0pt; background: #FBE4D5;" width="12%"><p><span style="color: black; font-size: 8.5pt; font-family: Verdana;"><strong>Direct URL</strong></span></p><p><span style="color: black; font-size: 8.5pt; font-family: Verdana;"><strong>when data</strong></span></p><p><span style="color: black; font-size: 8.5pt; font-family: Verdana;"><strong>contains</strong></span></p><p><span style="color: black; font-size: 8.5pt; font-family: Verdana;"><strong>reserved</strong></span></p><p><span style="color: black; font-size: 8.5pt; font-family: Verdana;"><strong>characters</strong></span></p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5;" width="20%"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">ParA=</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">urlencode (urlencode(A))</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">&amp;</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">ParB=</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">urlencode(urlencode (B))</span></p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5;" width="41%"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">test1=This%2520is%2520text%2520._~%253A</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">%252F%253F%2523%255B%255D%2540!</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">%2524%2526%2527()*%252B%252C%253B</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">%253D%2520%2524%2526%252B%252C</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">%252F%253A%253B%253D%253F%2540</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">%2522%253C%253E%2523%2525%257B</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">%257D%257C%255C%255E~%255B%255D</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">%2560%2520that%2520could%2520cause</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">%2520problems&amp;test2=1234567879</span></p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5;" width="24%"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">It will increase the length of</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">the link but it will work fine</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">on all cases. URLdecode</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">is required for the data</span></p></td></tr><tr><td style="border: solid windowtext 1.0pt;" width="12%"><p><span style="color: black; font-size: 8.5pt; font-family: Verdana;"><strong>Redirection</strong></span></p><p><span style="color: black; font-size: 8.5pt; font-family: Verdana;"><strong>Link URL</strong></span></p></td><td style="border: solid windowtext 1.0pt;" width="20%"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">urlencode (ParA=)</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">urlencode (urlencode (A))</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">urlencode(&amp;)</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">urlencode (ParB=)</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">urlencode (urlencode(B))</span></p></td><td style="border: solid windowtext 1.0pt;" width="41%"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">test1%3DThis%20is%20text%20._~%3A/</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">%3F%23%5B%5D%40!%24%26%27()*%2B</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">%2C%3B%3D%20%24%26%2B%2C/</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">%3A%3B%3D%3F%40%22%3C%3E%23</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">%25%7B%7D%7C%5C%5E~%5B%5D%60</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">%20that%20could%20cause%20problems</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">%26test2%3D1234567879</span></p></td><td style="border: solid windowtext 1.0pt;" width="24%"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;"><span style="color: #e23d39;">Data is truncated</span>** and parameter test2 is missing</span></p></td></tr><tr><td style="border: solid windowtext 1.0pt; background: #FBE4D5;" width="12%"><p><span style="color: black; font-size: 8.5pt; font-family: Verdana;"><strong>Redirection</strong></span></p><p><span style="color: black; font-size: 8.5pt; font-family: Verdana;"><strong>Link URL</strong></span></p><p><span style="color: black; font-size: 8.5pt; font-family: Verdana;"><strong>when data</strong></span></p><p><span style="color: black; font-size: 8.5pt; font-family: Verdana;"><strong>contains</strong></span></p><p><span style="color: black; font-size: 8.5pt; font-family: Verdana;"><strong>reserved</strong></span></p><p><span style="color: black; font-size: 8.5pt; font-family: Verdana;"><strong>characters</strong></span></p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5;" width="20%"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">urlencode (ParA=)</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">urlencode (urlencode (urlencode (A)))</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">urlencode (&amp;)</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">urlencode (ParB=)</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">urlencode (urlencode (urlencode (B)))</span></p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5;" width="41%"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">test1%3DThis%252520is%252520text</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">%252520._~%25253A%25252F%25253F</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">%252523%25255B%25255D%252540!%252524</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">%252526%252527()*%25252B%25252C</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">%25253B%25253D%252520%252524%252526</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">%25252B%25252C%25252F%25253A%25253B</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">%25253D%25253F%252540%252522%25253C</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">%25253E%252523%252525%25257B%25257D</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">%25257C%25255C%25255E~%25255B</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">%25255D%252560%252520that%252520could</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">%252520cause%252520problems%26test2</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">%3D1234567879</span></p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5;" width="24%"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">The problematic parameter</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">data needs to be URLencoded</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">three (3) times.</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">It requires the data to be</span></p><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">URLdecoded to be used.</span></p></td></tr></tbody></table><p></p><p>On my example, an URL passing the parameters correctly look like this:</p><p><img   alt="2015-11-28_1214-advanced3.jpg" class="image-4 jive-image" src="f3bb1046db1c9fc068c1fb651f96193a.iix" style="width: 620px; height: 58px;"/></p><p></p><p>Here are the results that <span style="font-family: 'Arial','sans-serif';">distinguish a problematic URL because the data get truncate or/and some parameters get missing:</span></p><p></p><table border="1" cellpadding="0" cellspacing="0" style="border: 1pt solid windowtext; width: 100%;"><tbody><tr><td style="border: solid windowtext 1.0pt; background: #FFC000;" width="102"><p><strong>Link</strong></p></td><td style="border: solid windowtext 1.0pt; background: #FFC000;" width="274"><p><strong>Example of URL parameters passed</strong></p></td><td style="border: solid windowtext 1.0pt; background: #FFC000;" width="208"><p><strong>Parameters received</strong></p></td></tr><tr><td style="border: solid windowtext 1.0pt;" width="102"><p><strong>*Direct URL</strong></p></td><td style="border: solid windowtext 1.0pt;" width="274"><p>test1=This is text ._~:/?#[]@!$&amp;'()*+,;= $&amp;+,/:;=?@"&lt;&gt;#%{}|\^~[]` that could cause problems&amp;test2=1234567879</p></td><td style="border: solid windowtext 1.0pt;" width="208"><p>test1 = This is text ._~:/? (truncated)</p><p>&lt;parameter test2 missing&gt;</p></td></tr><tr><td style="border: solid windowtext 1.0pt; background: #FBE4D5;" width="102"><p><strong>**Redirection link URL</strong></p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5;" width="274"><p>test1%3DThis%20is%20text%20._~%3A%2</p><p>F%3F%23%5B%5D%40!%24%26%27()*%</p><p>2B%2C%3B%3D%20%24%26%2B%2C%2</p><p>F%3A%3B%3D%3F%40%22%3C%3E%23</p><p>%25%7B%7D%7C%5C%5E~%5B%5D%6</p><p>0%20that%20could%20cause%20problems</p><p>%26test2%3D1234567879</p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5;" width="208"><p>test1 = This is text ._~:/? (truncated)</p><p>&lt;parameter test2 is missing&gt;</p></td></tr></tbody></table><p></p><p>On my example, a URL having problems passing the data looks like this:</p><p><img   alt="2015-11-28_1214-advanced4.jpg" class="image-5 jive-image" src="d8cd33f9dbd45fc068c1fb651f961947.iix" style="height: auto;"/></p><p></p><p>After the testings, I can confirm the normal links will work if the parameters do not contain reserved characters. Just removing those characters would make them work again. Otherwise, if you need the links to work on all cases, you will need to ensure the parameters are URL encoded appropriately and decode the parameters when received.</p><p></p><p></p><table border="1" cellpadding="0" cellspacing="0" style="border: solid windowtext 1.0pt;" width="100%"><tbody><tr><td style="border: solid windowtext 1.0pt; background: #FFC000;" width="20%"><p><strong>Link</strong></p></td><td style="border: solid windowtext 1.0pt; background: #FFC000;" width="36%"><p><strong>Construct the URL as follow</strong></p></td><td style="border: solid windowtext 1.0pt; background: #FFC000;" width="42%"><p><strong>Recommendation based on testings</strong></p></td></tr><tr><td style="border: solid windowtext 1.0pt;" width="20%"><p><strong>Direct URL</strong></p></td><td style="border: solid windowtext 1.0pt;" width="36%"><p>ParA=A&amp;ParB=B</p></td><td style="border: solid windowtext 1.0pt;" width="42%"><p>It works if parameters do not contain reserved characters</p></td></tr><tr><td style="border: solid windowtext 1.0pt; background: #FBE4D5;" width="20%"><p><strong>Direct URL </strong></p><p><strong>when data contains reserved characters</strong></p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5;" width="36%"><p>ParA=</p><p>urlencode (urlencode(A))</p><p>&amp;</p><p>ParB=</p><p>urlencode(urlencode (B))</p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5;" width="42%"><p>It work on all cases. Parameters need to be URL encoded two (2) times. It requires the data to be URL decoded once</p></td></tr><tr><td style="border: solid windowtext 1.0pt;" width="20%"><p><strong>Redirection</strong></p><p><strong>Link URL</strong></p></td><td style="border: solid windowtext 1.0pt;" width="36%"><p>urlencode (ParA=)</p><p>urlencode (urlencode (A))</p><p>urlencode(&amp;)</p><p>urlencode (ParB=)</p><p>urlencode (urlencode(B))</p></td><td style="border: solid windowtext 1.0pt;" width="42%"><p>It works if parameters do not contain reserved characters</p></td></tr><tr><td style="border: solid windowtext 1.0pt; background: #FBE4D5;" width="20%"><p><strong>Redirection Link URL when data contains reserved characters</strong></p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5;" width="36%"><p>urlencode (ParA=)</p><p>urlencode (urlencode (urlencode (A)))</p><p>urlencode (&amp;)</p><p>urlencode (ParB=)</p><p>urlencode (urlencode (urlencode (B)))</p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5;" width="42%"><p>It works on all case. Parameters need to be URL encoded three (3) times.</p><p>It requires the data to be URL decoded to be used.</p></td></tr></tbody></table><p></p><p>I have tested this using Fuji and Chrome as browser. Hopefully you find it useful.</p><p></p><p>More information here:</p><ul><li><a href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0546974" title="https://hi.service-now.com/kb_view.do?sysparm_article=KB0546974">Authentication Resources (KB0546974)</a></li><li><a href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/integrate/single-sign-on/concept/c_MultipleProviderSingleSignOn.html" title="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/integrate/single-sign-on/concept/c_MultipleProviderSingleSignOn.html">Docs: Multiple provider single sign-on</a></li><li><a href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/build/service-portal/concept/c_SPSSOLoginAndRedirects.html" title="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/build/service-portal/concept/c_SPSSOLoginAndRedirects.html">Docs: Service Portal Single Sign On, logins, and URL redirects</a></li><li><a href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/build/service-portal/concept/navigate-by-portal-url.html" title="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/build/service-portal/concept/navigate-by-portal-url.html">Docs: Navigate by portal URL</a></li><li><a href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/content-management/concept/c_ContentManagementSecurity.html" title="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/administer/content-management/concept/c_ContentManagementSecurity.html">Docs: Content Management security</a></li><li><a href="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/build/service-portal/concept/c_QuickStart.html" title="https://docs.servicenow.com/bundle/istanbul-servicenow-platform/page/build/service-portal/concept/c_QuickStart.html">Docs: Get started with Service Portal</a></li><li><a title="" _jive_internal="true" href="/search.jspa?q=jonnyseymour&amp;type=post">My other blogs</a></li></ul><p></p><p></p><p>Thanks <a __default_attr="8319" __jive_macro_name="user" class="jive_macro jive_macro_user" data-orig-content="kbcheung!" data-renderedposition="4439.83349609375_57.26666259765625_85_17" href="/community?id=community_user_profile&user=d1345a21db5c1fc09c9ffb651f961954" modifiedtitle="true" title="kbcheung!">kbcheung!</a></p>