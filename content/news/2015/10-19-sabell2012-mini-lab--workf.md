---
title: "MiniLab Workflows  Playing With the If Activity"
date: 2015-10-19T00:57:45.000Z
authors: ["sabell2012"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=d1fde22ddbd0dbc01dcaf3231f961912"
---
<p style="font-size: 13.3333px;"><span style="line-height: 1.5em; font-size: 12pt; font-family: arial, helvetica, sans-serif;">In this example we will be exploring the Advanced functionality available with the out-of-the-box (OOtB) If Activity.</span></p><p><span style="line-height: 1.5em; font-size: 12pt; font-family: arial, helvetica, sans-serif;"><br/></span></p><p><span style="line-height: 1.5em; font-size: 12pt; font-family: arial, helvetica, sans-serif;">If you have ever tried to use the Switch Activity you will notice that it does not take a scratchpad variable (sic. workflow.scratchpad).   This shortcoming can be overcome by using a little-known feature of the If Activity: the Advanced checkbox.   When checked this displays the Script field where you can create code using a JavaScript switch or if/then/else if/else coding structure. Another Activity function that most people are unaware of is the Activity Context menu.   For the If Activity this allows for the addition of more conditions.   These two features will be used in this example to give us the capability of   programmable Switch Activity. </span></p><p><span style="line-height: 1.5em; font-size: 12pt; font-family: arial, helvetica, sans-serif;"><br/></span></p><p style="font-size: 13.3333px;"><span style="font-size: 12pt;"><span style="color: #ff0000;"><strong>NOTE</strong></span>: This example assumes a certain familiarity with ServiceNow Workflows and using the Workflow Editor.</span></p><p style="font-size: 13.3333px;"></p><p><span style="line-height: 1.5em; font-size: 12pt; font-family: arial, helvetica, sans-serif;"><strong>NOTE</strong>: For this example I will be using an if/then/else if/else code structure, but I could have just as easily used a <a title="" _jive_internal="true" href="/groups/servicenow-user-group-us-tx-north-texas/blog/2015/07/19/community-code-snippets--javascript-switch-statement">switch</a>.</span></p><p><span style="line-height: 1.5em; font-size: 12pt; font-family: arial, helvetica, sans-serif;"><br/></span></p><p style="margin-bottom: 0.0001pt; font-size: 13px; font-family: arial, sans-serif; color: #666666;"><span style="font-size: 18pt; font-style: inherit; font-family: inherit; font-weight: inherit;"><strong>Lab 1.1 — Using an Advanced If Activity</strong></span></p><p><span style="font-size: 18pt; font-style: inherit; font-family: inherit; font-weight: inherit;"><strong><br/></strong></span></p><p><span style="line-height: 1.5em; font-size: 12pt; font-family: arial, helvetica, sans-serif;">1. In your ServiceNow instance Navigate to Workflow <span style="color: #666666; font-size: 16px;">â†’</span> Workflow Editor to bring up the Workflow Editor form.</span></p><p></p><p><span style="font-size: 12pt; line-height: 1.5em;">2. Click the "+" to create a new workflow.   This will display the New Workflow form.   Fill in the form with the following:</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"> <span style="font-size: 16px;">   </span> a. <strong>Name</strong>: Playing With the If Activity</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"> <span style="font-size: 16px;">   </span> b. <strong>Table</strong>: Global</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"> <span style="font-size: 16px;">   </span> c. <strong>Click</strong> the submit button to create the new workflow.</span></p><p></p><p><img   alt="8.sub-workflow_add workflow.JPG" class="jiveImage" src="aa68708adbdc5f048c8ef4621f9619fb.iix" style="display: block; margin-left: auto; margin-right: auto;"/></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">3. From the Core Activities tab navigate to Utilities and drag out a Run Script activity</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   a. <strong>Name</strong>: Initialize</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   b. <strong>Script</strong>: </span></p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_text_macro jive_macro_code _jivemacro_uid_14451973624995733" jivemacro_uid="_14451973624995733">
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">// This variable will determine which path the If Activity will take</span></p>
<p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">workflow.scratchpad.trigger = 'red';</span></p>
<p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">//workflow.scratchpad.trigger = 'blue';</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">//workflow.scratchpad.trigger = 'green';</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">//workflow.scratchpad.trigger = 'orange'; // fires the none branch</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><br/></span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">// This line will cause two paths to fire simultaneously</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">//workflow.scratchpad.trigger = 'red | green';</span></p>

</pre><p></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   c. Click the Submit button to save your work.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><br/></span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">       <strong>NOTE</strong>: The commented out code represents the various test conditions we will be applying to our finished workflow.</span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">4. From the Core Activities Tab navigate to Conditions and drag out an <strong>If</strong> activity.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   a. <strong>Name</strong>: Validate Trigger</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   b. <strong>Advanced</strong>: Checked</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   c. <strong>Script</strong>:</span></p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_text_macro jive_macro_code _jivemacro_uid_14451973624811512" jivemacro_uid="_14451973624811512" modifiedtitle="true">
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">workflow.scratchpad.result = ifScript();</span></p>
<p></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">function ifScript() {</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"> <span style="font-size: 16px;">   </span> var result = {red:false, blue:false, green:false, none:false};</span></p>
<p></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   if (JSUtil.notNil(workflow.scratchpad.trigger)) {</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;"><span style="font-size: 16px;"><span style="font-size: 16px;">   </span>   </span>   </span>   if (workflow.scratchpad.trigger.indexOf('red') &gt; -1) {</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;"><span style="font-size: 16px;"><span style="font-size: 16px;">   <span style="font-size: 16px;">   </span></span>   </span> <span style="font-size: 16px;">   </span> </span>   result.red = true;</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;"><span style="font-size: 16px;">   <span style="font-size: 16px;">   </span></span>   </span>   }</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   <span style="font-size: 16px;">   </span></span> <span style="font-size: 16px;">   </span> if (workflow.scratchpad.trigger.indexOf('blue') &gt; -1) {</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;"><span style="font-size: 16px;">   <span style="font-size: 16px;">   <span style="font-size: 16px;">   </span></span></span>   </span> <span style="font-size: 16px;">   </span> result.blue = true;</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;"><span style="font-size: 16px;">   <span style="font-size: 16px;">   </span></span>   </span>   }</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;"> <span style="font-size: 16px;">   <span style="font-size: 16px;">   </span></span> </span>   if (workflow.scratchpad.trigger.indexOf('green') &gt; -1) {</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"> <span style="font-size: 16px;"> <span style="font-size: 16px;">   <span style="font-size: 16px;">   <span style="font-size: 16px;">   <span style="font-size: 16px;">   </span></span></span></span> </span> result.green = true;</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   <span style="font-size: 16px;">   <span style="font-size: 16px;">   </span></span></span>   }</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   }</span></p>
<p></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   if (!(result.red || result.blue || result.green)) {</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;"> <span style="font-size: 16px;">   <span style="font-size: 16px;">   </span></span> </span>   result.none = true;</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   }</span></p>
<p></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   //gs.log('---&gt; ' + result.red + ',' + result.blue + ',' + result.green + ',' + result.none, </span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">       //     'Playing With the If Activity.Validate Trigger');</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   return result;</span></p>
<p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">}</span></p>

</pre><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><br/></span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   d. Click the submit button to save your work.</span></p><p></p><p><img   alt="x.Advanced Checkbox.png" class="jive-image image-6" src="bbb9d146db1c1b04ed6af3231f961935.iix" style="height: 376px; width: 620px; display: block; margin-left: auto; margin-right: auto;"/></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><br/></span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">5. From the Workflow double-click on the If Activity "Yes" Condition. This will display the Condition form.   Change the condition to the following:</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">   <span style="font-size: 16px;">   </span>a. <strong>Name</strong>: is Red</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">   <span style="font-size: 16px;">   </span>b. <strong>Skip During Generate:</strong> checked</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"> <span style="font-size: 16px;">       </span>c. <strong>Condition</strong>: workflow.scratchpad.result.red == true</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">     </span> d. Click the Update button to save your work.</span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">6. From the Workflow double-click on the If Activity "No" Condition. This will display the Condition form.   Change the condition to the following:</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   a. <strong>Name</strong>: is Blue</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   b. <strong>Skip During Generate</strong>: checked</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   c. <strong>Condition</strong>: workflow.scratchpad.result.blue == true</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   d. Click the Update button to save your work.</span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">7. Right click on the If activity and choose Add Condition.   This will display a blank Condition form.   Fill in the form with the following:</span></p><p style="font-size: 13.3333px;"><span style="font-size: 12pt;"><br/></span></p><p style="font-size: 13.3333px;"><span style="font-size: 12pt;">       <strong>NOTE</strong>: Be patient when adding a new condition.   For some reason it takes the browser several seconds to render the context menu.<br/></span></p><p><span style="font-size: 12pt;"><br/></span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   a. <strong>Name</strong>: is Green</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   b. <strong>Skip During Generate</strong>: checked</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   c. <strong>Condition</strong>: workflow.scratchpad.result.green == true</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   d. Click the Update button to save your work.</span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">8. Right click on the If activity again and choose Add Condition.   This will display a blank Condition form.   Fill in the form with the following:</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"> <span style="font-size: 16px;">   </span> a. <strong>Name</strong>: is None</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   b. <strong>Skip During Generate</strong>: checked</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   c. <strong>Condition</strong>: workflow.scratchpad.result.none == true</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   d. Click the Update button to save your work.</span></p><p></p><p><img   alt="x.Add Condition.jpg" class="image-0 jive-image" src="4268f80edb5cdfc068c1fb651f961997.iix" style="height: 404px; width: 620px; display: block; margin-left: auto; margin-right: auto;"/></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">9. Wire up the workflow to look something like the following:</span></p><p></p><p><img   alt="3.final workflow.png" class="image-1 jive-image" src="f7bd3bbddb185704ed6af3231f961934.iix" style="height: 364px; width: 620px; display: block; margin-left: auto; margin-right: auto;"/></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">Done!   We are now ready to test the new If activity!</span></p><p></p><p></p><p style="margin-bottom: 0.0001pt; font-size: 13px; font-family: arial, sans-serif; color: #666666;"><span style="font-size: 18pt; font-style: inherit; font-family: inherit; font-weight: inherit;"><strong>Lab 1.2 — Testing the Workflow</strong></span></p><p><span style="font-size: 18pt; font-style: inherit; font-family: inherit; font-weight: inherit;"><strong><br/></strong></span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">1. Click the Play button in the upper right of the Workflow editor screen to run our If Activity workflow.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><br/></span></p><p style="text-align: center;"><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><img   class="jiveImage" src="1595dc06db9817049c9ffb651f961921.iix"/></span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">2. Since we are manipulating the If activity with a variable in the Initialize Run Script activity the first branch of the If activity (Red) will trigger.</span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">3. The resultant context should look like this:</span></p><p></p><p><img   alt="x.Red run Context.png" class="jive-image image-2" src="cd9c118edb58d304b322f4621f9619b8.iix" style="height: 373px; width: 620px; display: block; margin-left: auto; margin-right: auto;"/></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">4. Now edit the Run Script activity</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"> <span style="font-size: 16px;">       </span>a. Comment out the "red" line.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;"><strong>   </strong></span>   b. Uncomment the "blue" line.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">   <span style="font-size: 16px;">   </span>c. Click the submit button to save your work.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">       d. Click the Run Workflow button and observe the "blue" branch is triggered.</span></p><p></p><p><img   alt="x.Blue run Context.png" class="jive-image image-3" src="a60cf442db509f048c8ef4621f9619d7.iix" style="height: auto; display: block; margin-left: auto; margin-right: auto;"/></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><br/></span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">5. Edit the Run Script activity</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">   <span style="font-size: 16px;">   </span>a. Comment out the "blue" line.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">   <span style="font-size: 16px;">   </span>b. Uncomment the "orange" line.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   c. Click the submit button to save your work.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   d. Click the Run Workflow button and observe the "none" branch is triggered.</span></p><p></p><p><img   alt="x.Orange run Context.png" class="jive-image image-4" src="832a5806dbd89fc068c1fb651f961924.iix" style="height: auto; display: block; margin-left: auto; margin-right: auto;"/></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><br/></span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">6. Edit the Run Script activity</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   a. Comment out the "green" line.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   b. Uncomment the "red | green" line.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   c. Click the submit button to save your work.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="font-size: 16px;">   </span>   d. Click the Run Workflow button and observe both the "red" and the "green" branches are triggered.   This will demonstrate the firing of two branches simultaneously.</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><br/></span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><img   alt="x.Red and Green Context.png" class="jive-image image-5" src="8f8733b5db5cdf04e9737a9e0f9619dc.iix" style="height: auto; display: block; margin-left: auto; margin-right: auto;"/><br/></span></p><p></p><p><span style="font-size: 12pt;">Now we are done testing.   That is all there is to it!   Cool, huh?!   </span></p><p><span style="font-size: 12pt;"><br/></span></p><p><span style="font-size: 12pt;">BTW, a large number of OOtB activities have scripting capability which allows for </span><span style="font-size: 16px;">flexibility</span><span style="font-size: 12pt;"> to adapt to a variety of needs.</span></p><p></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Steven Bell</span></p><p></p><p><span style="font-size: 16px; font-family: arial, sans-serif; color: #800080;"><strong>If you find this article helps you, don't forget to log in and "like" it!   Also, if you are not already, I would also like to encourage you to become a member of our blog!</strong></span></p>