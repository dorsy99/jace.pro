---
title: "Getting your ServiceNow URLs right"
date: 2015-03-18T23:29:52.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=710daaa5dbd0dbc01dcaf3231f9619e8"
---
<p>On the web, the URL of a page plays a huge part in your user experience and the success of navigation. If your ServiceNow URL schema is constructed incorrectly you could end up sending your visitors to the wrong page, or worse: an error message. Last week I was helping a customer who was creating an Email Notification that would link back to a Service Catalog form within the usual Instance UI (the frameset). Based on the<a title="ki.servicenow.com/?title=Navigating_by_URL" href="http://wiki.servicenow.com/?title=Navigating_by_URL"> building blocks for URL creation,</a> we were able to work out how the customer could link within the frameset.</p><p></p><p>The customer was having an issue where the URL would fail and present to the users a <strong>"Not Authorized"</strong> message. When looking into this with the customer, the issue came down to how the <strong>uri</strong> parameter was being used and how the value was being encoded.</p><p></p><table border="1"><tbody><tr><td style="text-align: left;"><p>Let's start with:</p><p><a title="" _jive_internal="true" href="/" rel="nofollow" target="_blank">https://</a><span> &lt;instancename&gt;.service-now.com/nav_to.do?uri=</span></p><p></p><p style="text-align: center;"><em>Remember that the <strong>nav_to.do</strong> page in the above URL will resolve to <strong>navpage.do</strong>, which is the frameset and ensures the requested page in the <strong>uri </strong>parameter is loaded into the main frame.</em></p><p></p><p>To demonstrate this, let's look an example you will already be familiar with:</p><p><a title="" _jive_internal="true" href="/" rel="nofollow" target="_blank">https://</a><span>&lt;instancename&gt;.service-now.com/nav_to.do?uri=incident_list.do%3Factive%3Dtrue</span></p><p></p><p>When clicking on the link you will be taken to the Instance and, in the main frame, be shown the Incident list.</p><p></p><p>The following URL would also achieve the same result:</p><p><a title="" _jive_internal="true" href="/" rel="nofollow" target="_blank">https://</a><span>&lt;instancename&gt;.service-now.com/nav_to.do?uri=incident_list.do?active=true</span></p></td></tr></tbody></table><p></p><p>In many cases, the browser can be forgiving. Now, I say forgiving because a URL can get weird when you have a more complicated "sub" link. This is where I commonly see issues arise.</p><p></p><h2>Key points in URL navigation:</h2><ol><li>Everything before the first question mark (?) is familiar to everyone.</li><li>After the question mark is a query string.</li><li>Query strings are separated with the ampersand (&amp;).</li><li>The <strong>uri</strong> parameter is, essentially, expecting an encoded URL.</li></ol><p></p><p>Now, let's demonstrate what was going wrong with the customer using an base system demo. Let's pick the good ol' <strong>Create Incident</strong> record producer and try opening it in a new tab. This will let us grab the respective URL.</p><p></p><h2>To obtain the URL of an incident record:</h2><ul><li><p>Navigate to <strong>Service Catalog &gt; Record Producer</strong>.</p></li><li><p>Go into the<strong> Create Incident</strong> record.</p></li><li>Click on <strong>Try It</strong>.</li><li>Right-click on a blank area of the page and select <strong>This Frame &gt; Open Frame in New Tab</strong> (this is for Firefox but you can get a plugin for Chrome to do similar. I use <a title="hrome.google.com/webstore/detail/this-frame-context-menu/ckegihlfolljbjmbaidfnnjjhondlpho" href="https://chrome.google.com/webstore/detail/this-frame-context-menu/ckegihlfolljbjmbaidfnnjjhondlpho">this one</a>).</li></ul><p></p><table border="1"><tbody><tr><td><p>This is what I got from a Eureka demo:</p><p><a title="" _jive_internal="true" href="/" rel="nofollow" target="_blank">https://</a><span>&lt;instancename&gt;.service-now.com/com.glideapp.servicecatalog_cat_item_view.do?v=1&amp;sysparm_id=3f1dd0320a0a0b99000a53f7604a2ef9&amp;sysparm_link_parent</span></p><p><span>=e15706fc0a0a0aa7007fc21e1ab70c2f&amp;sysparm_catalog</span><span style="font-size: 10pt; line-height: 1.5em;">=e0d08b13c3330100c8b837659bba8fb4</span></p><p><span style="font-size: 10pt; line-height: 1.5em;">&amp;sysparm_catalog_view=catalog_default</span></p></td></tr></tbody></table><p></p><p>You will not be able to take the <strong>com.glideapp.servicecatalog_cat_item_view.do</strong> page and parameters, then place it in <strong>uri</strong> parameters. Trying to do so will result in a <strong>"Not Authorized"</strong> message.</p><p></p><p><img   alt="Screen Shot 2015-05-07 at 11.09.51.JPG" class="image-0 jive-image" height="134" src="f810affddb5c9fc0b322f4621f9619bf.iix" style="height: 134.198px; width: 304px; display: block; margin-left: auto; margin-right: auto;" width="304"/></p><p style="text-align: center;"><span style="font-size: 8pt;">(Pretty, isn't it?)</span></p><p></p><p>This is because all the ampersands (&amp;) are being interpreted at the level of <strong>nav_to.do</strong>, when it should be interpreted at the level of the <strong>com.glideapp.servicecatalog_cat_item_view.do</strong> page. So that means we need to encode that URL into the uri parameter.</p><p></p><p>A way around this is to use the URL Encoder built into the <a title="uckduckgo.com/" href="https://duckduckgo.com/">DuckDuckGo</a> search engine. To get the URL, just enter "url encode [url]" into the search box (of course change [url] to the URL of interest).</p><p></p><table border="1"><tbody><tr><td style="text-align: left;"><h6>So:</h6><p>com.glideapp.servicecatalog_cat_item_view.do?v=1&amp;sysparm_id=3f1dd0320a0a0b99000a53f7604a2ef9</p><p>&amp;sysparm_link_parent<span style="font-size: 10pt; line-height: 1.5em;">=e15706fc0a0a0aa7007fc21e1ab70c2f&amp;sysparm_catalog</span></p><p><span style="font-size: 10pt; line-height: 1.5em;">=e0d08b13c3330100c8b837659bba8fb4</span><span style="font-size: 10pt; line-height: 1.5em;">&amp;sysparm_catalog_view=catalog_default</span></p><p></p><h6>Would become:</h6><p>com.glideapp.servicecatalog_cat_item_view.do%3Fv%3D1%26sysparm_id%3D3f1dd0320a0a0b99000a53f7604a2ef9</p><p>%26sysparm_link_parent<span style="font-size: 10pt; line-height: 1.5em;">%3De15706fc0a0a0aa7007fc21e1ab70c2f%26sysparm_catalog</span></p><p><span style="font-size: 10pt; line-height: 1.5em;">%3De0d08b13c3330100c8b837659bba8fb4</span><span style="font-size: 10pt; line-height: 1.5em;">%26sysparm_catalog_view%3Dcatalog_default</span></p><p></p><p><span>The next step would be to add this to: </span><a title="" _jive_internal="true" href="/" rel="nofollow" target="_blank">https://</a><span>&lt;instancename&gt;.service-now.com/nav_to.do?uri=</span></p><p></p><h6>Now when I built the whole URL, I would get:</h6><p><a title="" _jive_internal="true" href="/" rel="nofollow" target="_blank">https://</a><span> </span><span style="font-size: 10pt; line-height: 1.5em;">&lt;instancename&gt;.service-now.com/nav_to.do?uri=com.glideapp.servicecatalog_cat_item_view.do%3Fv%3D1</span></p><p><span style="font-size: 10pt; line-height: 1.5em;">%26sysparm_id%3D3f1dd0320a0a0b99000a53f7604a2ef9</span><span style="font-size: 10pt; line-height: 1.5em;">%26sysparm_link_parent</span></p><p><span style="font-size: 10pt; line-height: 1.5em;">%3De15706fc0a0a0aa7007fc21e1ab70c2f</span><span style="font-size: 10pt; line-height: 1.5em;">%26sysparm_catalog%3De0d08b13c3330100c8b837659bba8fb4</span></p><p><span style="font-size: 10pt; line-height: 1.5em;">%26sysparm_catalog_view%3Dcatalog_default</span></p><p></p><p>Trying it out now will show the <strong>Create Incident</strong> Record Producer within the Instance frameset.</p><p></p><p><img   alt="Screen Shot 2015-05-07 at 11.16.12.JPG" class="image-1 jive-image" height="195" src="3bdac9cadb941b04ed6af3231f96190e.iix" style="height: 195.001612903226px; width: 379px;" width="379"/></p><p><span style="font-size: 8pt;">(Yay! <span __jive_emoticon_name="happy" __jive_macro_name="emoticon" class="jive_emote jive_macro" data-renderedposition="2070.596435546875_36.377838134765625_16_16" src="/8.0.4.21bdc7e/images/emoticons/happy.png"></span>)</span></p></td></tr></tbody></table><p></p><p></p><p>This concept will also apply if you were to create a Content Page within your CMS portal that would dynamically load the content into an iFrame. Whatever you decide to call the parameter to do the deed, don't forget to encode the URL.</p><p></p><p>Another reference to use for encoding the URL is available from here: <a href="http://www.w3schools.com/tags/ref_urlencode.asp" title="http://www.w3schools.com/tags/ref_urlencode.asp">HTML URL Encoding Reference</a>. This page hosts a table for you to look up the character of interest and will provide the encoding required.</p><p></p><p>Typical characters that are up for encoding are listed in this table:</p><table border="1" class="jiveBorder" style="border: 1px solid #c6c6c6; width: 100%;"><tbody><tr><th style="text-align: left; background-color: #f2f2f2; color: #505050; padding: 6px;" valign="middle"><strong>Character</strong></th><th style="text-align: left; background-color: #f2f2f2; color: #505050; padding: 6px;" valign="middle"><strong>Encoding from UTF-8</strong></th></tr><tr><td style="padding: 6px;">?</td><td style="padding: 6px;">%3F</td></tr><tr><td style="padding: 6px;">&amp;</td><td style="padding: 6px;">%26</td></tr><tr><td style="padding: 6px;">=</td><td style="padding: 6px;">%3D</td></tr><tr><td style="padding: 6px;">@</td><td style="padding: 6px;">%40</td></tr><tr><td style="padding: 6px;">%</td><td style="padding: 6px;">%25</td></tr></tbody></table>