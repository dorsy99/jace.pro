---
title: "Community Code Snippets  Code Formatting"
date: 2015-10-29T21:27:30.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=0b4ea6addbd0dbc01dcaf3231f96190a"
---
<p dir="ltr"><span style="font-family: Arial; font-size: 12pt;">One of the biggest issues I see when supporting code is the lack of code formatting in custom scripts.   This can be potentially a serious issue, and I have seen it lead to some bad mistakes!   Here I will cover some of what I consider best practices in coding format.   I will present the good, the bad, and the ugly! :-)</span></p><p></p><p dir="ltr"><span style="font-family: Arial; font-weight: bold; font-size: 14pt;">Indentation</span></p><p dir="ltr"></p><p dir="ltr"><span style="font-family: Arial; font-size: 12pt;">Indentation allows a coder to quickly see variable relationships, variable scoping, function placement, open and closed brackets placement, and … well you get the idea.   It vastly improves readability.   Again don't be of the OLD school:   If it hard to write it ought to be hard to read!   This simply does NOT work and is not a good software engineering practice!</span></p><p></p><p dir="ltr"><span style="font-family: Arial; font-size: 12pt;">I like code to be indented in where appropriate by 3 to 4 spaces (or a tab covering that amount).   The editor format button is your friend! </span></p><p></p><p dir="ltr"><span style="font-family: Arial; font-size: 12pt;"><img class="jive-image" height="55px;" src="https://lh3.googleusercontent.com/YrTi_qtxSZMeKZ-hNlaLS4ZrkUC_a3cLoUp_zeFNeF16GrGAbjHsQ77XCEp2J0KpVb6scXihglP6DAfDNHxqTZK4qTcNZFICYeIO20b9ZK-VdY_L3rfO6jgs60aBqiol8oSuF7s" style="border-style: none;" width="489px;"/></span></p><p></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: Arial; font-size: 12pt;"><strong>Example 1</strong>:   Badly indented code.</span></p><p dir="ltr" style="margin-left: 36pt;"></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: Arial; font-size: 12pt;">And before you ask I have seen this type of stuff in real life.</span></p><p dir="ltr" style="margin-left: 36pt;"></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: 'courier new', courier; color: #000000; font-size: 12pt;">var results = getResults();</span></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: 'courier new', courier; color: #000000; font-size: 12pt;">function getResults() {</span></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: 'courier new', courier; color: #000000; font-size: 12pt;">var incidents = new GlideRecord('incidents');</span></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: 'courier new', courier; color: #000000; font-size: 12pt;">incidents.query();</span></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: 'courier new', courier; color: #000000; font-size: 12pt;">while(incidents.next()){</span></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: 'courier new', courier; color: #000000; font-size: 12pt;">gs.print(incident.number+'');</span></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: 'courier new', courier; color: #000000; font-size: 12pt;">if (incident.number=='INC0000012')</span></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: 'courier new', courier; color: #000000; font-size: 12pt;">break;</span></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: 'courier new', courier; color: #000000; font-size: 12pt;">if(incident.number=='INC0000012')</span></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: 'courier new', courier; color: #000000; font-size: 12pt;">gs.print('hello world');</span></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: 'courier new', courier; color: #000000; font-size: 12pt;">}</span></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: 'courier new', courier; color: #000000; font-size: 12pt;">}</span></p><p></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: Arial; color: #000000; font-size: 12pt;"><strong>Example 2</strong>: Ugly</span></p><p dir="ltr" style="margin-left: 36pt;"></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: Arial; color: #000000; font-size: 12pt;">And see things like this as well!</span></p><p dir="ltr" style="margin-left: 36pt;"></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: 'courier new', courier; color: #000000; font-size: 12pt;">var results = getResults();</span></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: 'courier new', courier; color: #000000; font-size: 12pt;">function getResults() {</span></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: 'courier new', courier; color: #000000; font-size: 12pt;">var incidents = new GlideRecord('incidents');</span></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: 'courier new', courier; color: #000000; font-size: 12pt;">incidents.query();</span></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: 'courier new', courier; color: #000000; font-size: 12pt;">while(incidents.next()){</span></p><p dir="ltr" style="margin-left: 36pt; text-indent: 36pt;"><span style="font-family: 'courier new', courier; color: #000000; font-size: 12pt;">gs.print(incident.number+'');</span></p><p dir="ltr" style="margin-left: 36pt; text-indent: 36pt;"><span style="font-family: 'courier new', courier; color: #000000; font-size: 12pt;">if (incident.number=='INC0000012')</span></p><p dir="ltr" style="margin-left: 72pt; text-indent: 36pt;"><span style="font-family: 'courier new', courier; color: #000000; font-size: 12pt;">break;</span></p><p dir="ltr" style="margin-left: 36pt; text-indent: 36pt;"><span style="font-family: 'courier new', courier; color: #000000; font-size: 12pt;">if(incident.number=='INC0000012')</span></p><p dir="ltr" style="margin-left: 72pt; text-indent: 36pt;"><span style="font-family: 'courier new', courier; color: #000000; font-size: 12pt;">gs.print('hello world');</span></p><p dir="ltr" style="margin-left: 72pt;"><span style="font-family: 'courier new', courier;"><span style="color: #000000; font-size: 12pt;">}}</span><span style="color: #000000; font-size: 12pt;">}</span></span></p><p></p><p></p><p></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: Arial; font-size: 12pt;"><strong>Example 3</strong>: Properly indented code</span></p><p dir="ltr" style="margin-left: 36pt;"></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: Arial; font-size: 12pt;">Much better!   White space is cheap.   Use it a lot, use it wisely!</span></p><p dir="ltr" style="margin-left: 36pt;"></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: 'courier new', courier; color: #000000; font-size: 12pt;">var results = getResults();</span></p><p></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: 'courier new', courier; color: #000000; font-size: 12pt;">function getResults() {</span></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-size: 12pt; font-family: 'courier new', courier;"><span style="color: #000000;">       </span><span style="color: #000000;">var incidents = new GlideRecord('incidents');</span></span></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-size: 12pt; font-family: 'courier new', courier;"><span style="color: #000000;">       </span><span style="color: #000000;">incidents.query();</span></span></p><p></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-size: 12pt; font-family: 'courier new', courier;"><span style="color: #000000;">       </span><span style="color: #000000;">while (incidents.next()){</span></span></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-size: 12pt; font-family: 'courier new', courier;"><span style="color: #000000;">           </span><span style="color: #000000;">   </span><span style="color: #000000;">gs.print(incident.number+'');</span></span></p><p></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-size: 12pt; font-family: 'courier new', courier;"><span style="color: #000000;">               </span><span style="color: #000000;">// brackets even around one line improve readability </span></span></p><p dir="ltr" style="margin-left: 36pt; text-indent: 36pt;"><span style="font-family: 'courier new', courier; color: #000000; font-size: 12pt;">   // AND allow for easier insertion of debugging statements.</span></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-size: 12pt; font-family: 'courier new', courier;"><span style="color: #000000;">       </span><span style="color: #000000;">       </span><span style="color: #000000;">if (incident.number=='INC0000012') {</span></span></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-size: 12pt; font-family: 'courier new', courier;"><span style="color: #000000;">                   </span><span style="color: #000000;">   </span><span style="color: #000000;">break;</span></span></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-size: 12pt; font-family: 'courier new', courier;"><span style="color: #000000;">           </span><span style="color: #000000;">   </span><span style="color: #000000;">}</span></span></p><p></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-size: 12pt; font-family: 'courier new', courier;"><span style="color: #000000;">           </span><span style="color: #000000;">   </span><span style="color: #000000;">if (incident.number=='INC0000012') {</span></span></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-size: 12pt; font-family: 'courier new', courier;"><span style="color: #000000;">                   </span><span style="color: #000000;">   </span><span style="color: #000000;">gs.print('hello world');</span></span></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-size: 12pt; font-family: 'courier new', courier;"><span style="color: #000000;">       </span><span style="color: #000000;">       </span><span style="color: #000000;">}</span></span></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: 'courier new', courier; color: #000000; font-size: 12pt;">       }</span></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: 'courier new', courier; color: #000000; font-size: 12pt;">}</span></p><p></p><p dir="ltr"><span style="font-family: Arial; font-size: 12pt;">Formatted you can actually see the hierarchy of the code!   Readability for maintenance! </span></p><p></p><p></p><p dir="ltr"><span style="font-family: Arial; font-weight: bold; font-size: 14pt;">Formatting</span></p><p dir="ltr"></p><p dir="ltr" style="padding-left: 30px;"><span style="font-family: Arial; font-size: 12pt;"><strong>Example 1</strong>:   Badly formatted code</span></p><p dir="ltr" style="padding-left: 30px;"></p><p dir="ltr" style="padding-left: 30px;"><span style="font-family: Arial; font-size: 12pt;">Really the bad and the ugly are the same here.</span></p><p dir="ltr" style="padding-left: 30px;"></p><p dir="ltr" style="padding-left: 30px;"><span style="font-family: 'Courier New'; font-size: 12pt;">var incidents=new GlideRecord('incidents'),mainCount=0;incidents.query();</span></p><p dir="ltr" style="padding-left: 30px;"><span style="font-family: 'Courier New'; font-size: 12pt;">if(incidents.next()){gs.log(incident.number+'';}</span></p><p style="padding-left: 30px;"></p><p dir="ltr" style="padding-left: 30px;"><span style="font-family: Arial; font-size: 12pt;"><strong>Example 2</strong>:   Good</span></p><p dir="ltr" style="padding-left: 30px;"></p><p dir="ltr" style="padding-left: 30px;"></p><p dir="ltr" style="padding-left: 30px;"><span style="font-family: Arial; font-size: 12pt;">Really the bad and the ugly are the same here.</span></p><p dir="ltr" style="padding-left: 30px;"></p><p dir="ltr" style="padding-left: 30px;"></p><p dir="ltr" style="padding-left: 30px;"><span style="font-family: 'Courier New'; font-size: 12pt;">var mainCount = 0;</span></p><p style="padding-left: 30px;"></p><p style="padding-left: 30px;"><span style="font-family: 'Courier New'; font-size: 12pt;">var incidents = new GlideRecord('incidents')</span></p><p dir="ltr" style="padding-left: 30px;"><span style="font-family: 'Courier New'; font-size: 12pt; line-height: 1.5;">incidents.query();</span></p><p dir="ltr" style="padding-left: 30px;"></p><p dir="ltr" style="padding-left: 30px;"><span style="font-family: 'Courier New'; font-size: 12pt;">if (incidents.next()) </span><span style="font-family: 'Courier New'; font-size: 12pt;">{ </span></p><p dir="ltr" style="padding-left: 30px;"><span style="font-family: 'Courier New'; font-size: 12pt;">       gs.log(incident.number+'';</span></p><p dir="ltr" style="padding-left: 30px;"><span style="font-family: 'Courier New'; font-size: 12pt;">}</span></p><p><span style="font-family: 'Courier New'; font-size: 12pt;"> </span></p><p style="padding-left: 30px;"></p><p dir="ltr"><span style="font-family: Arial; font-weight: bold; font-size: 14pt;">White Space</span></p><p dir="ltr"></p><p dir="ltr"></p><p dir="ltr"><span style="font-family: Arial; font-size: 12pt;">Whitespace is good.   Don't worry about adding an extra line here or there, or putting spaces where it makes sense for readability:</span></p><p dir="ltr"></p><p dir="ltr" style="margin-left: 36pt;"></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: Arial; font-weight: bold; font-size: 12pt;">Bad:</span></p><p dir="ltr" style="margin-left: 36pt;"></p><p dir="ltr" style="margin-left: 36pt;"></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: 'Courier New'; font-size: 12pt;">if(myHat=='green'){}</span></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: 'Courier New'; font-size: 12pt;">for(var i=0;i&lt;checkList.length;i++){}</span></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: 'Courier New'; font-size: 12pt;">gs.print('incident number:'+incident.number+','+incident.short_description+'.');</span></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: 'Courier New'; font-size: 12pt;">while(incidentRecords.next()){}</span></p><p dir="ltr" style="margin-left: 36pt;"></p><p dir="ltr" style="margin-left: 36pt;"></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: Arial; font-weight: bold; font-size: 12pt;">Good:</span></p><p dir="ltr" style="margin-left: 36pt;"></p><p dir="ltr" style="margin-left: 36pt;"></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: 'Courier New'; font-size: 12pt;">if (myHat == 'green') {</span></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: 'Courier New'; font-size: 12pt;">}</span></p><p dir="ltr" style="margin-left: 36pt;"></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: 'Courier New'; font-size: 12pt;">for (var i=0; i &lt; checkList.length; i++) {</span></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: 'Courier New'; font-size: 12pt;">}</span></p><p dir="ltr" style="margin-left: 36pt;"></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: 'Courier New'; font-size: 12pt;">gs.print('incident number:' + incident.number + ',' + incident.short_description + '.');</span></p><p dir="ltr" style="margin-left: 36pt;"></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: 'Courier New'; font-size: 12pt;">while (incidentRecords.next()) {</span></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: 'Courier New'; font-size: 12pt;">}</span></p><p></p><p></p><p dir="ltr"><span style="font-family: Arial; font-size: 12pt;">Again: space is cheap.   Readability is all!</span></p><p dir="ltr"></p><p dir="ltr"></p><p dir="ltr"><span style="font-family: Arial; font-weight: bold; font-size: 14pt;">The Script Editor</span></p><p dir="ltr"></p><p dir="ltr"><span style="font-family: Arial; font-size: 12pt;">Just a couple of side-notes on the out-of-the-box (OOtB) editor.   It isn't too bad for formatting.   It has a couple of gotchas which I will explain, and throws formatter warnings on stuff that is not necessarily important. </span></p><p dir="ltr"></p><p dir="ltr"><span style="font-family: Arial; font-size: 12pt;">NOTE: The formatter button is hard coded OOtB to indent exactly 4 characters (it inserts a 4-character tab).   There is no property to change this.</span></p><p></p><p dir="ltr"><span style="font-size: 12pt;"><span style="font-family: Arial; font-weight: bold;">                   Editor Quirk 1</span><span style="font-family: Arial;">:   Comments Can Cause Bad Formatting</span></span></p><p dir="ltr" style="margin-left: 36pt;"></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: Arial; font-size: 12pt;">In some cases the format button gets confused when code is commented out.   Any following code is indented incorrectly.</span></p><p dir="ltr" style="margin-left: 36pt;"></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: Arial; font-size: 12pt;">Before:</span></p><p dir="ltr"><span style="font-family: Arial; font-size: 12pt;"><img class="jive-image" height="401px;" src="https://lh5.googleusercontent.com/uZzSPNB5xAmT_UkA2hqB_ZIKJrQyLfIrgvPs1tK1_zht_iFeHacORtNpVJgkDC60HyWY5n9nUtM53lqXQNqau9qCDW1f2DQaDNRN5RBQlUteZLl7cNwPLfdMAapQ3lDpQSOBwUj7" style="border-style: none; display: block; margin-left: auto; margin-right: auto;" width="508px;"/></span></p><p dir="ltr" style="text-indent: 36pt;"><span style="font-family: Arial; font-size: 12pt;">After:</span></p><p dir="ltr"><span style="font-family: Arial; font-size: 12pt;"><img class="jive-image" height="405px;" src="https://lh4.googleusercontent.com/4h_o4r3SRl7r7JAdRw5wh2qVW03HzbWPRla8JcWO91Z390SyDm1oQWZmLoxLpc3CduHRzQpgoC1DRyjlKDkGMlZQ_ITAqjElbz_BYQE2X3sOy5zw28mcgeGKeHEgOMfp62z3O1dd" style="border-style: none; display: block; margin-left: auto; margin-right: auto;" width="510px;"/></span></p><p dir="ltr" style="margin-left: 36pt; text-align: left;"><span style="font-family: Arial; font-size: 12pt;">As you can see the comment seems to influence the indentation and appears to make the "assumption" that line 20 is part of the "if" in line 5.   Deletion of the comment on line 9 (and for that matter line 19) and clicking the format button again will straighten out the indentation.</span></p><p style="text-align: left;"></p><p style="text-align: left;"></p><p dir="ltr" style="margin-left: 36pt; text-align: left;"><span style="font-size: 12pt;"><span style="font-family: Arial; font-weight: bold;">Editor Quirk 2</span><span style="font-family: Arial;">:   Switch statement causes bad formatting.</span></span></p><p dir="ltr" style="margin-left: 36pt; text-align: left;"></p><p dir="ltr" style="text-indent: 36pt; text-align: left;"><span style="font-size: 12pt;"><span style="font-family: Arial;">Before</span><span style="font-family: Arial;">:</span></span></p><p dir="ltr"><span style="font-family: Arial; font-size: 12pt;"><img class="jive-image" height="335px;" src="https://lh6.googleusercontent.com/WBINphoiy67RBL-CAdOmwqERrR4b7IbLnw23s1k7hb67jGgA2vQkhzjohGOZD0vysPBPzVFd-SxWf4WTr8MVtiwrfc-_p6rrTceGtDJL1o0DfymDdsbSohynIIKTkA4MMV2AdwzJ" style="border-style: none; display: block; margin-left: auto; margin-right: auto;" width="442px;"/></span></p><p dir="ltr" style="margin-left: 36pt;"></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-size: 12pt;"><span style="font-family: Arial;">After</span><span style="font-family: Arial;">:</span></span></p><p dir="ltr"><span style="font-family: Arial; font-size: 12pt;"><img class="jive-image" height="354px;" src="https://lh3.googleusercontent.com/fW9JXDXeH_UmNhWBHPLq1fU7_Bd1Wm1Edxzb8gDd3Ma3CuLdj8P197hz7KzKSnyK8voC-bgsYqpGAh54FyiwR76SCoUQ0c6HXUhBUbfm4BMd7w6UhYV10q4dG3kIpIs_LyVe7BUI" style="border-style: none; display: block; margin-left: auto; margin-right: auto;" width="397px;"/></span></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: Arial;">It aligned all of internal code inside of the switch!   Fix:   Don't click the format button if you have a "switch" statement in your code.   With this sort of thing I format it in my external editor (</span><a href="https://notepad-plus-plus.org/download/v6.8.5.html" style="font-size: 12pt; line-height: 1.5;"><span style="font-family: Arial; color: #1155cc; text-decoration: underline;">Notepad++</span></a><span style="font-family: Arial;">, or </span><a href="http://www.sublimetext.com/3" style="font-size: 12pt; line-height: 1.5;"><span style="font-family: Arial; color: #1155cc; text-decoration: underline;">Sublime</span></a><span style="font-family: Arial;"> work fine) and copy-and-paste my code into the script editor.</span></p><p></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: Arial; font-weight: bold; font-size: 12pt;">Spaces vs. Tabs</span></p><p dir="ltr" style="margin-left: 36pt;"></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: Arial; font-size: 12pt;">In some cases your editor will throw a warning about mixed spaces and tabs.   Ignore these.   They are not important (unless you are obsessive about such things).</span></p><p dir="ltr" style="margin-left: 36pt; padding-left: 30px;"></p><p dir="ltr" style="margin-left: 36pt;"><span style="font-family: Arial; font-size: 12pt;"><img  class="image-1 jive-image" src="65d50c8adb9c5704ed6af3231f961930.iix" style="width: auto; height: auto; display: block; margin-left: auto; margin-right: auto;"/></span></p><p></p><p><span style="font-family: Arial; font-size: 12pt; line-height: 1.5;">So in summary:   Formatting is a best practice in code development.   Always keep in mind that you are probably not the only one that will be maintaining your code.   Don't leave a mess.   Good formatting habits are worth cultivating, and making a personal standard (as well as a corporate standard).   Use the editor format button as much as possible.   Keep in mind it has a couple of quirks!</span></p><p></p><p dir="ltr"><span style="font-family: Arial; font-size: 12pt;">Steven Bell.</span></p>