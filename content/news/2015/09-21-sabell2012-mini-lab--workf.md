---
title: "MiniLab Workflows  Branch and Join Example"
date: 2015-09-21T02:36:08.000Z
authors: ["sabell2012"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=73ace625dbd0dbc01dcaf3231f961969"
---
<p dir="ltr" style="font-family: arial, sans-serif; color: #666666;"><span style="font-weight: bold; font-style: inherit; font-size: 10.6667px; font-family: 'Times New Roman';">NOTE</span><span style="font-weight: inherit; font-style: inherit; font-size: 10.6667px; font-family: Arial;">: </span><span style="font-weight: inherit; font-style: inherit; font-size: 10.6667px; font-family: 'Times New Roman';">MY POSTINGS REFLECT MY OWN VIEWS AND DO NOT NECESSARILY REPRESENT THE VIEWS OF MY EMPLOYER, ACCENTURE.</span></p><p dir="ltr"></p><p dir="ltr" style="font-family: arial, sans-serif; color: #666666;"><span style="font-weight: inherit; font-style: inherit; font-family: 'Times New Roman';">DIFFICULTY LEVEL:   </span><span style="font-weight: bold; font-style: inherit; font-family: 'Times New Roman'; color: #7f6000;">INTERMEDIATE</span></p><p dir="ltr" style="font-family: arial, sans-serif; color: #666666;"><span style="font-weight: inherit; font-style: inherit; font-family: 'Times New Roman';">Assumes some knowledge and/or familiarity of scripting, and Workflows in ServiceNow</span></p><p dir="ltr" style="font-family: arial, sans-serif; color: #666666;"></p><p dir="ltr" style="font-family: arial, sans-serif; color: #666666;"><span style="color: #e23d39; font-size: 14pt; font-family: 'Times New Roman'; font-style: inherit;"><strong>UPDATED:   Was missing step 5 &amp; 6</strong></span></p><p dir="ltr" style="font-family: arial, sans-serif; color: #666666;"><span style="font-weight: inherit; font-style: inherit; font-family: Arial;">____________________________________________________________________________</span></p><p dir="ltr" style="font-family: arial, sans-serif; color: #666666;"></p><p dir="ltr" style="font-family: arial, sans-serif; color: #666666;"></p><p style="margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: Calibri, sans-serif;">One question I get a lot when consulting on Workflows is: How do you do parallel processing, or parallel threads?</span></p><p></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;">Simply put:   I use a Branch Activity, and a Join Activity. I will give a how-to example here with a couple of pitfalls to watch out for.</span></p><p></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;"><span style="color: #ff0000;"><strong>Assumption</strong></span>: That you have worked with and created ServiceNow Workflows before.</span></p><p></p><p><span style="font-size: 14pt; font-family: Calibri, sans-serif;"><strong>Lab 1.1: Workflows — Branch and Join Example</strong></span></p><p></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;">1. Navigate to Workflow â†’ Workflow Editor. This will open the workflow editor</span></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;">       a. In the Workflow Navigation column click on the plus symbol to create a new workflow</span></p><p></p><p><span style="font-size: 12pt; font-family: Arial, sans-serif;"><img   alt="1. New Workflow.JPG" class="image-9 jive-image" src="f8e940cedb1017041dcaf3231f9619eb.iix" style="height: auto;"/><br/></span></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;">2. Create a new workflow</span></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;"><span style="font-family: Calibri, sans-serif;">       </span>a. <strong>Name</strong>: Branch and Join Example</span></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;"><span style="font-family: Calibri, sans-serif;">       </span>b. <strong>Table</strong>: Global</span></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;"><span style="font-family: Calibri, sans-serif;">       </span>c. Take all other defaults</span></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;"><span style="font-family: Calibri, sans-serif;">       </span>d. Click the Submit button to create the workflow</span></p><p></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;">3. On the Workflow Core tab, navigate to Utilities</span></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;"><span style="font-family: Calibri, sans-serif;">       </span>a. Drag out a Branch Activity on to the form.</span></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;"><span style="font-family: Calibri, sans-serif;">       <span style="font-family: Calibri, sans-serif;">       </span></span>i. <strong>Name</strong>: Run Parallel Processes</span></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;"><span style="font-family: Calibri, sans-serif;">       </span>b. Drag out a Join Activity on to the form.</span></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;"><span style="font-family: Calibri, sans-serif;">       <span style="font-family: Calibri, sans-serif;">       </span></span>i. <strong>Name</strong>: Pull Together Processes</span></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;"><span style="font-family: Calibri, sans-serif;">       </span>c. Drag out a Run Script Activity on to the form.</span></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;"><span style="font-family: Calibri, sans-serif;">       <span style="font-family: Calibri, sans-serif;">       </span></span>i. <strong>Name</strong>: Set the Check</span></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;"><span style="font-family: Calibri, sans-serif;">       <span style="font-family: Calibri, sans-serif;">       </span></span>ii. <strong>Script</strong>: workflow.scratchpad.check = 'true';</span></p><p><span style="font-size: 12pt;"><span style="font-family: Arial, sans-serif;"><br/></span><span style="font-family: Calibri, sans-serif;">4. On the Workflow Core tab, navigate to Timers</span></span></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;"><span style="font-family: Calibri, sans-serif;">       </span>a. Drag out a Timer Activity.</span></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;"><span style="font-family: Calibri, sans-serif;"><span style="font-family: Calibri, sans-serif;">       <span style="font-family: Calibri, sans-serif;">       </span></span>i. </span><strong>Name</strong>: Timer For Branch 1</span></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;"><span style="font-family: Calibri, sans-serif;"><span style="font-family: Calibri, sans-serif;">       <span style="font-family: Calibri, sans-serif;">       </span></span>ii. </span><strong>Timer Based On</strong>: A user specified duration</span></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;"><span style="font-family: Calibri, sans-serif;"><span style="font-family: Calibri, sans-serif;">       <span style="font-family: Calibri, sans-serif;">       </span></span>iii. </span><strong>Duration</strong>: 5 seconds</span></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;"><span style="font-family: Calibri, sans-serif;">       </span>b. Drag out a Timer Activity.</span></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;"><span style="font-family: Calibri, sans-serif;"><span style="font-family: Calibri, sans-serif;">       <span style="font-family: Calibri, sans-serif;">       </span></span>i. </span><strong>Name</strong>: Timer For Branch 2</span></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;"><span style="font-family: Calibri, sans-serif;"><span style="font-family: Calibri, sans-serif;">       <span style="font-family: Calibri, sans-serif;">       </span></span>ii. </span><strong>Timer Based On</strong>: A user specified duration</span></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;"><span style="font-family: Calibri, sans-serif;"><span style="font-family: Calibri, sans-serif;">       <span style="font-family: Calibri, sans-serif;">       </span></span>iii. </span><strong>Duration</strong>: 10 seconds</span></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;"><span style="font-family: Calibri, sans-serif;">       </span>c. Drag out a Timer Activity.</span></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;"><span style="font-family: Calibri, sans-serif;"><span style="font-family: Calibri, sans-serif;">     <span style="font-family: Calibri, sans-serif;">       </span> </span>i. </span><strong>Name</strong>: Timer For Branch 3</span></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;"><span style="font-family: Calibri, sans-serif;"><span style="font-family: Calibri, sans-serif;">       <span style="font-family: Calibri, sans-serif;">       </span></span>ii. </span><strong>Timer Based On</strong>: A user specified duration</span></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;"><span style="font-family: Calibri, sans-serif;"><span style="font-family: Calibri, sans-serif;">       <span style="font-family: Calibri, sans-serif;">       </span></span>iii. </span><strong>Duration</strong>: 15 seconds</span></p><p></p><p>5. On the Workflow Core tab, navigate to Utilities</p><p>       a. Drag out a Run Script Activity</p><p>             i. <strong>Name</strong>: Set the Check</p><p>             ii. <strong>Script</strong>:   workflow.scratchpad.check = 'true';</p><p></p><p><span style="font-size: 12pt; font-family: Calibri, sans-serif;">6. On the Workflow Core tab, navigate to Conditions</span></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;"><span style="font-family: Calibri, sans-serif;">       </span>a. Drag out an If Activity.</span></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;"><span style="font-family: Calibri, sans-serif;"><span style="font-family: Calibri, sans-serif;">     <span style="font-family: Calibri, sans-serif;">       </span></span>i. </span><strong>Name</strong>: Something Happened</span></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;"><span style="font-family: Calibri, sans-serif;"><span style="font-family: Calibri, sans-serif;">       <span style="font-family: Calibri, sans-serif;">       </span></span>ii. </span><strong>Advanced</strong>: checked</span></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;"><span style="font-family: Calibri, sans-serif;"><span style="font-family: Calibri, sans-serif;">       <span style="font-family: Calibri, sans-serif;">       </span></span>iii. </span><strong>Script</strong>: </span></p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="_jivemacro_uid_14734304209372301 jive_macro_code jive_text_macro" data-renderedposition="1499_8_1192_144" jivemacro_uid="_14734304209372301"><p>answer = ifScript();</p><p></p><p>function ifScript() {</p><p>   if (workflow.scratchpad.check == 'true') {</p><p>           return 'yes';</p><p>   }</p><p>   return 'no';</p><p>}</p><p></p></pre><p></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;">7. Wire everything up to look like the following:</span></p><p></p><p><span style="font-size: 12pt;"><img   alt="2. Final Workflow.JPG" class="image-10 jive-image" src="bfe8ebb9db90df04e9737a9e0f9619de.iix" style="height: 412px; width: 620px;"/></span></p><p></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;">8. Now click the Run Workflow button on the top right. The Start Workflow form will appear.</span></p><p></p><p><span style="font-size: 12pt;"><img   alt="3. Run Workflow.JPG" class="image-11 jive-image" src="4f9fe771db1c1fc068c1fb651f961909.iix" style="height: auto;"/></span></p><p></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;">9. Click the Start button to run the workflow.</span></p><p></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;">10. Observe the workflow. The timers all fire at the same time, but don't allow flow to continue until each has completed. Then all end up at the Join until the last one is done, and then get released to the end.</span></p><p></p><p><span style="font-size: 12pt;"><img   alt="4. Running Workflow.JPG" class="image-12 jive-image" src="efb29d8edb94d344e9737a9e0f9619f3.iix" style="height: 409px; width: 620px;"/></span></p><p></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;">However! If you look closely at the Join you will see that the Incomplete branch fired! What's up with that?!</span></p><p></p><p><span style="font-size: 12pt;"><img   alt="5. Incomplete Branch.JPG" class="jive-image image-18" src="d0f8eb39db509b048c8ef4621f961996.iix" style="height: 563px; width: 620px;"/></span></p><p></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;">Well there is a bug in our workflow. The Branch Activity has three branches. There has to be the same number of branches flowing into the Join. So look carefully at the If Activity and you will see there are two there, plus one for each of the other timers! So <strong>four</strong>! That causes the Join Activity to fire the Incomplete.</span></p><p></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;">11. So let us adjust the workflow slightly by adding a Script Activity after the If Activity, but prior to the Join activity. It's purpose will be to bring the two If Activity branches back together and then there will be only one flowing into the Join.</span></p><p></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;">12. On the Workflow Core tab, navigate to Utilities</span></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;"><span style="font-family: Calibri, sans-serif;">       </span>a. Drag out a Run Script Activity on to the form.</span></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;"><span style="font-family: Calibri, sans-serif;">       <span style="font-family: Calibri, sans-serif;">       </span></span>I. <strong>Name</strong>: Write to Logs</span></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;"><span style="font-family: Calibri, sans-serif;">       <span style="font-family: Calibri, sans-serif;">       </span></span>ii. <strong>Script</strong>: gs.log('---&gt; There was a problem!', 'WF: Branch and Join Example');</span></p><p></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;">Your Workflow should look something like this after rewiring:</span></p><p></p><p><span style="font-size: 12pt;"><img   alt="6. Combining the flows.JPG" class="image-14 jive-image" src="fd7ae486db1857049c9ffb651f9619ca.iix" style="height: 459px; width: 620px;"/></span></p><p></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;">13. Re-run the workflow again. Now the Join Activity fires the Complete branch. Whew!</span></p><p></p><p><span style="font-size: 12pt; font-family: Calibri, sans-serif;"><strong>The number of branches coming out of the Branch Activity must equal the number of branches going into the Join Activity.</strong></span></p><p></p><p><span style="font-size: 12pt;"><img   alt="7. Complete Branch.JPG" class="image-19 jive-image" src="25e69d0edb58d344e9737a9e0f9619a7.iix" style="height: 446px; width: 620px;"/></span></p><p></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;">14. So, let's play a little game with it and see if it likes things changed up a bit.</span></p><p></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;">15. Rewire your Workflow</span></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;"><span style="font-family: Calibri, sans-serif;">       </span>a. The Timer 2 is connected to the Write To Logs activity.</span></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;"><span style="font-family: Calibri, sans-serif;">       </span>b. The If Activity "Yes" branch is still wired to the Write To Logs activity.</span></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;"><span style="font-family: Calibri, sans-serif;">       </span>c. The If Activity "No" branch is now wired directly to the Join.</span></p><p></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;">16. Your workflow should now look like this (I highlighted the rewired Activities):</span></p><p></p><p><span style="font-size: 12pt; font-family: Arial, sans-serif;"><img   alt="8. Final workflow.JPG" class="image-16 jive-image" src="6de9c40adb5cdb048c8ef4621f96191b.iix" style="height: 401px; width: 620px;"/><br/></span></p><p><span style="font-size: 12pt;"><span style="font-family: Arial, sans-serif;"><br/></span><span style="font-family: Calibri, sans-serif; line-height: 1.5em;">17. Rerun your workflow, and observe what happens.     </span></span></p><p></p><p><span style="font-family: Arial, sans-serif; font-size: 12pt;"><img   alt="9. Rewire and run.JPG" class="image-20 jive-image" src="8e20b082db1c57049c9ffb651f961984.iix" style="height: 399px; width: 620px;"/><br/></span></p><p><span style="font-size: 12pt;"><span style="font-family: Arial, sans-serif;"><br/></span><span style="font-family: Calibri, sans-serif; line-height: 1.5em;">18. Notice that there are still only <strong>three</strong> branches coming into the Join? That meets the criteria and the Complete branch fires.   Even though only two were actually utilized during runtime.</span></span></p><p></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;">That is it! You have now wired up your first Branch and Join Workflow. Even though this had only three branches you could do more. I recommend keeping it as simple as possible; as you can see, it can get difficult to tell what is happening pretty quick!</span></p><p></p><p><span style="font-family: Calibri, sans-serif; font-size: 12pt;">Steven Bell</span></p><p dir="ltr" style="font-family: arial, sans-serif; color: #666666;"><span style="font-weight: inherit; font-style: inherit; font-family: Arial;"><a href="https://lh5.googleusercontent.com/BltWWL_RxgUVrnN4ICq0yjhClBQ9YEwgTOliSsyA_6FAhZGOqmN_Du-81un9NSOWvNewMwbdcmRCLU5J4AQr8QyMfK4mB64LVSCVEVfrV7ESunw99A-1JlVUl7MeY4QVhWpA_-i7" style="font-weight: inherit; font-style: inherit; font-family: inherit; color: #266fc8;"><img class="jive-image" height="39" src="https://lh5.googleusercontent.com/BltWWL_RxgUVrnN4ICq0yjhClBQ9YEwgTOliSsyA_6FAhZGOqmN_Du-81un9NSOWvNewMwbdcmRCLU5J4AQr8QyMfK4mB64LVSCVEVfrV7ESunw99A-1JlVUl7MeY4QVhWpA_-i7" style="margin: 10px 10px 10px 0; border: 0px none; font-weight: inherit; font-style: inherit; font-family: inherit;" width="208"/></a></span></p><p dir="ltr" style="font-family: arial, sans-serif; color: #666666;"><span style="font-weight: inherit; font-style: inherit; font-family: Arial;"><a href="https://lh4.googleusercontent.com/li_XzYUbUwlxrMfo73sErv79kMtmaRRzQKk4IPh_--GVENSRsKx6n51OqyrJYUzrXvD1FyMfzxPEOz563MRjnFbvPUr2RwO9advHSNQO7MTChr36xQQUNbcbA3Ymd3hiM_GIKB-N" style="font-weight: inherit; font-style: inherit; font-family: inherit; color: #266fc8;"><img class="jive-image" height="36" src="https://lh4.googleusercontent.com/li_XzYUbUwlxrMfo73sErv79kMtmaRRzQKk4IPh_--GVENSRsKx6n51OqyrJYUzrXvD1FyMfzxPEOz563MRjnFbvPUr2RwO9advHSNQO7MTChr36xQQUNbcbA3Ymd3hiM_GIKB-N" style="margin: 10px 10px 10px 0; border: 0px none; font-weight: inherit; font-style: inherit; font-family: inherit;" width="102"/></a></span><span style="font-weight: inherit; font-style: inherit; font-family: Arial;"><a href="https://lh4.googleusercontent.com/e8TG9HUfpOoBtdf3rIAOE8f5wtpyQ6L0KFq4ozwvfX5fwQ_Wggjm7RYUkYfEw8_dPYATxJH1wjH8gufbpBT0a2u-HlNDzn2U92cnf0qGKTsm8Zb_yGC0KjJk0tCvnN9ai93IYOJg" style="font-weight: inherit; font-style: inherit; font-family: inherit; color: #266fc8;"><img class="jive-image" height="36" src="https://lh4.googleusercontent.com/e8TG9HUfpOoBtdf3rIAOE8f5wtpyQ6L0KFq4ozwvfX5fwQ_Wggjm7RYUkYfEw8_dPYATxJH1wjH8gufbpBT0a2u-HlNDzn2U92cnf0qGKTsm8Zb_yGC0KjJk0tCvnN9ai93IYOJg" style="margin: 10px 10px 10px 0; border: 0px none; font-weight: inherit; font-style: inherit; font-family: inherit;" width="102"/></a></span><span style="font-weight: inherit; font-style: inherit; font-family: Arial;"><a href="https://lh5.googleusercontent.com/iSO3OgncKkAxJZWYVzurKqFzWwWLLFgriFYtQETjB8jmEZURLt_z-iIy7GMicCXjXsk_8rF4gwLWt6ORI9Y_T8tqpE2uromknxYUwP-rDSOb8Nyvl0NsTKcZEESXf8PY42cUVuOb" style="font-weight: inherit; font-style: inherit; font-family: inherit; color: #266fc8;"><img class="jive-image" height="36" src="https://lh5.googleusercontent.com/iSO3OgncKkAxJZWYVzurKqFzWwWLLFgriFYtQETjB8jmEZURLt_z-iIy7GMicCXjXsk_8rF4gwLWt6ORI9Y_T8tqpE2uromknxYUwP-rDSOb8Nyvl0NsTKcZEESXf8PY42cUVuOb" style="margin: 10px 10px 10px 0; border: 0px none; font-weight: inherit; font-style: inherit; font-family: inherit;" width="102"/></a></span></p><p dir="ltr"></p><p dir="ltr" style="font-family: arial, sans-serif; color: #666666;"><span style="font-weight: bold; font-style: inherit; font-family: Arial;">For a list of all of my articles:   </span><a _jive_internal="true" href="/groups/servicenow-user-group-us-tx-north-texas/blog/2015/10/23/community-code-snippets-articles-list-to-date" style="font-weight: inherit; font-style: inherit; font-family: inherit; color: #266fc8;"><span style="font-weight: bold; font-style: inherit; font-family: Arial;">Community Code Snippets: Articles List to Date</span></a></p><p dir="ltr"></p><p dir="ltr" style="font-family: arial, sans-serif; color: #666666;"><span style="font-weight: inherit; font-style: inherit; font-size: 16px; font-family: Arial; color: #eb7a3d;">Please Share, Like, Bookmark, Mark Helpful, or Comment this blog if you've found it helpful or insightful.</span></p><p dir="ltr"></p><p dir="ltr" style="font-family: arial, sans-serif; color: #666666;"><span style="font-weight: inherit; font-style: inherit; font-size: 16px; font-family: Arial; color: #eb7a3d;">Also, if you are not already, I would like to encourage you to become a member of our blog!</span></p>