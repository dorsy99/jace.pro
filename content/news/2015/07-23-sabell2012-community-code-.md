---
title: "Community Code Snippets  Converting to Local DateTime"
date: 2015-07-22T17:02:28.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=9ecd62e9dbd0dbc01dcaf3231f9619bb"
---
<p>I get asked about this a lot:   How do I get local time out of GMT (Greenwich)?   OR   Why is my day of week calculation not working???</p><p></p><p>Here is an example of how to obtain the corrected (from GMT) local day-of-week:</p><p></p><p>TEST: Expected results:   Day-of-week: 4.   Without the local offset it would be 3 (nasty GMT!).</p><p></p><p><span style="font-family: 'courier new', courier;">var startDateTime = "2015-04-30 01:00:00";   // my example is in GMT</span></p><p></p><p><span style="font-family: 'courier new', courier;">// The following returns the GMT date time object (converted from the string value).   </span></p><p><span style="font-family: 'courier new', courier;">// So next step is to get the local offset and add it to GMT</span></p><p><span style="font-family: 'courier new', courier;">var gmtDateTime = new GlideDateTime(startDateTime);   </span></p><p></p><p><span style="font-family: 'courier new', courier;">// getTZOffset is returned in <span style="text-decoration: underline;">negative</span> milliseconds...</span></p><p><span style="font-family: 'courier new', courier;">// so you have to get rid of that (I suppose you could use Math.abs)</span></p><p><span style="font-family: 'courier new', courier;">var correctedOffset = new GlideTime(<strong>gmtDateTime.getTZOffset()</strong> * -1);   // the secret sauce</span></p><p></p><p><span style="font-family: 'courier new', courier;">// NOW you can add the corrected value to the original gmtDateTime</span></p><p><span style="font-family: 'courier new', courier;">gmtDateTime.add(correctedOffset);   // adds the milliseconds value to the gmt date/time object</span></p><p></p><p><span style="font-family: 'courier new', courier;">// true local day of week value</span></p><p><span style="font-family: 'courier new', courier;">var dayOfWeek = gmtDateTime.getDayOfWeek();</span>   </p><p></p><p>Painful, true, but it gets the correct value for local day-of-week. </p><p></p><p><strong>Millisecond Converter</strong></p><p></p><p>So, in the same vein, another handy/quick conversion to get days from milliseconds is:</p><p></p><p><span style="font-family: 'courier new', courier;">var millConvert = 24 * 60 * 60 * 1000;   // hr, min, sec, milliseconds</span></p><p><span style="font-family: 'courier new', courier;">var millisecondsExample = 604800000;   // 7 days expressed in milliseconds</span></p><p><span style="font-family: 'courier new', courier;">var getDaysFromMilliseconds = millisecondsExample / millConvert;   // you get 7</span></p><p></p><p>Remember ye old programmer axiom:   Date/Times are evil!</p><p></p><p>Steven Bell</p><p></p><p>P.S. I would be curious to know if anyone has a faster/neater/cheaper method for the date/time correction!   Date/Time handling is always a super contentious topic of discussion so your responses are welcome! :-)</p>