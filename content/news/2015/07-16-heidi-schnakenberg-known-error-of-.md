---
title: "Known Error of the Week CI forms load slowly and may cause a node outofmemory condition if they include a CI Relations formatter and the CI has many downstream relationships"
date: 2015-07-15T23:35:50.000Z
authors: ["heidi.schnakenberg"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=8afc26a5dbd0dbc01dcaf3231f961918"
---
<p><span style="color: #485563; font-family: Arial;">This week we're focusing on another out-of-memory known issue that exists in the base system product that effects the CMDB module. The related article is <a title="i.service-now.com/kb_view.do?sysparm_article=KB0546751" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0546751">KB0546751: CI forms load slowly and may cause a node out-of-memory condition if they include a CI Relations formatter and the CI has many downstream relationships</a>. Â  </span></p><p><span style="color: #485563; font-family: Arial; font-size: 10pt; line-height: 1.5em;"><br/></span></p><p><span style="color: #485563; font-family: Arial; font-size: 10pt; line-height: 1.5em;">What does this mean, exactly? Well, when rendering the CMDB Configuration Item form, the related <a title="ki.servicenow.com/index.php?title=CMDB_and_Extended_CMDB#CMDB_Plugin" href="http://wiki.servicenow.com/index.php?title=CMDB_and_Extended_CMDB#CMDB_Plugin">Configuration Items (CI)</a> and tasks are iterated and then displayed for the user. That's the good part - we want that. However, a defect exists in previous releases that allows this iteration to continue to 100 levels. That's the not-so-good part. </span></p><p><span style="color: #485563; font-family: Arial; font-size: 10pt; line-height: 1.5em;"><br/></span></p><p><span style="color: #485563; font-family: Arial; font-size: 10pt; line-height: 1.5em;">Although all of these cannot be displayed in the form, the background task querying the database for the details of the related items consumes a large amount of memory, eventually causing the node to fail.</span></p><p></p><p>Here's how it might play out on your end.</p><p></p><p><span style="color: #485563; font-family: Arial;">In addition to the extra time it takes to load the CI record form, the node experiences high memory consumption that remains sticky and isn't cleared until the node is restarted. This means that the effect is cumulative and nodes completely run out of memory when enough forms are rendered that have the right number of relationships and levels. If other high memory activity or workflows are already running on the node, then the cumulative effect with this issue causes the node to run out of memory earlier.</span></p><p><span style="color: #485563; font-family: Arial;"><br/></span></p><p><span style="color: #485563; font-family: Arial;">The ServiceNow engineering team has been able to reproduce this scenario by creating a Configuration Item (CI) with multiple levels of relationships, each with a large number of links. This might be an issue for you if you experience slowness when opening the CI form for records in which there are many relationships. The precise combination of the number of relationships and the number of levels is not known at this time.</span></p><p><span style="color: #485563; font-family: Arial;"><br/></span></p><h3><span style="color: #485563; font-family: Arial;">Here's how you can get some relief. First, limit the amount of recursion on page load by editing the following two properties:</span></h3><ul><li><span style="font-size: 10pt; font-family: 'courier new', courier;">glide.ui.cmdb_max_depth</span><ul><li><span style="font-size: 10pt;">This property controls the maximum number of levels.</span></li><li><span style="font-size: 10pt;">We recommend a setting of 5 or less.</span></li></ul></li><li><span style="font-size: 10pt; font-family: 'courier new', courier;">glide.ui.max_relations</span><ul><li><span style="font-size: 10pt;">This property restricts the maximum number of relationships to display at one time.</span></li><li><span style="font-size: 10pt;">We recommend setting this to 500 or less.</span></li></ul></li></ul><p></p><h3><span style="margin-bottom: 9px; color: #485563; font-family: Arial;">To change the System Properties:</span></h3><ol style="margin-bottom: 9px; color: #485563; font-family: Arial;"><li><span style="font-size: 10pt;">Go to <strong>System Properties &gt; All</strong>.</span></li><li><span style="font-size: 10pt;">Search for the properties listed above by name, entering the desired setting in the <strong>Value</strong> field.</span></li><li><span style="font-size: 10pt;">If the property does not show in the list, click <strong>New</strong>, enter the name as it is listed above, the desired setting, and then click <strong>Save</strong>.</span></li></ol><p style="margin-bottom: 9px; color: #485563; font-family: Arial;"><span style="font-size: 10pt;">For more information on this, see <a data-original-title="Adding a Property" href="http://wiki.servicenow.com/index.php?title=Adding_a_Property" style="color: #278efc; background: transparent;" target="_blank" title="">Adding a Property</a>.</span></p><p style="margin-bottom: 9px; color: #485563; font-family: Arial;">That workaround should do it. If you have any other questions or anything to add, don't hesitate to comment here or on the Known Error article directly. We look forward to your feedback!</p>