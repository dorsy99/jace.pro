---
title: "How to modify twostep shopping cart item containing an ampersand "
date: 2015-11-12T01:51:48.000Z
authors: ["kim.purcell"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=e32de6e5dbd0dbc01dcaf3231f961979"
---
<p>If you create and name a <a title="i.service-now.com/kb_view.do?sysparm_article=KB0551374" href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0551374">catalog item with an ampersand on your two-step shopping cart page</a>, say "B<strong>&amp;</strong>B", add this item to your cart and proceed to checkout, you may find yourself staring at a blank page with this error: <em>The entity name must immediately follow the '&amp;' in the entity reference</em>.</p><p></p><p>This will occur in your two-step shopping cart when:</p><ul><li>a catalog item has a variable question that has an ampersand</li><li>a catalog item has a name that has an ampersand</li></ul><p></p><p>In this case, "&amp;" is not followed by "#" (for example &amp;#160; or &amp;#xA0; ) identified in HTML. So the XML parser is basically looking for any predefined or manual defined entity names (such as <em>lt, gt, amp, quot</em> and <em>apos</em>). You're just using "&amp;" by itself and not as an XML entity, which explains why you're getting this XML parsing error. Â  To fix this, you can to modify a couple of UI macros to escape HTML.</p><p></p><h2>To fix a variable with a question that contains an ampersand:</h2><p>1. Navigate to <strong>System UI &gt; UI Macros</strong>.</p><p>2. In the UI Macro <strong>cart_variable_summary_v2</strong>, change:</p><pre __default_attr="plain" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_1447281295656397 jive_text_macro" data-renderedposition="320.81597900390625_7.986111640930176_1191_16" jivemacro_uid="_1447281295656397"><span style="font-family: courier new,courier;">${questionLabel}</span></pre><p>to</p><pre __default_attr="plain" __jive_macro_name="code" class="_jivemacro_uid_14472813022216379 jive_macro_code jive_text_macro" data-renderedposition="357.482666015625_7.986111640930176_1191_16" jivemacro_uid="_14472813022216379"><span style="font-family: courier new,courier;">${HTML:questionLabel}</span></pre><p>OR</p><pre __default_attr="plain" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14472813075137518 jive_text_macro" data-renderedposition="394.1493225097656_7.986111640930176_1191_16" jivemacro_uid="_14472813075137518"><span style="font-family: courier new,courier;">${JS:questionLabel}</span></pre><p></p><p><strong>Line 16 should look like this:</strong></p><pre __default_attr="plain" __jive_macro_name="code" class="_jivemacro_uid_14472813151664128 jive_macro_code jive_text_macro" data-renderedposition="451.9270935058594_7.986111640930176_1191_16" jivemacro_uid="_14472813151664128"><span style="font-family: courier new,courier;">&lt;td style="color:grey;"&gt;<strong>${HTML:questionLabel</strong>}$[SP]&lt;/td&gt;</span></pre><p></p><p><strong>And change:</strong></p><pre __default_attr="plain" __jive_macro_name="code" class="_jivemacro_uid_14472813216709663 jive_macro_code jive_text_macro" data-renderedposition="509.70489501953125_7.986111640930176_1191_16" jivemacro_uid="_14472813216709663"><span style="font-family: courier new,courier;">${displayValue}</span></pre><p>to</p><pre __default_attr="plain" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14472813258521436 jive_text_macro" data-renderedposition="546.37158203125_7.986111640930176_1191_16" jivemacro_uid="_14472813258521436"><span style="font-family: courier new,courier;">${HTML:displayValue}</span></pre><p>OR</p><pre __default_attr="plain" __jive_macro_name="code" class="_jivemacro_uid_1447281330235404 jive_macro_code jive_text_macro" data-renderedposition="583.0382080078125_7.986111640930176_1191_16" jivemacro_uid="_1447281330235404"><span style="font-family: courier new,courier;">${JS:displayValue}</span></pre><p></p><p><strong>Line 19 should look like this:</strong></p><pre __default_attr="plain" __jive_macro_name="code" class="_jivemacro_uid_14472813346695571 jive_macro_code jive_text_macro" data-renderedposition="640.8159790039062_7.986111640930176_1191_16" jivemacro_uid="_14472813346695571"><span style="font-family: courier new,courier;">${HTML:displayValue}</span></pre><p></p><p><img   alt="UI_Macro.jpg" class="image-1 jive-image" src="e266dc4edb9817049c9ffb651f961950.iix" style="width: 620px; height: 386px; display: block; margin-left: auto; margin-right: auto; border: #BDBDBD 4px solid; border-radius: 15px;"/></p><h2><br/>To fix a catalog item with a name and short description that contains an ampersand:</h2><p>1. Navigate to <strong>System UI &gt; UI Macros</strong>.</p><p>2. In the UI Macro, <span style="font-family: arial,helvetica,sans-serif;"><strong>sc_cart_view_column_expandable_desc</strong></span>, change:</p><pre __default_attr="plain" __jive_macro_name="code" class="_jivemacro_uid_14472812622086957 jive_macro_code jive_text_macro" data-renderedposition="1197.46533203125_7.986111640930176_1191_16" jivemacro_uid="_14472812622086957"><span style="font-family: courier new,courier;">${jvar_questionHelpTag} </span></pre><p>to</p><pre __default_attr="plain" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14472812696265556 jive_text_macro" data-renderedposition="1234.1319580078125_7.986111640930176_1191_16" jivemacro_uid="_14472812696265556"><span style="font-family: courier new,courier;">${HTML:jvar_questionHelpTag}</span></pre><p>OR</p><pre __default_attr="plain" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14472812742598241 jive_text_macro" data-renderedposition="1270.7987060546875_7.986111640930176_1191_16" jivemacro_uid="_14472812742598241"><span style="font-family: courier new,courier;">${JS:jvar_questionHelpTag}</span></pre><p></p><p><strong>Line 23 should then look like this:</strong></p><p><span style="font-family: courier new,courier;">&lt;g:inline template="help_text.xml" question_show_help="true" question_help_tag="<strong>${HTML:jvar_questionHelpTag</strong>}" question_name="${jvar_cart_item.getID()}" help_class="${jvar_line_color}"&gt;</span></p><p></p><p>Here are releases where you may run into this problem:</p><ul><li>Eureka Patch 4 Hot Fix 1</li><li>Fuji Patch 2 Hot Fix 1</li><li>Fuji Patch 3</li><li>Fuji Patch 5</li><li>Fuji Patch 6</li><li>Fuji Patch 7 Hot Fix 5</li></ul><p></p><p>Looking for more answers to your Service Catalog questions?</p><p><a title="" _jive_internal="true" href="/community/service-automation-platform/user-interface/blog/2015/10/28/associating-your-cms-to-service-catalog-ui-buttons">Associate CMS to Service Catalog and UI buttons</a></p><p><a title="" _jive_internal="true" data-containerid="2900" data-containertype="37" data-objectid="3877" data-objecttype="38" href="/community/service-management/service-catalog/blog/2015/02/13/redirecting-the-back-to-catalog-button">Redirecting the Back to Catalog button</a></p><p><a title="" _jive_internal="true" data-containerid="2900" data-containertype="37" data-objectid="4284" data-objecttype="38" href="/community/service-management/service-catalog/blog/2015/06/04/customize-your-service-catalogs-shopping-cart">Customize your service catalog's shopping cart</a></p><p><a title="" _jive_internal="true" data-containerid="2900" data-containertype="37" data-objectid="4212" data-objecttype="38" href="/community/service-management/service-catalog/blog/2015/05/08/create-a-custom-attachment-button-for-your-service-catalog">Create a custom attachment button for your service catalog</a></p><p><a title="" _jive_internal="true" data-containerid="2900" data-containertype="37" data-objectid="4190" data-objecttype="38" href="/community/service-management/service-catalog/blog/2015/05/01/how-to-get-continue-shopping-buttons-to-work-in-your-service-catalog">Get the Continue Shopping button working in your Service Catalog</a></p><p><a title="" _jive_internal="true" data-containerid="2900" data-containertype="37" data-objectid="4075" data-objecttype="38" href="/community/service-management/service-catalog/blog/2015/04/10/how-to-fix-catalog-ui-styling-issues-css-in-fuji">How to fix Catalog UI style issues (CSS) in Fuji</a></p><p><a title="" _jive_internal="true" href="/hi.service-now.com/kb_view.do?sysparm_article=KB0535421" rel="nofollow" target="_blank">The Continue Shopping button in the shopping cart redirects to incorrect an URL (KB0535421)</a></p><p><a title="" _jive_internal="true" href="/hi.service-now.com/kb_view.do?sysparm_article=KB0547169" rel="nofollow" target="_blank">"Back to catalog" button redirects to the incorrect catalog (KB0547169)</a></p><p><a title="" _jive_internal="true" href="/wiki.servicenow.com/index.php?title=Creating_a_Catalog_Client_Script#gsc.tab=0" rel="nofollow" target="_blank">Creating Catalog Client Scripts</a></p><p><a title="" _jive_internal="true" href="/wiki.servicenow.com/index.php?title=Defining_Catalog_Items#gsc.tab=0" rel="nofollow" target="_blank">Defining Catalog Items</a></p><p><a title="" _jive_internal="true" href="/wiki.servicenow.com/index.php?title=Adding_Content_Items_to_Service_Catalog#gsc.tab=0" rel="nofollow" target="_blank">Adding Content Items to Service Catalog</a></p>