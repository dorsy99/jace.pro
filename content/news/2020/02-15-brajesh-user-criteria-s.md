---
title: "User criteria script ignores a function with answer as name in NY Patch "
date: 2020-02-14T11:14:03.000Z
authors: ["Brajesh"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=adafcb4c1b0f0450ada243f6fe4bcb02"
---
<p><strong>Issue:</strong><br />In Madrid Patch 8, Newyork Patch 2 &amp; Orlando after evaluating the Scripted User Criteria differently and customers who have function such as ‘function answer()’ will face access issues on Service Catalog. We see issue such as ‘cannot read &#61; true&#39; re-set to false, enabling users to see certain items they should not see. This will be a continued access failure and not an intermittent situation.</p>
<p>There are possibly some of customers who are declaring ‘<em><strong>answer</strong></em>’ as javascript function in their User Criteria scripts. This new evaluation assumes ‘<em><strong>answer</strong></em>’ to be a reserved variable. This variable can be set to a value and that value is then treated as the result of the script evaluation. However if a customer declares a function with name ‘<em><strong>answer</strong></em>’ then they will not have the desired results. This breaks in ACL Script, BR Script, Email Script and almost every place where we can script. User Criteria Script would also be breaking now, as it now uses the same platform API to evaluate scripts.</p>
<p><strong>Important points about the Script:</strong><br /> • The script is evaluated in the scope that the user criteria is created in.<br /> • The evaluation of the script is cached in the session, so any change in the evaluation requires you to logout and login, similar to roles in ACL.<br /> • Do not use gs.getUser() or other session APIs since they cause conflict when used in diagnostic tools. Use the pre-defined user_id variable available in the script to get the user id of the user being used to evaluate the script.<br /> • Because scripts are evaluated dynamically, including scripts in user criteria records can decrease performance.<br /> • Also make sure that the script does not define a function with the name &#39;<em><strong>answer</strong></em>&#39;. The new process of evaluating the scripts in scope requires &#39;answer&#39; to be treated as a reserved variable which you can use to set the result of your business logic. In case the script does not set the &#39;answer&#39; variable to a value, the return value of script is treated as the result. Declaring a function like- function answer() { // code goes here} </p>
<p><br />Important KB article <a href="https://hi.service-now.com/kb_view.do?sysparm_article&#61;KB0780873" rel="nofollow">KB0780873</a> related with above issues you can find below<br />Related PRB<br /><a href="https://hi.service-now.com/nav_to.do?uri&#61;%2Fproblem.do%3Fsys_id%3D9b722f8c1b12c450d01143f6fe4bcb0d%26sysparm_stack%3D%26sysparm_view%3D" rel="nofollow">PRB1380636</a>: User criteria script ignores a function with answer as name in NY Patch 4 (in-branch regression from NY Patch 1)</p>
<p>Expected behavior<br />The widget should be displayed</p>
<p>Actual behavior <br />The widget is not displayed. The answer function is not evaluated and the user criteria evaluates to false. <br />If you change the script to: return true;</p>
<p><br />Workaround:</p>
<p>Do not use a function with its name as <em><strong>answer</strong></em>, that is, <em><strong>answer()</strong></em>.</p>
<p> </p>
<p>Important Links:</p>
<p>How to create a user criteria record to define conditions that are evaluated against user records can be found in this <a href="https://staging-docs-servicenow.zoominsoftware.io/bundle/newyork-it-service-management/page/product/service-catalog-management/task/t_CreateAUserCriteriaRecord.html#t_CreateAUserCriteriaRecord" rel="nofollow">document</a>.</p>
<p> </p>
<p> </p>