---
title: "Adding Copy Permalink to the top of your Knowledge Base Article view kbview"
date: 2020-03-06T20:45:50.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=39eb190bdb178850190dfb24399619b2"
---
<p>I was recently browsing the <a title="Idea Portal on the ServiceNow Community " href="https://community.servicenow.com/community?id&#61;ideas_list&amp;sysparm_module_id&#61;enhancement_requests" target="_blank" rel="noopener noreferrer nofollow">Idea Portal on this Community</a> (you <em>did</em> know we had this, didn&#39;t you?) to see what our customers have been suggesting we add to the platform, and I came across some really good ideas that are actually quite easy to customize by yourself. In today&#39;s blog post I will show how to squash two <span style="text-decoration: line-through;">bugs</span> ideas in one go:</p>
<ul><li>How to move or add the &#34;<strong>Copy Permalink</strong>&#34; option to the top of your <span style="font-family: &#39;andale mono&#39;, times;">kb_view</span>.</li><li>Change the name of that link to something more descriptive for your users.</li></ul>
<p>Both these issues were expressed by Community user <sn-mention class="sn-mention" table="live_profile" sysid="adbfc6addb181fc09c9ffb651f961902">&#64;georgiamali</sn-mention> in her idea <a title="Knowledge articles: Rename &#34;Copy Permalink&#34;" href="https://community.servicenow.com/community?id&#61;view_idea&amp;sysparm_idea_id&#61;27f043fbdb648c141cd8a345ca96198a&amp;sysparm_idea_table&#61;x_snc_com_ideation_idea&amp;sysparm_module_id&#61;enhancement_requests" target="_blank" rel="noopener noreferrer nofollow">Knowledge articles: Rename &#34;Copy Permalink&#34;</a>.</p>
<p>We will be creating one new UI Macro, and copying two existing ones which we will adapt to our needs. This is the recommended way to customize out-of-box functionality because it won&#39;t interfere in future upgrades. Just remember to follow <a title="ServiceNow development best practices" href="https://developer.servicenow.com/dev.do#!/guide/madrid/now-platform/tpb-guide/scripting_technical_best_practices" target="_blank" rel="noopener noreferrer nofollow">our development best practices</a>.</p>
<h3>Preparing the terrain</h3>
<p>Before doing any modifications I suggest making a copy of the following UI Macros (for example by using <strong>Insert and Stay</strong> from the context menu on the form). We will be modifying these later.</p>
<ul><li>kb_view_common_header_banner_image</li><li><ul><li><span style="font-family: &#39;andale mono&#39;, times;">/nav_to.do?uri&#61;sys_ui_macro.do?sys_id&#61;b74cff91c30031000096dfdc64d3ae65</span></li></ul>
</li><li>kb_view_common_footer_metadata_fields (only if you want to remove the link from the footer of the kb_view)</li><li><ul><li><span style="font-family: &#39;andale mono&#39;, times;">/nav_to.do?uri&#61;sys_ui_macro.do?sys_id&#61;3783deb1d70031004792a1737e610391</span></li></ul>
</li></ul>
<p>You should deactivate the original ones so the system uses your new macros.</p>
<p>Now you can go ahead and create a new UI Macro, I named it <span style="font-family: &#39;andale mono&#39;, times;">kb_view_permalink</span>, and copied the following piece of code from <span style="font-family: &#39;andale mono&#39;, times;">kb_view_common_footer_metadata_fields</span> with some modifications:</p>
<pre style="color: #000000; background: #f0f0f0;"><span style="color: #004a43;">&lt;?</span><span style="color: #800000; font-weight: bold;">xml</span> <span style="color: #074726;">version</span><span style="color: #808030;">&#61;</span><span style="color: #800000;">&#34;</span><span style="color: #7d0045;">1.0</span><span style="color: #800000;">&#34;</span> <span style="color: #074726;">encoding</span><span style="color: #808030;">&#61;</span><span style="color: #800000;">&#34;</span><span style="color: #0000e6;">utf-8</span><span style="color: #800000;">&#34;</span> <span style="color: #004a43;">?&gt;</span>
<span style="color: #a65700;">&lt;</span><span style="color: #666616;">j</span><span style="color: #800080;">:</span><span style="color: #5f5035;">jelly</span> <span style="color: #274796;">trim</span><span style="color: #808030;">&#61;</span><span style="color: #800000;">&#34;</span><span style="color: #0000e6;">false</span><span style="color: #800000;">&#34;</span> <span style="color: #666616;">xmlns</span><span style="color: #800080;">:</span><span style="color: #074726;">j</span><span style="color: #808030;">&#61;</span><span style="color: #800000;">&#34;</span><span style="color: #666616;">jelly</span><span style="color: #800080;">:</span><span style="color: #40015a;">core</span><span style="color: #800000;">&#34;</span> <span style="color: #666616;">xmlns</span><span style="color: #800080;">:</span><span style="color: #074726;">g</span><span style="color: #808030;">&#61;</span><span style="color: #800000;">&#34;</span><span style="color: #40015a;">glide</span><span style="color: #800000;">&#34;</span> <span style="color: #666616;">xmlns</span><span style="color: #800080;">:</span><span style="color: #074726;">j2</span><span style="color: #808030;">&#61;</span><span style="color: #800000;">&#34;</span><span style="color: #40015a;">null</span><span style="color: #800000;">&#34;</span> <span style="color: #666616;">xmlns</span><span style="color: #800080;">:</span><span style="color: #074726;">g2</span><span style="color: #808030;">&#61;</span><span style="color: #800000;">&#34;</span><span style="color: #40015a;">null</span><span style="color: #800000;">&#34;</span><span style="color: #a65700;">&gt;</span>
	<span style="color: #a65700;">&lt;</span><span style="color: #666616;">j2</span><span style="color: #800080;">:</span><span style="color: #5f5035;">if</span> <span style="color: #274796;">test</span><span style="color: #808030;">&#61;</span><span style="color: #800000;">&#34;</span><span style="color: #0000e6;">$[sysparm_media !&#61; &#39;print&#39;]</span><span style="color: #800000;">&#34;</span><span style="color: #a65700;">&gt;</span>
	$[SP]<span style="color: #a65700;">&lt;</span><span style="color: #5f5035;">a</span> <span style="color: #274796;">href</span><span style="color: #808030;">&#61;</span><span style="color: #800000;">&#34;</span><span style="color: #0000e6;">#</span><span style="color: #800000;">&#34;</span> <span style="color: #274796;">id</span><span style="color: #808030;">&#61;</span><span style="color: #800000;">&#34;</span><span style="color: #0000e6;">permalink</span><span style="color: #800000;">&#34;</span> <span style="color: #274796;">aria-label</span><span style="color: #808030;">&#61;</span><span style="color: #800000;">&#34;</span><span style="color: #0000e6;">${gs.getMessage(&#39;Copy Permalink&#39;)}</span><span style="color: #800000;">&#34;</span><span style="color: #a65700;">&gt;</span>${gs.getMessage(&#39;Copy Permalink&#39;)}<span style="color: #a65700;">&lt;/</span><span style="color: #5f5035;">a</span><span style="color: #a65700;">&gt;</span>
	<span style="color: #a65700;">&lt;</span><span style="color: #5f5035;">script</span> <span style="color: #274796;">language</span><span style="color: #808030;">&#61;</span><span style="color: #800000;">&#34;</span><span style="color: #0000e6;">javascript</span><span style="color: #800000;">&#34;</span><span style="color: #a65700;">&gt;</span>
		$j(&#39;#permalink&#39;).click(
			function(){
				//generate direct url to this article, by getting the domain and adding sysparm_article&#61;NUMBER_OF_ARTICLE
				copyToClipboard(window.location.origin &#43; &#39;${permalink}&#39;);
				return false;
			}
		);
	<span style="color: #a65700;">&lt;/</span><span style="color: #5f5035;">script</span><span style="color: #a65700;">&gt;</span>
	<span style="color: #a65700;">&lt;/</span><span style="color: #666616;">j2</span><span style="color: #800080;">:</span><span style="color: #5f5035;">if</span><span style="color: #a65700;">&gt;</span>
<span style="color: #a65700;">&lt;/</span><span style="color: #666616;">j</span><span style="color: #800080;">:</span><span style="color: #5f5035;">jelly</span><span style="color: #a65700;">&gt;</span>
</pre>
<p>This code will add a space (<span style="font-family: &#39;andale mono&#39;, times;">$[SP]</span>) and a link labeled &#34;Copy Permalink&#34;. This is where you can change the text for that link if you prefer to do so; I&#39;ve seen &#34;Copy link&#34; or simply &#34;Copy&#34; used for this.</p>
<p>You can now add this macro into your version of <span style="font-family: &#39;andale mono&#39;, times;">kb_view_common_header_banner_image</span> where you want the link to appear. I have added it right next to the KB number and <strong>Latest version</strong> link, in my instance this is right after line 47:</p>
<pre style="color: #000000; background: #f0f0f0;">  &lt;/j:<span style="color: #7f0055; font-weight: bold;">if</span>&gt;
  &lt;j:<span style="color: #7f0055; font-weight: bold;">if</span> test&#61;<span style="color: #2a00ff;">&#34;</span><span style="color: #2a00ff;">${state!&#61;&#39;&#39;}</span><span style="color: #2a00ff;">&#34;</span>&gt;$[HTML:state]&lt;/j:<span style="color: #7f0055; font-weight: bold;">if</span>&gt;
  &lt;!-- Added by Lucas Vieites 20200320 --&gt;
  &lt;g:<span style="color: #7f0055; font-weight: bold;">inline</span> template&#61;<span style="color: #2a00ff;">&#34;</span><span style="color: #2a00ff;">kb_view_permalink</span><span style="color: #2a00ff;">&#34;</span> /&gt;    &lt;&#61;&#61;&#61;&#61;&#61; This is the line you need to add
  &lt;!-- END of Lucas Vieites 20200320 --&gt;
&lt;/<span style="color: #7f0055; font-weight: bold;">div</span>&gt;
</pre>
<p> Save this UI Macro, and you are done. Check that the link actually appears at the top of your kb_view, it should look like this:</p>
<p><img style="max-width: 100%; max-height: 480px;" src="https://community.servicenow.com/27322027dbe7c0942be0a851ca961964.iix" width="468" height="181" /></p>
<p>Now you can go ahead and remove the link from the footer. I suggest commenting out the HTML tag that shows it there, just to keep it available if you should change your mind later on. You will need to use the HTML comment tags <span style="font-family: &#39;andale mono&#39;, times;">&lt;!--</span>  and <span style="font-family: &#39;andale mono&#39;, times;">--&gt;</span> like this:</p>
<pre style="color: #000000; background: #f0f0f0;"><span style="color: #3f7f59;">&lt;!-- &lt;a href&#61;&#34;#&#34; id&#61;&#34;permalink&#34; aria-label&#61;&#34;${gs.getMessage(&#39;Copy Permalink&#39;)}&#34;&gt;${gs.getMessage(&#39;Copy Permalink&#39;)}&lt;/a&gt; --&gt;</span>
</pre>
<p>One last disclaimer: please remember to do all your tests in a pre-production environment before you deploy it on your live system.</p>