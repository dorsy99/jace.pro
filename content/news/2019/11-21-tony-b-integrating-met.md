---
title: "Integrating metrics with Operational Intelligence when an OOB connector isnt available"
date: 2019-11-20T11:59:30.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=bc51a0a4dbd904d014d6fb24399619fc"
---
<p class="ng-scope">Operational Intelligence features a number of <a href="https://docs.servicenow.com/bundle/newyork-it-operations-management/page/product/event-management/task/configure-metric-connectors.html" rel="nofollow">OOB connectors</a> for collecting metrics, however you may need to integrate metrics from other monitoring tools. In this scenario you have two options:</p>
<ul class="ng-scope"><li>Option 1: Develop your own metric connector - this can be difficult but it does have advantages in having finer control over metric selection, choosing the interval between metrics (e.g. a metric every minute) and the frequency of collection (e.g. collect a batch of metrics once every 120 seconds). Read more about this in the <a href="https://docs.servicenow.com/bundle/orlando-it-operations-management/page/product/event-management/task/create-custom-pull-metric-collector.html" rel="nofollow">Product Documentation</a>.</li><li>Option 2: Push metrics via a MID Server to Operational Intelligence - much easier than option 1, however there are some considerations.</li></ul>
<p class="ng-scope">Here are some tips for integrating metrics with Operational Intelligence using the &#34;push&#34; method.</p>
<ol class="ng-scope"><li>Metrics will be pushed to a MID Server so you need to confirm you can either extract metrics from a monitoring tool (i.e. via a script) or the tool can send metrics in the <a href="https://docs.servicenow.com/bundle/orlando-application-development/page/integrate/inbound-rest/concept/push-metrics-MID-server.html" rel="nofollow">requisite format</a>.</li><li>Operational Intelligence stores metrics in a time-series database called <strong>MetricBase</strong> that&#39;s provided (on request) with a ServiceNow instance.  Retention policies have been defined for Operational Intelligence that sees raw metrics stored with 1 minute intervals for 8 days.  This interval should be considered when deciding the frequency for sending metrics for each monitored CI (there&#39;s not much point sending metrics every second).</li><li>Setup the pre-reqs: OI plugin, request MetricBase, setup dedicated MID Server with OI and Web Service Listener extensions (use one-click install link on the MID Server form).</li><li>Create a <a href="https://docs.servicenow.com/bundle/newyork-it-operations-management/page/product/event-management/task/confgr-metrictype-registration.html" rel="nofollow">Data Source Registration</a> record for the metric source.</li><li>Choose the metrics you want to send, if known. Hint: only send metrics for CI types that exist in the CMDB.</li><li>Ensure CIs are in the CMDB otherwise metrics <em>won&#39;t</em> be bound. </li><li>You&#39;ll need one or more Event Rules to <a href="https://docs.servicenow.com/bundle/newyork-it-operations-management/page/product/event-management/task/event-rule-bind-metrics-to-host.html" rel="nofollow">bind metrics to CI types</a> - this is pretty easy to do.</li><li>Decide whether you intend to bind metrics to resources (e.g. logical disks, network adapters, etc) for CIs.  It&#39;s important to do this <em>before</em> sending metrics to a production ServiceNow instance.  Binding metrics to CI resources requires an <a href="https://docs.servicenow.com/bundle/newyork-it-operations-management/page/product/event-management/concept/resource-binding.html" rel="nofollow">Event Rule</a>, so be sure to configure and test this in a non-production instance first. Note: resource binding will automatically create resources for CIs, so CIs must exist in the CMDB.</li><li>Configure the push method (e.g. a script) and start sending the first batch of metrics.  You should see (a) Metric Types being created and (b) entries appear in the Metric to CI list view.</li><li>Next, go to Insights Explorer, search for and pin a CI you&#39;re sending metrics for and validate you&#39;re getting metrics.  If you see No data, wait around 5 mins, or the collection interval time (whichever is longer).  If no metrics appear, it&#39;s usually because binding isn&#39;t working or MetricBase hasn&#39;t been provisioned.</li><li>For New York and later releases, go to the Metric Types list view and set the Anomaly Detection Action Level to &#34;Anomaly Alerts&#34; for key metrics (don&#39;t do <em>all</em> of them).  If you limited the metric types being sent earlier, good for you since you won&#39;t have 400 of these to set.</li><li>Now WAIT. Yes, just like humans, machines need time to learn so expect to see bounds after 2-3 days and reliable anomalies after 1 week for metrics with daily seasonality. Ideally you&#39;re going to let this run for 4 weeks and then review results. Note: not all metrics will display seasonality, and not all metrics will have bounds.</li><li>OMG, when does this list stop? For releases earlier than New York, you&#39;ll need to create an Anomaly Alert Promotion Rule to promote anomaly alerts to IT alerts that Event Management can then process.  For promotion rules, avoid doing something too generic (e.g. promoting ALL anomaly alerts) - choose a specific CI type or metric aligned to your use case. Whether you&#39;re using a promotion rule or setting the Anomaly Detection Action Level in a Metric Type, allow around 4 weeks of data collection before setting these (particularly for metrics with <em>weekly</em> seasonality).  </li></ol>
<p class="ng-scope">Hope this is helpful for integrating metrics with Operational Intelligence when an OOB connector isn&#39;t available for your monitoring tool.</p>