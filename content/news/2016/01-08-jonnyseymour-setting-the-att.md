---
title: "Setting the Attributes to reduce LDAP import times"
date: 2016-01-08T03:11:06.000Z
authors: ["jonnyseymour"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=7cfda22ddbd0dbc01dcaf3231f96196c"
---
<p><a title="n.wikipedia.org/wiki/Lightweight_Directory_Access_Protocol" href="https://en.wikipedia.org/wiki/Lightweight_Directory_Access_Protocol">LDAP</a> has long been sought after by administrators for its convenience and the value this feature has to offer: <a title="ki.servicenow.com/?title=LDAP_Integration#gsc.tab=0" href="http://wiki.servicenow.com/?title=LDAP_Integration#gsc.tab=0">authentication and data import</a>. There is a configuration to tune LDAP queries and improve import performance. Reviewing your <a title="ki.servicenow.com/index.php?title=LDAP_Integration_Setup" href="http://wiki.servicenow.com/index.php?title=LDAP_Integration_Setup">LDAP settings</a> is essential. You should concentrate on setting the 'Attribute' field by specifying what fields to search you can improve your import time.</p><p></p><p><img  alt="compress-files1a.png" class="image-19 jive-image" height="122" src="15f1114edb5897049c9ffb651f961900.iix" style="width: 135px; height: 121.886px; display: block; margin-left: auto; margin-right: auto;" width="135"/></p><p></p><p>When you create a new LDAP server record, it sets the 'Attributes' field to no value, or empty. That is not bad if you have a small number of LDAP attributes on your data. However, the first LDAP data import will calculate the attributes to import from all the attributes found on the first 20 records retrieved. Even after that, the 'Attributes' field remain empty. This will force the queries to retrieve ALL the attributes of the records match as default. Â  By searching all attributes of the record, you are slowing down your processes and dragging the time of the import.</p><pre __default_attr="info" __jive_macro_name="alert" alert="info" class="jive_text_macro jive_macro_alert" data-renderedposition="377.8833312988281_8_902_43"><p>Setting the LDAP server 'Attributes' fields will only retrieve the matching attributes specified on it.</p></pre><p></p><p>To improve your LDAP import times you must do 3 things:</p><ol><li>Add the 'Attributes' field to the LDAP server form</li><li>Create the LDAP server</li><li>Validate the LDAP OU Definitions</li></ol><p></p><h2>Add the 'Attributes' field to the LDAP server form</h2><p>To add the attribute field on the table, login as Admin, then open the form, and go to '<a title="ki.servicenow.com/?title=Form_Design#Form_Layout&gsc.tab=0" href="http://wiki.servicenow.com/?title=Form_Design#Form_Layout&amp;gsc.tab=0">Configure\Form Layout</a>'.</p><ol><li>Select <strong>Attributes</strong></li><li>Click "&gt;"</li><li>Move to the position wanted</li><li>Click <strong>Save</strong></li></ol><p><img   alt="add attributes ldap.jpg" class="image-10 jive-image" src="e8807ccedbd8d704ed6af3231f9619c5.iix" style="width: 620px; height: 206px; display: block; margin-left: auto; margin-right: auto;"/></p><p>Then, in the slushbucket, ensure the field Attributes is selected and save.</p><p><img   alt="add attribute ldap 2.jpg" class="image-11 jive-image" src="ab71588adb149fc03eb27a9e0f9619e4.iix" style="display: block; margin-left: auto; margin-right: auto; width: 620px; height: 279px;"/></p><pre __default_attr="warning" __jive_macro_name="alert" alert="warning" class="jive_text_macro jive_macro_alert" data-renderedposition="1274.2833251953125_8_902_43"><p>Setting the 'Attributes' field visible will ensure you will now have the option of specifying the attributes on the LDAP Server form.</p></pre><p></p><h2>Create the LDAP server</h2><p>Once the attributes field is visible, you can add the LDAP server. Browse your LDAP server, and validate the starting search point for your LDAP.</p><p><img   alt="create ldap server.jpg" class="image-12 jive-image" src="cd4e677ddbd49b048c8ef4621f9619b8.iix" style="height: auto; display: block; margin-left: auto; margin-right: auto;"/></p><p></p><p>Based on your initial review or the information provided by your LDAP administrator, you will need to set up the following:</p><ul><li>The Server Name</li><li>The Server URL</li><li>Starting search directory</li></ul><p></p><p>The <strong>Server Server</strong> field is used for the LDAP Server entries, part of the new user and group data import names and the related LDAP monitor. Make it unique and recognisable.</p><p></p><p>In the <strong>Server URL</strong> field, the valid URLs of all servers appear separated by a space. Servers are first ordered by <a title="ki.servicenow.com/index.php?title=LDAP_Integration_Setup#Automatic_Operational_Status_Update" href="http://wiki.servicenow.com/index.php?title=LDAP_Integration_Setup#Automatic_Operational_Status_Update">operational status</a>, with servers that are <strong>Up</strong> listed first, then ordered by the <strong>Order</strong> value that you specify. The first server listed is the primary LDAP server. The others are redundant servers.</p><p></p><p>Finally the <strong>Starting search directory</strong> contains the base search for your LDAP queries. You can only specify one.</p><p></p><p><img   alt="review ldap server.jpg" class="image-13 jive-image" src="e4f1dd0edb5897049c9ffb651f9619a6.iix" style="width: 620px; height: 270px; display: block; margin-left: auto; margin-right: auto;"/></p><p></p><p>Once you have submitted the LDAP server, the ServiceNow record will be open to be edited. You will then need to set the relevant LDAP attribute names to extract on the 'attributes' field to minimize the size of the searches received from the LDAP server, improving performance accordingly. Each attribute name should be separated by comma as seen in the screenshot provided.</p><p></p><p><strong>Here is a list of usual Active directory fields:</strong></p><p></p><table border="1" cellpadding="0" style="border: solid windowtext 1.0pt;" width="100%"><tbody><tr><td style="border: solid windowtext 1.0pt; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">cn</span></p></td><td style="border: solid windowtext 1.0pt; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: white;">,</span></p></td><td style="border: solid windowtext 1.0pt; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">department</span></p></td><td style="border: solid windowtext 1.0pt; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: white;">,</span></p></td><td style="border: solid windowtext 1.0pt; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">description</span></p></td><td style="border: solid windowtext 1.0pt; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: white;">,</span></p></td></tr><tr><td style="border: solid windowtext 1.0pt; background: #FBE4D5; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">distinguishedName</span></p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: white;">,</span></p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">dn</span></p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: white;">,</span></p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">employeeid</span></p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: white;">,</span></p></td></tr><tr><td style="border: solid windowtext 1.0pt; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">givenname</span></p></td><td style="border: solid windowtext 1.0pt; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: white;">,</span></p></td><td style="border: solid windowtext 1.0pt; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">I</span></p></td><td style="border: solid windowtext 1.0pt; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: white;">,</span></p></td><td style="border: solid windowtext 1.0pt; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">mail</span></p></td><td style="border: solid windowtext 1.0pt; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: white;">,</span></p></td></tr><tr><td style="border: solid windowtext 1.0pt; background: #FBE4D5; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">managedBy</span></p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: white;">,</span></p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">manager</span></p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: white;">,</span></p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">member</span></p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: white;">,</span></p></td></tr><tr><td style="border: solid windowtext 1.0pt; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">memberOf</span></p></td><td style="border: solid windowtext 1.0pt; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: white;">,</span></p></td><td style="border: solid windowtext 1.0pt; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">mobile</span></p></td><td style="border: solid windowtext 1.0pt; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: white;">,</span></p></td><td style="border: solid windowtext 1.0pt; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">o</span></p></td><td style="border: solid windowtext 1.0pt; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: white;">,</span></p></td></tr><tr><td style="border: solid windowtext 1.0pt; background: #FBE4D5; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">postalCode</span></p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: white;">,</span></p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">samaccountname</span></p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: white;">,</span></p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">sn</span></p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: white;">,</span></p></td></tr><tr><td style="border: solid windowtext 1.0pt; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">source</span></p></td><td style="border: solid windowtext 1.0pt; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: white;">,</span></p></td><td style="border: solid windowtext 1.0pt; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">street</span></p></td><td style="border: solid windowtext 1.0pt; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: white;">,</span></p></td><td style="border: solid windowtext 1.0pt; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">streetAddress</span></p></td><td style="border: solid windowtext 1.0pt; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: white;">,</span></p></td></tr><tr><td style="border: solid windowtext 1.0pt; background: #FBE4D5; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">telephoneNumber</span></p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: white;">,</span></p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">title</span></p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: white;">,</span></p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">uid</span></p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: white;">,</span></p></td></tr><tr><td style="border: solid windowtext 1.0pt; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">userAccountControl</span></p></td><td style="border: solid windowtext 1.0pt; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: white;">,</span></p></td><td style="border: solid windowtext 1.0pt; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">userPrincipalName</span></p></td><td style="border: solid windowtext 1.0pt; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: white;">,</span></p></td><td style="border: solid windowtext 1.0pt; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">uSNChanged</span></p></td><td style="border: solid windowtext 1.0pt; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: white;">,</span></p></td></tr><tr><td style="border: solid windowtext 1.0pt; background: #FBE4D5; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">uSNCreated</span></p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: white;">,</span></p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">sAMAccountName</span></p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: white;">,</span></p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: black;">sAMAccountType</span></p></td><td style="border: solid windowtext 1.0pt; background: #FBE4D5; padding: .75pt .75pt .75pt .75pt;" width="75"><p><span style="font-size: 8.5pt; font-family: Verdana; color: white;">,</span></p></td></tr></tbody></table><pre __default_attr="danger" __jive_macro_name="alert" alert="danger" class="jive_text_macro jive_macro_alert" data-renderedposition="2769.4833984375_8_902_64"><p>Please make sure to add the ones required. You can get this by browsing your LDAP or asking your LDAP administrator. Also validate the user and group transformation maps for the fields used. Note the transformation scripts can also reference some of these fields.</p></pre><p>Here is how it looks on the actual form:</p><p></p><p><img   alt="ad fields.jpg" class="image-14 jive-image" src="4e5e64cedb9857049c9ffb651f9619fc.iix" style="width: 620px; height: 294px; display: block; margin-left: auto; margin-right: auto;"/></p><p>Note the attributes are comma separated.</p><h3></h3><h2>Validate the LDAP OU Definitions</h2><p>The next step is to validate the <a title="ki.servicenow.com/index.php?title=LDAP_Integration_Setup#Example_OU_Definitions" href="http://wiki.servicenow.com/index.php?title=LDAP_Integration_Setup#Example_OU_Definitions">LDAP OU Definitions</a>. Once the LDAP server is created, Users and Group <a title="ocs.servicenow.com/integrate/ldap/task/t_DefineLDAPOrganizationalUnits.html" href="https://docs.servicenow.com/integrate/ldap/task/t_DefineLDAPOrganizationalUnits.html">LDAP OU Definitions</a> are created with it. Validate the filter contains the relevant LDAP attributes filters. The groups and users specified in the LDAP OU Definition will be used to determine authentication and who receives the imports.</p><p><img   alt="ou definition ldap server.jpg" class="image-15 jive-image" src="d02d63b5db981fc068c1fb651f96191b.iix" style="width: 620px; height: 232px; display: block; margin-left: auto; margin-right: auto;"/></p><p></p><p>If you feel confident with your LDAP OU definition filter, then you can alter them here. If like me, you prefer a flexible way to test them first (instead of changing the LDAP OU Definitions filter directly), use the 'browse' feature to validate the new filter, change it there, click filter for every change, check you received the results wanted, then come back later with the tuned tested filter. The 'Browse' link is just below the LDAP OU Definition table.</p><p></p><p><img   alt="validate ldap ou definition.jpg" class="image-16 jive-image" src="079299cedb54d304b322f4621f9619d9.iix" style="width: 620px; height: 169px; display: block; margin-left: auto; margin-right: auto;"/></p><p></p><p>With the LDAP Browse feature, you can set the filter, then click 'Filter' to validate that it retrieves the information required.</p><p><img   alt="validate ldap browser.jpg" class="image-17 jive-image" src="05803446dbd85f048c8ef4621f9619ef.iix" style="width: 620px; height: 253px; display: block; margin-left: auto; margin-right: auto;"/></p><p>Then copy the browse filter value and use it on the LDAP OU Definitions later.</p><p></p><p>Here is an example with 'Users' LDAP OU Definition:</p><p><img   alt="user ldap ou definition.jpg" class="image-18 jive-image" src="6481940adbd417049c9ffb651f9619f7.iix" style="width: 620px; height: 227px; display: block; margin-left: auto; margin-right: auto;"/></p><p></p><p>Similarly, you can validate the 'Group' LDAP OU Definition.</p><p></p><p>Don't say we didn't warn you, LDAP server are key for many features. Set the 'Attributes' field on the LDAP server definition to improve the data imports times and LDAP searches.</p><p></p><p>I performed my tests with LDAP Active Directory by Microsoft, an LDAP browser by Apache Directory Studio, on Geneva, within Chrome.</p><p></p><p></p><p>More information here:</p><p><a href="http://wiki.servicenow.com/index.php?title=LDAP_Integration_Troubleshooting#gsc.tab=0" title="http://wiki.servicenow.com/index.php?title=LDAP_Integration_Troubleshooting#gsc.tab=0">LDAP Integration Troubleshooting - ServiceNow Wiki</a></p><p><a href="http://wiki.servicenow.com/index.php?title=LDAP_Integration_via_MID_Server_Setup#gsc.tab=0" title="http://wiki.servicenow.com/index.php?title=LDAP_Integration_via_MID_Server_Setup#gsc.tab=0">LDAP Integration via MID Server Setup - ServiceNow Wiki</a></p><p><a href="http://wiki.servicenow.com/?title=LDAP_Integration#gsc.tab=0" title="http://wiki.servicenow.com/?title=LDAP_Integration#gsc.tab=0">LDAP Integration - ServiceNow Wiki</a></p><p><a href="http://wiki.servicenow.com/index.php?title=Setting_up_the_LDAP_Import_Map#gsc.tab=0" title="http://wiki.servicenow.com/index.php?title=Setting_up_the_LDAP_Import_Map#gsc.tab=0">Setting up the LDAP Import Map - ServiceNow Wiki</a></p><p><a title="LDAP import has a limit for length?" __default_attr="160068" __jive_macro_name="thread" class="jive_macro_thread jive_macro" data-orig-content="LDAP import has a limit for length?" data-renderedposition="4849.7333984375_8_237_17" href="/community?id=community_question&sys_id=bd89c3a5db5cdbc01dcaf3231f961958">LDAP import has a limit for length?</a></p><p><a title="LDAP: Not all AD Attributes get imported" __default_attr="815064" __jive_macro_name="message" class="jive_macro jive_macro_message" data-orig-content="LDAP: Not all AD Attributes get imported" data-renderedposition="4870.7333984375_8_274_17" href="/community?id=community_question&sys_id=15c7cbe9db1cdbc01dcaf3231f96194c">LDAP: Not all AD Attributes get imported</a></p><p><a href="http://www.servicenowelite.com/blog/2014/2/18/import-user-photo-from-ldap" title="http://www.servicenowelite.com/blog/2014/2/18/import-user-photo-from-ldap">Import User Photo from LDAP â ServiceNow ELITE.com</a></p>