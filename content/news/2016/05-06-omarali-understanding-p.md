---
title: "Understanding Probe Results Cache returning as Processed"
date: 2016-05-05T22:05:25.000Z
authors: ["omarali"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=ca7c62e1dbd0dbc01dcaf3231f9619eb"
---
<p>The <a title="ocs.servicenow.com/bundle/geneva-it-operations-management/page/product/discovery/reference/r_ECCQueue.html" href="https://docs.servicenow.com/bundle/geneva-it-operations-management/page/product/discovery/reference/r_ECCQueue.html">ECC queue</a> input payload field contains the execution results of a specific Discovery probe or an Orchestration activity. Therefore, it is considered invaluable source of debugging information when it comes to troubleshooting a failed Discovery or Orchestration activity or an unexpected results of those activities including errors and warnings returning from the target network devices.</p><p></p><p><a title="ocs.servicenow.com/bundle/geneva-it-operations-management/page/product/discovery/concept/c_Discovery.html" href="https://docs.servicenow.com/bundle/geneva-it-operations-management/page/product/discovery/concept/c_Discovery.html">Discovery</a> uses XML documents for the payload, and more often than not, these are considerably large documents. However, sometimes when you look at the payload field of an input<a title="ocs.servicenow.com/bundle/geneva-it-operations-management/page/product/discovery/reference/r_DiscoveryStatusECCQueue.html" href="https://docs.servicenow.com/bundle/geneva-it-operations-management/page/product/discovery/reference/r_DiscoveryStatusECCQueue.html"> ECC queue</a> record you only see the word '<em>processed'</em> there.</p><p></p><p><img   alt="processed cache.jpg" class="image-4 jive-image" src="d6973bfddb90d3049c9ffb651f9619f1.iix" style="width: 620px; height: 306px; display: block; margin-left: auto; margin-right: auto;"/></p><p></p><p>Then, if you try to view the payload as a formatted XML document by clicking on the XML button, you will only to get the error message: <em>This page contains the following errors: error on line 1 at column 39: Extra content at the end of the document [as seen in the screenshot below]. </em></p><p><img   alt="error on line 1 at column 39- Extra content at the end of the document .png" class="image-5 jive-image" src="a8699d82dbd0d7041dcaf3231f9619d3.iix" style="width: 620px; height: 152px; display: block; margin-left: auto; margin-right: auto;"/></p><p></p><p>Let's start with what the word '<em>Processed'</em> actually means. <a title="ocs.servicenow.com/bundle/geneva-it-operations-management/page/product/discovery/concept/c_DiscoveryProbesAndSensors.html" href="https://docs.servicenow.com/bundle/geneva-it-operations-management/page/product/discovery/concept/c_DiscoveryProbesAndSensors.html">Discovery performance is improved</a> by caching probes results on the instance and only processing results that have changed. Probe results that have not changed do not need sensor processing, and therefore, the sensor does not run. The cache is turned on by default for base system probes and sensors whose output is unlikely to change. The word '<em>Processed'</em> means that the probe results of that specific configuration item (CI) are cached and have already been 'Processed' and the payload hasn't changed since. The error seen later on, when clicking on the XML button, simply means that the word '<em>processed'</em> is not a valid XML document.</p><p></p><p>Sometimes, you will need to look at the original payload for debugging reasons but, by default, after 7 days the ECC queue records are rotated and the only thing you will see in the payload field of the cached probe is the word '<em>Processed'. </em> To get the original payload again you need to clear the cached probe result and run discovery again.<em> </em></p><p></p><h1>Clearing cache for a probe or configuration item pair</h1><p>Where are the cached results are stored and how can I clear cache for a specific Probe or CI pair? The probe results cache records are stored in the <a title="ocs.servicenow.com/bundle/geneva-it-operations-management/page/product/discovery/concept/c_ProbeResultCache.html" href="https://docs.servicenow.com/bundle/geneva-it-operations-management/page/product/discovery/concept/c_ProbeResultCache.html">Probe Results Cache</a> [discovery_probe_results_cache] table in a Key/Value pair format. Which may seem a bit ambiguous at first sight:</p><p></p><p><img   alt="discovery_probe_results_cache.jpg" class="image-6 jive-image" src="3f96f042dbdc57049c9ffb651f96193d.iix" style="width: 620px; height: 189px; display: block; margin-left: auto; margin-right: auto;"/></p><p></p><p>The secret to understand these values is to know that they are <a title="n.wikipedia.org/wiki/Base64" href="https://en.wikipedia.org/wiki/Base64">base64 encoded</a> in the following way:</p><ul><li>The "Key" value is the concatenation of the probe sys_id in base64 and the CI sys_id in base64.</li><li>The "Value" value is the <a title="n.wikipedia.org/wiki/Md5sum" href="https://en.wikipedia.org/wiki/Md5sum">MD5 checksum</a> of the probe result encoded in base64.</li></ul><p></p><p>This is an efficient way to compare new payload result against the cached value without actually having to save the entire payload as the payload of some probes could be huge.</p><p></p><h1>To find the cached result of the probe or CI:</h1><ol><li>Grab the sys_id of the probe you want to find its cached result. For example: The sys_id of 'Linux — Installed Software 'is 2C93A59C0A0A0A8B00D5F029CCAF5573</li><li>Convert the hex value of the sys_id to base64 using an online tool. For example: <a title="meko.net/online_tools/hex_to_base64.php?lang=en" href="http://tomeko.net/online_tools/hex_to_base64.php?lang=en">http://tomeko.net/online_tools/hex_to_base64.php?lang=en</a><p></p><p><em>*You should get a string like: LJOlnAoKCosA1fApzK9Vcw==</em></p><p></p></li><li>Grab the sys_id of the ci you want to find the probes results for and convert it to base64 (eg one of my linux test servers sys_id is D4AE1DEC4F3E960027B350AF0310C756 and its base64 string is 1K4d7E8+lgAns1CvAxDHVg==</li><li>Concatenate the base64 strings of steps 2 &amp; 3.</li></ol><p></p><p>You will get the following string: LJOlnAoKCosA1fApzK9Vcw==1K4d7E8+lgAns1CvAxDHVg== which is the 'key' value found in the Probe Results Cache [discovery_probe_results_cache] table for my linux test server for the payload returned by the 'Linux — Installed Software' probe.</p><p></p><p>Having a better understanding of how probe results cache works will help you be a better ServiceNow admin. Don't fret when you see 'Processed' in the payload field instead the actual payload, as this can be remedied by clearing the cache and reassessing the cached result.   I hope that after reading this post you now have a better understanding of how the probe results cache works and what it is for. As well as why the word <em>'Processed' is </em>seen in the payload field instead the actual payload. Most importantly, you now know how to delete the cached result of a specific Probe or CI, so you can get the original payload to be able to troubleshoot related issues.</p><p></p><p>Cheers,</p><p>Omar</p>