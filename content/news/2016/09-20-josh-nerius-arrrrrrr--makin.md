---
title: "Arrrrrrr Making your instance talk like a pirate in three easy steps using the Talk like a Pirate Translation API"
date: 2016-09-20T03:34:13.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=e13e6e6ddbd0dbc01dcaf3231f96194e"
---
<p>I know it's late in the day, but I couldn't pass up the opportunity to blog about <a title="n.wikipedia.org/wiki/International_Talk_Like_a_Pirate_Day" href="https://en.wikipedia.org/wiki/International_Talk_Like_a_Pirate_Day">International Talk Like a Pirate Day</a>.</p><p></p><p>In this quick tutorial, we'll create a simple scoped integration app that uses <a title="ithackday.com/arrpi.php" href="http://isithackday.com/arrpi.php">ARRPI</a>, the Talk like a Pirate translation API.</p><p></p><p>I've already created a skeleton (arrrrrr, see what I did there?) scoped app where I'll write my code, and I'll assume you know how to do the same (if not, check out <a title="eveloper.servicenow.com/app.do#!/training/article/app_store_learn_path_build_app_helsinki_c_LabOneDevPortal/app_store_learn_path_build_app_helsinki_t_CreateApplication.dita?v=helsinki" href="https://developer.servicenow.com/app.do#!/training/article/app_store_learn_path_build_app_helsinki_c_LabOneDevPortal/app_store_learn_path_build_app_helsinki_t_CreateApplication.dita?v=helsinki">Building a ServiceNow Application</a> on the Developer Portal).</p><p></p><h2>1. Configure a REST Message</h2><h2></h2><p></p><p>From Studio, <strong>Create New Application File &gt; REST Message</strong> with the following details:</p><p></p><ul><li><strong>Name</strong>: Talk Like a Pirate API</li><li><strong>Endpoint</strong>: <a href="http://isithackday.com/arrpi.php" title="http://isithackday.com/arrpi.php">http://isithackday.com/arrpi.php</a></li></ul><p></p><p><strong>Open</strong> the automatically generated <strong>get</strong> method:</p><p><img   alt="Talk_Like_a_Pirate___Unlinked_get_method.png" class="image-2 jive-image" src="b303b731db505704ed6af3231f961919.iix" style="height: auto;"/></p><p></p><p><strong>Create</strong> two HTTP Query Parameters:</p><p><img   alt="Talk_Like_a_Pirate___Unlinked.png" class="image-1 jive-image" height="229" src="b894d8cedb905344e9737a9e0f9619a1.iix" style="height: 229px; width: 616.295px;" width="616"/></p><p></p><p>Navigate back to the REST Message, and from the <strong>Related Lists</strong> section, create a new<strong> Variable Substitution</strong> so we can test our call:</p><p><img   alt="Talk_Like_a_Pirate___var_sub.png" class="image-3 jive-image" src="5168914adb5c9f048c8ef4621f961964.iix" style="width: 620px; height: 173px;"/></p><p></p><p>Test everything out by clicking the <strong>Test</strong> related link:</p><p><img   alt="Talk_Like_a_Pirate___test.png" class="image-4 jive-image" src="4a56f8cedb9c57049c9ffb651f961949.iix" style="height: auto;"/></p><p>With any luck, we should see a result that looks like this:</p><p><img   alt="Talk_Like_a_Pirate___test_run.png" class="image-5 jive-image" src="d381504adbd417049c9ffb651f96199f.iix" style="width: 620px; height: 250px;"/></p><p></p><p>We're now ready to start consuming the API elsewhere in the platform.</p><p></p><h2>2. Create a Business Rule</h2><p></p><p>Now we'll create a business rule to execute our piratey logic.</p><p></p><p>From Studio, <strong>Create New Application File &gt; Business Rule</strong> with the following details:</p><p></p><ul><li><strong>Name</strong>: Translate, Arrrrrrrr</li><li><strong>Table</strong>: Task</li><li><strong>Advanced</strong>: checked</li><li><strong>When</strong>: async</li><li><strong>Insert</strong>: checked</li><li><strong>Condition</strong>: new GlideDate().getByFormat('yyyy-MM-dd').endsWith('09-19')</li></ul><p></p><p><strong>Script</strong>:</p><p></p><p><strong>Note</strong>: you'll need to update lines 3 and 22 depending on the name of your application scope. Replace x_48785_tlap with your application's scope name.</p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14743232077954896 jive_text_macro" data-renderedposition="1932.96875_8_1177_576" jivemacro_uid="_14743232077954896"><p>(function executeRule(current, previous /*null when async*/) {</p><p>   // Let's decide which fields to translate</p><p>   var fields = gs.getProperty('x_48785_tlap.fields_to_translate').split(',');</p><p>   var value;</p><p>   var translated;</p><p></p><p>   // Use some ECMA5 goodness to loop through the fields</p><p>   fields.forEach(function(field) {</p><p>           var value = current.getValue(field);</p><p></p><p>           // If the field holds a value, translate it! </p><p>           if (value) {</p><p>                   translated = englishToPirate(current.getValue(field));</p><p>                   current.work_notes += 'Pirate ' + current[field].getLabel() + ': ' + translated + '\n';</p><p>           }</p><p>   });</p><p></p><p>   current.update();</p><p></p><p>})(current, previous);</p><p></p><p>// Encapsulate our translation logic so it's easy to reuse</p><p>function englishToPirate(text) {</p><p>   try {</p><p>           var r = new sn_ws.RESTMessageV2('x_48785_tlap.Talk Like a Pirate API', 'get');</p><p>           r.setStringParameter('text', text);</p><p></p><p>           var response = r.execute();</p><p>           var responseBody = response.getBody();</p><p>           var httpStatus = response.getStatusCode();</p><p>           var responseObj = JSON.parse(responseBody);</p><p>           return responseObj.translation.pirate || '';</p><p>   } catch(ex) {</p><p>           var message = ex.getMessage();</p><p>   }</p><p>}</p></pre><p></p><h2>3. Create a System Property</h2><p></p><p>Finally, let's create a system property to control which fields get translated.</p><p></p><p>From Studio, <strong>Create New Application File &gt; System Property</strong> with the following values:</p><p></p><ul><li><strong>Suffix</strong>: fields_to_translate</li><li><strong>Type</strong>: string</li><li><strong>Value</strong>: short_description,description</li></ul><p></p><h2>Let's try it out!</h2><p></p><p>Go create a new incident and give it a short description of "Hello my friend, do you know where I can find a printer around here?". If everything worked correctly, we should see a work note   after a few moments:</p><p></p><p><img   alt="INC0010016___ServiceNow_translated.png" class="image-6 jive-image" src="6d7f6339db9c1704ed6af3231f9619b2.iix" style="width: 620px; height: 126px;"/></p><p></p><h2><strong>Conclusion</strong></h2><p></p><p>This may seem like a silly example, but it demonstrates a fairly common integration scenario: make a call to an external API when a record is created and do something with the result. It also shows that it really is this easy to set up an integration with an external REST API. It took me about an hour to create the app and write this blog post, and while talking like a pirate requires less care and planning than a production integration, setting up a simple call to an external API may not be as hard as as you think.</p><p></p><p>If you'd like to play with this on your own, my sample code is available in a <a title="ithub.com/jnerius/sn-arrpi-integration" href="https://github.com/jnerius/sn-arrpi-integration">public github repo here</a>. Feel free to fork this and talk like a pirate to your heart's content.</p><p></p><p>Arrrrrrr.</p><p></p><p></p><p class="p1"><span class="s1" style="font-family: 'andale mono', times;">/**</span></p><p class="p1"><span class="s1" style="font-family: 'andale mono', times;"><strong> </strong>*<strong> Josh Nerius</strong> | Developer Evangelist</span></p><p class="p1"><span style="font-family: 'andale mono', times;"><span class="s1"> * Service</span><span class="s2" style="color: #e23d39;"><strong>Now</strong></span><span class="s3"><strong> </strong></span><span class="s1">| The Enterprise Cloud Company</span></span></p><p class="p1"><span class="s1" style="font-family: 'andale mono', times;"> * (m) 312-600-4994 | Chicago, IL | Central Time</span></p><p class="p3"><span style="font-family: 'andale mono', times;"><span class="s4"> </span><span class="s5">* Get started at <a href="https://developer.servicenow.com/"><span class="s6">developer.servicenow.com</span></a> </span></span></p><p class="p4"><span class="s1" style="font-family: 'andale mono', times;"> */</span></p>