---
title: "Reference Fields with the snRecordPicker Directive"
date: 2016-07-26T02:56:36.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=54bde6a9dbd0dbc01dcaf3231f96193f"
---
<p style="margin-bottom: 20px; color: #333333; font-family: 'Open Sans', Helvetica, sans-serif;">One of the very powerful directives available in Service Portal that we will be covering today is the snRecordPicker. This directive generates a field very similar to a reference field in the platform. This is very useful when creating custom widgets that will be interacting with tables and records in ServiceNow.</p><p style="margin-bottom: 20px; color: #333333; font-family: 'Open Sans', Helvetica, sans-serif;"><strong>The Directive:</strong></p><pre __default_attr="php" __jive_macro_name="code" class="jive_macro_code jive_text_macro _jivemacro_uid_14694832711151106" data-renderedposition="111_8_1192_16" jivemacro_uid="_14694832711151106"><p>&lt;sn-record-picker field="location" table="'cmn_location'" display-field="'name'" value-field="'sys_id'" search-fields="'name'" page-size="100" &gt;&lt;/sn-record-picker&gt;</p></pre><p style="margin-bottom: 20px; color: #333333; font-family: 'Open Sans', Helvetica, sans-serif;"><span style="line-height: 1.5;"><br/>It supports the following properties:</span></p><table border="1" cellpadding="2" cellspacing="0" style="color: #333333; font-family: 'Open Sans', Helvetica, sans-serif;" width="100%"><tbody><tr><th>Property</th><th>Description</th></tr><tr><td>field</td><td>a JavaScript object consisting of "displayValue", "value" and "name"</td></tr><tr><td>table</td><td>the table to pull records from</td></tr><tr><td>default-query</td><td>the query to apply to the table</td></tr><tr><td>display-field (or display-fields)</td><td>the display field</td></tr><tr><td>value-field</td><td>the value field (usually sys_id)</td></tr><tr><td>search-fields</td><td>the fields to search</td></tr><tr><td>page-size</td><td>number of records to display in dropdown</td></tr></tbody></table><p><span style="margin-bottom: 20px; color: #333333; font-family: 'Open Sans', Helvetica, sans-serif;"> </span><span style="margin-bottom: 20px; color: #333333; font-family: 'Open Sans', Helvetica, sans-serif;"><br/>To use the snRecordPicker you will also need to create the "field" object in your controller as well as listen for the "field.change" event.</span></p><p></p><p><span style="margin-bottom: 20px; color: #333333; font-family: 'Open Sans', Helvetica, sans-serif;"><strong>The Controller:</strong></span></p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code jive_text_macro _jivemacro_uid_14694833730227817" data-renderedposition="520_8_1192_272" jivemacro_uid="_14694833730227817"><p>$scope.location = {</p><p>       displayValue: c.data.loc.name,</p><p>       value: c.data.loc.sys_id,</p><p>       name: 'location'</p><p>};</p><p></p><p></p><p>$scope.$on("field.change", function(evt, parms) {</p><p>       if (parms.field.name == 'location')</p><p>               c.data.setLocation = parms.newValue;</p><p>       </p><p>       c.server.update().then(function(response) {         </p><p>               spUtil.update($scope);</p><p>       })</p><p>});</p><p></p><p></p></pre><p></p><p style="margin-bottom: 20px; color: #333333; font-family: 'Open Sans', Helvetica, sans-serif;"><strong>The Widget:</strong></p><p style="margin-bottom: 20px; color: #333333; font-family: 'Open Sans', Helvetica, sans-serif;"><strong><img   alt="snrecordpicker.jpg" class="image-1 jive-image" src="35af85c2dbd413043eb27a9e0f9619dd.iix" style="width: 620px; height: 286px;"/></strong></p><p style="margin-bottom: 20px; color: #333333; font-family: 'Open Sans', Helvetica, sans-serif;">I've created a sample address picker widget that allows the user to select a location, and then retrieves the record from the server and populates several other fields with the information. The widget is available for download on Share: <a title="hare.servicenow.com/app.do#/detailV2/86b23f151370e2001d2abbf18144b0aa/overview" href="https://share.servicenow.com/app.do#/detailV2/86b23f151370e2001d2abbf18144b0aa/overview" style="color: #dd3939; background-color: initial;">https://share.servicenow.com/app.do#/detailV2/86b23f151370e2001d2abbf18144b0aa/overview</a></p>