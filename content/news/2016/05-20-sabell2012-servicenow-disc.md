---
title: "ServiceNow Discovery  Virus Scanners And MID Server Performance"
date: 2016-05-19T21:26:09.000Z
authors: ["sabell2012"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=fbdcaa65dbd0dbc01dcaf3231f961918"
---
<p style="font-family: arial, sans-serif; color: #666666;"><span style="font-weight: inherit; font-family: inherit; font-style: inherit;"><strong>NOTE</strong></span>: ON APRIL 1, 2016 ACCENTURE COMPLETED THE ACQUISITION PROCESS OF CLOUDSHERPAS.   AT THAT TIME THE CLOUDSHERPAS BLOG SITES WERE DOWNED FOREVER.</p><p></p><p style="font-family: arial, sans-serif; color: #666666;">THIS IS THE RE-PUBLICATION OF MY ARTICLE FROM <span style="font-weight: inherit; font-family: inherit; font-style: inherit;"><strong>January 20, 2015</strong></span> ON THE CLOUDSHERPAS SERVICENOW DISCOVERY 101 BLOG.</p><p style="font-family: arial, sans-serif; color: #666666;">____________________________________________________________________________</p><p></p><p></p><p dir="ltr"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif; color: #000000;">Virus scanners focus on the c:\windows\temp directory. Unfortunately, this is also the directory that the ServiceNow MID Server uses out-of-the-box. As a result, if you are running a lot of Discovery jobs on a particular MID Server and your security admins have installed a virus scanner on that same device, you will probably see a performance hit. Since most virus scanners do not allow the exclusion of this directory, you need to change the directory that the MID Server uses to resolve this issue. Doing so will allow your security admins to white-list that new directory and, thus, remove the performance hit.</span></p><p dir="ltr"></p><p></p><p dir="ltr"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif; color: #000000; font-weight: bold;">To change the temporary directory that a MID Server uses, follow these steps:</span></p><p></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">1. From the MID Server machine, navigate to "c:\ServiceNow\&lt;machine name&gt;\agent\conf" (or wherever you have your MID Server files)</span></p><p></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">2. Edit the file: <strong>wrapper.conf</strong></span></p><p></p><p><span dir="ltr" style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">3. Add this configuration line to the line following the "# Java Additional Parameters" section:</span></p><p></p><p style="padding-left: 30px;"><span dir="ltr" style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">wrapper.java.additional.2=-Djava.io.tmpdir=./<span style="font-weight: bold;">MIDTemp</span><br class="kix-line-break"/><br class="kix-line-break"/>(this can be any arbitrary name you want to give your temp directory)</span></p><p style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span dir="ltr"><span style="color: #000000;"><br class="kix-line-break"/></span><span style="color: #000000;"><img class="jive-image" height="303" src="https://lh6.googleusercontent.com/wTcQBJKAPe5lPlU22ag_yzPAd7jLkXK5y82ANTAYgl5jrVd8AaZP4dVs2tjXt_JaTf0e-LXCq4Sw7OaipPVKfa_p7kb0A5B-La_4m6X_ozQcio6Yy6_GPWW02PbWD07EoCsDVfg" style="border-style: none; display: block; margin-left: auto; margin-right: auto;" width="768"/></span></span></span></p><p style="padding-left: 30px;"></p><p style="padding-left: 30px;"></p><p style="padding-left: 30px;"></p><p></p><p style="padding-left: 30px;"><span style="color: #000000; font-size: 12pt; font-family: arial, helvetica, sans-serif; line-height: 1.5;"><strong>Notes: </strong></span><br/><span style="font-size: 16px; line-height: 24px; font-family: arial, helvetica, sans-serif;"><br/></span></p><ul><li><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt; line-height: 1.5;">"additional.1" should be for glide.properties (wrapper.java.additional.1=-Djava.io.tmpdir=../temp)</span></li><li><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt; line-height: 1.5;">Ignore any dire warnings embedded in the config file that say "Don't change this file"</span></li><li><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt; line-height: 1.5;">I have noticed that there are times when the wrapper.conf "resets" to the original version. If your performance suddenly takes a nose-dive, you might check to see if this </span><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt; line-height: 1.5;">has happened. I believe it was an earlier bug in the wrapper service that has since been corrected, as I have not seen it occur for awhile (especially since Eureka).</span></li><li><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt; line-height: 1.5;">There is by default a .2 and a .3. These are normally commented out. Feel free to make your new entry .4 if necessary.</span></li></ul><p></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt; line-height: 1.5;">4. <strong>Save</strong></span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt; line-height: 1.5;">5. Navigate to "c:\ServiceNow\&lt;machine name&gt;\agent" and create a new directory folder named: MIDTemp</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><br/><span style="color: #000000;"><img class="jive-image" height="408" src="https://lh4.googleusercontent.com/np0dY4qun2pCMwDodP0PaAU4ogKm7EqC0AbZNQsyNa5Dxg1FrqotGCfoTnaTocQXs8UidFc0vaP-UJs9ydLzGEnIXZjq0W0hi73tylH_jKuXKIBI_JKRZww8Mu2AUQB3fijBbeQ" style="border-style: none; display: block; margin-left: auto; margin-right: auto;" width="615"/></span></span><span dir="ltr" style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">6. Restart the ServiceNow MID Server service</span></p><p></p><p style="padding-left: 30px;"><span dir="ltr" style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><strong>NOTE:</strong> Changes to wrapper sometimes require that the service be re-installed. This will require use of the sc delete command.</span><span dir="ltr" style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"> Open a command line and run: sc delete "<span style="font-weight: bold;">Service-Now MID Server</span>" where the bold portion matches the name of the service (in case you've renamed it).   </span><span dir="ltr" style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">Then, run the MID Server start.bat to re-install and restart the service.</span></p><p></p><p><span dir="ltr" style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"></span><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">7. Navigate to the MIDTemp directory and note creation of the temporary files. The MID Server is pretty fast to write and delete these, so you might have to stare for a bit. It took me a couple of tries just to get a screen shot!</span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><br/><span style="color: #000000;"><img class="jive-image" height="277" src="https://lh6.googleusercontent.com/3jdYzpvs2XaaDEUHZCqGOXNZy89keTjGNSJOXI1UwouNDBugTtn-hN05q53CJMH2JDY-VbqiqNqTPHd6x5AC_PlAuJaLcll1Vs00482ILpbsAjWxfrpVjLsXGqdDdIffo2sI1IM" style="border-style: none; display: block; margin-left: auto; margin-right: auto;" width="721"/></span><br/></span></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">8. Now all that's left is to contact your security administrator to exclude the new directory from the virus scanner's list (white-list)!</span></p><p></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">You should notice a significant performance increase and a major reduction in the amount of CPU and resources being used.</span></p><p></p><h3 dir="ltr" style="margin-top: 8pt;"><span style="font-family: arial, helvetica, sans-serif; color: #666666; font-size: 12pt;">Learn More</span></h3><p></p><p><span style="color: #000000; font-size: 12pt; font-family: arial, helvetica, sans-serif;">If you're interested in learning more about the available configurations in the wrapper service application, check out these links:</span></p><p></p><ul><li><span dir="ltr" style="margin-top: 11pt; margin-bottom: 4pt; font-family: arial, helvetica, sans-serif; font-size: 12pt;"><a href="http://wrapper.tanukisoftware.com/doc/english/properties.html"><span style="color: #1155cc; text-decoration: underline;">Wrapper Config Properties</span></a></span></li><li><span dir="ltr" style="margin-bottom: 4pt; font-family: arial, helvetica, sans-serif; font-size: 12pt;"><a href="http://wrapper.tanukisoftware.com/doc/english/props-example-config.html"><span style="color: #1155cc; text-decoration: underline;">Wrapper Config Property Examples</span></a></span></li></ul><p style="font-family: arial, sans-serif; color: #666666;"></p><p dir="ltr" style="font-family: arial, sans-serif; color: #666666;"><span style="font-weight: inherit; font-style: inherit; font-size: 16px; font-family: arial, helvetica, sans-serif;">Steven Bell</span></p><p dir="ltr"></p><p style="margin-bottom: 0.0001pt; font-family: arial, sans-serif; color: #666666; background: white;"><span style="color: purple; font-weight: inherit; font-size: 12pt; font-family: inherit; font-style: inherit;"><strong>If you find this article helps you, don't forget to log in and "like" it!</strong></span></p><p></p><p style="margin-bottom: 0.0001pt; font-family: arial, sans-serif; color: #666666; background: white;"><span style="color: purple; font-weight: inherit; font-size: 12pt; font-family: inherit; font-style: inherit;"><strong>Also, if you are not already, I would like to encourage you to become a member of our blog!</strong></span></p><p></p><p style="margin-bottom: 0.0001pt; font-family: arial, sans-serif; color: #666666; background: white;"><span style="color: purple; font-weight: inherit; font-size: 12pt; font-family: inherit; font-style: inherit;"><strong><a _jive_internal="true" href="/servlet/JiveServlet/downloadImage/38-5356-103436/accenture technology logo.png" style="font-weight: inherit; font-style: inherit; font-family: inherit; color: #266fc8;"><img   alt="accenture technology logo.png" class="image-1 jive-image" height="52" src="7ff15582db10d7041dcaf3231f9619a3.iix" style="margin: 10px 10px 10px 0; border: 0px; font-weight: inherit; font-style: inherit; font-family: inherit;" width="277"/></a><a _jive_internal="true" href="/servlet/JiveServlet/downloadImage/38-5356-103437/sn-community-mvp.png" style="font-weight: inherit; font-style: inherit; font-family: inherit; color: #266fc8;"><img   alt="sn-community-mvp.png" class="image-2 jive-image" height="48" src="ae2e2c0edb549344e9737a9e0f961920.iix" style="margin: 10px 10px 10px 0; border: 0px; font-weight: inherit; font-style: inherit; font-family: inherit;" width="135"/></a></strong></span></p><p style="margin-bottom: 0.0001pt; font-family: arial, sans-serif; color: #666666; background: white;"></p><p style="margin-bottom: 0.0001pt; font-family: arial, sans-serif; color: #666666; background: white;"><span style="font-family: arial, sans-serif; color: #666666;"><strong>For a list of all of my articles:   <a title="" _jive_internal="true" data-containerid="1027" data-containertype="37" data-objectid="4821" data-objecttype="38" href="/groups/servicenow-user-group-us-tx-north-texas/blog/2015/10/23/community-code-snippets-articles-list-to-date" style="font-weight: inherit; font-style: inherit; font-family: inherit; color: #266fc8;">Community Code Snippets: Articles List to Date</a></strong></span></p>