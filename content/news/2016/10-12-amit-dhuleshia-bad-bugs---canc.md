---
title: "Bad Bugs  Canceling ImportExports causing MID to hang"
date: 2016-10-11T18:15:10.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=ad8ce6e1dbd0dbc01dcaf3231f96192c"
---
<p><span style="font-weight: inherit; font-size: 12pt; font-family: Verdana; font-style: inherit;"><strong style="font-style: inherit;">Affected Customers</strong></span></p><p style="font-family: 'Helvetica Neue';"></p><p style="color: #666666; font-family: 'Helvetica Neue';"><span style="font-weight: inherit; font-size: 12px; font-family: Verdana; font-style: inherit;">Customers that cancel import/export in Geneva or Helsinki will be affected.</span></p><p style="font-family: 'Helvetica Neue';"></p><div><span style="font-weight: inherit; font-size: 16px; font-family: Verdana; font-style: inherit;"><strong style="font-style: inherit;">Problem Symptoms</strong></span></div><div> </div><ul><li><span style="font-size: 12px; font-family: Verdana;">CancelProbe is not getting processed - stays in the ecc_queue output ready state.</span></li><li><span style="font-size: 12px; font-family: Verdana;">Nullpointer exceptions in the MID Server logs</span><ul><li><span style="color: #455464; font-size: 12px; font-family: Verdana;">07/29/16 20:18:11 (708) ECCQueueMonitor.5 WARNING *** WARNING *** No probe registered to cancel for a given agent correlator 5037ad6713xxxxxxx128144b03b </span></li><li><span style="color: #455464; font-size: 12px; font-family: Verdana;">07/29/16 20:18:11 (708) ECCQueueMonitor.5 SEVERE *** ERROR *** java.lang.NullPointerException </span></li></ul></li><li><span style="color: #455464; font-size: 12px; font-family: Verdana;">MID Server slow in processing items or not processing items at all</span></li></ul><p><span style="color: #666666; font-weight: inherit; font-size: 12pt; font-family: Verdana; font-style: inherit;"><strong style="font-style: inherit;">Problem</strong></span></p><p></p><p><span style="color: #666666; font-size: 12px; font-family: Verdana;">Due to a PRB introduced in Geneva, CancelProbe throws a nullpointer exception. As a result this item never gets processed - even worse, it keeps getting processed over and over again. The nullpointer exception keeps getting thrown and it consumes worker threads on the MID Server and causes the MID Server to slow processing and never processes the cancelprobe.</span><span style="color: #666666; font-family: Verdana;"> </span></p><p></p><p><span style="color: #666666; font-weight: inherit; font-size: 12pt; font-family: Verdana; font-style: inherit;"><strong style="font-style: inherit;">Workaround</strong></span></p><p></p><p><span style="color: #000000; font-size: 12px; font-family: Verdana;">Find and update the ECC Queue records that are causing the issue.</span><span style="color: #000000; font-size: 12px; font-family: Verdana;">For example, following the scenario in the Steps to Reproduce of cancelling an impor:</span></p><ol style="color: #000000;"><li><span style="font-size: 12px; font-family: Verdana;">Navigate to <strong>ECC</strong> &gt; <strong>Queue</strong>.</span></li><li><span style="font-size: 12px; font-family: Verdana;">Set the following filters:</span><ul><li><span style="font-size: 12px; font-family: Verdana;">Agent is the affected MID Server (for example, mid.server.my-mid-server)</span></li><li><span style="font-size: 12px; font-family: Verdana;">Topic is CancelProbe</span></li><li><span style="font-size: 12px; font-family: Verdana;">Queue is 'output'</span></li><li><span style="font-size: 12px; font-family: Verdana;">State is 'ready'</span></li></ul></li><li><span style="font-size: 12px; font-family: Verdana;">For each record, set the value of State to 'processed' and update the record.</span></li></ol><p style="color: #000000; font-size: 11px;"><span style="font-size: 12px; font-family: Verdana;"><strong>Note</strong>: When testing this workaround, you do not have to restart the MID Server. However, if the issue persists after all ECC Queue records are updated, a restart might be necessary.</span></p><p style="font-family: 'Helvetica Neue';"><span style="color: #666666; font-family: Verdana;"> </span></p><div><span style="color: #666666; font-weight: inherit; font-size: 12pt; font-family: Verdana; font-style: inherit;"><strong style="font-style: inherit;">Fix</strong></span></div><div> </div><p style="font-family: 'Helvetica Neue';"> Â  <span style="font-size: 12px; font-family: 'Helvetica Neue';"><span style="color: #666666; font-family: Verdana;">The issue (</span><span style="color: #485563; font-family: SourceSansPro, 'Helvetica Neue', Arial;">PRB665835) </span><span style="color: #666666; font-family: Verdana;">has been fixed in Istanbul and backported to GP8 and HP4. Please find more information on this KB0597640</span></span></p>