---
title: "MiniLab Retrieving and Parsing the JSON Results From a REST Web Service"
date: 2016-09-06T11:50:18.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=6aac6625dbd0dbc01dcaf3231f96196d"
---
<p dir="ltr"><span style="font-size: 10.6667px; font-family: 'Times New Roman'; color: #666666; font-weight: bold;">NOTE</span><span style="font-size: 10.6667px; font-family: Arial; color: #666666;">: </span><span style="font-size: 10.6667px; font-family: 'Times New Roman'; color: #666666;">MY POSTINGS REFLECT MY OWN VIEWS AND DO NOT NECESSARILY REPRESENT THE VIEWS OF MY EMPLOYER, ACCENTURE. </span></p><p dir="ltr"></p><p dir="ltr"><span style="font-family: 'Times New Roman'; color: #666666;">DIFFICULTY LEVEL:   </span><span style="font-family: 'Times New Roman'; color: #7f6000; font-weight: bold;">INTERMEDIATE</span></p><p dir="ltr"><span style="font-family: 'Times New Roman'; color: #666666;">Assumes some knowledge and/or familiarity of scripting, and REST web services in ServiceNow</span></p><p dir="ltr"><span style="font-family: Arial; color: #666666;">____________________________________________________________________________</span></p><p></p><p dir="ltr"><span style="font-size: 16px; font-family: Arial; color: #000000;">Recently I had to create a REST Web Message to retrieve information from a server.   It occurred to me that there really had not been many examples written on this for ServiceNow.   At least from the code perspective.   So I thought I would share.   This really isn't that complicated, and you should be able to glean what you need from the ServiceNow wiki, but I thought I would present a working example to play with anyway.</span></p><p></p><p dir="ltr"><span style="font-size: 16px; font-family: Arial; color: #000000;">In this example we will be using a test REST web service site called: 'cat-facts'.   This will return a success string (true/false), and from 1 to any number we specify; of facts about cats.</span></p><p dir="ltr"></p><p dir="ltr"><span style="font-size: 16px; font-family: Arial; color: #000000;">The idea here is to retrieve data from a REST Web Service and then parse the results into a JSON object for further use.</span></p><p></p><p dir="ltr"><span style="font-size: 16px; font-family: Arial; color: #000000;">What is needed:</span></p><p></p><ol><li><span dir="ltr" style="font-size: 12pt;">Web Service end-point.   This will be:</span><ol><li><span dir="ltr" style="margin-bottom: 7pt; font-size: 12pt;"><a href="http://www.programmableweb.com/api/cat-facts?number="><span style="color: #1155cc; text-decoration: underline;">http://www.programmableweb.com/api/cat-facts?number=</span></a>&lt;&lt;some number&gt;&gt;</span></li><li><span dir="ltr" style="margin-bottom: 7pt; font-size: 12pt;">If the number is not provided it is automatically assumed to be 1.</span></li></ol></li><li><span dir="ltr" style="font-size: 12pt;">ServiceNow REST Message</span></li><li><span dir="ltr" style="font-size: 12pt;">Fix Script to run our test code and parse the results</span></li></ol><p></p><p><span><span><br/><span style="color: #000000; font-weight: bold; font-size: 18.6667px; font-family: Arial; margin-bottom: 7pt;">Lab 1.1: Creating the Rest Message</span></span></span></p><p></p><ol><li><span dir="ltr" style="font-size: 12pt;">Navigate to System Web Services -&gt; Outbound -&gt; REST Message.   The REST Message list view will be displayed.</span></li><li><span dir="ltr" style="font-size: 12pt;">Click on the New button to create a new REST Message.   The new REST Message form will appear.</span></li><li><span dir="ltr" style="font-size: 12pt;">Fill in the form with the following:</span><ol><li><span dir="ltr" style="font-size: 12pt;"><span style="font-weight: bold;">Name</span>: CatFacts</span></li><li><span dir="ltr" style="font-size: 12pt;"><span style="font-weight: bold;">Endpoint</span>: <span style="color: #278efc; text-decoration: underline;"><a title="" _jive_internal="true" href="http://catfacts-api.appspot.com/api/facts" rel="nofollow" target="_blank">http://catfacts-api.appspot.com/api/facts</a></span></span></li><li><span dir="ltr" style="font-size: 12pt;"><span style="font-weight: bold;">Accessible from</span>: All application scopes</span></li><li><span dir="ltr" style="margin-bottom: 7pt; font-size: 12pt;">Right-click on the form header and choose Save.   This will auto-generate four HTTP methods (get, put, post, delete).   We will only be using "get" for the purposes of this article.</span></li></ol></li></ol><p><span><span><br/><span style="color: #000000; font-size: 14.6667px; font-family: Arial;"><img class="jive-image" height="361" src="https://lh5.googleusercontent.com/UCb9xGn7eVeV37nR5W-Buwax1acdGalmzb7sr4ngXf2D8_nO12fdl36jOsUuOSZJGB1WavFVvSea3itMnXSosLZJnwVK848mb0R2FVhyOJv_BTG9ljZApivkuhuRPWCnbcFLIxbU" style="border-style: none;" width="624"/></span></span></span></p><p><span><span><br/><span style="margin-left: 72pt; color: #000000; font-size: 16px; font-family: Arial;">5. In the HTTP Methods related list click on the "get" method.   This will open the Method form.</span></span></span></p><p><span><span><span dir="ltr" style="margin-left: 72pt;"><span style="font-size: 16px; font-family: Arial; color: #000000;">6. Change the </span><span style="font-size: 16px; font-family: Arial; color: #000000; font-weight: bold;">Endpoint </span><span style="font-size: 16px; font-family: Arial; color: #000000;">to: <a title="" _jive_internal="true" href="http://catfacts-api.appspot.com/api/facts" style="font-size: 16px; font-family: arial, sans-serif; color: #266fc8;">http://catfacts-api.appspot.com/api/facts?number=${number}</a></span></span></span></span></p><p><span><span><br/><img  class="image-1 jive-image" src="e1e4e58adb50d7049c9ffb651f961929.iix" style="max-width: 1200px; max-height: 900px;"/><br/><span style="margin-left: 72pt; color: #000000; font-size: 16px; font-family: Arial;">7. Right-click on the form header, and save your work.</span></span></span></p><p><span style="margin-left: 72pt; color: #000000; font-size: 16px; font-family: Arial;">8. Scroll to the bottom of the form and from the Variable Substitution related list click the New button.   </span></p><p><span style="margin-left: 72pt; color: #000000; font-size: 16px; font-family: Arial;">This will display the New Variable form.</span></p><p><span style="margin-left: 72pt; color: #000000; font-size: 16px; font-family: Arial;">9. Fill out the form with the following:</span></p><p><span><span><span dir="ltr" style="margin-left: 108pt;"><span style="font-size: 16px; font-family: Arial; color: #000000;">a. </span><span style="font-size: 16px; font-family: Arial; color: #000000; font-weight: bold;">Name</span><span style="font-size: 16px; font-family: Arial; color: #000000;">: number</span></span></span></span></p><p><span><span><span dir="ltr" style="margin-left: 108pt;"><span style="font-size: 16px; font-family: Arial; color: #000000;">b. </span><span style="font-size: 16px; font-family: Arial; color: #000000; font-weight: bold;">Test Value</span><span style="font-size: 16px; font-family: Arial; color: #000000;">: 5</span></span></span></span></p><p style="padding-left: 30px;"><span><span><span dir="ltr" style="margin-left: 108pt;"><span style="font-size: 16px; font-family: Arial; color: #000000; font-weight: bold;">Note</span><span style="font-size: 16px; font-family: Arial; color: #000000;">: we will be pulling back five facts about cats.</span></span></span></span></p><p><span style="margin-left: 108pt; color: #000000; font-size: 16px; font-family: Arial;">c. Click Submit to save the variable.   This will take you back to the Method form.</span></p><p><span><span><br/><span style="color: #000000; font-size: 14.6667px; font-family: Arial;"><img class="jive-image" height="156" src="https://lh4.googleusercontent.com/vC9Gtm8CWqPLQyxTHDgWieWGVhqzG2fXFGUz5DRaem3_dQaRVAzaSkXr527UW_jVtzzsfVObG-oJhoe3EFO4F-CJdBaYfDstyWuKwiG-Tc3-LYmSm2QKW_XstT631jPMceTWSeqo" style="border-style: none;" width="624"/></span></span></span></p><p><span><span><br/><span style="margin-left: 72pt; color: #000000; font-size: 16px; font-family: Arial;">10. Scroll down to the bottom of the Method form, and choose the "Test" link under the related links.   </span></span></span></p><p><span style="margin-left: 72pt; color: #000000; font-size: 16px; font-family: Arial;">This will execute the REST Message with the number value of 5.   </span></p><p><span><span><br/><span style="color: #000000; font-size: 14.6667px; font-family: Arial;"><img class="jive-image" height="324" src="https://lh5.googleusercontent.com/0_GfnZp4d9t5aFWtLEUXcIC_EqcqFI1MlYuMd0TXT88JxYyRDqlgqIpPr0HPR7KvnQyUwHwIwsNu0393fd6NHu_zHPOBD6xOUtenk_jG0MRywFIp9PmCNM9mC9mpomyu4dBL8hDZ" style="border-style: none;" width="624"/></span></span></span></p><p><span><span><br/><span style="margin-left: 72pt; color: #000000; font-size: 16px; font-family: Arial;">11. You should get a 200 result (success), and five facts about cats!</span></span></span></p><p><span><span><br/><span style="color: #000000; font-size: 14.6667px; font-family: Arial;"><img class="jive-image" height="188" src="https://lh6.googleusercontent.com/-7aQoGXrqfaunqksHw026lWWBfKMOT8UrMBpIyux7IzY1nNQk9mb7Rmv1saj9IgInG044JaJSfyGgf2tmt8OteJIWMzFqHcAT-Ki_WiU9jCYUmIry6adMMUL0JxAH6tuqVz7RkMp" style="border-style: none;" width="624"/></span><br/></span></span></p><p></p><p><span><span><span style="color: #000000; font-size: 16px; font-family: Arial;">Our REST Message is now ready to be consumed - a fancy-smancy technical term meaning "used".</span><br/></span></span></p><p></p><p></p><p><span><span><span style="color: #000000; font-weight: bold; font-size: 18.6667px; font-family: Arial;">Lab 1.2: Fix Script to Run Consume the REST Message</span><br/></span></span></p><p></p><p><span><span><span style="color: #000000; font-size: 16px; font-family: Arial;">So now comes the cool stuff.   We will be creating code to execute the REST Message, and then convert the response to a JSON object so that we can actually make some use of it.</span><br/></span></span></p><p></p><ol><li><span dir="ltr" style="font-size: 12pt;">Navigate to Fix Scripts.   This will display the Fix Scripts list view.</span></li><li><span dir="ltr" style="font-size: 12pt;">Click the New button.   This will display the New Fix Script form.</span></li><li><span dir="ltr" style="font-size: 12pt;">Fill out the form with the following:</span><ol><li><span dir="ltr" style="font-size: 12pt;"><span style="font-weight: bold;">Name</span>: Cat Facts</span></li><li><span dir="ltr" style="font-size: 12pt;"><span style="font-weight: bold;">Active</span>: true</span></li><li><span dir="ltr" style="font-size: 12pt;"><span style="font-weight: bold;">Description</span>: Test script to consume the CatFacts REST Message</span></li><li><span dir="ltr" style="font-size: 12pt;"><span style="font-weight: bold;">Script</span>:</span><span><span><br/></span></span></li></ol></li></ol><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code jive_text_macro _jivemacro_uid_14730306291127118" data-renderedposition="3036.832275390625_7.997159004211426_1192_448" jivemacro_uid="_14730306291127118"><p>var webService = 'CatFacts';</p><p>var command = 'get'; // case sensitive</p><p>var number = 5; </p><p></p><p>var restMessage = new sn_ws.RESTMessageV2(webService, command);</p><p>restMessage.setStringParameter('number', parseInt(number));</p><p>var response = restMessage.execute();   // REST return</p><p>var httpStatus = response.getStatusCode(); // response status code</p><p></p><p>var responseBody = response.getBody(); // stringified JSON returned info</p><p></p><p>var parsed = JSON.parse(responseBody); // turn it into a true JSON object</p><p></p><p>// Now we can begin using the response</p><p>gs.print(responseBody);</p><p></p><p>var facts = parsed.facts;</p><p>var success = parsed.success == 'true';</p><p></p><p>gs.print(facts.length);</p><p>gs.print(parsed.success);</p><p></p><p>if (success) {</p><p>       for (var i=0; i &lt; facts.length; i++) {</p><p>               gs.print(facts[i]);</p><p>       }</p><p>}</p><p></p><p></p></pre><p></p><p></p><p style="padding-left: 60px;"><span style="color: #000000; font-size: 16px; font-family: Arial;">5. Right-click on the form header and Save your work.</span></p><p style="padding-left: 60px;"><span><span><br/><span style="color: #000000; font-size: 16px; font-family: Arial;"><img class="jive-image" height="369" src="https://lh5.googleusercontent.com/CEq1kUUZm5VL8Hp2_qtOcsL8upfM58CJ98YN8ZGY0ERjfcZMPPA58yzzMK-AHmq9lFV8qq-NHzxCoqUrPa2GwVWmmhPlaGHjTET5Gxi6NKSq6D8N_llz8nSN5B_VcDooCXw7HTZk" style="border-style: none;" width="624"/></span><br/></span></span></p><p></p><p style="padding-left: 60px;"><span><span><span style="color: #000000; font-size: 16px; font-family: Arial;">6. Execute the Fix Script (Related Links -&gt; Run Fix Script)</span><span style="color: #000000; font-size: 16px; font-family: Arial;">g. You should get a result something like this:</span></span></span></p><p style="padding-left: 60px;"><span><span><br/><span style="color: #000000; font-size: 16px; font-family: Arial;"><img class="jive-image" height="323" src="https://lh5.googleusercontent.com/waVH5xWm9TwJJFGAu8bZjV968tExxJwv0mFTk-ZaKEpyeVW_G5PQ6N2gv18JDWJxq28gwkVscrFhGAszW54atGxJXxR1RwOCAbAQIn2_72BKAPOsX-fhIHo4pPAZGS1-6-KcGy13" style="border-style: none;" width="624"/></span></span></span></p><p><span><span><br/><span style="color: #000000; font-size: 16px; font-family: Arial;">And there you have it!   In this article I demonstrated:</span></span></span></p><p></p><ol><li><span dir="ltr" style="font-size: 12pt;">How to create a REST Message</span></li><li><span dir="ltr" style="font-size: 12pt;">How to add a variable to the REST Message method</span></li><li><span dir="ltr" style="font-size: 12pt;">How to test a REST Message method</span></li><li><span dir="ltr" style="font-size: 12pt;">How to call a REST Message from a script</span></li><li><span dir="ltr" style="font-size: 12pt;">How to use a variable in a REST Message from a script</span></li><li><span dir="ltr" style="font-size: 12pt;">How to parse the returned results into JSON from the REST Message</span></li><li><span dir="ltr" style="font-size: 12pt;">How to use the JSON results</span></li></ol><p></p><p dir="ltr"><span style="font-size: 16px; font-family: Arial; color: #000000;">Steven Bell</span></p><p dir="ltr"><span style="font-family: Arial; color: #666666;"><img class="jive-image" height="39" src="https://lh5.googleusercontent.com/BltWWL_RxgUVrnN4ICq0yjhClBQ9YEwgTOliSsyA_6FAhZGOqmN_Du-81un9NSOWvNewMwbdcmRCLU5J4AQr8QyMfK4mB64LVSCVEVfrV7ESunw99A-1JlVUl7MeY4QVhWpA_-i7" style="border-style: none;" width="208"/></span></p><p dir="ltr"><span style="font-family: Arial; color: #666666;"><img class="jive-image" height="36" src="https://lh4.googleusercontent.com/li_XzYUbUwlxrMfo73sErv79kMtmaRRzQKk4IPh_--GVENSRsKx6n51OqyrJYUzrXvD1FyMfzxPEOz563MRjnFbvPUr2RwO9advHSNQO7MTChr36xQQUNbcbA3Ymd3hiM_GIKB-N" style="border-style: none;" width="102"/></span><span style="font-family: Arial; color: #666666;"><img class="jive-image" height="36" src="https://lh4.googleusercontent.com/e8TG9HUfpOoBtdf3rIAOE8f5wtpyQ6L0KFq4ozwvfX5fwQ_Wggjm7RYUkYfEw8_dPYATxJH1wjH8gufbpBT0a2u-HlNDzn2U92cnf0qGKTsm8Zb_yGC0KjJk0tCvnN9ai93IYOJg" style="border-style: none;" width="102"/></span><span style="font-family: Arial; color: #666666;"><img class="jive-image" height="36" src="https://lh5.googleusercontent.com/iSO3OgncKkAxJZWYVzurKqFzWwWLLFgriFYtQETjB8jmEZURLt_z-iIy7GMicCXjXsk_8rF4gwLWt6ORI9Y_T8tqpE2uromknxYUwP-rDSOb8Nyvl0NsTKcZEESXf8PY42cUVuOb" style="border-style: none;" width="102"/></span></p><p dir="ltr"></p><p dir="ltr"><span style="font-family: Arial; color: #666666; font-weight: bold;">For a list of all of my articles:   </span><a _jive_internal="true" href="/groups/servicenow-user-group-us-tx-north-texas/blog/2015/10/23/community-code-snippets-articles-list-to-date"><span style="font-family: Arial; color: #266fc8; font-weight: bold;">Community Code Snippets: Articles List to Date</span></a></p><p dir="ltr"></p><p dir="ltr"><span style="font-size: 16px; font-family: Arial; color: #eb7a3d;">Please Share, Like, Bookmark, Mark Helpful, or Comment this blog if you've found it helpful or insightful.</span></p><p dir="ltr"></p><p dir="ltr"><span style="font-size: 16px; font-family: Arial; color: #eb7a3d;">Also, if you are not already, I would like to encourage you to become a member of our blog!</span><span style="font-family: Arial; color: #666666;"> </span></p>