---
title: "Using rootScope to share data in Service Portal"
date: 2016-08-20T04:42:06.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=94ad22a9dbd0dbc01dcaf3231f9619b9"
---
<p>In this blog, we will see how we can use $rootScope to share data between widgets via a simple example. Every angular application has a single root scope. All other scopes are descendant scopes of the root scope. Theoretically, if we assign something to a root scope variable, we should be able to access this value inside other widgets as well.</p><p></p><p>In my previous blog <a title="How to communicate between widgets in Service Portal" __default_attr="5661" __jive_macro_name="blogpost" class="jive_macro jive_macro_blogpost" data-orig-content="How to communicate between widgets in Service Portal" data-renderedposition="73_134.546875_369_16" href="/community?id=community_blog&sys_id=e60eea2ddbd0dbc01dcaf3231f961972">How to communicate between widgets in Service Portal</a> , we created a portal, where we used $rootScope.broadcast to hide/show widgets. Today we will be using the same example, but this time, we will use a root scope variable to achieve this.</p><p></p><p><span style="line-height: 1.5;">So, I am going to start by changing </span><strong style="line-height: 1.5;">HTML</strong><span style="line-height: 1.5;"> and </span><strong style="line-height: 1.5;">Client Controller </strong><span style="line-height: 1.5;">of Widget 1 we created in   Step 3.</span></p><p></p><p></p><p><span style="font-size: 16px;"><strong>Step 1: Edit the widget we created in Step 3 (Menu Pills widget)</strong></span></p><p></p><p><span style="text-decoration: underline; font-size: 12pt;"><strong><img  __jive_id="132804" alt="Screen Shot 2016-06-26 at 12.38.32 AM.png" class="image-4 jive-image" height="163" src="166a808edb509704ed6af3231f96193c.iix" style="width: 790px; height: 163.097px;" width="790"/></strong></span></p><p></p><p>Please use the below snippets to create your widget</p><p></p><p><strong>Client Controller:</strong></p><p><span style="font-family: 'courier new', courier;">function($rootScope,$scope,$timeout) {</span></p><p><span style="font-family: 'courier new', courier;">   /* widget controller */</span></p><p><span style="font-family: 'courier new', courier;">   var c = this;</span></p><p></p><p><span style="font-family: 'courier new', courier;">   $<span style="font-family: 'courier new', courier;">rootScope</span>.selectedPill = 'requests'; // When page loads, default pill selected</span></p><p></p><p><span style="font-family: 'courier new', courier;">   //Let's create an array of objects in root scope here, This array should be available for use inside any of the widgets in this app.</span></p><p><span style="font-family: 'courier new', courier;">   //We will try to access this again later inside other widget</span></p><p><span style="font-family: 'courier new', courier;">   $rootScope.simpSons = [</span></p><p><span style="font-family: 'courier new', courier;">             {</span></p><p><span style="font-family: 'courier new', courier;">                       "name":"Homer Simpson",</span></p><p><span style="font-family: 'courier new', courier;">                       "title" : "Nuclear Safety Inspector"</span></p><p><span style="font-family: 'courier new', courier;">             },</span></p><p><span style="font-family: 'courier new', courier;">             {</span></p><p><span style="font-family: 'courier new', courier;">                       "name":"Bart Simpson",</span></p><p><span style="font-family: 'courier new', courier;">                       "title" : "Troublemaker"</span></p><p><span style="font-family: 'courier new', courier;">             }</span></p><p><span style="font-family: 'courier new', courier;">   ];</span></p><p><span style="font-family: 'courier new', courier;">     </span></p><p></p><p><span style="font-family: 'courier new', courier;">   $scope.selectPill = function(selection){</span></p><p><span style="font-family: 'courier new', courier;">             //When the pills are clicked, we change the root scope variable.     </span></p><p><span style="font-family: 'courier new', courier;">             <span style="font-family: 'courier new', courier;">$</span><span style="font-family: 'courier new', courier;">rootScope</span><span style="font-family: 'courier new', courier;">.selectedPill</span> = selection;</span></p><p><span style="font-family: 'courier new', courier;">   };</span></p><p><span style="font-family: 'courier new', courier;">}</span></p><p></p><p><strong>HTML:</strong></p><p><span style="font-family: 'courier new', courier;">&lt;div&gt;</span></p><p><span style="font-family: 'courier new', courier;">&lt;!-- your widget template --&gt;</span></p><p><span style="font-family: 'courier new', courier;">   &lt;div class=" pill-background row"&gt;</span></p><p><span style="font-family: 'courier new', courier;">       &lt;div class="each-pill" ng-class="{'active':$root.selectedPill == 'requests'}" ng-click="selectPill('requests')"&gt;</span></p><p><span style="font-family: 'courier new', courier;">             &lt;i class="fa fa-2x fa-list "   aria-hidden="true"&gt;&lt;/i&gt;</span></p><p><span style="font-family: 'courier new', courier;">               &lt;p class="remove-margin"&gt;All Requests&lt;/p&gt;</span></p><p><span style="font-family: 'courier new', courier;">       &lt;/div&gt;</span></p><p><span style="font-family: 'courier new', courier;">       &lt;div class="each-pill" ng-class="{'active':$root.selectedPill == 'create'}" ng-click="selectPill('create')"&gt;</span></p><p><span style="font-family: 'courier new', courier;">         </span></p><p><span style="font-family: 'courier new', courier;">           &lt;i class="fa fa-2x fa-wrench " aria-hidden="true"&gt;&lt;/i&gt;</span></p><p><span style="font-family: 'courier new', courier;">           &lt;p class="remove-margin"&gt;Create Request&lt;/p&gt;</span></p><p><span style="font-family: 'courier new', courier;">       &lt;/div&gt;</span></p><p><span style="font-family: 'courier new', courier;">       &lt;div class="each-pill" ng-class="{'active':$root.selectedPill == 'contact'}" ng-click="selectPill('contact')"&gt;</span></p><p><span style="font-family: 'courier new', courier;">         </span></p><p><span style="font-family: 'courier new', courier;">           &lt;i class="fa fa-2x fa-phone "   aria-hidden="true"&gt;&lt;/i&gt;</span></p><p><span style="font-family: 'courier new', courier;">           &lt;p class="remove-margin"&gt;Contact&lt;/p&gt;</span></p><p><span style="font-family: 'courier new', courier;">       &lt;/div&gt;</span></p><p><span style="font-family: 'courier new', courier;">   &lt;/div&gt;</span></p><p><span style="font-family: 'courier new', courier;">&lt;/div&gt;</span></p><p></p><p></p><p><span style="font-family: 'courier new', courier;"><em><span style="font-size: 14pt;"><span style="font-family: 'courier new', courier;"><strong>As you can see</strong></span> </span><strong><span style="font-size: 14pt;">above, we can access $rootScope variable in HTML using $root.</span> </strong></em></span></p><p></p><p></p><p><span style="font-family: 'courier new', courier;"> </span></p><p></p><p>Now let's edit the other three widgets we created in <strong>Step 4, 5 and 6</strong></p><p></p><p><span style="font-weight: bold; font-size: 16px;">Step 2:   Edit Widget we created in Step 4 (All requests widget)</span></p><p><span style="font-weight: bold; font-size: 16px;"><img  __jive_id="132805" alt="Screen Shot 2016-06-26 at 1.23.40 AM.png" class="image-5 jive-image" height="208" src="f1a7ef39db9493041dcaf3231f96199e.iix" style="width: 850px; height: 208.387px;" width="850"/></span></p><p><span style="font-weight: bold; font-size: 16px;"><span style="font-size: 10pt;">HTML<span style="font-size: 16px; font-weight: bold;">(Only first line edited, everything else is same)</span></span>:</span></p><p><span style="font-family: 'courier new', courier; color: #e23d39;">&lt;div ng-if="$<span style="font-family: 'courier new', courier;">root.selectedPill</span> == 'requests'"&gt;</span></p><p><span style="font-family: 'courier new', courier;">&lt;div class="container"&gt;</span></p><p><span style="font-family: 'courier new', courier;">&lt;!-- your widget template --&gt;</span></p><p><span style="font-family: 'courier new', courier;">   &lt;div class="col-md-10 center-div"&gt;</span></p><p><span style="font-family: 'courier new', courier;">   &lt;h3 style="display:inline-block;float:left;"&gt;Requests&lt;/h3&gt;</span></p><p><span style="font-family: 'courier new', courier;">   &lt;div ng-repeat="incident in data.requestList | limitTo:5" class="each-incident"&gt;</span></p><p><span style="font-family: 'courier new', courier;">       &lt;h4&gt;{{incident.number}}&lt;/h4&gt;</span></p><p><span style="font-family: 'courier new', courier;">       &lt;p style="margin-bottom:0px;"&gt;{{incident.short_desc}}&lt;/p&gt;</span></p><p><span style="font-family: 'courier new', courier;">   &lt;/div&gt;</span><span style="font-family: 'courier new', courier;"> </span></p><p><span style="font-family: 'courier new', courier;">&lt;/div&gt;</span></p><p><span style="font-family: 'courier new', courier;">&lt;/div&gt;</span></p><p></p><p><strong><em>The first line of this HTML has ng-if. based on the root scope variable selectedPill, these widgets are shown/hidden.</em></strong></p><p></p><p><strong>Client Controller:</strong></p><p><span style="font-family: 'courier new', courier;">function($scope,$rootScope,$timeout) {</span></p><p><span style="font-family: 'courier new', courier;">   /* widget controller */</span></p><p><span style="font-family: 'courier new', courier;">   var c = this;</span></p><p><span style="font-family: 'courier new', courier;">}</span></p><p></p><p></p><p><span style="font-size: 16px; font-weight: bold;">Step 3: Edit Widget we created in Step 5 (Create request widget)</span></p><p><span style="font-size: 16px; font-weight: bold;"><img  __jive_id="132806" alt="Screen Shot 2016-06-26 at 1.43.33 AM.png" class="image-6 jive-image" height="193" src="65449d0edb9897049c9ffb651f96198d.iix" style="width: 757px; height: 192.913px;" width="757"/></span></p><p></p><p></p><p><span style="font-weight: bold; font-size: 16px;"><span style="font-size: 10pt;">HTML</span>: (Only first line edited, everything else is same)</span></p><p><span style="font-family: 'courier new', courier; color: #e23d39;">&lt;div ng-if="<span style="font-family: 'courier new', courier;">$</span><span style="font-family: 'courier new', courier;">root.selectedPill</span> == 'create'" class="col-md-10 center-div"&gt;</span></p><p><span style="font-family: 'courier new', courier;">   &lt;h3 style=" border-bottom: 1px solid #ddd;padding-bottom:5px; "&gt;Create Request&lt;/h3&gt;</span></p><p><span style="font-family: 'courier new', courier;">&lt;form class="form-horizontal"&gt;</span></p><p><span style="font-family: 'courier new', courier;">       &lt;div class="form-group"&gt;</span></p><p><span style="font-family: 'courier new', courier;">               &lt;label for="" class="col-sm-2 control-label"&gt;Request Number&lt;/label&gt;</span></p><p><span style="font-family: 'courier new', courier;">               &lt;div class="col-sm-10"&gt;</span></p><p><span style="font-family: 'courier new', courier;">                       &lt;input type="text" class="form-control"   placeholder="Number" autocomplete="off"&gt; &lt;/div&gt;</span></p><p><span style="font-family: 'courier new', courier;">       &lt;/div&gt;</span></p><p><span style="font-family: 'courier new', courier;">       &lt;div class="form-group"&gt;</span></p><p><span style="font-family: 'courier new', courier;">               &lt;label for="" class="col-sm-2 control-label"&gt;Short Description&lt;/label&gt;</span></p><p><span style="font-family: 'courier new', courier;">               &lt;div class="col-sm-10"&gt;</span></p><p><span style="font-family: 'courier new', courier;">                       &lt;input type="text" class="form-control"   placeholder="Short Description" autocomplete="off"&gt; &lt;/div&gt;</span></p><p><span style="font-family: 'courier new', courier;">       &lt;/div&gt;</span></p><p><span style="font-family: 'courier new', courier;">     &lt;div class="form-group"&gt;</span></p><p><span style="font-family: 'courier new', courier;">               &lt;label for="" class="col-sm-2 control-label"&gt;Description&lt;/label&gt;</span></p><p><span style="font-family: 'courier new', courier;">               &lt;div class="col-sm-10"&gt;</span></p><p><span style="font-family: 'courier new', courier;">                       &lt;textarea class="form-control" rows="3"&gt;&lt;/textarea&gt;</span></p><p><span style="font-family: 'courier new', courier;">       &lt;/div&gt;</span></p><p><span style="font-family: 'courier new', courier;">       &lt;div class="form-group"&gt;</span></p><p><span style="font-family: 'courier new', courier;">               &lt;div class="col-sm-offset-2 col-sm-10"&gt;</span></p><p><span style="font-family: 'courier new', courier;">                       &lt;div class="checkbox"&gt;</span></p><p><span style="font-family: 'courier new', courier;">                               &lt;label&gt;</span></p><p><span style="font-family: 'courier new', courier;">                                       &lt;input type="checkbox"&gt; High priority &lt;/label&gt;</span></p><p><span style="font-family: 'courier new', courier;">                       &lt;/div&gt;</span></p><p><span style="font-family: 'courier new', courier;">               &lt;/div&gt;</span></p><p><span style="font-family: 'courier new', courier;">       &lt;/div&gt;</span></p><p><span style="font-family: 'courier new', courier;">       &lt;div class="form-group"&gt;</span></p><p><span style="font-family: 'courier new', courier;">               &lt;div class="col-sm-offset-2 col-sm-10"&gt;</span></p><p><span style="font-family: 'courier new', courier;">                       &lt;button class="btn btn-default"&gt;Submit&lt;/button&gt;</span></p><p><span style="font-family: 'courier new', courier;">               &lt;/div&gt;</span></p><p><span style="font-family: 'courier new', courier;">       &lt;/div&gt;</span></p><p><span style="font-family: 'courier new', courier;">&lt;/form&gt;</span></p><p><span style="font-family: 'courier new', courier;">&lt;/div&gt;</span></p><p></p><p><strong>Client Controller:</strong></p><p><span style="font-family: 'courier new', courier;">function($scope,$timeout) {</span></p><p><span style="font-family: 'courier new', courier;">   /* widget controller */</span></p><p><span style="font-family: 'courier new', courier;">   var c = this;</span></p><p><span style="font-family: 'courier new', courier;">}</span></p><p></p><p></p><p><span style="font-size: 16px; font-weight: bold;">Step 4: Edit Widget created in Step 6 (Contact widget)</span></p><p><span style="font-size: 16px; font-weight: bold;"><img  __jive_id="132807" alt="Screen Shot 2016-06-26 at 1.48.47 AM.png" class="image-7 jive-image" height="196" src="dbe2bc0edb5c57049c9ffb651f9619d3.iix" style="width: 752px; height: 196.49px;" width="752"/></span></p><p></p><p></p><p><span style="font-weight: bold; font-size: 10pt;">HTML<span style="font-size: 16px; font-weight: bold;">(Only first line edited, everything else is same)</span></span><span style="font-size: 16px; font-weight: bold;">:</span></p><p><span style="font-family: 'courier new', courier; color: #e23d39;">&lt;div ng-if="$root.selectedPill == 'contact'"&gt;</span></p><p><span style="font-family: 'courier new', courier;">       &lt;div class="container"&gt;</span></p><p><span style="font-family: 'courier new', courier;">               &lt;!-- your widget template --&gt;</span></p><p><span style="font-family: 'courier new', courier;">               &lt;div class="col-md-10 center-div"&gt;</span></p><p><span style="font-family: 'courier new', courier;">                       &lt;h3 style=" border-bottom: 1px solid #ddd;padding-bottom:5px; "&gt;Contact&lt;/h3&gt;</span></p><p><span style="font-family: 'courier new', courier;">                       &lt;div class="flex-display col-md-9"&gt;</span></p><p><span style="font-family: 'courier new', courier;">                               &lt;div class=""&gt;</span></p><p><span style="font-family: 'courier new', courier;">                                       &lt;h4&gt;Address:&lt;/h4&gt;</span></p><p><span style="font-family: 'courier new', courier;">                                   &lt;p class="remove-margin"&gt;XYZ Company&lt;/p&gt;</span></p><p><span style="font-family: 'courier new', courier;">                                       &lt;p class="remove-margin"&gt;123 Washington st&lt;/p&gt;</span></p><p><span style="font-family: 'courier new', courier;">                                   &lt;p class="remove-margin"&gt;Washington&lt;/p&gt;</span></p><p><span style="font-family: 'courier new', courier;">                               &lt;/div&gt;</span></p><p><span style="font-family: 'courier new', courier;">                               &lt;div&gt;</span></p><p><span style="font-family: 'courier new', courier;">                                       &lt;div class=""&gt;</span></p><p><span style="font-family: 'courier new', courier;">                                               &lt;h4&gt;Email:&lt;/h4&gt;</span></p><p><span style="font-family: 'courier new', courier;">                                               &lt;a href="javascript:void(0)"&gt;<a title="k-email-small" class="jive-link-email-small" href="mailto:abc@abc.com">abc@abc.com</a>&lt;/a&gt;</span></p><p><span style="font-family: 'courier new', courier;">                                       &lt;/div&gt;</span></p><p><span style="font-family: 'courier new', courier;">                                       &lt;div class=""&gt;</span></p><p><span style="font-family: 'courier new', courier;">                                               &lt;h4&gt;phone&lt;/h4&gt;</span></p><p><span style="font-family: 'courier new', courier;">                                               &lt;a href="javascript:void(0)"&gt;(123)4567890&lt;/a&gt;</span></p><p><span style="font-family: 'courier new', courier;">                                       &lt;/div&gt;</span></p><p><span style="font-family: 'courier new', courier;">                               &lt;/div&gt;</span></p><p><span style="font-family: 'courier new', courier;">                       &lt;/div&gt;</span></p><p><span style="font-family: 'courier new', courier;">               &lt;/div&gt;</span></p><p><span style="font-family: 'courier new', courier;">       &lt;/div&gt;</span></p><p></p><p></p><p><span style="font-weight: bold; font-size: 10pt;">Client Controller</span><span style="font-size: 16px; font-weight: bold;">:</span></p><p><span style="font-family: 'courier new', courier;">function($scope,$rootScope,$timeout) {</span></p><p><span style="font-family: 'courier new', courier;">   /* widget controller */</span></p><p><span style="font-family: 'courier new', courier;">   var c = this;</span></p><p></p><p><span style="font-family: 'courier new', courier;">   <strong>//Let's try to log the array of objects we created in step 1 here. </strong></span></p><p><span style="font-family: 'courier new', courier;">   console.log(JSON.stringify($rootScope.simpSons));     </span></p><p><span style="font-family: 'courier new', courier;">   </span></p><p><span style="font-family: 'courier new', courier;">}</span></p><p></p><p></p><p>Now that we have edited our widgets to make use of root scope variable. Go ahead and test it out. It should work as before. </p><p></p><p><img  alt="rootscope.gif" class="image-8 jive-image" height="529" src="52441d06db981b04ed6af3231f9619c4.iix" style="width: 852px; height: 529.065px;" width="852"/></p><p></p><p>And if you check your browser console. You can see the   <strong style="font-family: 'courier new', courier;">$rootScope.simpSons </strong>we logged inside "Contact widget". </p><p><strong style="font-family: 'courier new', courier;"></strong></p><p><img  alt="Screen Shot 2016-08-19 at 4.41.14 PM.png" class="image-9 jive-image" height="193" src="91dce886db58d704ed6af3231f961940.iix" style="width: 898px; height: 192.635px;" width="898"/></p><p>This is just a simple demonstration of how we can use $rootScope to share data between widgets.</p><p></p><p>Thanks,</p><p>Sush</p>