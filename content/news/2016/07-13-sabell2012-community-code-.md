---
title: "Community Code Snippets Some Observations on String Conversion Performance"
date: 2016-07-13T01:55:50.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=45cc2265dbd0dbc01dcaf3231f961911"
---
<p dir="ltr"><span style="font-family: 'Times New Roman'; color: #666666; font-weight: bold;">NOTE</span><span style="font-family: Arial; color: #666666;">: </span><span style="font-family: 'Times New Roman'; color: #666666;">MY POSTINGS REFLECT MY OWN VIEWS AND DO NOT NECESSARILY REPRESENT THE VIEWS OF MY EMPLOYER, ACCENTURE.</span></p><p dir="ltr"></p><p dir="ltr"><span style="font-family: 'Times New Roman'; color: #666666;">DIFFICULTY LEVEL:   </span><span style="font-family: 'Times New Roman'; color: #bf9000; font-weight: bold;">INTERMEDIATE</span></p><p dir="ltr"><span style="font-family: 'Times New Roman'; color: #666666;">Assumes a rudimentary knowledge and/or familiarity of scripting in ServiceNow.</span></p><p dir="ltr"><span style="font-family: Arial; color: #666666;">____________________________________________________________________________</span></p><p></p><p dir="ltr"><span style="font-size: 12pt; font-family: Arial; color: #000000;">Over and over I get asked why I don't use the .getValue() method when working with GlideRecords.   My pat answer has always been:   PERFORMANCE!   The method I use is usually a JavaScript force-to-string; the ol' plus-tick-tick method.</span></p><p></p><p dir="ltr"><span style="font-size: 12pt; font-family: Arial; color: #000000;">I finally got fed up and decided to do an article showing once-and-for-all that this method trounces all the others, and is the reason all of us old JavaScript users use it!</span></p><p></p><p dir="ltr"><span style="font-size: 12pt; font-family: Arial; color: #000000;">So I came up with the following code.   I would loop through each method 20 times.   10 with a small number of records, and 10 with a large number of records.   I would then compile the timings and show off the results. THEN I would point at the results, and say; "THERE!   THERE!   Run the test yourselves if you don't believe me!"</span></p><p></p><p dir="ltr"><span style="font-size: 12pt; font-family: Arial; color: #000000;">This was a bad move on my part.   I was wrong.   See!   I even admit it.   Big of me.   :-p</span></p><p></p><p><span style="font-size: 12pt;">So what are these three "methods"?</span></p><p></p><ul><li><span style="font-size: 12pt;">.toString()</span></li><li><span style="font-size: 12pt;">.getValue()</span></li><li><span style="font-size: 12pt;">+ ''</span></li></ul><p></p><p dir="ltr"><span style="font-size: 12pt; font-family: Arial; color: #000000;">After running the tests; what should I find????   .getValue wins hands down!   Nooooooo.......   </span></p><p></p><p dir="ltr"><span style="font-size: 12pt; font-family: Arial; color: #000000;">Here is my test code:</span></p><p dir="ltr"></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code jive_text_macro _jivemacro_uid_14682758286305127" data-renderedposition="601.1875_8_1192_800" jivemacro_uid="_14682758286305127" modifiedtitle="true"><p>checkSpeeds('incident');   </p><p>checkSpeeds('cmdb');   </p><p>     </p><p>function checkSpeeds(tableName) {   </p><p>       var checkList = [];</p><p>       var testResults = create2DArray(3);   </p><p>     </p><p>       testResults[0] = 'tick-tick, \t' + tableName + '\t';   </p><p>       testResults[1] = 'getValue, \t' + tableName + '\t';   </p><p>       testResults[2] = 'toString, \t' + tableName + '\t';   </p><p>     </p><p>       var checkRecords = new GlideRecord(tableName);   </p><p>       checkRecords.query();   </p><p>     </p><p>       for (var j=0; j &lt; 3; j++) {   </p><p>               for (var i=0; i &lt; 10; i++) {   </p><p>                       checkRecords.restoreLocation();   </p><p>     </p><p>                       var check1 = new Date().getTime();   // grab our start time</p><p>                       checkList = [];   </p><p>                       while (checkRecords.next()) {   </p><p>                               if (j == 0) {   </p><p>                                       checkList.push(checkRecords.number + '');   </p><p>                               }   </p><p>                               else if (j == 1) {   </p><p>                                       checkList.push(checkRecords.getValue('number'));   </p><p>                               }   </p><p>                               else {   </p><p>                                       checkList.push(checkRecords.number.toString());   </p><p>                               }   </p><p>                       }   </p><p>     </p><p>                       testResults[j] += ((new Date().getTime()) - check1) + 'ms, \t';   // calculate our end time</p><p>               }   </p><p>               testResults[j] += '\t' + checkList.length + ' records\t';   </p><p>       }   </p><p>     </p><p>       for (j=0; j &lt; 3; j++) {   </p><p>               gs.print(testResults[j]);     // print off the results</p><p>       }   </p><p>}   </p><p>     </p><p>// simple function for creating a 2d array</p><p>function create2DArray(depth) {   </p><p>       var result = [];   </p><p>       for (var i=0; i &lt; depth; i++) {   </p><p>             result.push([]);   </p><p>       }   </p><p>       return result;   </p><p>}   </p></pre><p></p><p dir="ltr"><span style="font-size: 12pt; font-family: Arial; color: #000000;">Here are my results:</span></p><p>         </p><table border="0" cellpadding="0" cellspacing="0" height="287" style="height: 288px; width: 1188px;"><tbody><tr><td class="xl65" height="19" width="65"><strong>Type</strong></td><td class="xl65" width="54"><strong>Table</strong></td><td class="xl65" width="83"><strong># Records</strong></td><td class="xl65" width="52"><strong>Test 1</strong></td><td class="xl65" width="52"><strong>Test 2</strong></td><td class="xl65" width="52"><strong>Test 3</strong></td><td class="xl65" width="52"><strong>Test 4</strong></td><td class="xl65" width="52"><strong>Test 5</strong></td><td class="xl65" width="52"><strong>Test 6</strong></td><td class="xl65" width="52"><strong>Test 7</strong></td><td class="xl65" width="52"><strong>Test 8</strong></td><td class="xl65" width="52"><strong>Test 9</strong></td><td class="xl65" width="52"><strong>Test 10</strong></td><td class="xl65" width="70"><strong>Total Wins</strong></td><td class="xl65" width="64"><strong>Average</strong></td><td class="xl65" width="122"><p><strong>% Faster Than </strong><span style="line-height: 1.5;"><strong>Next</strong></span></p></td></tr><tr><td height="19">tick-tick</td><td>incident</td><td>107 records</td><td align="right">27</td><td align="right" class="xl66">25</td><td align="right">23</td><td align="right">31</td><td align="right">25</td><td align="right">28</td><td align="right">24</td><td align="right">25</td><td align="right" class="xl66">24</td><td align="right">23</td><td align="right">2</td><td align="right">25.5</td><td></td></tr><tr><td height="19">getValue</td><td>incident</td><td>107 records</td><td align="right">22</td><td align="right">27</td><td align="right" class="xl66">22</td><td align="right">23</td><td align="right" class="xl66">22</td><td align="right" class="xl66">22</td><td align="right" class="xl66">22</td><td align="right">24</td><td align="right">32</td><td align="right">23</td><td align="right">4</td><td align="right" class="xl66"><span style="color: #e23d39;"><strong>23.9</strong></span></td><td align="right" class="xl67">5.53</td></tr><tr><td height="19">toString</td><td>incident</td><td>107 records</td><td align="right" class="xl66">21</td><td align="right" class="xl66">25</td><td align="right">24</td><td align="right" class="xl66">22</td><td align="right">29</td><td align="right">31</td><td align="right">27</td><td align="right" class="xl66">22</td><td align="right">30</td><td align="right" class="xl66">22</td><td align="right">5</td><td align="right">25.3</td><td></td></tr><tr><td height="19">tick-tick</td><td>cmdb</td><td>5162 records</td><td align="right">784</td><td align="right">758</td><td align="right">752</td><td align="right">724</td><td align="right">731</td><td align="right">714</td><td align="right">690</td><td align="right">705</td><td align="right">705</td><td align="right">743</td><td align="right"></td><td style="text-align: right;"><p>730.6</p></td><td></td></tr><tr><td height="19">getValue</td><td>cmdb</td><td>5162 records</td><td align="right" class="xl66">635</td><td align="right" class="xl66">626</td><td align="right" class="xl66">592</td><td align="right" class="xl66">608</td><td align="right" class="xl66">566</td><td align="right" class="xl66">598</td><td align="right" class="xl66">602</td><td align="right" class="xl66">607</td><td align="right" class="xl66">630</td><td align="right" class="xl66">623</td><td align="right">10</td><td align="right" class="xl66"><span style="color: #e23d39;"><strong>608.7</strong></span></td><td align="right" class="xl67">16.68</td></tr><tr><td height="19">toString</td><td>cmdb</td><td>5162 records</td><td align="right">729</td><td align="right">806</td><td align="right">763</td><td align="right">752</td><td align="right">721</td><td align="right">697</td><td align="right">697</td><td align="right">726</td><td align="right">721</td><td align="right">696</td><td align="right"></td><td style="text-align: right;">730.8</td><td></td></tr></tbody></table><p></p><p dir="ltr"><span style="font-size: 12pt; font-family: Arial; color: #000000;">The analysis?</span></p><p dir="ltr"></p><p dir="ltr"><span style="font-size: 12pt; font-family: Arial; color: #000000;">With just a few records getValue edged out the competition by 5.5%.   At 5,000 records it became very obvious that some sort of serious optimization has been done; with the percentage now rising to 16.7%!   It was also interesting to me that there appeared to be no obvious difference between + '', and .toString().   Wild!</span></p><p dir="ltr"></p><p dir="ltr"><span style="font-size: 12pt; font-family: Arial; color: #000000;">I went outside, and contemplated life for awhile.   This messed with my fundamental understanding of the universe!</span></p><p></p><p dir="ltr"><span style="font-size: 12pt; font-family: Arial; color: #000000;">Anyway, after crying it out on my front porch I went back in and ran a few more tests.   Perhaps I had the columns out of order or something…, but no.   It came up pretty much the same no matter how I tried to twist the numbers around.</span></p><p></p><p dir="ltr"><span style="font-size: 12pt; font-family: Arial; color: #000000;">So here you go.   Of the three methods:</span></p><p></p><p dir="ltr"><span style="font-size: 12pt; font-family: Arial; color: #000000;">.toString and + '' are just about the same; with + '' edging out the other method only slightly.</span></p><p></p><p dir="ltr"><span style="font-size: 12pt; font-family: Arial; color: #000000;">.getValue gets stronger and stronger the more records you throw at it.   </span></p><p></p><p dir="ltr"><span style="font-size: 12pt; font-family: Arial; color: #000000;">Not sure what to do next.   Maybe gravity isn't a constant after all.</span></p><p></p><p dir="ltr"><span style="color: #000000; font-family: Arial; font-size: 16px; font-style: inherit; font-weight: inherit; line-height: 1.5;">Steven Bell</span></p><p></p><p dir="ltr" style="font-family: arial, sans-serif; color: #666666;"><span style="font-weight: inherit; font-style: inherit; font-size: 16px; font-family: Arial; color: #000000;"><a href="https://lh4.googleusercontent.com/eZtmYidOgxWPvdM4OTgO-LZvH8Sr7r5MGCyEG7cecdsNxz4EE3u486EcFyAaNaeRQHSgcUajyQb3w5edtAkg5WIYeKAJlrUjfO0glzI9AIWDoPtKz6plvkpLyJFCxXWqxOt-yyYN" style="font-weight: inherit; font-style: inherit; font-family: inherit; color: #266fc8;"><img alt="accenture logo small.jpg" class="jive-image" height="65" src="https://lh4.googleusercontent.com/eZtmYidOgxWPvdM4OTgO-LZvH8Sr7r5MGCyEG7cecdsNxz4EE3u486EcFyAaNaeRQHSgcUajyQb3w5edtAkg5WIYeKAJlrUjfO0glzI9AIWDoPtKz6plvkpLyJFCxXWqxOt-yyYN" style="margin: 10px 10px 10px 0; border: 0px none; font-weight: inherit; font-style: inherit; font-family: inherit;" width="243"/></a></span><span style="font-weight: inherit; font-style: inherit; font-size: 16px; font-family: Arial; color: #000000;"><a href="https://lh5.googleusercontent.com/yfIiLmOSmiLJa5fvC1IMoyagAf-Afh2nagyOq9H_7Lwuc04We7HOK1oqoit-lzFCmj0w0NGCxvWBLjQR2rwL7FtRd45V0FQ9VAOVsVlkKNbXXP-F5XLYblwXKxY0V7k4f3UkIN8i" style="font-weight: inherit; font-style: inherit; font-family: inherit; color: #266fc8;"><img class="jive-image" height="48" src="https://lh5.googleusercontent.com/yfIiLmOSmiLJa5fvC1IMoyagAf-Afh2nagyOq9H_7Lwuc04We7HOK1oqoit-lzFCmj0w0NGCxvWBLjQR2rwL7FtRd45V0FQ9VAOVsVlkKNbXXP-F5XLYblwXKxY0V7k4f3UkIN8i" style="margin: 10px 10px 10px 0; border: 0px none; font-weight: inherit; font-style: inherit; font-family: inherit;" width="135"/></a></span><span style="font-weight: inherit; font-style: inherit; font-size: 16px; font-family: Arial; color: #000000;"><a href="https://lh3.googleusercontent.com/-vcVKTADxWBUg4JH7l-VRDfdGAGMIUUnEz4x4BMFA7io5wGBvjySnxZX5UvxqOyURFVSFVjZrsBVpmInR9bQ5w3GlyRx3celd9WKwEcmhzF5b-dwfu71AoIkk55y-RMX023m3PXm" style="font-weight: inherit; font-style: inherit; font-family: inherit; color: #266fc8;"><img class="jive-image" height="48" src="https://lh3.googleusercontent.com/-vcVKTADxWBUg4JH7l-VRDfdGAGMIUUnEz4x4BMFA7io5wGBvjySnxZX5UvxqOyURFVSFVjZrsBVpmInR9bQ5w3GlyRx3celd9WKwEcmhzF5b-dwfu71AoIkk55y-RMX023m3PXm" style="margin: 10px 10px 10px 0; border: 0px none; font-weight: inherit; font-style: inherit; font-family: inherit;" width="135"/></a></span></p><p></p><p dir="ltr" style="font-family: arial, sans-serif; color: #666666;"><span style="font-weight: bold; font-style: inherit; font-family: Arial;">For a list of all of my articles:   </span><a _jive_internal="true" data-containerid="1027" data-containertype="37" data-objectid="4821" data-objecttype="38" href="/groups/servicenow-user-group-us-tx-north-texas/blog/2015/10/23/community-code-snippets-articles-list-to-date" style="font-weight: inherit; font-style: inherit; font-family: inherit; color: #266fc8;"><span style="font-weight: bold; font-style: inherit; font-family: Arial;">Community Code Snippets: Articles List to Date</span></a></p><p></p><p dir="ltr" style="font-family: arial, sans-serif; color: #666666;"><span style="font-weight: inherit; font-style: inherit; font-size: 16px; font-family: Arial; color: #eb7a3d;">Please Share, Like, Bookmark, Mark Helpful, or Comment this blog if you've found it helpful or insightful.</span></p><p></p><p dir="ltr" style="font-family: arial, sans-serif; color: #666666;"><span style="font-weight: inherit; font-style: inherit; font-size: 16px; font-family: Arial; color: #eb7a3d;">Also, if you are not already, I would like to encourage you to become a member of our blog!</span></p>