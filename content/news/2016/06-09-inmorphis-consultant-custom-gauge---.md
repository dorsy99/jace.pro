---
title: "CUSTOM GAUGE  "
date: 2016-06-08T15:54:45.000Z
authors: ["inmorphis-consultant"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=4c2ee26ddbd0dbc01dcaf3231f961921"
---
<p style="margin-bottom: 20px; color: #777777; font-size: 13px; font-family: 'Open Sans', 'Helvetica Neue', Arial; text-align: center;"><img  alt="Animation.png" class="image-3 jive-image" height="319" src="d149c8c2db1c1304b322f4621f961924.iix" style="height: 319px; width: 1069.08px;" width="1070"/></p><p style="margin-bottom: 20px; color: #777777; font-size: 13px; font-family: 'Open Sans', 'Helvetica Neue', Arial;">In this <strong>Custom Gauge — 101</strong> series, we will learn "How to make custom Gauge". After creating we will place that gauge on our incident form and bind it with an integer field so that, gauge value can change dynamically.</p><h2 style="margin-top: 10px; margin-bottom: 10px; font-family: 'Open Sans', 'Helvetica Neue', Arial; font-weight: normal; color: #777777; font-size: 32px; text-align: left;">Impressive UI — Custom Gauge</h2><p style="margin-bottom: 20px; color: #777777; font-size: 13px; font-family: 'Open Sans', 'Helvetica Neue', Arial;">To start this, we will need:</p><ol style="margin-left: 18px; color: #777777; font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 13px;"><li>UI Scripts<ul><li style="margin-bottom: 10px;">justgage.js (<a title="dn.jsdelivr.net/justgage/1.0.1/justgage.min.js" href="https://cdn.jsdelivr.net/justgage/1.0.1/justgage.min.js" style="color: #7dbb18;">CDN</a> | <a title="stgage.com/" href="http://justgage.com/" style="color: #7dbb18;">Site</a>)</li><li>raphael.js (<a title="dn.jsdelivr.net/raphael/2.1.4/raphael-min.js" href="https://cdn.jsdelivr.net/raphael/2.1.4/raphael-min.js" style="color: #7dbb18;">CDN</a>)</li></ul></li><li>UI Macro</li><li>UI Formatter — To show UI Macro on incident form</li><li>Create a Field name "u_visitors" of type "Integer" on incident table.</li></ol><p></p><h2 style="margin-top: 10px; margin-bottom: 10px; font-family: 'Open Sans', 'Helvetica Neue', Arial; font-weight: normal; color: #777777; font-size: 32px;"><strong>Steps:</strong></h2><p style="margin-bottom: 20px; color: #777777; font-size: 13px; font-family: 'Open Sans', 'Helvetica Neue', Arial;">Before starting our process, lets have a story-line for this example. We have a field on incident table and we want to show a percentage indicator(off-course UI indicator). So, let's start.</p><h4 style="margin-top: 10px; margin-bottom: 10px; font-family: 'Open Sans', 'Helvetica Neue', Arial; font-weight: normal; color: #777777; font-size: 17.5px;"><strong>Step 1:- Adding justgage and raphael in SN</strong></h4><ul><li>Create UI Scripts for justgage.js as well as raphael.js</li><li>You can copy script code from above CDN links or copy code from github repository</li><li>If ServiceNow throws error while trying to save script files than save a blank script and use the list edit to save the script content.<a title="ithub.com/inMorphis-Softwares/Codes/tree/master/gage/UI%20Scripts" href="https://github.com/inMorphis-Softwares/Codes/tree/master/gage/UI%20Scripts" style="color: #7dbb18;">Download UI Scripts</a></li></ul><h4 style="margin-top: 10px; margin-bottom: 10px; font-family: 'Open Sans', 'Helvetica Neue', Arial; font-weight: normal; color: #777777; font-size: 17.5px;"><strong>Step 2:- Creating UI Macro</strong></h4><p><span style="margin-bottom: 20px; color: #777777; font-size: 13px; font-family: 'Open Sans', 'Helvetica Neue', Arial;">Now, it's time to create magical UI Macro that will perform magic for us.</span></p><ul><li>Create new UI Macro and name it as "visitors"</li><li>Add the following code into UI Macro</li></ul><pre __default_attr="xml" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14653824598741917 jive_text_macro" data-renderedposition="1010.953125_8_1192_864" jivemacro_uid="_14653824598741917"><p>&lt;?xml version="1.0" encoding="utf-8" ?&gt;</p><p>&lt;j:jelly trim="false" xmlns:j="jelly:core" xmlns:g="glide" xmlns:j2="null" xmlns:g2="null"&gt;</p><p>   </p><p>   &lt;!-- Add a div containing gauge div --&gt;</p><p>   &lt;div class="col-md-4 col-md-offset-4"&gt;</p><p>   &lt;strong&gt;Visitor's %age&lt;/strong&gt;</p><p>   &lt;div id="gauge" class="200x160px"&gt;&lt;/div&gt;</p><p>   &lt;/div&gt;</p><p>&lt;!-- Added library files --&gt;</p><p>&lt;script&gt;</p><p>&lt;script&gt;</p><p></p><p>&lt;!-- Set a variable to hold already saved value of our field --&gt;</p><p>&lt;g2:set_if var="jvar_percent" test="$[current.u_visitors!='']" true="$[current.u_visitors]" false="0" /&gt;</p><p></p><p></p><p>&lt;script&gt;</p><p></p><p>   // function that will return correct id of provided id as id may contain . or any other escape character   </p><p>   function jq(myid) { </p><p>   return "#" + myid.replace( /(:|\.|\[|\]|,)/g, "\\$1" );</p><p>   }</p><p>   </p><p>   //Call justgage Object to create a gauge</p><p>   //In value parameter, map the variable that we have already set in jelly</p><p>   var g = new JustGage({</p><p>   id: "gauge",</p><p>   value: $[jvar_percent],</p><p>   min: 0,</p><p>   max: 100,</p><p>   title: "Visitors",</p><p>   gaugeWidthScale: 0.6,</p><p>   counter: true,</p><p>   formatNumber: true,</p><p>   relativeGaugeSize: true</p><p>   });</p><p>   </p><p>   //Code to call once DOM is loaded </p><p>   $j(document).ready(function(){</p><p>   $j(jq("incident.u_visitors")).change(function() {</p><p>   if($j(this).val() &gt; 100 || $j(this).val() ${AMP}lt; 0)</p><p>   {</p><p>   alert("Can't input more than 100 or less than 0");</p><p>   g_form.setValue("u_visitors","");</p><p>     </p><p>   }</p><p>   else{</p><p>   g.refresh(g_form.getValue("u_visitors"));</p><p>   }</p><p>     </p><p>   });</p><p>   });</p><p>&lt;/script&gt;</p><p></p></pre><p></p><p><span style="color: #777777; font-size: 17.5px; font-family: 'Open Sans', 'Helvetica Neue', Arial; line-height: 1.5; margin-bottom: 20px;"><strong><a title="ithub.com/inMorphis-Softwares/Codes/blob/master/gage/UI%20Macro/visitors.xml" href="https://github.com/inMorphis-Softwares/Codes/blob/master/gage/UI%20Macro/visitors.xml" style="color: #7dbb18; font-family: 'Open Sans', 'Helvetica Neue', Arial; font-size: 13px;">Download UI Macro</a></strong></span></p><p></p><p><span style="margin-bottom: 20px;"><a class="unlinked" style="color: #7dbb18;"><span style="color: #777777; font-family: 'Open Sans', 'Helvetica Neue', Arial; font-size: 17.5px; line-height: 1.5;"><strong>Step 3:- Create UI Formatter</strong></span></a></span></p><ul><li>Create a UI Formatter for above created UI Macro. Take help from <a title="ki.servicenow.com/index.php?title=Creating_a_Formatter#Creating_a_Formatter" href="http://wiki.servicenow.com/index.php?title=Creating_a_Formatter#Creating_a_Formatter" style="color: #7dbb18;">here</a></li><li>Name this Formatter as "visitors macro" and fill the entries like below:</li></ul><p style="text-align: center;"><img   alt="formatter.png" class="image-1 jive-image" height="123" src="428f6f39db98dfc0b322f4621f9619a2.iix" style="height: 123px; width: 1085.61px;" width="1086"/></p><center>UI Formatter</center><h4 style="margin-top: 10px; margin-bottom: 10px; font-family: 'Open Sans', 'Helvetica Neue', Arial; font-weight: normal; color: #777777; font-size: 17.5px;"><strong>Step 4:- Modify Incident Form</strong></h4><ul><li>Modify incident table and create new field "u_visitors" of "Integer" data type.</li><li>Modify form layout and bring "visitors macro" formatter on form like below</li></ul><p><img   alt="form.png" class="image-2 jive-image" height="258" src="e0abc10edb5413043eb27a9e0f961911.iix" style="display: block; margin-left: auto; margin-right: auto; height: 258px; width: 454.432px;" width="454"/></p><center>Macro on Incident Form</center><p style="margin-bottom: 20px; color: #777777; font-size: 13px; font-family: 'Open Sans', 'Helvetica Neue', Arial;">And, we are done. It was easy, RIGHT?</p><p style="margin-bottom: 20px; color: #777777; font-size: 13px; font-family: 'Open Sans', 'Helvetica Neue', Arial;"><strong>IF you don't want to create yourself, no problem, we have already done it for you. Just Download <a title="ithub.com/inMorphis-Softwares/Codes/blob/master/gage/UpdateSet/gage.xml" href="https://github.com/inMorphis-Softwares/Codes/blob/master/gage/UpdateSet/gage.xml" style="color: #7dbb18; font-weight: normal;">UpdateSet</a> from our <a title="ithub.com/inMorphis-Softwares/Codes/tree/master/gage" href="https://github.com/inMorphis-Softwares/Codes/tree/master/gage" style="color: #7dbb18; font-weight: normal;">github repository</a>. You can also fork our public repository.</strong></p><p style="font-weight: inherit; font-style: inherit; font-family: inherit; color: #666666;"></p><p style="font-weight: inherit; font-style: inherit; font-family: inherit;">To read more such interesting posts. <a title="morphis.com/blogs/" href="http://inmorphis.com/blogs/">Click here</a></p><p style="font-weight: inherit; font-style: inherit; font-family: inherit;"></p><p class="user-signature" style="font-family: arial, sans-serif;">---- <br/>visit www.inMorphis.com/blogs/ for more</p><center></center>