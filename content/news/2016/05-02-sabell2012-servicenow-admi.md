---
title: "ServiceNow Admin  Observations on Database Views Part I"
date: 2016-05-02T02:13:38.000Z
authors: ["sabell2012"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=87fc66a5dbd0dbc01dcaf3231f9619fa"
---
<p><strong>NOTE</strong>: ON APRIL 1, 2016 ACCENTURE COMPLETED THE ACQUISITION PROCESS OF CLOUDSHERPAS.   AT THAT TIME THE CLOUDSHERPAS BLOG SITES WERE DOWNED FOREVER.</p><p></p><p>THIS IS THE RE-PUBLICATION OF MY ARTICLE FROM <strong>July 14, 2014</strong> ON THE CLOUDSHERPAS SERVICENOW SCRIPTING 101 BLOG.</p><p>____________________________________________________________________________</p><p></p><p></p><p><span style="color: black; line-height: 1.5; font-family: arial, helvetica, sans-serif;">Database Views are useful for filling an important gap in ServiceNow: joining two or more tables together. In a normal report, you can only select a single table, but Database Views allow you to pull together data from two or more tables into a single "table" to report against.</span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; color: black;">Given the importance of Database Views, I wanted to take the opportunity to share some observations I have either read about, stumbled across or just plain hit-and-miss created from scratch. </span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; color: black;">To start off, check out the introduction to Database Views in the <a title="ki.servicenow.com/index.php?title=Database_Views" href="http://wiki.servicenow.com/index.php?title=Database_Views">wiki</a></span></p><p></p><p></p><p><span style="font-size: 14pt; color: black; font-family: arial, helvetica, sans-serif;">Some Techno-babble:</span></p><p></p><ul><li><span style="font-family: arial, helvetica, sans-serif;"><span dir="ltr"><span style="font-size: 14.6667px; font-weight: bold;">Constrain / Constraint</span><span style="font-size: 14.6667px;"> — to limit the View</span></span><br/></span></li><li><span dir="ltr" style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 14.6667px; font-weight: bold;">Where Clause</span><span style="font-size: 14.6667px;"> — references the Constraint part of a SQL query. For example:</span></span></li></ul><p><span style="font-family: arial, helvetica, sans-serif;"><br/><span style="margin-left: 36pt; color: #000000; font-size: 14.6667px;"><span style="font-size: 14.6667px; color: #000000;">SELECT * FROM cmdb_ci </span><span style="font-size: 14.6667px; color: #00b050; font-weight: bold;">WHERE install_status = 1</span></span></span></p><p></p><p><span style="margin-left: 36pt; color: #000000; font-size: 14.6667px; font-family: arial, helvetica, sans-serif;">The "*" means to retrieve all fields. This example returns all records from the cmdb_ci table where the install_status field has a value of one.</span><span style="font-family: arial, helvetica, sans-serif;"><br/></span></p><p></p><ul><li><span style="font-family: arial, helvetica, sans-serif;"><span dir="ltr"><span style="font-size: 14.6667px; font-weight: bold;">Join</span><span style="font-size: 14.6667px;"> — to bring together two related tables into a single View. </span></span><br/></span></li><li><span style="font-family: arial, helvetica, sans-serif;"><span dir="ltr"><span style="font-size: 14.6667px; font-weight: bold;">Union</span><span style="font-size: 14.6667px;"> — to bring together two not necessarily related tables into a single View. </span></span><br/></span></li><li><span style="font-family: arial, helvetica, sans-serif;"><span dir="ltr"><span style="font-size: 14.6667px; font-weight: bold;">Alias or Variable Prefix</span><span style="font-size: 14.6667px;"> — a short descriptor that identifies a table and is used to designate that table's fields in a Where Clause. </span></span><br/></span></li><li><span dir="ltr" style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 14.6667px; font-weight: bold;">Null</span><span style="font-size: 14.6667px;"> — Empty field. Note that this is not the same as an empty string, which has to be checked for separately.</span></span></li><li><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 14.6667px; color: #000000; font-weight: bold;">Operators</span><span style="font-size: 14.6667px; color: #000000;"> - &amp;&amp;, ||, AND, OR, !=, = - Are used to chain constraints together. Note that &amp;&amp; and AND mean the same, as do || and OR.</span></span></li></ul><p></p><p><span style="font-size: 12pt; line-height: 1.5; font-family: arial, helvetica, sans-serif;"><strong><strong>Caveats:</strong></strong></span></p><p></p><p style="padding-left: 30px;"><span style="color: black; font-family: arial, helvetica, sans-serif;">For all of the examples, I use the CMDB CI table structure. Of course you can use any database available for your views. Rather than showing how to use specific fields in the view output, I will demonstrate techniques for joining or union-ing multiple tables together.</span></p><p></p><p></p><p></p><p><span style="color: black; font-size: 14pt; font-family: arial, helvetica, sans-serif;"><strong>Guidelines and Tips</strong></span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; color: black;">Let's get started! First I will describe some important tips and guidelines.   </span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 10pt; color: black;">1. </span><span style="color: black;">Out of the box, the Database View / View Tables list view does not contain the Active and Left Join fields. I always personalize my view, using the Update Personalize View (gear button), and add those two fields.</span></span></p><p></p><p><span style="color: #000000; font-size: 14.6667px; font-family: arial, helvetica, sans-serif;"><img alt="C:\Users\User 1\Desktop\Personalize List View.jpg" class="jive-image" height="47" src="https://lh5.googleusercontent.com/5Z1bbxCUY1sMbSUU75fGUcmlEApyI_a-akCBvLs90vYFQ-GonUkZD7SDj4wFWnyYwjuhTBwIqPufuUbINdu7uYA_MVakcpIYr8qgDr3rg9rn8m2gq7vZQ-xPrNNEEtHcttaLVBw" style="border-style: none;" width="623"/></span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="color: black;">2. </span><span style="color: black;">Dot and Underscore work the same for writing Variable Prefixes (Aliases) into the Where Clause.</span></span></p><p></p><p style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif; color: black;">For example:</span></p><p style="padding-left: 30px;"></p><p style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif; color: #0033cc;">ci_sys_id = comp_sys_id</span></p><p style="padding-left: 30px;"></p><p style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif; color: black;">is the same as:</span></p><p style="padding-left: 30px;"></p><p style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif; color: #0033cc;">ci.sys_id = comp.sys_id</span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="color: black;">3. </span><span style="color: black;">You can have a one-record View, but it cannot contain a Where Clause. If you do happen to put a Where Clause into the single record, the view engine will ignore it when displaying the results.   </span></span></p><p></p><p><span style="color: #000000; font-size: 14.6667px; font-family: arial, helvetica, sans-serif;"><img alt="C:\Users\User 1\Desktop\2. 1 record db view.jpg" class="jive-image" height="208" src="https://lh3.googleusercontent.com/syy3fT_YzmyAFuFvqvcEYaC28VTKothWMHfqkjM8pcexKIwk0sFkH3cYb6h0yrUv10La7oFZ4l4lLA5MAyxRMpIxDW5f9Wfou5VteQpjki8_m8tY9vVMUErs8_cH3SrpuG6Imm4" style="border-style: none;" width="623"/></span></p><p></p><p style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif; color: black;">As demonstrated below, the results still contain all records from the CMDB_CI table.</span></p><p></p><p><span style="color: #000000; font-size: 14.6667px; font-family: arial, helvetica, sans-serif;"><img alt="C:\Users\User 1\Desktop\2. cmdb_ci_db_view_1 record result.jpg" class="jive-image" height="304" src="https://lh4.googleusercontent.com/bqJx4R6BsceRvL9kNfXREE5i3p1g9E07ZRnso8EtQZUXGIVSD9uDrQ579zrFVm6X3_qAFklOA7HIjPa9D2RcP55dfu0Uc5tigHkKkHG_9Dx50-2GGq01Jn7rs3JrsLgx66dz974" style="border-style: none; display: block; margin-left: auto; margin-right: auto;" width="372"/></span></p><p></p><p style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif; color: black;">This scenario defeats the purpose of having a View as it is nothing more than a wrapper for the table you are referencing. To really get the power out of a Database View, you must join it to other tables!</span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="color: black;">4. </span><span style="color: black;">Commenting your code is a best practice. To do this simply surround your comment text with /* … */.</span></span></p><p></p><p><span style="color: #000000; font-size: 14.6667px; font-family: arial, helvetica, sans-serif;"><img alt="C:\Users\User 1\Desktop\4. Comments example.jpg" class="jive-image" height="305" src="https://lh6.googleusercontent.com/Dw9h6462OFBQWesEKr9UImnAAfMzK8MjLVe0PgsA8OhurE2LUSV9_h9S5klqgxz_pX4JtvRSHm2vH85fUbDnrFmzDYVxVi2FZ-mxzsG7sf3ozUGLceKqXM7dEQy1fJQqNLu0RM0" style="border-style: none; display: block; margin-left: auto; margin-right: auto;" width="498"/></span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="color: black;">5. </span><span style="color: black;">Another good practice is to use short alias names. This will improve readability as some Where Clauses can get quite lengthy.</span></span></p><p></p><p><span style="color: #000000; font-size: 14.6667px; font-family: arial, helvetica, sans-serif;"><img alt="C:\Users\User 1\Desktop\5. two record db view.jpg" class="jive-image" height="221" src="https://lh3.googleusercontent.com/9MDkUqVXUQs0VXZCo75XhzRzyBcfxRJVyhk4WQ_m6wMv0KQosPNGU6Cvl70CxhJYKwBJcA-vsRK5i2BzmfqjKcHDpbx3tg35fwLuRDHi83uX-f3v0Q0tSm9T4goZfTriUO9Nnu8" style="border-style: none; display: block; margin-left: auto; margin-right: auto;" width="623"/></span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="color: black;">6. </span><span style="color: black;">Like with all number ordering in ServiceNow, it's a good practice to order in the 100's. This allows you to go back and easily insert new records between others.</span></span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="color: black;">7. </span><span style="color: black;">If no fields are specified with each View Tables record, then the default result includes all fields. Fields with the same names will be designated by their table name first, then by their field name in parenthesis. This helps with identification but will require some thought as to which fields you will actually want to display in your view and reports.</span></span></p><p></p><p><span style="color: #000000; font-size: 14.6667px; font-family: arial, helvetica, sans-serif;"><img alt="C:\Users\User 1\Desktop\6. personalized list columns.jpg" class="jive-image" height="329" src="https://lh5.googleusercontent.com/9CiYRtW99zlP1lydY9cCnq8K00BkvDohFL_jJkU_IkT-L_2vy0NSXxKZiWlJsTkNsgQpvqjHmeZZNJSQzvk4EWIWUjrGuZoaUT0yzx2IJsx-LmY5B8LFTgT2FuPAta6iqvZo4OU" style="border-style: none; display: block; margin-left: auto; margin-right: auto;" width="608"/></span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="color: black;">8. </span><span style="color: black;">All fields from a view will be available to put in a report (even the record sys_ids). The fields are displayed in the picklist with their respective actual names in parenthesis prefixed with their table aliases.</span></span></p><p></p><p><span style="color: #000000; font-size: 14.6667px; font-family: arial, helvetica, sans-serif;"><img alt="C:\Users\User 1\Desktop\7. Report Header Example.jpg" class="jive-image" height="183" src="https://lh6.googleusercontent.com/AjWv7og07mPQwvjcSXv5pBXdzkTG40e1d0XP5EsxqWJTFn93Uuw6lzd7Psd6RAWW2piw73_jyNwZ7Dft35jfKp2rC90qQn5AukSXNQnID9bK09EN-1Ku1FFnKlJiJLaWSnpqRXE" style="border-style: none; display: block; margin-left: auto; margin-right: auto;" width="623"/></span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="color: black;">9. </span><span style="color: black;">If you include a choice field in a Where Clause, it will need to be against the "Value" field   <span style="text-decoration: underline;">not</span> the "Label" field.   </span></span></p><p></p><p style="text-align: left; padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif;"><span style="color: black;">Check out </span><a href="http://wiki.servicenow.com/index.php?title=Customizing_Choice_Lists"><span style="font-size: 11pt; color: #1155cc;">this wiki article</span></a><span style="color: black;"> for more information on choice list values and labels (section 6).</span></span></p><p style="text-align: left; padding-left: 30px;"></p><p style="text-align: left; padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif; color: black;">The following Where Clause will fail because it uses the install_status choice list Label instead of the Value:</span></p><p></p><p><span style="color: #000000; font-size: 14.6667px; font-family: arial, helvetica, sans-serif;"><img alt="C:\Users\User 1\Desktop\9. installed status is 'installed'.jpg" class="jive-image" height="263" src="https://lh4.googleusercontent.com/9CH0H5HF2KnxmAvHSyfJFGN5bgc37Kv10Amo6YSPGjkZbq4hqOkeb2_7LcKPsuIjBBOWOCnxgGDjwqYlyTw6ieRX2i1HS8Sz_ctA5sozO4cqD08SJT0_QslU3h8AS668GCrddXU" style="border-style: none; display: block; margin-left: auto; margin-right: auto;" width="623"/></span></p><p style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif; color: black;">Instead, the Where Clause should read:</span></p><p style="padding-left: 30px;"></p><p style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif; color: #0033cc;">ci.sys_id = ref.sys_id AND ci.install_status = 1</span></p><p style="padding-left: 30px;"></p><p style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif; color: black;">(I will give an example in the second part of this article on how to get around this.)</span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="color: black;">10. </span><span style="color: black;">The table hierarchy is "rolled" up. This is interesting, and, if you don't know what is going on, it can be a frustrating thing. However, two simple rules should clear up any confusion:</span></span></p><p></p><p style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif;"><span style="color: black;">a. </span><span style="color: black;">All fields from all inherited tables are available to report against.</span></span></p><p style="padding-left: 30px;"></p><p style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif; color: black;">Say that you want to join cmdb_ci_computer and cmdb_ci_server. You are fine as long as you join the two tables on fields that are available in ONLY those tables. Since sys_id is available in both, you can join the two on that.   </span></p><p style="padding-left: 30px;"></p><p style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif;"><span style="color: black;">b. </span><span style="color: black;">If you <span style="text-decoration: underline;">do</span> intend to constrain using any of the inherited table's fields, you will need to include that table(s) in the view.</span></span></p><p style="padding-left: 30px;"></p><p style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif; color: black;">The following screenshot shows a Where Clause that would fail, as install_status is not in the computer table.</span></p><p></p><p><span style="color: #000000; font-size: 14.6667px; font-family: arial, helvetica, sans-serif;"><img alt="C:\Users\User 1\Desktop\9. rollup query.jpg" class="jive-image" height="273" src="https://lh6.googleusercontent.com/AFQP5Hll9Z0ivYH3k_kN3yN4L0EjXpYkIJQg0jr0j1DeL-FpHrGFsw4a6lUvMaJFxQ5TuTYgNMf817kc4zypbLyx4O_kvdkEsJmUSKtFPFJ_Lbj1-Neyw9cpxxglOHH3FSgEUkk" style="border-style: none; display: block; margin-left: auto; margin-right: auto;" width="623"/></span></p><p></p><p style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif; color: black;">You would see an error similar to this:</span></p><p></p><p><span style="color: #000000; font-size: 14.6667px; font-family: arial, helvetica, sans-serif;"><img alt="C:\Users\User 1\Desktop\rollup failure error.jpg" class="jive-image" height="149" src="https://lh5.googleusercontent.com/nQ3EqrL_HeGRZAeVqKeKj9J83qKRizjuNLCTkEeGcGD3JOKANap--_m0F5FQ4hffooGMD0SMIMvw2e778ZxIg6thupzfjH2UEWpwO74ejNfS9K2Oxbwe9C2Os5ObPqUlOODDjQw" style="border-style: none; display: block; margin-left: auto; margin-right: auto;" width="624"/></span></p><p></p><p style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif; color: black;">If you want to constrain the cmdb_ci_computer / cmdb_ci_server view by install_status of 1 (installed), you have to include that table in the view as well. The Where Clause would then read:</span></p><p style="padding-left: 30px;"></p><p style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif; color: #0033cc;">serv.sys_id = comp.sys_id AND ci.install_status = 1</span></p><p></p><p><span style="color: #000000; font-size: 14.6667px; font-family: arial, helvetica, sans-serif;"><img alt="C:\Users\User 1\Desktop\11. Corrected Rollup Clause.jpg" class="jive-image" height="187" src="https://lh4.googleusercontent.com/A07imGwbzEeDW7Lnx_6bheOrTmQQzjymHY0dzs1Sdi-gqe8V532LzT5xtIhHOV2EEv79gH9uSmaKSHJLFjgPkMQcicCsjkAeB1FLlgraiWArBMi_YmGvKGTKtreZPg4gu8vAeNc" style="border-style: none; display: block; margin-left: auto; margin-right: auto;" width="623"/></span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="color: black;">11. </span><span style="color: black;">You can chain the Where Clause onto multiple lines for improved organization and readability.</span></span></p><p><span style="font-family: arial, helvetica, sans-serif; color: black;">EXAMPLE:</span></p><p></p><p style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif; color: #303030;">This:</span></p><p style="padding-left: 30px;"></p><p style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif; color: blue;">comp_sys_id = ref_sys_id &amp;&amp; (ref_form_factor = 'Laptop' || ref_form_factor = 'Desktop') &amp;&amp; ref_install_status = 1</span></p><p style="padding-left: 30px;"></p><p style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif; color: #303030;">Can be written as:</span></p><p style="padding-left: 30px;"></p><p style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif; color: blue;">comp_sys_id = ref_sys_id <br/> &amp;&amp; (ref_form_factor = 'Laptop' || ref_form_factor = 'Desktop') <br/> &amp;&amp; ref_install_status = 1</span></p><p style="padding-left: 30px;"></p><p style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif; color: #303030;">By the way, remember that &amp;&amp; and AND and || and OR are interchangeable. So, this Where Clause can also be written like this:</span></p><p style="padding-left: 30px;"></p><p style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif; color: blue;">comp_sys_id = ref_sys_id <br/> AND (ref_form_factor = 'Laptop' OR ref_form_factor = 'Desktop') <br/> AND ref_install_status = 1</span></p><p><span style="color: #000000; font-size: 14.6667px; font-family: arial, helvetica, sans-serif;"><strong><img alt="C:\Users\User 1\Desktop\Multiple Line Query.jpg" class="jive-image" height="211" src="https://lh3.googleusercontent.com/HV9rSffU6s7suHMAo97WU6hWAjqDX9v4pUmSuhAtdAzsi8V1tU4euYP9-Kl1czdMoWUj2KIbtejA8r-a7WbQGDG_l6Ss6Az70sIIiMb-ZMBAwJcLE0z1QaVvfZvwmlQ37tqCJiw" style="border-style: none; display: block; margin-left: auto; margin-right: auto;" width="623"/></strong></span></p><p></p><p><span style="color: black; font-family: arial, helvetica, sans-serif;"><strong>Learn More</strong></span></p><p><span style="font-family: arial, helvetica, sans-serif; color: black;">Check back next week for the second part of this post, which will cover interesting examples about tying in a reference field using Left Join, constraining a view using a choice label and more.</span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 16px; font-style: inherit; font-weight: inherit; line-height: 1.5;">Steven Bell</span></p><p></p><p><span style="color: purple; font-weight: inherit; font-size: 12pt; font-family: inherit; font-style: inherit;"><strong>If you find this article helps you, don't forget to log in and "like" it!</strong></span></p><p></p><p><span style="color: purple; font-weight: inherit; font-size: 12pt; font-family: inherit; font-style: inherit;"><strong>Also, if you are not already, I would like to encourage you to become a member of our blog!</strong></span></p><p></p><p><span style="color: purple; font-weight: inherit; font-size: 12pt; font-family: inherit; font-style: inherit;"><strong><a _jive_internal="true" href="/servlet/JiveServlet/downloadImage/38-5356-103436/accenture technology logo.png" style="font-weight: inherit; font-style: inherit; font-family: inherit; color: #266fc8;"><img   alt="accenture technology logo.png" class="image-1 jive-image" height="52" src="79d5b40edb1cdfc068c1fb651f9619c8.iix" style="margin: 10px 10px 10px 0; border: 0px; font-weight: inherit; font-style: inherit; font-family: inherit;" width="277"/></a><a _jive_internal="true" href="/servlet/JiveServlet/downloadImage/38-5356-103437/sn-community-mvp.png" style="font-weight: inherit; font-style: inherit; font-family: inherit; color: #266fc8;"><img   alt="sn-community-mvp.png" class="image-2 jive-image" height="48" src="4622d4cedbd417049c9ffb651f9619d7.iix" style="margin: 10px 10px 10px 0; border: 0px; font-weight: inherit; font-style: inherit; font-family: inherit;" width="135"/></a></strong></span></p><p></p>