---
title: "MiniLab Workflow Control Via Variable Examination Advanced"
date: 2016-02-18T22:13:02.000Z
authors: ["sabell2012"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=ee3deae5dbd0dbc01dcaf3231f96198f"
---
<p style="margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif; font-weight: normal;">In this final Workflow Control Pattern article we will be using what we learned with Variable and Property control and building a hybrid that uses both.   This has a bit of twist to it, and thus the reason for this particular pattern.   BTW, this pattern is the one I use the most when dealing with Service Catalog items.</span></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">The other articles in this series:</span></p><p style="margin-bottom: .0001pt;"></p><ol style="list-style-type: decimal;"><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;"><a _jive_internal="true" href="/groups/servicenow-user-group-us-tx-north-texas/blog/2016/02/03/pragmatic-patterns-workflows-using-data-to-adjust-the-flow"><span style="color: #266fc8; background: #F8FBFE;">Pragmatic Patterns: Workflows - Using Data to Adjust the Flow</span></a></span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;"><a _jive_internal="true" href="/groups/servicenow-user-group-us-tx-north-texas/blog/2016/02/06/mini-lab-workflow-control-via-variable-input"><span style="color: #266fc8; background: #F8FBFE;">Mini-Lab: Workflow Control Via Variable Input</span></a> (Intermediate Skill Level)</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;"><a _jive_internal="true" href="/groups/servicenow-user-group-us-tx-north-texas/blog/2016/02/13/mini-lab-workflow-control-via-property-input"><span style="color: #266fc8; background: #F8FBFE;">Mini-Lab: Workflow Control Via Property Input</span></a> (Advanced Skill Level)</span></li></ol><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"><span style="font-size: 16pt; font-family: arial, helvetica, sans-serif;"><strong>Prerequisites:</strong></span></p><p style="margin-bottom: .0001pt;"></p><ul style="list-style-type: disc;"><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Intermediate to Advanced experience with ServiceNow will smooth over places in the labs where I don't spell out exactly what should be done.   Consider this an Advanced Skill Level article.</span></li></ul><p style="margin-bottom: .0001pt;"></p><ul style="list-style-type: disc;"><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">You are going to want to work through the <a title="" _jive_internal="true" href="/groups/servicenow-user-group-us-tx-north-texas/blog/2016/02/13/mini-lab-workflow-control-via-property-input">Property Input article</a> (#3) first.   We will be expanding on the Service Catalog and Workflow we constructed there.</span></li></ul><p style="margin-bottom: .0001pt;"></p><ul style="list-style-type: disc;"><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Also, if you have not done so, you might want to run through my other lab on how to do advanced work with the If Activity; as we will be using the techniques describe there in this series of labs:</span></li></ul><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt; text-indent: .5in;"><span style="font-family: arial, helvetica, sans-serif;"><a _jive_internal="true" href="/groups/servicenow-user-group-us-tx-north-texas/blog/2015/10/18/mini-lab-workflows--playing-with-the-if-activity"><span style="font-size: 12.0pt; color: #266fc8; background: white;">Mini-Lab: Workflows - Playing With the If Activity</span></a></span></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"><span style="font-size: 16pt; font-family: arial, helvetica, sans-serif;"><strong>Requirements</strong></span></p><p style="margin-bottom: .0001pt;"></p><ol style="list-style-type: decimal;"><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Create a Service Catalog Item / Workflow combination where properties changed by an application owner will affect what occurs in the workflow.</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Place this Service catalog Item under the Can We Help You? Service Catalog Category.</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">The name of the Service Catalog Item will be: Workflow Control via Property Input</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">The Service Catalog item will contain a single variable: State.</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">State can have four choices: New, Active, Open, and Closed.   The underlying values of these will be 0,1,2,3 respectively.</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Only the Order Now button will appear on the Service Catalog Item.</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">There will be a new application named: Workflow Patterns</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">There will be a section under Workflow Patterns labeled: Administration.</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">In the Administration section there will be a module that will contain a properties page named: Properties.</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">There will be three properties:</span><ol style="list-style-type: lower-alpha;"><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Property 1 will be labeled: React on Active?, and will be a checkbox.   Default will be checked.</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Property 2 will be labeled: React on Open?, and will be a checkbox.   Default will be checked.</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Property 3 will be labeled: Possible Choices (New, Closed, Monkeys)</span></li></ol></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">The workflow will print a message in the log that indicates a particular state was chosen.</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">The workflow will check to see if the React on Active is checked.   If it is it will place a log statement saying so in the System Log.</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">The workflow will check to see if the React on Open is checked.   If it is it will place a log statement saying so in the System Log.</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">The workflow will check to see if the New and/or Closed are listed.   If either is it will place a log statement saying so in the System Log.</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">If nothing is chosen or an unknown value is present then an unknown message will be printed in the log.</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">If Monkeys is listed in the Possible Choices field then the Active, Closed, and Unknown log messages will change to reflect that Monkeys was chosen.</span></li></ol><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"><span style="font-size: 16pt; font-family: arial, helvetica, sans-serif;"><strong>Design</strong></span></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">1. </span><span style="font-size: 12pt;">Create a Service Catalog Item (Req #1)</span></span></p><ol style="list-style-type: decimal;"><ol style="list-style-type: lower-alpha;"><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Name: Workflow Control via Property Input (Req #1,3)</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Category: How Can We Help You? (Req #2)</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Deactivate every shopping cart feature except Order Now. (Req #6)</span></li></ol></ol><p style="margin-left: 1.0in; margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">2. </span><span style="font-size: 12pt;">Catalog Item Variables: (Req #4,5)</span></span></p><ol style="list-style-type: decimal;"><ol style="list-style-type: lower-alpha;"><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Name: State</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Choice List</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Choices: New, Active, Open, Closed</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Values will be the strings: 0, 1, 2, 3</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Choices will be entered into the Choices table</span></li></ol></ol><p style="margin-left: 1.0in; margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">3. </span><span style="font-size: 12pt;">Create a new Application (Req #7,8)</span></span></p><ol style="list-style-type: decimal;"><ol style="list-style-type: lower-alpha;"><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Name: Workflow Patterns</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Create a section in the new application labeled: Administration.</span></li></ol></ol><p style="margin-left: 1.0in; margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">4. </span><span style="font-size: 12pt;">Create three System Properties (Req #10)</span></span></p><p style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">a. </span><span style="font-size: 12pt;">Name: workflow.react_on_active</span></span></p><ol style="list-style-type: decimal; padding-left: 30px;"><ul style="padding-left: 30px;"><li style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt; line-height: 1.5;">Description: React on Active?</span></li><li style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt; line-height: 1.5;">Type: true/false</span></li><li style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt; line-height: 1.5;">Associated to Workflow Patterns -&gt; Properties page</span></li></ul></ol><p style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">b. </span><span style="font-size: 12pt;">Name: workflow.react_on_active</span></span></p><ol style="list-style-type: decimal; padding-left: 30px;"><ul style="padding-left: 30px;"><li style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt; line-height: 1.5;">Description: React on Active?</span></li><li style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt; line-height: 1.5;">Type: true/false</span></li><li style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt; line-height: 1.5;">Associated to Workflow Patterns -&gt; Properties page</span></li></ul></ol><p style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">c. </span><span style="font-size: 12pt;">Name: workflow:possible_choices</span></span></p><ol style="list-style-type: decimal; padding-left: 30px;"><ul style="padding-left: 30px;"><li style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt; line-height: 1.5;">Possible Choices (New,Closed)</span></li><li style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt; line-height: 1.5;">Type: String</span></li><li style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt; line-height: 1.5;">Associated to Workflow Patterns -&gt; Properties page</span></li></ul></ol><p style="margin-left: 1.5in; margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">5. </span><span style="font-size: 12pt;">Create a new System Property Category</span></span></p><ol style="list-style-type: decimal;"><ol style="list-style-type: lower-alpha;"><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Name: Workflow Patterns</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Title: Workflow Patterns</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Associate this to the two system properties in Design#4.</span></li></ol></ol><p style="margin-left: .75in; margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">6. </span><span style="font-size: 12pt;">Create a new Module under Workflow Patterns (Req #9)</span></span></p><ol style="list-style-type: decimal;"><ol style="list-style-type: lower-alpha;"><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Name: Properties</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Type: Properties page.</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Link: Workflow Patterns System Property Category.</span></li></ol></ol><p style="margin-left: .75in; margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">7. </span><span style="font-size: 12pt;">Workflow design will be as follows: (Req #1, 11,12,13,14,15,16)</span></span><span style="font-family: arial, helvetica, sans-serif;"> </span></p><p style="margin-bottom: .0001pt;"><span style="font-family: arial, helvetica, sans-serif;"> <br/></span></p><p style="margin-bottom: .0001pt;"><span style="font-family: arial, helvetica, sans-serif;"><img  class="image-22 jive-image" src="12cdb40edb509f048c8ef4621f961947.iix" style="width: 620px; height: 425px; display: block; margin-left: auto; margin-right: auto;"/></span></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"><span style="font-size: 16pt; font-family: arial, helvetica, sans-serif;"><strong>Development</strong></span></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Our requirements and design are finished. Let us now create the solution!</span></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">We will be building off of our solution from the previous article.   So, same properties; we will be adding one new one.   Same properties page, and application.   Same Service Catalog.   However, we will be copying our previous workflow and expanding on it.</span></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"><span style="font-size: 14pt; font-family: arial, helvetica, sans-serif;"><strong>Lab 1.1: Adding Possible Choices to the Properties Page</strong></span></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">1. </span><span style="font-size: 12pt;">In the navigation filter type sys_properties.list and press enter.   This will open up the System Properties list view.</span></span></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">2. </span><span style="font-size: 12pt;">Click on the New button to open the New properties form.</span></span></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">3. </span><span style="font-size: 12pt;">Fill in the form with the following:</span></span></p><ol style="list-style-type: decimal;"><ol style="list-style-type: lower-alpha;"><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;"><strong>Name</strong>: workflow.possible_choices</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;"><strong>Description</strong> (this will act as the question in the properties page): Possible Choices (New, Closed):</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;"><strong>Type</strong>: String</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;"><strong>Value</strong>: New,   Monkeys</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Right-Click on the form header to display the form context menu, and choose Save to save your work.</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Scroll to the bottom of the form to view the System Property Category list view.   Note that it is now empty.</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Click on the <strong>Edit</strong> button.   This will display a Select List of System Property Categories. </span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Filter for <strong>Workflow Patterns</strong>, and select this category.   </span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Click on Save to save your work.   This will display the workflow.possible_choices property form. Scroll to the bottom to verify that the property is now associated to the Workflow Patterns System Property Category.</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Click on the <strong>Workflow Patterns</strong> link in the System Property Categories related list.   This will display the Workflow Patterns System Property Categories form.</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Scroll to the bottom of the form.   You will see the associated System Properties list view. Note the ordering.</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Make the workflow.possible_choices order to be <strong>300</strong>.</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Click on the Update button to make sure you save your work.   To make sure you have saved your work. This will return you to the workflow.possible_choices form.   </span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Click on the Update button to make sure to save your work.   Just to make sure your work is saved.   This will return you to the System Properties list view.</span></li></ol></ol><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"><img   class="image-15 jive-image" src="bdcd70cadb1013043eb27a9e0f9619ab.iix" style="width: 620px; height: 356px; display: block; margin-left: auto; margin-right: auto;"/></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"><span style="font-size: 14pt; font-family: arial, helvetica, sans-serif;"><strong>Lab 1.2: Creating the Workflow</strong></span></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">1. </span><span style="font-size: 12pt;">Navigate to Workflow -&gt; Workflow Editor.   A new tab will open in your browser and the Workflow Editor will be displayed.</span></span></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">2. </span><span style="font-size: 12pt;">From the Workflows tab scroll down until you find the <strong>Workflow Control Via Property Input,</strong> which you created in the previous <a title="" _jive_internal="true" href="/groups/servicenow-user-group-us-tx-north-texas/blog/2016/02/13/mini-lab-workflow-control-via-property-input">article</a>.   Open the workflow.</span></span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">3. </span><span style="font-size: 12pt;">Click on the "hamburger" (Workflow Form Context) button in the upper left to display the Context menu.</span></span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">4. </span><span style="font-size: 12pt;">Click on the Copy menu item.   This will display the Workflow Name form</span></span></p><p></p><p><img  class="image-23 jive-image" src="362d14cedbd81f048c8ef4621f96198a.iix" style="width: auto; height: auto; display: block; margin-left: auto; margin-right: auto;"/></p><p></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">5. </span><span style="font-size: 12pt;">Fill out the form with the following:</span></span></p><ol style="list-style-type: decimal;"><ol style="list-style-type: lower-alpha;"><li><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;"><strong>Name</strong></span><span style="font-size: 12pt;">: Workflow Control Via Variable Examination</span></span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Click on the OK Button to create the new workflow.</span></li></ol></ol><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"><img   alt="Snap 2016-02-16 at 08.15.56.png" class="image-9 jive-image" src="73c2e542db90df048c8ef4621f96195b.iix" style="width: auto; height: auto; display: block; margin-left: auto; margin-right: auto;"/></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">6. </span><span style="font-size: 12pt;">Right-Click on the <strong>Check Properties</strong> If Activity header to display the Activity Context menu, and choose <strong>Add Condition</strong> (be patient, for whatever reason this can take several seconds to display!).   The new Condition Properties form will appear. </span></span></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"><img   class="image-16 jive-image" src="6e2d948adb9c9704ed6af3231f961998.iix" style="max-width: 1200px; max-height: 900px;"/></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">7. </span><span style="font-size: 12pt;"> Fill out the form with the following:</span></span></p><ol style="list-style-type: decimal;"><ol style="list-style-type: lower-alpha;"><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;"><strong>Name:</strong> isOpen</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;"><strong>Condition Type</strong>: standard</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;"><strong>Skip during generate</strong>: checked</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;"><strong>Condition</strong>: workflow.scratchpad.result.open == true</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Click on the <strong>Submit</strong> button to save your work.</span></li></ol></ol><p style="margin-left: 1.0in; margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">8. </span><span style="font-size: 12pt;">Repeat the procedure.   Fill out the form with the following:</span></span></p><ol style="list-style-type: decimal;"><ol style="list-style-type: lower-alpha;"><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;"><strong>Name</strong>: isClosed</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;"><strong>Condition Type</strong>: standard</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;"><strong>Skip during generate</strong>: checked</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;"><strong>Condition</strong>: workflow.scratchpad.result.closed == true</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Click on the <strong>Submit</strong> button to save your work.</span></li></ol></ol><p style="margin-left: 1.0in; margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">9. </span><span style="font-size: 12pt;">Open the <strong>Check Properties</strong> If Activity</span></span></p><p></p><p style="padding-left: 30px;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">a. <strong>Name</strong>: Check Properties (just making sure)</span></p><p style="padding-left: 30px;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">b. Change the <strong>Script</strong> to be the following:</span></p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="_jivemacro_uid_14558116697852057 jive_macro_code jive_text_macro" data-renderedposition="5653.109375_8_1192_384" jivemacro_uid="_14558116697852057"><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">var identifier = context.name + '.' + activity.name;</span></p><p></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">workflow.scratchpad.result = ifScript();</span></p><p></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">function ifScript() {</span></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">                       var result = {new1:false, active:false, open:false, closed:false, monkeys:false, unknown:false};             </span></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">                       </span></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">                       result.new1 = (workflow.variables.state == 0 &amp;&amp; workflow.scratchpad.new1);</span></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">                       result.active = (workflow.variables.state == 1 &amp;&amp; workflow.scratchpad.active);</span></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">                       result.open = (workflow.variables.state == 2 &amp;&amp; workflow.scratchpad.open);</span></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">                       result.closed = (workflow.variables.state == 3 &amp;&amp; workflow.scratchpad.closed);</span></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">                       result.monkeys = workflow.scratchpad.monkeys;</span></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">                       </span></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">                       // Debug</span></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">                       //gs.info('---&gt; [WF:{0}] {1} - {2} - {3} - {4}', identifier, result.new1, result.active, result.open, result.monkeys);</span></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">                       </span></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">                       // make sure you have a catch all</span></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">                       result.unknown = (</span></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">                                               !(result.new1</span></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">                                                   || result.active </span></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">                                                   || result.open</span></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">                                                   || result.closed)</span></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">                       );</span></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">                                                                                                                           </span></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">                       return result;</span></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">}</span></p><p></p></pre><p></p><p style="padding-left: 30px;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">c. Click <strong>Save</strong> to save your work.</span></p><p></p><p></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">10. </span><span style="font-size: 12pt;">Your If Activity should look like this:</span></span></p><p><img  class="image-24 jive-image" src="2bfeb3b5db54db048c8ef4621f96196c.iix" style="max-width: 1200px; max-height: 900px;"/></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">11. </span><span style="font-size: 12pt;">Open the <strong>Initialize</strong> Run Script Activity.</span></span></p><p></p><ol style="list-style-type: lower-alpha;"><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Replace the Script with the following:</span></li></ol><p style="margin-bottom: .0001pt;"></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_1455681008069886 jive_text_macro" data-renderedposition="6433.703125_8_1192_288" jivemacro_uid="_1455681008069886"><p style="margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">var identifier = context.name + '.' + activity.name;</span></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">workflow.scratchpad.active = gs.getProperty('workflow.react_on_active') == 'true';</span></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">workflow.scratchpad.open = gs.getProperty('workflow.react_on_open') == 'true';</span></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">// separating these out into individual ifs allows for parallel execution in the</span></p><p style="margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">// workflow.   Be careful with this.   It could introduce problems if you don't do</span></p><p style="margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">// it correctly.</span></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">workflow.scratchpad.possibleChoices = gs.getProperty('workflow.possible_choices').toLowerCase();</span></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">workflow.scratchpad.new1 = (workflow.scratchpad.possibleChoices.indexOf('new') &gt; -1);</span></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">workflow.scratchpad.closed = (workflow.scratchpad.possibleChoices.indexOf('closed') &gt; -1);</span></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">workflow.scratchpad.monkeys = (workflow.scratchpad.possibleChoices.indexOf('monkeys') &gt; -1);</span></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">// Debug</span></p><p style="margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">//gs.info('---&gt; [wf:{0}] {1} - {2} - {3}', identifier, workflow.scratchpad.new1, workflow.scratchpad.closed, workflow.scratchpad.monkeys);</span></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"></p></pre><p></p><p style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">b.       </span><span style="font-size: 12pt;">Click on the Update button to save your work.</span></span></p><p></p><p><span style="font-size: 12pt;">12. </span><span style="font-size: 12pt;">From the Core tab on the editor navigate to Utilities and drag a Run Script Activity onto the form.   The Activity Properties form will appear.</span></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">13. </span><span style="font-size: 12pt;">Fill out the form with the following:</span></span></p><p style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">a. </span><span style="font-size: 12pt;"><strong>Name</strong></span><span style="font-size: 12pt;">: Log Open</span></span></p><p style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">b. </span><span style="font-size: 12pt;"><strong>Script</strong></span><span style="font-size: 12pt;">:</span></span></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"></p><pre __default_attr="javascript" __jive_macro_name="code" class="_jivemacro_uid_14556810920398749 jive_macro_code jive_text_macro" data-renderedposition="6946.703125_8_1192_64" jivemacro_uid="_14556810920398749"><p style="margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">var identifier = context.name + '.' + activity.name;</span></p><p style="margin-left: .75in; margin-bottom: .0001pt;"></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">gs.info('---&gt; [WF:{0}] Open triggered!', identifier);</span></p><p style="margin-bottom: .0001pt;"></p></pre><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: 0.0001pt; padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">c. </span><span style="font-size: 12pt;">Click the Submit button to save your work.</span></span></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">14. </span><span style="font-size: 12pt;">From the Core tab on the editor navigate to Utilities and drag a Run Script Activity onto the form.   The Activity Properties form will appear.</span></span></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">15. </span><span style="font-size: 12pt;">Fill out the form with the following<span style="font-family: arial, helvetica, sans-serif; font-size: 16px;"> (Req #16)</span>:</span></span></p><p style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">a. </span><span style="font-size: 12pt;"><strong>Name</strong></span><span style="font-size: 12pt;">: Log Closed</span></span></p><p style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">b. </span><span style="font-size: 12pt;"><strong>Script</strong></span><span style="font-size: 12pt;">:</span></span><span style="font-family: arial, helvetica, sans-serif;"> </span></p><p style="padding-left: 30px;"></p><p style="margin-bottom: .0001pt;"></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code jive_text_macro _jivemacro_uid_14556811058855473" data-renderedposition="7256.703125_8_1192_144" jivemacro_uid="_14556811058855473"><p style="margin-left: .75in; margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">var identifier = context.name + '.' + activity.name;</span></p><p style="margin-left: .75in; margin-bottom: .0001pt;"></p><p style="margin-left: .75in; margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">if (workflow.scratchpad.result.monkeys) {</span></p><p style="margin-left: .75in; margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">           gs.warn('---&gt; [WF:{0}] There were monkeys present at closing!', identifier);</span></p><p style="margin-left: .75in; margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">}</span></p><p style="margin-left: .75in; margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">else {</span></p><p style="margin-left: .75in; margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">           gs.info('---&gt; [WF:{0}] Closed triggered!', identifier);</span></p><p style="margin-left: .75in; margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">}</span></p><p style="margin-left: .75in; margin-bottom: .0001pt;"></p></pre><p style="margin-bottom: .0001pt;"></p><p style="padding-left: 30px;"><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">c. </span><span style="font-size: 12pt;">Click the Submit button to save your work.</span></span></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">16. </span><span style="font-size: 12pt;">Open the <strong>Log Active</strong> Run Script and change the Script to the following<span style="font-family: arial, helvetica, sans-serif; font-size: 16px;"> (Req #16)</span>:</span></span></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"></p><pre __default_attr="javascript" __jive_macro_name="code" class="_jivemacro_uid_14556811390699499 jive_macro_code jive_text_macro" data-renderedposition="7532.703125_8_1192_144" jivemacro_uid="_14556811390699499"><p style="margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">var identifier = context.name + '.' + activity.name;</span></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">if (workflow.scratchpad.result.monkeys) {</span></p><p style="margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">                       gs.warn('---&gt; [WF:{0}] Monkeys were present when Active was triggered!', identifier);</span></p><p style="margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">}</span></p><p style="margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">else {</span></p><p style="margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">                       gs.info('---&gt; [WF:{0}] Active triggered!', identifier);</span></p><p style="margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">}</span></p><p style="margin-bottom: .0001pt;"></p></pre><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">17. </span><span style="font-size: 12pt;">Open the <strong>Log Failure</strong> Run Script and change the Script to the following (Req #16):</span></span><span style="font-family: arial, helvetica, sans-serif;"> </span></p><p style="margin-bottom: .0001pt;"></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14556811510073857 jive_text_macro" data-renderedposition="7763.703125_8_1192_144" jivemacro_uid="_14556811510073857"><p style="margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">var identifier = context.name + '.' + activity.name;</span></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">if (workflow.scratchpad.result.monkeys) {</span></p><p style="margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">                       gs.error('---&gt; [WF:{0}] Something bad happened probably due to monkeys!', identifier);</span></p><p style="margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">}</span></p><p style="margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">else {</span></p><p style="margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">                       gs.info('---&gt; [WF:{0}] Nothing triggered!', identifier);</span></p><p style="margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">}</span></p><p style="margin-bottom: .0001pt;"></p></pre><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">18. </span><span style="font-size: 12pt;">Wire up your workflow to look like the following diagram:</span></span></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"><span style="font-family: arial, helvetica, sans-serif;"><img  class="jive-image image-25" src="05d38902db10d344e9737a9e0f96193c.iix" style="width: 620px; height: 416px; display: block; margin-left: auto; margin-right: auto;"/></span></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">At this point you may want to <strong>Publish</strong> your workflow to save it down.   However, that is not really necessary as you will be the only one testing it.</span></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"><span style="font-size: 14pt; font-family: arial, helvetica, sans-serif;"><strong>Lab 1.3: Building the Service Catalog Item</strong></span></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Now we are ready to create the user interface (UI).</span></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">1. </span><span style="font-size: 12pt;">Navigate to Service Catalog -&gt; Catalog Definitions -&gt; Maintain Items.   The Catalog Items list view will be displayed.</span></span></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">2. </span><span style="font-size: 12pt;">Click the New button.   The New Catalog Item form will be displayed.</span></span></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">3. </span><span style="font-size: 12pt;">Fill out the form with the following:</span></span></p><ol style="list-style-type: decimal;"><ol style="list-style-type: lower-alpha;"><li><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;"><strong>Name</strong></span><span style="font-size: 12pt;">: Workflow Control Via Variable Examination</span></span></li><li><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;"><strong>Active</strong></span><span style="font-size: 12pt;">: checked</span></span></li><li><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;"><strong>Availability</strong></span><span style="font-size: 12pt;">: Desktop Only</span></span></li><li><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;"><strong>Catalogs</strong></span><span style="font-size: 12pt;">:   Service Catalog</span></span></li><li><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;"><strong>Category</strong></span><span style="font-size: 12pt;">: Can We Help You?</span></span></li><li><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;"><strong>Workflow</strong></span><span style="font-size: 12pt;">:   Workflow Control Via Variable Examination</span></span></li><li><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;"><strong>Short Description</strong></span><span style="font-size: 12pt;">: Workflow Control Via Variable Examination</span></span></li><li><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;"><strong>Use Cart Layout</strong></span><span style="font-size: 12pt;">: not checked</span></span></li><li><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;"><strong>Omit price in cart</strong></span><span style="font-size: 12pt;">: checked</span></span></li><li><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;"><strong>No quantity</strong></span><span style="font-size: 12pt;">: checked</span></span></li><li><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;"><strong>No proceed checkout</strong></span><span style="font-size: 12pt;">: checked</span></span></li><li><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;"><strong>No cart</strong></span><span style="font-size: 12pt;">: checked</span></span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Right-click on the form header to bring up the context menu.</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Choose Save to save your work and remain on the form.</span></li></ol></ol><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"><img   class="image-17 jive-image" src="07fe33bddb901344e9737a9e0f9619ee.iix" style="width: 620px; height: 355px; display: block; margin-left: auto; margin-right: auto;"/></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">4. </span><span style="font-size: 12pt;">Scroll to the bottom of the Item form.   You will see the tabs for the related lists.</span></span></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">5. </span><span style="font-size: 12pt;">Choose Variables, and click the New button.   The New Variable Form will be displayed.</span></span></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">6. </span><span style="font-size: 12pt;">Fill out the form with the following:</span></span></p><ol style="list-style-type: decimal;"><ol style="list-style-type: lower-alpha;"><li><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;"><strong>Type</strong></span><span style="font-size: 12pt;">: Select Box</span></span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Click on the Question tab.</span></li><li><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;"><strong>Question</strong></span><span style="font-size: 12pt;">: State</span></span></li><li><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;"><strong>Name</strong></span><span style="font-size: 12pt;">: state</span></span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Click on the Type Specifications tab.</span></li><li><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;"><strong>Include None</strong></span><span style="font-size: 12pt;">: checked</span></span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Right-click at the top of the Variable form to display the context menu.</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Choose Save to save your work and remain on the form.</span></li></ol></ol><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"><img   class="jive-image image-18" src="988d5d06db98d304b322f4621f9619a9.iix" style="width: 620px; height: 251px; display: block; margin-left: auto; margin-right: auto;"/></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">7. </span><span style="font-size: 12pt;">Scroll to the bottom of the Variable form.   You will see the Question Choices related list displayed.</span></span></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">8. </span><span style="font-size: 12pt;">Click on the New button.   The New Question Choice form will be displayed.</span></span></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">9. </span><span style="font-size: 12pt;"> Fill in the form with the following:</span></span></p><ol style="list-style-type: decimal;"><ol style="list-style-type: lower-alpha;"><li><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;"><strong>Text</strong></span><span style="font-size: 12pt;">: New</span></span></li><li><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;"><strong>Value</strong></span><span style="font-size: 12pt;">: 0</span></span></li></ol></ol><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">10. </span><span style="font-size: 12pt;">Right-click on the Question Choice form header to bring up the context menu.</span></span></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">11. </span><span style="font-size: 12pt;">Click on Save to save your work and remain on the form.</span></span></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">12. </span><span style="font-size: 12pt;">Change the form to the following:</span></span></p><ol style="list-style-type: decimal;"><ol style="list-style-type: lower-alpha;"><li><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;"><strong>Name</strong></span><span style="font-size: 12pt;">: Active</span></span></li><li><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;"><strong>Value</strong></span><span style="font-size: 12pt;">: 1</span></span></li></ol></ol><p style="margin-left: 1.0in; margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">13. </span><span style="font-size: 12pt;">Right-Click on the Question Choices form header and choose Insert and Stay.   This will write down a new record with the new values, and keep you in the form.</span></span></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">14. </span><span style="font-size: 12pt;">Change the form to the following:</span></span></p><ol style="list-style-type: decimal;"><ol style="list-style-type: lower-alpha;"><li><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;"><strong>Name</strong></span><span style="font-size: 12pt;">: Open</span></span></li><li><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;"><strong>Value</strong></span><span style="font-size: 12pt;">: 2</span></span></li></ol></ol><p style="margin-left: 1.0in; margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">15. </span><span style="font-size: 12pt;">Right-Click on the Question Choices form header and choose Insert and Stay.   This will write down a new record with the new values, and keep you in the form.</span></span></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">16. </span><span style="font-size: 12pt;">Change the form to the following:</span></span></p><ol style="list-style-type: decimal;"><ol style="list-style-type: lower-alpha;"><li><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;"><strong>Name</strong></span><span style="font-size: 12pt;">: Closed</span></span></li><li><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;"><strong>Value</strong></span><span style="font-size: 12pt;">: 3</span></span></li></ol></ol><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">17. </span><span style="font-size: 12pt;">Right-Click on the Question Choices form header and choose Insert.   This will write down a third choice record, and will then return you to the Item form.</span></span></p><p></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">18. Set the order of your choices from the list view.   </span><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">The Question Choices list view should now look something like this:</span></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"><span style="font-family: arial, helvetica, sans-serif;"><strong> <img   class="image-3 jive-image" src="2240204adbd85344e9737a9e0f961972.iix" style="display: block; margin-left: auto; margin-right: auto; width: 620px; height: 229px;"/></strong></span></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"><span style="font-size: 14pt; font-family: arial, helvetica, sans-serif;"><strong>Unit Test</strong></span></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">There are so many options with this design that unit testing has to be approached differently than in the previous two articles. So we will go through the exercise of listing out the various tests that need to be created, then creating a couple to demonstrate that things are actually working.</span></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"><strong style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Unit Tests that need creating:</strong></p><p style="margin-bottom: .0001pt;"></p><ol style="list-style-type: decimal;"><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Check that new Possible Choices property is available in the Properties page.</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Test if New property checked and New picked on Service Catalog that is New path is activated in the workflow.</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Test if Active property checked and Active picked on the Service Catalog that is Active path is activated in the workflow</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Test if Open listed in Possible Choices property and Open picked in the Service Catalog that is Open path is active in the workflow.</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Test if Closed listed in Possible Choices property and Closed picked in the Service Catalog that is Closed path is active in the workflow.</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Test if Closed and Monkeys listed in Possible Choices property and Closed picked in the Service Catalog that is Closed path is active and the "Monkeys" log message is placed in the System Log.</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Test if Monkeys and Hello listed in Possible Choices property and any value is chosen in the Service Catalog that is Unknown path is active and "Monkeys" log message is placed in the System Log.</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">...And…well, you get the idea.   You need to be thorough when it comes to unit testing!</span></li></ol><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">So let's test a couple of these to see if things really do work!</span></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">1. </span><span style="font-size: 12pt;">Navigate to Workflow Patterns -&gt; Administration -&gt; Properties.   The Workflow Properties page will be displayed.</span></span></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">2. </span><span style="font-size: 12pt;">Validate that the three properties are present. Change the values to be the following:</span></span></p><p></p><ol style="list-style-type: lower-alpha;"><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;"><strong>Active</strong> is checked</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;"><strong>Open</strong> is unchecked</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;"><strong>Possible Choices</strong> has the following: New, Monkeys.</span></li><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Click the Save button to save your changes.</span></li></ol><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"><span style="font-family: arial, helvetica, sans-serif;"><img   class="image-2 jive-image" src="a7f0098adb9c9304b322f4621f9619c7.iix" style="display: block; margin-left: auto; margin-right: auto; width: 620px; height: 340px;"/></span></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">3. </span><span style="font-size: 12pt;">Navigate to Self-Service -&gt; Service Catalog. The Service Catalog home page will be displayed.</span></span></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"><img   class="image-6 jive-image" src="cc8f37bddb185fc068c1fb651f96196b.iix" style="max-width: 1200px; max-height: 900px;"/></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">4. </span><span style="font-size: 12pt;">Click on the Can We Help You? Service Catalog item. The list of Help Service Catalog items will be displayed.</span></span></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"><img   class="jive-image image-10" src="ebafb042db9c9304b322f4621f9619fd.iix" style="max-width: 1200px; max-height: 900px;"/></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">5. </span><span style="font-size: 12pt;">Scroll down until you find the Service Catalog Item labeled: Workflow Control Via Variable Examination, and click that link.   The Workflow Control Via Variable Examination page will be displayed and should look something like this:</span></span></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"><img   class="image-12 jive-image" src="c79f9442dbd85344e9737a9e0f9619b5.iix" style="max-width: 1200px; max-height: 900px;"/></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">6. </span><span style="font-size: 12pt;">Choose the State value of <strong>Active</strong>, and click the Order Now button.   The Order Status form will be displayed.</span></span></p><p></p><p><img   class="image-13 jive-image" src="a1bcbbfddb945fc068c1fb651f9619e0.iix" style="max-width: 1200px; max-height: 900px;"/></p><p></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">7. </span><span style="font-size: 12pt;">Click on the RITM number.   The Requested Item form will be displayed. </span></span></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"><span style="font-size: 12pt;">8. </span><span style="font-size: 12pt;">From the Requested Item Form scroll down to related links.</span></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"><img   class="jive-image image-14" src="b4c0250edb9cd344e9737a9e0f961966.iix" style="max-width: 1200px; max-height: 900px;"/></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">9. </span><span style="font-size: 12pt;">Click on the Show Workflow link.   This will display the current workflow.</span></span></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">10. </span><span style="font-size: 12pt;">The workflow should show that the <strong>Active</strong> path was executed.</span></span></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"><img  class="image-26 jive-image" src="49a36c8adbd057049c9ffb651f9619b8.iix" style="width: 620px; height: 408px; display: block; margin-left: auto; margin-right: auto;"/></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">11. </span><span style="font-size: 12pt;">Close the workflow browser tab.</span></span></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">12. </span><span style="font-size: 12pt;">Navigate to Self-Service -&gt; Service Catalog. The Service Catalog home page will be displayed.</span></span></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">13. </span><span style="font-size: 12pt;">Click on the Can We Help You? Service Catalog item. The list of Help Service Catalog items will be displayed.</span></span></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">14. </span><span style="font-size: 12pt;">Scroll back down until you find the Service Catalog Item labeled: Workflow Control Via Variable Examination, and click that link. The Workflow Control Via Variable Examination page will be displayed.</span></span></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">15. </span><span style="font-size: 12pt;">Choose the State value of <strong>Closed</strong>, and click the Order Now button.   The Order Status form will be displayed.</span></span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">16. </span><span style="font-size: 12pt;">Click on the RITM number.   The Requested Item form will be displayed. </span></span></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">17. </span><span style="font-size: 12pt;">From the Requested Item Form scroll down to related links.</span></span></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">18. </span><span style="font-size: 12pt;">Click on the Show Workflow link.   This will display the current workflow.</span></span></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">19. </span><span style="font-size: 12pt;">The workflow should show that the <strong>Unknown</strong> path was executed.   This is because Closed was not listed in the Possible Choices property and therefore the default fired.</span></span></p><p></p><p><img  class="image-27 jive-image" src="95c2884adb1c5704ed6af3231f96190c.iix" style="width: 620px; height: 426px; display: block; margin-left: auto; margin-right: auto;"/></p><p></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">20. </span><span style="font-size: 12pt;">Close the workflow browser tab.</span></span></p><p></p><p><span style="font-size: 12pt;">21. </span><span style="font-size: 12pt;">Navigate to System Logs -&gt; System Log -&gt; All. The System Log list view will be displayed.</span></p><p></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">22. </span><span style="font-size: 12pt;">Filter for Message starts with "---&gt; [". This will display the list of messages written by the workflow.</span></span></p><p style="margin-bottom: .0001pt;"></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">23. </span><span style="font-size: 12pt;">Note that the first entry should be for the <strong>Active</strong> branch of the workflow firing.   The second should be for the <strong>Unknown</strong> branch of the workflow firing.   Because we had <strong>Monkeys</strong> listed in the Possible Choices property we also were able to trigger the code that checked for Monkeys. <span __jive_emoticon_name="happy" __jive_macro_name="emoticon" class="jive_emote jive_macro" data-renderedposition="15619.546875_844.875_16_16" src="/8.0.1.35b65d4/images/emoticons/happy.png"></span></span></span></p><p></p><p><img   class="jive-image image-21" src="55c061c2db50df048c8ef4621f961927.iix" style="width: 620px; height: 176px; display: block; margin-left: auto; margin-right: auto;"/></p><p></p><p><span style="font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt;">24. </span><span style="font-size: 12pt;">You should go ahead and now test the other possibilities.   Ahhh, make-work, gotta love it! <span __jive_emoticon_name="happy" __jive_macro_name="emoticon" class="jive_emote jive_macro" data-renderedposition="15885.546875_672.390625_16_16" src="/8.0.1.35b65d4/images/emoticons/happy.png"></span></span><br/></span></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">The demonstration of this pattern was to show that it is possible to use a variety of variable and property combinations to control any workflow.   This flexibility allows for a lot of complexity.   </span></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">That concludes the third data controlled workflow pattern example.</span></p><p style="margin-bottom: .0001pt;"></p><p style="margin-bottom: .0001pt;"><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;"><span style="font-size: 12pt; line-height: 1.5;">If you have read my previous three articles on workflow patterns you are probably getting pretty much tired of workflows! Hang in there!   This is the last one…um, for a bit.   I actually have three or four more planned dealing with Orchestration Framework workflows!   </span><span __jive_emoticon_name="happy" __jive_macro_name="emoticon" class="jive_emote jive_macro" data-renderedposition="16092.546875_696.296875_16_16" src="/8.0.1.35b65d4/images/emoticons/happy.png" style="font-size: 12pt; line-height: 1.5;"></span></span></p><p style="margin-bottom: .0001pt; background: white;"></p><p style="margin-bottom: .0001pt; background: white;"><span style="font-family: arial, helvetica, sans-serif; color: #666666;">Steven Bell</span></p><p style="margin-bottom: .0001pt; background: white;"></p><p style="margin-bottom: .0001pt; background: white;"></p><p style="margin-bottom: .0001pt; background: white;"><span style="color: purple; font-family: arial, helvetica, sans-serif;"><strong>If you find this article helps you, don't forget to log in and "like" it!</strong></span></p><p style="margin-bottom: .0001pt; background: white;"></p><p style="margin-bottom: .0001pt; background: white;"><span style="color: purple; font-family: arial, helvetica, sans-serif;"><strong>Also, if you are not already, I would like to encourage you to become a member of our blog!</strong></span></p>