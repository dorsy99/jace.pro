---
title: "GQL Glide Query Language Part  GQL Pad"
date: 2016-10-28T02:01:50.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=8d2e266ddbd0dbc01dcaf3231f9619ef"
---
<p><a title="" _jive_internal="true" href="/community?id=community_blog&sys_id=ce2ee66ddbd0dbc01dcaf3231f961990">Last time</a>, we saw how the processor handles web service requests and responses, executing GQL statements and returning encoded result sets. This time, let's build a simple app where we can edit a GQL statement, run it, and see the results in various formats; we'll call it GQL Pad. This will showcase everything we've done so far and interactively demonstrate the capabilities of GQL.</p><p></p><p><img __jive_macro_name="toc" class="jive_macro_toc jive_macro" data-renderedposition="79_8_61_72" src="/8.0.4.21bdc7e/images/tiny_mce3/plugins/jiveemoticons/images/spacer.gif"/></p><p></p><h3>REQUIREMENTS</h3><p></p><p>Here are some requirements for GQL Pad:</p><p></p><ol style="list-style-type: lower-alpha;"><li>GQL Pad is a web application that runs on the ServiceNow Helsinki release.</li><li>User must have the "itil" role.</li><li>GQL Pad provides a user interface (UI) with the following features:<ol><li>User can enter and edit a GQL statement in a text editor.</li><li>User can select the desired output format among CSV, HTML, JSAN, JSON.</li><li>User can execute the GQL statement in the editor.</li><li>User can see the results of the execution on the same web page (rather than downloading).</li><li>User can see how long it took for execution.</li></ol></li><li>GQL Pad provides GQL syntax checker in the editor. [future enhancement]</li><li>GQL Pad provides GQL syntax highlighting in the editor. [future enhancement]</li><li>GQL Pad provides Database Schema Browser showing a list of tables and columns that can be entered into the editor. [future enhancement]</li></ol><p></p><h3>UI PAGE CONFIGURATION</h3><p></p><p>To get started, let's create a new <strong>UI Page</strong> in the "gql" application scope, as shown in the screenshot below:</p><p></p><p><img   class="image-1 jive-image" src="865eafbddbd49b048c8ef4621f9619af.iix" style="border: 1px solid #ccc; max-width: 1200px; max-height: 900px;"/></p><p></p><p><strong>Endpoint</strong> is what we need to use in the URL to open this UI Page; we'll use it when we create an application module for this. Be sure to check the <strong>Direct</strong> checkbox. This allows us to bypass Jelly, since we'll be using AngularJS instead, and use simpler HTML of our own without any ServiceNow additions (you can later view the page source and compare with other out-of-the-box pages).</p><p></p><h3>HTML CONTENT</h3><p></p><p>The HTML content looks like</p><p></p><pre __default_attr="xml" __jive_macro_name="code" class="_jivemacro_uid_14775827814941770 jive_macro_code jive_text_macro" data-renderedposition="1211.5999755859375_8_898_448" jivemacro_uid="_14775827814941770"><p>&lt;style&gt;</p><p>   body { margin-bottom:20pt; }</p><p></p><p>   label { margin-right: 9px; }</p><p></p><p>   table { font:9pt Arial; border-collapse:collapse; }</p><p>   th,td { padding:3px; border:1px solid #aaa; empty-cells:show; vertical-align:top; }</p><p>   th { font-weight:bold; text-align:left; background-color:#eee; }</p><p>   tr:nth-child(even) { background-color:#fafafa; }</p><p>   tr:hover { background-color:lightyellow; }</p><p>&lt;/style&gt;</p><p></p><p>&lt;body ng-app="gqlpad"&gt;</p><p>   &lt;h3&gt;GQL (Glide Query Language) Pad&lt;/h3&gt;</p><p>   &lt;div ng-controller="EditorCtrl"&gt;</p><p>       &lt;textarea ng-model="gql" rows="20" style="font:9pt Consolas; width:100%;"&gt;&lt;/textarea&gt;</p><p>       &lt;br/&gt;</p><p>       &lt;label&gt;Output format:</p><p>           &lt;select ng-model="format" ng-options="format.name for format in formats"&gt;&lt;/select&gt;</p><p>       &lt;/label&gt; </p><p>       &lt;button ng-click="run()" style="width:80px;" accesskey="r"&gt;&lt;u&gt;R&lt;/u&gt;un&lt;/button&gt;</p><p>       &lt;span ng-bind="timer" style="color:gray; font:9pt Consolas; margin-left:30px;"&gt;&lt;/span&gt;</p><p>       &lt;br/&gt;</p><p>       &lt;div ng-bind-html="result" style="font:9pt Consolas; white-space: pre-wrap;"&gt;&lt;/div&gt;</p><p>   &lt;/div&gt;</p><p>&lt;/body&gt;</p><p></p><p><span>&lt;script&gt;<a title="" _jive_internal="true" href="https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js" rel="nofollow" target="_blank">https://ajax.googleapis.com/ajax/libs/angularjs/1.5.6/angular.min.js</a><span>"&gt;&lt;/script&gt;</span></p></pre><p></p><p>The HTML adds various AngularJS attributes that start with "ng-"; we will use them later in script.</p><p></p><p>Line 13 adds the AngularJS directive "ng-app" and is the start of the GQL Pad app.</p><p></p><p>Line 15 is the start of the ng-conroller "EditorCtrl", which we'll see more of in the script.</p><p></p><p>Line 16 adds a text editor using the "&lt;textarea&gt;" tag.</p><p></p><p>Line 19 adds a &lt;select&gt; list of desired output formats (the options will be added by the script later).</p><p></p><p>Line 21 is the Run button (access key of "r" allows pressing Alt-R on Windows keyboard to invoke the click button action).</p><p></p><p>Line 22 is a placeholder for displaying execution duration.</p><p></p><p>Line 24 is a placeholder for displaying result.</p><p></p><p>Line 28 adds the &lt;script&gt; tag for the AngularJS source, which we're fetching from a CDN (content delivery network).</p><p></p><h3>CLIENT SCRIPT</h3><p></p><p>The Client Script looks like</p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="_jivemacro_uid_14775859241826178 jive_macro_code jive_text_macro" data-renderedposition="2145.599853515625_8_898_528" jivemacro_uid="_14775859241826178"><p>/**</p><p>* GQL (Glide Query Language) Pad</p><p>*/</p><p></p><p>var app = angular.module('gqlpad', []);</p><p></p><p>app.controller('EditorCtrl', ['$scope', '$http', '$sce', function($scope, $http, $sce) {</p><p></p><p>   // set initial value</p><p>   $scope.gql = 'SELECT   -- sample GQL statement\r   number [Number]\r   , short_description [Title]\r   , dv_state [State]\r   , caller_id.email [Caller Email]\r   , caller_id.manager.email [Manager Email]\r   , dv_cmdb_ci [CI]\r   , cmdb_ci\rFROM incident\rWHERE active=true^priority&lt;2^EQ^ORDERBYpriority^ORDERBYDESCnumber\rLIMIT 5,10';</p><p>   </p><p>   $scope.formats = [</p><p>       {name:'CSV' },</p><p>       {name:'HTML'},</p><p>       {name:'JSAN'},</p><p>       {name:'JSON'},</p><p>   ];</p><p>   $scope.format = $scope.formats[1];   // default to HTML</p><p></p><p>   $scope.run = function() {</p><p>       var timer = Date.now();</p><p>       $scope.timer = '';</p><p>       $scope.result = '';</p><p>       var params = { gql:$scope.gql, format:$scope.format.name, now:Date.now() };   // add now() to prevent caching</p><p>       $http.get('/x_64935_gql_proc.do', { params: params }).then(function(response) {</p><p></p><p>           var data = response.data;</p><p>           </p><p>           $scope.result = $sce.trustAsHtml(typeof data == 'object' ? JSON.stringify(data) : data);   // stringify to show JSON on page</p><p>           $scope.timer   = 'took ' + ((Date.now() - timer) / 1e3) + ' seconds';</p><p>       });</p><p>   }</p><p>}]);</p></pre><p></p><p>This is a simple AngularJS script that works with the above HTML to do the following:</p><p></p><p>Line 5 defines the GQL Pad app from HTML Line 13.</p><p></p><p>Line 7 is the beginning of the editor controller, which was declared on HTML Line 15.</p><p></p><p>Line 12 lists the available formats for the output; these will populate the &lt;select&gt; tag on HTML line 19.</p><p></p><p>Line 20 is executed when the Run button is clicked. It clears the output fields and sends a GET command to the processor we saw in <a title="" _jive_internal="true" href="/community?id=community_blog&sys_id=ce2ee66ddbd0dbc01dcaf3231f961990"> Part 6</a>, passing on the parameters <span style="font-family: 'courier new', courier;">gql</span> and <span style="font-family: 'courier new', courier;">format</span> in the query string.</p><p></p><p>Line 27 is the start of the callback function that's executed when a response is returned from the processor. It simply shows the result in the result &lt;div&gt; on HTML line 24; the result is converted to a string to prevent it from opening up in Excel (in case of CSV) or in another window (in case of JSON) to conform to Requirement c.4. It also shows the execution duration in the &lt;span&gt; defined on HTML line 22.</p><p></p><h3>APPLICATION AND MODULE MENUS</h3><p></p><p>To cap this off, let's add application and module menus. Create a new application menu with the settings in the screenshot below:</p><p><img   class="jive-image image-8" src="91c5548adbd49fc03eb27a9e0f9619c7.iix" style="border: 1px solid #ccc; max-width: 1200px; max-height: 900px;"/></p><p></p><p>We set the <strong>Roles</strong> to "<strong>itil</strong>" as specified in Requirement b and set <strong>Category</strong> to "<strong>Custom Applications</strong>". After saving the application menu configuration page, let's add a new module using the <strong>New</strong> button in the <strong>Modules</strong> related list. In the Module configuration page, set the values as in the screenshot below:</p><p></p><p><img   class="image-9 jive-image" src="3738fbf5dbd0d3049c9ffb651f96199e.iix" style="border: 1px solid #ccc; max-width: 1200px; max-height: 900px;"/></p><p></p><p>We set Roles to "<strong>itil</strong>", again as per Requirement b. For <strong>Link type</strong>, set it to "<strong>URL (from Arguments)</strong>" and set <strong>Arguments</strong> to "<strong>x_64935_gql_pad.do</strong>", which is the <strong>Endpoint</strong> from the GQL Pad UI Page configuration setting.</p><p></p><p>After refreshing the Navigator (or the entire page), let's make sure the new "<strong>GQL</strong>" application and "<strong>GQL Pad</strong>" module menus show up in the Navigator.</p><p></p><h3>GQL PAD IN ACTION</h3><p></p><p>Here's a screenshot of GQL Pad in action. When you navigate to <strong>GQL &gt; GQL Pad</strong>, the GQL Pad UI Page opens up with the default GQL statement in the editor. When you click on the <strong>Run</strong> button, the result is displayed below the Run button. The screenshot below is showing Incident demo data; your results may look different.</p><p></p><p><img   class="image-7 jive-image" src="cf5ea806db58dfc03eb27a9e0f961963.iix" style="border: 1px solid #ccc; max-width: 1200px; max-height: 900px;"/></p><p></p><p>You can change <strong>Output format</strong> to "<strong>CSV</strong>" and click <strong>Run</strong>, which gives the below output:</p><p><img   class="jive-image image-4" src="4011988edb149fc068c1fb651f961918.iix" style="border: 1px solid #ccc; max-width: 1200px; max-height: 900px;"/></p><p></p><p>You can change <strong>Output format</strong> to "<strong>JSAN</strong>" and click <strong>Run</strong>, which gives the below output:</p><p><img   class="image-5 jive-image" src="34943775db10d3041dcaf3231f9619c8.iix" style="border: 1px solid #ccc; max-width: 1200px; max-height: 900px;"/></p><p></p><p>You can change <strong>Output format</strong> to "<strong>JSON</strong>" and click <strong>Run</strong>, which gives the below output:</p><p><img   class="image-6 jive-image" src="881291c6dbd4130468c1fb651f9619b3.iix" style="border: 1px solid #ccc; max-width: 1200px; max-height: 900px;"/></p><p></p><p>You can use GQL Pad to try out various GQL statements from other tables and inspect data, which may be useful for some debugging scenarios. You can also use it to test encoded query strings. The beauty is it's very interactive and fast.</p><p></p><p>This wraps up our work to date. <a title="" _jive_internal="true" href="/community?id=community_blog&sys_id=765de629dbd0dbc01dcaf3231f961973">Next time</a>, I'll show you how to get the app from GitHub and discuss limitations and potential enhancements for the future.</p><p></p><p><em>Please feel free to connect, follow, post feedback / questions / comments, share, like, bookmark, endorse.</em></p><table><tbody><tr><td>John Chun, <span style="font-size: 8pt;">PhD PMP</span> <a href="http://linkedin.com/in/DrJohnChun"><img alt="see John's LinkedIn profile" class="image-2 jive-image" src="http://megaicons.net/static/img/icons_sizes/182/456/16/linkedin-icon.png" style="height: auto; vertical-align: -13px;" title="see John's LinkedIn profile"/></a><p><a href="http://snowaid.com/"><img alt="visit snowaid" class="image-1 jive-image" src="http://snowaid.com/images/signature.png" style="height: auto; margin-top: -9px;" title="visit snowaid"/></a></p></td><td><a _jive_internal="true" href="/community?id=community_user_profile&user=53101665db581fc09c9ffb651f9619f6"><img alt="ServiceNow Advocate" class="image-3 jive-image" src="http://snowaid.com/images/sn_advocate_135x48.png" style="margin-top: -3px;"/></a></td></tr></tbody></table>