---
title: "High CPU Usage on Host with MID Servers"
date: 2016-10-11T18:45:31.000Z
authors: ["amit.dhuleshia"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=765c2aa1dbd0dbc01dcaf3231f96193a"
---
<p><span class="hd1" style="color: #d1232b; font-size: 18px;">Overview</span></p><hr style="border-top-width: 1px; border-top-style: solid; border-top-color: #cccccc;"/><p>CPU usage on the host that the MID Server(s) is installed on can be affected by a number of factors including:</p><ul><li>Other processes running on the host</li><li>Type of probes running on MID Server</li><li>Number of MID Servers installed on the host</li><li>Number of threads per MID Server</li><li>Host specs</li></ul><p><span class="hd1" style="color: #d1232b; font-size: 18px;">Other processes running on the host</span></p><hr style="border-top-width: 1px; border-top-style: solid; border-top-color: #cccccc;"/><p>Sometimes high CPU usage may not be related to the MID Server at all. If you are seeing high CPU usage on the host and you do not have anything running on the MID Server, then it is usually something else running on the host that is responsible for the CPU usage. A quick way to check if anything is running on a MID Server is to check the ECC Queue records.</p><ol style="margin-left: 30px;"><li>Navigate to the ECC Queue records.</li><li>Filter by the MID Server (<strong>Agent</strong> column contains the MID Server name).</li><li>Check if any are in <strong>Ready</strong> or <strong>Processing</strong> state.<br/>If any are in one of these two states, then something is running on the MID Server.</li></ol><p><span class="margin" style="padding: 10px 40px 5px 30px; color: #000000; font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 11px;">Another method of determining what is running on the host is to go to your MID Server record and check the threads running on your MID Server. You should see some default ones that are always running, but there should not be any probes running.<br/></span><span class="hd1" style="color: #d1232b; font-size: 18px;"></span></p><p></p><p><span class="hd1" style="color: #d1232b; font-size: 18px;">Type of probes running on MID Server</span></p><hr style="border-top-width: 1px; border-top-style: solid; border-top-color: #cccccc;"/><p>Certain type of probes use more CPU than other type of probes. Probes (threads) that do a lot of data processing use the most CPU. For example, if you do a database import of a lot of rows, the CPU is likely to spike. This is because a thread is continuously running reading from a JDBC result set. Probes such as SSH probes do not consume much CPU because most of time it is waiting for results to come back from the target. Windows probes consume more CPU than SSH.</p><p></p><p><span class="hd1" style="color: #d1232b; font-size: 18px;">Number of MID Servers installed on the host and number of threads per MID Server</span></p><hr style="border-top-width: 1px; border-top-style: solid; border-top-color: #cccccc;"/><p>Obviously, if you have multiple MID Servers running on a host, CPU usage goes up. Also, you can configure the number of threads a MID Server can use simultaneously using the mid parameter ext.threads.max. If you configure this to a higher number, it causes CPU usage to go up.</p><p></p><p><span class="hd1" style="color: #d1232b; font-size: 18px;">Host specs</span></p><hr style="border-top-width: 1px; border-top-style: solid; border-top-color: #cccccc;"/><p>The specs (number of processors, processor speed, etc..) of the host that the MID Server is installed on affects CPU usage. For our local performance testing, we use the following:</p><ul><li>vm with 4 processors</li><li>16GB memory</li><li>MID Server with 200 threads/4GB memory</li><li>Discovery continuously running discovering different types of devices</li></ul><p>We saw CPU load occasionally peak briefly to 15%, but most of the time it averaged less than 5%.</p>