---
title: "Running Catalog UI Policies"
date: 2016-09-02T18:03:14.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=445ee6addbd0dbc01dcaf3231f96196e"
---
<p>Service Catalog gives you a great tool to control variables defined on the catalog item via Catalog UI Policy. But with so many options available, developers get confused when to use what and how to get things done. You can do a lot with Service Catalog UI Policies but there are some best practices you should be aware of, as well as debug tactics in Catalog UI Policies, before you start.</p><p></p><p>Some things you should know about Catalog UI Policies:</p><ul><li>Running Catalog UI Policy on conditions other than variables</li><li>Running a Catalog UI Policy Action on a Variable Set</li><li>Running a UI Policy on a Variable Set based on the Catalog Item</li><li>How to debug a Catalog UI Policy when it is not working</li><li>Common mistakes developers do in Catalog UI Policy</li></ul><p></p><p>First, I assume, as developers, you know what a Service Catalog Item is, including what variables and variable sets are. If not, the rest of this post may not make sense and you may want to see <a href="https://docs.servicenow.com/bundle/helsinki-it-service-management/page/product/service-catalog-management/concept/c_IntroductionToCatalogItems.html" style="line-height: 1.5;" title="https://docs.servicenow.com/bundle/helsinki-it-service-management/page/product/service-catalog-management/concept/c_IntroductionToCatalogItems.html">Service catalog items</a> and <a href="https://docs.servicenow.com/bundle/helsinki-it-service-management/page/product/service-catalog-management/concept/c_ServiceCatalogVariables.html" style="line-height: 1.5;" title="https://docs.servicenow.com/bundle/helsinki-it-service-management/page/product/service-catalog-management/concept/c_ServiceCatalogVariables.html">Service catalog variables</a> before proceeding.</p><p></p><h2>Catalog UI Policy secrets that the documentation doesn't tell you (Shhh...)</h2><p>You can <a href="https://docs.servicenow.com/bundle/helsinki-it-service-management/page/product/service-catalog-management/task/t_CreatUIPolicyForSvcCalgIt.html" title="https://docs.servicenow.com/bundle/helsinki-it-service-management/page/product/service-catalog-management/task/t_CreatUIPolicyForSvcCalgIt.html">Create a UI policy for catalog items</a> as an easy way to control variables. If I want to show select variables, hide certain variables, and/or make some variables readonly or mandatory, or conditional, you can use a Catalog UI Policy. The best part is, that all these can be done without a single line of coding!!!</p><p></p><h3>Running Catalog UI Policy on conditions other than variables</h3><p>You cannot run a Catalog UI Policy on conditions other than variables. Catalog UI Policies work on variables only. So even on conditions, it works on variables. Even though I can select other values in the condition builder, the conditions are not evaluated. We are working on this and in future releases we are planning to remove all fields which have no significance to Catalog UI Policies.</p><p></p><h3>Running a Catalog UI Policy Action on a Variable Set</h3><p><span style="font-color: green;">You can run a Catalog UI Policy Action on a Variable Set, b</span>ut will require some coding. In the base system, we support variables only in action, so you will not be able to select any variable set in catalog ui policy action. You can achieve the outcome with a script.</p><p></p><p>In Catalog UI Policy after you define the conditions under 'When to Apply' section, there is a section for Script.</p><p><img   alt="catalog ui policy apply.png" class="image-4 jive-image" src="471eb48edb509f048c8ef4621f961999.iix" style="width: 620px; height: 254px; display: block; margin-left: auto; margin-right: auto;"/></p><p></p><p>It has two entries for 'Execute if true', 'Execute if false'. So you can write scripts when the condition evaluates to true and false.</p><p></p><p>Use the following script to hide a Variable Set in either place based on the requirement.</p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="_jivemacro_uid_14728194548175422 jive_macro_code jive_text_macro" data-renderedposition="981.8465576171875_7.997159004211426_1147_31" jivemacro_uid="_14728194548175422"><p>g_form.setDisplay('Variable Set Name', false);</p><p></p></pre><p></p><p>Here Variable Set Name is the name of the variable set while it is defined.</p><p><img   alt="variable set name.png" class="image-5 jive-image" src="8f2c584adb1c9fc068c1fb651f9619ba.iix" style="width: 620px; height: 145px; display: block; margin-left: auto; margin-right: auto;"/></p><p>This way the entire Variable Set can be hidden via Catalog UI Policy.</p><p></p><h3>Running a UI Policy on a Variable Set based on the Catalog Item</h3><p>You cannot run a UI Policy on a Variable Set based on the Catalog Item. This is not supported as of today because Catalog UI Policy conditions works only on variables, so it will not evaluate conditions on Catalog Item. You can achieve same via Catalog Client Script. Here is a small script which can be added to Catalog Client Script which will do the work:</p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code jive_text_macro _jivemacro_uid_14728199894312819" data-renderedposition="1346.2783203125_7.997159004211426_1147_77" jivemacro_uid="_14728199894312819"><p>function onLoad() {</p><p>     if(g_form.getUniqueValue() == '&lt;sys_id of the item&gt;') {</p><p>       g_form.setDisplay('&lt;Variable Set Name', false)</p><p>     }</p><p>}</p></pre><p></p><pre __default_attr="warning" __jive_macro_name="alert" alert="warning" class="jive_text_macro jive_macro_alert" data-renderedposition="1457.5426025390625_7.997159004211426_1147_62"><p>The placeholders for &lt;sys_id of the item&gt; and &lt;Variable Set Name&gt; needs to be replaced with your use case. Also note g_form.getUniqueValue() gives sys_id of Request Item or Catalog Task, so please update the code accordingly.</p></pre><p></p><h3>Debug a Catalog UI Policy that is not working</h3><p>From Helsinki release we do provide very easy way to debug Catalog UI Policy. Here is a small video on how to enable and make use of the debug feature.</p><p></p><p><iframe id='video_tinymce_8707' style='width: 100%; height: 480px;' src=https://youtube.com/embed/fGZJfWNJq14?showinfo=0></iframe></p><p></p><p></p><h3>Common mistakes developers make using a Catalog UI Policy</h3><p><span class="s1">Common Mistake #1: Make a variable mandatory via one catalog ui policy, and then make the same variable readonly via another catalog ui policy. In this case, users will be able to submit item form because variable will be read-only and mandatory for them.</span></p><p><span class="s1"><img   alt="readonly mandatory policy.jpg" class="image-6 jive-image" src="c96100cadb141344e9737a9e0f96191a.iix" style="height: auto; display: block; margin-left: auto; margin-right: auto;"/></span></p><p></p><p>Common Mistake #2: Make a variable mandatory via one catalog ui policy, and then make the same variable hidden via another catalog ui policy. In this case users will not see the variable and also will not be able to order the item.</p><p></p><p>Common Mistake #3: Having a conflicting Catalog UI Policy and Catalog Client Scripts. Catalog Client Scripts runs last, so it will override changes done by Catalog UI Policy.</p>