---
title: "MiniLab Extending the JavaScript Array Object with findIndex"
date: 2016-08-30T16:41:57.000Z
authors: ["sabell2012"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=bbec22a5dbd0dbc01dcaf3231f9619c6"
---
<p dir="ltr" style="font-family: arial, sans-serif; color: #666666;"><span style="font-weight: bold; font-style: inherit; font-family: 'Times New Roman';">NOTE</span><span style="font-weight: inherit; font-style: inherit; font-family: Arial;">: </span><span style="font-weight: inherit; font-style: inherit; font-family: 'Times New Roman';">MY POSTINGS REFLECT MY OWN VIEWS AND DO NOT NECESSARILY REPRESENT THE VIEWS OF MY EMPLOYER, ACCENTURE.</span></p><p dir="ltr"></p><p dir="ltr" style="font-family: arial, sans-serif; color: #666666;"><span style="font-weight: inherit; font-style: inherit; font-family: 'Times New Roman';">DIFFICULTY LEVEL:   </span><span style="font-weight: bold; font-style: inherit; font-family: 'Times New Roman'; color: #e23d39;">ADVANCED</span></p><p dir="ltr" style="font-family: arial, sans-serif; color: #666666;"><span style="font-weight: inherit; font-style: inherit; font-family: 'Times New Roman';">Assumes good knowledge and/or familiarity of scripting in ServiceNow.</span></p><p dir="ltr" style="font-family: arial, sans-serif; color: #666666;"><span style="font-weight: inherit; font-style: inherit; font-family: Arial;">____________________________________________________________________________</span></p><p></p><p><span style="font-size: 12pt;">Awhile ago I wrote on how to extend the JavaScript language base inside of ServiceNow with several functions available via ECMA 6 and Mozilla Polyfill definitions.   Well, here is another I found myself needing recently:   The Array.findIndex function.</span></p><p></p><p><span style="font-size: 12pt;">What does this bring to the table?   Well, it allows you to basically do an indexOf on a complex object array.   This allows you to do two things:   (1) bring back the location of the record by giving the findIndex the object property and value, and/or (2) determine if a record exists in an object array given an object property and value.</span></p><p></p><p><span style="font-size: 12pt;">For example:</span></p><p></p><p style="padding-left: 30px;"><span style="font-size: 12pt; color: #b40d03;">var ID = &lt;&lt;sys_id&gt;&gt;</span></p><p style="padding-left: 30px;"><span style="font-size: 12pt; color: #b40d03;">var array = &lt;&lt;list of objects with a property of ID&gt;&gt;</span></p><p style="padding-left: 30px;"><span style="font-size: 12pt; color: #b40d03;">var index = array.findIndex(function(element) { return element.ID == ID; });</span></p><p style="padding-left: 30px;"></p><p><span style="font-size: 12pt;">This would return the array index of the first match.</span></p><p></p><p></p><p><span style="font-size: 14pt;"><strong>Lab 1.1: Add the Polyfill Script to the JavaScriptExtensions Library</strong></span></p><p></p><p><span style="line-height: 1.5; font-size: 12pt;">1. If you have not already done so then go ahead and work through the following mini-lab article:</span></p><p></p><p style="padding-left: 30px;"><span style="font-size: 12pt;"><a title="Mini-Lab: Extending ServiceNow JavaScript Using ECMAScript 6 Polyfills" __default_attr="4767" __jive_macro_name="blogpost" class="jive_macro jive_macro_blogpost" data-orig-content="Mini-Lab: Extending ServiceNow JavaScript Using ECMAScript 6 Polyfills" data-renderedposition="555.2698364257812_37.99715805053711_537_18" href="/community?id=community_blog&sys_id=fd5d6629dbd0dbc01dcaf3231f961989">Mini-Lab: Extending ServiceNow JavaScript Using ECMAScript 6 Polyfills</a> </span></p><p></p><p><span style="font-size: 12pt;">2. Update the <span style="color: #666666; font-family: arial, helvetica, sans-serif;">JavaScriptExtensions </span>Script Include to contain the new prototype.</span></p><p></p><p style="padding-left: 30px;"><span style="font-size: 12pt;">a. Obtain the Mozilla polyfill code from the following location: <a title="eveloper.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/findIndex">link</a></span></p><p style="padding-left: 30px;"></p><p style="padding-left: 30px;"><span style="font-size: 12pt;">b. Add the code to the JavaScriptExtensions script.</span></p><p style="padding-left: 30px;"></p><p style="padding-left: 30px;"><span style="font-size: 12pt;">Here is the script from the Mozilla article: </span></p><p style="padding-left: 30px;"></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14724404009776309 jive_text_macro" data-renderedposition="775.2698364257812_7.997159004211426_1192_355" jivemacro_uid="_14724404009776309"><p dir="ltr" style="padding-left: 30px;"><span style="font-size: 12pt; font-family: Arial; color: #000000;">if (!Array.prototype.findIndex) {</span></p><p dir="ltr" style="padding-left: 30px;"><span style="font-size: 12pt; font-family: Arial; color: #000000;">   Array.prototype.findIndex = function(predicate) {</span></p><p dir="ltr" style="padding-left: 30px;"><span style="font-size: 12pt; font-family: Arial; color: #000000;">       'use strict';</span></p><p dir="ltr" style="padding-left: 30px;"><span style="font-size: 12pt; font-family: Arial; color: #000000;">       if (this == null) {</span></p><p dir="ltr" style="padding-left: 30px;"><span style="font-size: 12pt; font-family: Arial; color: #000000;">           throw new TypeError('Array.prototype.findIndex called on null or undefined');</span></p><p dir="ltr" style="padding-left: 30px;"><span style="font-size: 12pt; font-family: Arial; color: #000000;">       }</span></p><p dir="ltr" style="padding-left: 30px;"><span style="font-size: 12pt; font-family: Arial; color: #000000;">       if (typeof predicate !== 'function') {</span></p><p dir="ltr" style="padding-left: 30px;"><span style="font-size: 12pt; font-family: Arial; color: #000000;">           throw new TypeError('predicate must be a function');</span></p><p dir="ltr" style="padding-left: 30px;"><span style="font-size: 12pt; font-family: Arial; color: #000000;">       }</span></p><p dir="ltr" style="padding-left: 30px;"><span style="font-size: 12pt; font-family: Arial; color: #000000;">       var list = Object(this);</span></p><p dir="ltr" style="padding-left: 30px;"><span style="font-size: 12pt; font-family: Arial; color: #000000;">       var length = list.length &gt;&gt;&gt; 0;</span></p><p dir="ltr" style="padding-left: 30px;"><span style="font-size: 12pt; font-family: Arial; color: #000000;">       var thisArg = arguments[1];</span></p><p dir="ltr" style="padding-left: 30px;"><span style="font-size: 12pt; font-family: Arial; color: #000000;">       var value;</span></p><p style="padding-left: 30px;"></p><p dir="ltr" style="padding-left: 30px;"><span style="font-size: 12pt; font-family: Arial; color: #000000;">       for (var i = 0; i &lt; length; i++) {</span></p><p dir="ltr" style="padding-left: 30px;"><span style="font-size: 12pt; font-family: Arial; color: #000000;">           value = list[i];</span></p><p dir="ltr" style="padding-left: 30px;"><span style="font-size: 12pt; font-family: Arial; color: #000000;">           if (predicate.call(thisArg, value, i, list)) {</span></p><p dir="ltr" style="padding-left: 30px;"><span style="font-size: 12pt; font-family: Arial; color: #000000;">               return i;</span></p><p dir="ltr" style="padding-left: 30px;"><span style="font-size: 12pt; font-family: Arial; color: #000000;">           }</span></p><p dir="ltr" style="padding-left: 30px;"><span style="font-size: 12pt; font-family: Arial; color: #000000;">       }</span></p><p dir="ltr" style="padding-left: 30px;"><span style="font-size: 12pt; font-family: Arial; color: #000000;">       return -1;</span></p><p dir="ltr" style="padding-left: 30px;"><span style="font-size: 12pt; font-family: Arial; color: #000000;">   };</span></p><p style="padding-left: 30px;"><span style="color: #000000; font-size: 12pt; font-family: Arial;">}</span></p></pre><p style="padding-left: 30px;"></p><p></p><p><span style="color: #000000; font-size: 14pt; font-family: Arial;"><strong>Lab 1.2: Testing the findIndex Functionality</strong></span></p><p></p><p><span style="color: #000000; font-size: 12pt; font-family: Arial;">1. Create a new Fix Script to test the new array extension</span></p><p style="padding-left: 30px;"></p><p style="padding-left: 30px;"><span style="color: #000000; font-size: 12pt; font-family: Arial;">a. <strong>Name</strong>: Array.findIndex Test</span></p><p style="padding-left: 30px;"><span style="color: #000000; font-size: 12pt; font-family: Arial;">b. <strong>Description</strong>: Test of the Array.polyfill.findIndex functionality.</span></p><p style="padding-left: 30px;"><span style="color: #000000; font-size: 12pt; font-family: Arial;">c. <strong>Script</strong>: </span></p><p style="padding-left: 30px;"></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code jive_text_macro _jivemacro_uid_14724413212718300" data-renderedposition="1357.0880126953125_7.997159004211426_1192_618" jivemacro_uid="_14724413212718300" modifiedtitle="true"><p>gs.include('JavaScriptExtensions'); </p><p></p><p>var incidentList = getIncidentList(10);</p><p>var incidentID = '0c43b55ac6112275019abd2b247baf31';</p><p></p><p>var index = incidentList.findIndex(function(element) { return element.sys_id == incidentID; });</p><p>gs.print(index);</p><p></p><p>// get a list of [limit] number of cmdb ci records</p><p>function getIncidentList(limit) {</p><p>   var incidentRecords = new GlideRecord('incident');</p><p>   incidentRecords.addNotNullQuery('cmdb_ci');</p><p>   incidentRecords.addActiveQuery();</p><p>   incidentRecords.setLimit(limit);</p><p>   incidentRecords.query();</p><p></p><p>   var cmdbList = [];</p><p></p><p>   // The following looping code is a GlideRecord inside of a GlideRecord.</p><p>   // This is normally a BAD way of doing this, but for the purposes of this test...</p><p></p><p>   while (incidentRecords.next()) {</p><p></p><p><span style="color: rgba(0, 0, 0, 0); font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px;">   <span style="color: rgba(0, 0, 0, 0); font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px;">   </span></span>var ciRecords = new GlideRecord('cmdb_ci');</p><p>   <span style="color: rgba(0, 0, 0, 0); font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px;">   </span>if (ciRecords.get('sys_id', incidentRecords.getValue('cmdb_ci'))) {</p><p>   <span style="color: rgba(0, 0, 0, 0); font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px;">   <span style="color: rgba(0, 0, 0, 0); font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px;">   </span></span>cmdb_ci = {};</p><p> <span style="color: rgba(0, 0, 0, 0); font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px;">   <span style="color: rgba(0, 0, 0, 0); font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px;">   </span></span> cmdb_ci.sys_id = ciRecords.getValue('sys_id');</p><p> <span style="color: rgba(0, 0, 0, 0); font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px;">   <span style="color: rgba(0, 0, 0, 0); font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px;">   </span></span> cmdb_ci.serial_number = ciRecords.getValue('serial_number');</p><p><span style="color: rgba(0, 0, 0, 0); font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px;">   <span style="color: rgba(0, 0, 0, 0); font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px;">   </span></span>   cmdb_ci.name = ciRecords.getValue('name');</p><p><span style="color: rgba(0, 0, 0, 0); font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px;">   <span style="color: rgba(0, 0, 0, 0); font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px;">   </span></span>   cmdb_ci.className = ciRecords.getValue('sys_class_name');</p><p> <span style="color: rgba(0, 0, 0, 0); font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px;">   <span style="color: rgba(0, 0, 0, 0); font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px;">   </span></span> cmdb_ci.install_status = ciRecords.getValue('install_status');</p><p> <span style="color: rgba(0, 0, 0, 0); font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px;">   <span style="color: rgba(0, 0, 0, 0); font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px;">   </span></span> cmdbList.push(cmdb_ci);</p><p> <span style="color: rgba(0, 0, 0, 0); font-family: Consolas, 'Courier New', Courier, mono, serif; font-size: 12px;">   </span> }</p><p></p><p>   }</p><p></p><p>   for (var i=0; i &lt; cmdbList.length; i++) {gs.print(cmdbList[i].sys_id);}   </p><p></p><p>   return cmdbList;</p><p>}</p></pre><p></p><p><span style="font-size: 12pt;">When you run the Fix Script you should get something like the following results:</span></p><p></p><p><span style="font-size: 12pt;"><img   class="image-1 jive-image" src="2647fccedb5cdfc03eb27a9e0f961911.iix" style="max-width: 1200px; max-height: 900px;"/></span></p><p></p><p><span style="font-size: 12pt;">I ran the first part to get hold of a sys_id to look for, then plugged that into my script to test the findIndex function.</span></p><p></p><p><span style="font-size: 12pt;">Pretty cool, huh?</span></p><p></p><p dir="ltr" style="font-family: arial, sans-serif; color: #666666;"><span style="font-weight: inherit; font-style: inherit; font-size: 16px; font-family: Arial; color: #000000;">Steven Bell</span></p><p dir="ltr"></p><p dir="ltr" style="font-family: arial, sans-serif; color: #666666;"><span style="font-weight: inherit; font-style: inherit; font-family: Arial;"><a href="https://lh4.googleusercontent.com/HKjJ2SUTNVdCxOTdceU6inlqndvy5r1xgxXRAs6Ajp23hyTz6rpde1-iJtpz69U2_eAXe0MW6pOQVB0l1Y2PFVewX4Rf8WHPNHO0P48XpJUj2bVItL2A6-_qcLHax09QnKw6M0tW" style="font-weight: inherit; font-style: inherit; font-family: inherit; color: #266fc8; text-decoration: underline;"><img alt="accenture logo small.jpg" class="jive-image" height="87" src="https://lh4.googleusercontent.com/HKjJ2SUTNVdCxOTdceU6inlqndvy5r1xgxXRAs6Ajp23hyTz6rpde1-iJtpz69U2_eAXe0MW6pOQVB0l1Y2PFVewX4Rf8WHPNHO0P48XpJUj2bVItL2A6-_qcLHax09QnKw6M0tW" style="margin: 10px 10px 10px 0; border: 0px none; font-weight: inherit; font-style: inherit; font-family: inherit;" width="324"/></a></span></p><p dir="ltr" style="font-family: arial, sans-serif; color: #666666;"><span style="font-weight: inherit; font-style: inherit; font-family: Arial;"><a href="https://lh6.googleusercontent.com/xNpcpgiavaZsFdpPfTCeeIiojd7FqVft8uzbfTILDEtlgnRES6PH3aeWNXSPpnv5AF0V114bKKAkWPuI6jH3O2xaG-zFqWYwnyRCt-81ybjTqNLhmqPugre5WldGfc_pcta-FHMa" style="font-weight: inherit; font-style: inherit; font-family: inherit; color: #266fc8;"><img class="jive-image" height="64" src="https://lh6.googleusercontent.com/xNpcpgiavaZsFdpPfTCeeIiojd7FqVft8uzbfTILDEtlgnRES6PH3aeWNXSPpnv5AF0V114bKKAkWPuI6jH3O2xaG-zFqWYwnyRCt-81ybjTqNLhmqPugre5WldGfc_pcta-FHMa" style="margin: 10px 10px 10px 0; border: 0px none; font-weight: inherit; font-style: inherit; font-family: inherit;" width="180"/></a></span><span style="font-weight: inherit; font-style: inherit; font-family: Arial;"><a href="https://lh5.googleusercontent.com/L3QNGvKQd6gXD41-_HDuwuN0pza2FetYOlV1mAsSxhZZ_JiVJopoBHtl7G8zEAd50WG7gM7GQh0XbJdSQIydjfIfs_RfP0MHbXFyvPMSved4rHnuihwq7EBcOndtiWqh0R_RV7x4" style="font-weight: inherit; font-style: inherit; font-family: inherit; color: #266fc8;"><img class="jive-image" height="64" src="https://lh5.googleusercontent.com/L3QNGvKQd6gXD41-_HDuwuN0pza2FetYOlV1mAsSxhZZ_JiVJopoBHtl7G8zEAd50WG7gM7GQh0XbJdSQIydjfIfs_RfP0MHbXFyvPMSved4rHnuihwq7EBcOndtiWqh0R_RV7x4" style="margin: 10px 10px 10px 0; border: 0px none; font-weight: inherit; font-style: inherit; font-family: inherit;" width="180"/></a></span><span style="font-weight: inherit; font-style: inherit; font-family: Arial;"><a href="https://lh4.googleusercontent.com/Yn7iuwBcHbZRsaHqvrM31RShgo7gPcx_ceZZfvkqHec4WxMAfjUmNpM3U3J69jzVLx3TE7z4aYb1Gj8PrReer_XcUAZwNwDd5z3vjnCu3vp7xoWYG-0m7-SDrNPFJvM-l-dsPy7K" style="font-weight: inherit; font-style: inherit; font-family: inherit; color: #266fc8;"><img class="jive-image" height="72" src="https://lh4.googleusercontent.com/Yn7iuwBcHbZRsaHqvrM31RShgo7gPcx_ceZZfvkqHec4WxMAfjUmNpM3U3J69jzVLx3TE7z4aYb1Gj8PrReer_XcUAZwNwDd5z3vjnCu3vp7xoWYG-0m7-SDrNPFJvM-l-dsPy7K" style="margin: 10px 10px 10px 0; border: 0px none; font-weight: inherit; font-style: inherit; font-family: inherit;" width="223"/></a></span></p><p dir="ltr"></p><p dir="ltr" style="font-family: arial, sans-serif; color: #666666;"><span style="font-weight: bold; font-style: inherit; font-family: Arial;">For a list of all of my articles:   </span><a _jive_internal="true" data-containerid="1007" data-containertype="37" data-objectid="4821" data-objecttype="38" href="/community?id=community_blog&sys_id=289d6a69dbd0dbc01dcaf3231f9619f0" style="font-weight: inherit; font-style: inherit; font-family: inherit; color: #266fc8;"><span style="font-weight: bold; font-style: inherit; font-size: 15.3333px; font-family: Arial;">Community Code Snippets: Articles List to Date</span></a></p><p dir="ltr"></p><p dir="ltr" style="font-family: arial, sans-serif; color: #666666;"><span style="font-weight: inherit; font-style: inherit; font-size: 16px; font-family: Arial; color: #eb7a3d;">Please Share, Like, Bookmark, Mark Helpful, or Comment this blog if you've found it helpful or insightful.</span></p><p dir="ltr"></p><p dir="ltr" style="font-family: arial, sans-serif; color: #666666;"><span style="font-weight: inherit; font-style: inherit; font-size: 16px; font-family: Arial; color: #eb7a3d;">Also, if you are not already, I would like to encourage you to become a member of our blog!</span></p>