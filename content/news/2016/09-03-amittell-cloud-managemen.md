---
title: "Cloud Management Overview and Expanding AWS Discovery Part "
date: 2016-09-03T01:52:59.000Z
authors: ["amittell"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=a44ea2addbd0dbc01dcaf3231f9619b3"
---
<p style="font-size: 12px; font-family: Helvetica; color: #454545;">Previously I wrote a post on <a title="" _jive_internal="true" href="/community/operations-management/discovery/blog/2016/06/01/expanding-cloud-discovery-for-custom-property-collection">expanding Service Now's property collection for AWS discovery</a> using a nested property as an example, this required a small amount of scripting but I mentioned that retrieving root-level properties about an instance was a code-less process on the platform. Recently a customer asked me to show them how to collect the Private IP address of an AWS instance so i thought I would take the opportunity to do a Part 2 post to demonstrate just how easy it is to add these root-level properties to your CMDB data collection.</p><p style="font-size: 12px; font-family: Helvetica; color: #454545;"></p><p style="font-size: 12px; font-family: Helvetica; color: #454545;">But before I do I wanted to take one step back and share what customers have been working with us on in relation to the public cloud, specifically AWS, and how discovery fits into our overall architecture which we are working with customers to enhance their ability to deliver these services.</p><p style="font-size: 12px; font-family: Helvetica; color: #454545;"></p><p style="margin-top: 8px; margin-bottom: 8px; font-size: 12px; font-family: Helvetica; color: #454545;"><img   alt="unknown.png" class="image-5 jive-image" src="36c0698edb9c1b04ed6af3231f961978.iix" style="width: 620px; height: 319px;"/></p><p style="font-size: 12px; font-family: Helvetica; color: #454545;"></p><p style="font-size: 12px; font-family: Helvetica; color: #454545;">There are three specific areas we have defined, building out solutions to very real problems with our customers using a variety of products and ServiceNow platform capabilities.</p><p></p><p style="font-size: 12px; font-family: Helvetica; color: #454545;">o       Cloud Operating Model - The cloud model is fundamentally changing the typical approach of Change &amp; Release, CMDB, etc., and while different, it is still very much a necessary framework for IT to operate to reduce risk and effectively deliver and manage services, while also bringing the desired increases in velocity and agility.   Customers ask me how to take production workloads to cloud with the necessary Change, config, release, incident, with the same level of process maturity as their existing on premise services, the answer is to move the operating model away from the service provider specific level to up a level to an agnostic cross cloud platform to provide a "common operating model" across the hybrid cloud, standardizing process and policy with a consistent model regardless of the underlying infrastructure provider.</p><p style="font-size: 12px; font-family: Helvetica; color: #454545;"></p><p style="font-size: 12px; font-family: Helvetica; color: #454545;">o       Cost &amp; Usage — A barrier to adoption is the anticipated cost of moving workloads to AWS compared to actual costs.   We have a complete view of all cost &amp; usage today for AWS/Azure, and we're working on solutions to show ROI actuals post-migration to the public cloud.   Armed with this level of information informed decisions can be made about the most cost efficient placement of workloads, be that to a cloud provider or on premise, which we feel this will help customers make good decisions and allay cost concerns, and ultimately drive faster adoption.</p><p style="font-size: 12px; font-family: Helvetica; color: #454545;"></p><p style="font-size: 12px; font-family: Helvetica; color: #454545;">o       Security &amp; Governance - Another barrier to adoption is ensuring compliance around required AWS security controls.   There are many good opportunities to leverage the platform's products/capabilities with modules like Risk &amp; Compliance, Data Certification, Vulnerability Management, SIR, etc. Using these controls the move to public cloud consumption can reap the benefits of cost efficiency and agility without opening the organization to excessive risk or expensive compliancy issues.</p><p style="font-size: 12px; font-family: Helvetica; color: #454545;"></p><p style="font-size: 12px; font-family: Helvetica; color: #454545;"></p><p style="font-size: 12px; font-family: Helvetica; color: #454545;">Hope that helps provide an overview of what business problems we are solving for our customers.   The key part to solving these business problems, and the core of our platform that all of the other products rely on, is having an accurate and rich CMDB, so with that in mind back to the topic at hand, how easy it is to add these root-level properties to your CMDB discovery to enrich your CMDB data model for AWS.</p><p style="font-size: 12px; font-family: Helvetica; color: #454545;"></p><p style="font-size: 12px; font-family: Helvetica; color: #454545;">First we're going to add a field on the EC2 instances table to store the new property we want to discover. Browse to System Definition &gt; Tables, then search for the cmdb_ci_ec2_instance table.</p><p style="margin-top: 8px; margin-bottom: 8px; font-size: 12px; font-family: Helvetica; color: #454545;"><img   alt="Pasted Graphic.png" class="image-17 jive-image" src="658eb842db901b04ed6af3231f961983.iix" style="width: 620px; height: 29px;"/></p><p style="font-size: 12px; font-family: Helvetica; color: #454545;"></p><p style="font-size: 12px; font-family: Helvetica; color: #454545;">Click into the table to access the schema and click New to add a new column. In our example we're going to be creating a string column to store our instance Private IP address, as per below.</p><p style="font-size: 12px; font-family: Helvetica; color: #454545;"></p><p style="margin-top: 8px; margin-bottom: 8px; font-size: 12px; font-family: Helvetica; color: #454545;"><img   alt="Pasted Graphic 1.png" class="image-18 jive-image" src="cc2e74cedb501b04ed6af3231f96192d.iix" style="width: 620px; height: 97px;"/></p><p style="font-size: 12px; font-family: Helvetica; color: #454545;"></p><p style="font-size: 12px; font-family: Helvetica; color: #454545;">Now that we have somewhere to store our new property, we need to tell discovery how to populate the field. As mentioned previously this is a two step process, first we define a normalised property name which maps to the field on the target table.</p><p style="font-size: 12px; font-family: Helvetica; color: #454545;"></p><p style="font-size: 12px; font-family: Helvetica; color: #454545;">Browse to System Definition &gt; Tables again, and search for the normalizedobject_db_mapping table.</p><p style="font-size: 12px; font-family: Helvetica; color: #454545;"></p><p style="font-size: 12px; font-family: Helvetica; color: #454545;"><img   alt="Pasted Graphic 2.png" class="image-19 jive-image" src="f72cdc4adb185344e9737a9e0f96190c.iix" style="width: 620px; height: 27px;"/></p><p style="margin-top: 8px; margin-bottom: 8px; font-size: 12px; font-family: Helvetica; color: #454545;"></p><p style="font-size: 12px; font-family: Helvetica; color: #454545;">Right click on the table and select Show List to view the records in the table.</p><p style="font-size: 12px; font-family: Helvetica; color: #454545;"></p><p style="margin-top: 8px; margin-bottom: 8px; font-size: 12px; font-family: Helvetica; color: #454545;"><img   alt="Pasted Graphic 3.png" class="image-20 jive-image" src="3d618882dbd4db048c8ef4621f9619e6.iix" style="height: auto;"/></p><p style="font-size: 12px; font-family: Helvetica; color: #454545;"></p><p style="font-size: 12px; font-family: Helvetica; color: #454545;">Click New to create a new record for our new property, give the property a name which will be easy to remember and then select the Table and Field that we want to map the property to. In our example this is the Private IP Address column in the EC2 Instances table that we created in the previous step, once complete, save the record to the table.</p><p style="font-size: 12px; font-family: Helvetica; color: #454545;"></p><p style="margin-top: 8px; margin-bottom: 8px; font-size: 12px; font-family: Helvetica; color: #454545;"><img   alt="Pasted Graphic 4.png" class="image-21 jive-image" src="6fc0250adbd8d304b322f4621f961961.iix" style="width: 620px; height: 126px;"/></p><p style="font-size: 12px; font-family: Helvetica; color: #454545;"></p><p style="font-size: 12px; font-family: Helvetica; color: #454545;">The last step is to map the property that AWS is sending to us in the payload. These property names are defined by Amazon, you can view them in the payload or by manually using describe instance, or look them up in the AWS documentation.</p><p style="font-size: 12px; font-family: Helvetica; color: #454545;"></p><p style="font-size: 12px; font-family: Helvetica; color: #454545;">Once you know the AWS name of the property you are looking for discovery to collect browse to System Definition &gt; Tables again, and search for the aws_datasource_type_mapping table. This table is used to define the mapping between the AWS property and the Normalized property we created in the previous step.</p><p style="font-size: 12px; font-family: Helvetica; color: #454545;"></p><p style="margin-top: 8px; margin-bottom: 8px; font-size: 12px; font-family: Helvetica; color: #454545;"><img   alt="Pasted Graphic 5.png" class="image-22 jive-image" src="2a8e7842db901b04ed6af3231f9619fe.iix" style="width: 620px; height: 26px;"/></p><p style="font-size: 12px; font-family: Helvetica; color: #454545;"></p><p style="font-size: 12px; font-family: Helvetica; color: #454545;">Right click on the table and select Show List to view the records in the table.</p><p style="font-size: 12px; font-family: Helvetica; color: #454545;"></p><p style="font-size: 12px; font-family: Helvetica; color: #454545;"><img   alt="Pasted Graphic 11.png" class="image-23 jive-image" src="507a10cedb581f048c8ef4621f9619ca.iix" style="height: auto;"/></p><p style="margin-top: 8px; margin-bottom: 8px; font-size: 12px; font-family: Helvetica; color: #454545;"></p><p style="font-size: 12px; font-family: Helvetica; color: #454545;"></p><p style="font-size: 12px; font-family: Helvetica; color: #454545;">In the list view click New to add a new entry to the table. The Datasource for all AWS discovery is Amazon EC2, the Resource type is Instance, and the source field is the AWS property name - in this case privateIpAddress. Once these are defined, enter the name of the Normalized property we defined in the previous step - in this case I used the same name for the normalized property as the AWS property name for simplicity, so it is again privateIpAddress. Once complete hit save to save the record in the table.</p><p style="font-size: 12px; font-family: Helvetica; color: #454545;"></p><p style="margin-top: 8px; margin-bottom: 8px; font-size: 12px; font-family: Helvetica; color: #454545;"><img   alt="Pasted Graphic 6.png" class="image-24 jive-image" src="cf2bfb35db54d3041dcaf3231f9619e8.iix" style="width: 620px; height: 113px;"/></p><p style="font-size: 12px; font-family: Helvetica; color: #454545;">….and you're done! With just 3 steps we've added a new property to our AWS discovery data collection, this same process works for any base-level property that AWS provides, after your next discovery run the new field will be populated with data.</p><p style="font-size: 12px; font-family: Helvetica; color: #454545;"></p><p style="font-size: 12px; font-family: Helvetica; color: #454545;">The only thing left to do is add the field to the form for easy viewing, to do that just browse to a record in the EC2 Instances table, right click the header and select Configure &gt; Form Layout.</p><p style="font-size: 12px; font-family: Helvetica; color: #454545;"></p><p style="font-size: 12px; font-family: Helvetica; color: #454545;"><img   alt="Pasted Graphic 7.png" class="image-25 jive-image" src="2a176142db505b04ed6af3231f96195d.iix" style="width: 620px; height: 187px;"/></p><p style="margin-top: 8px; margin-bottom: 8px; font-size: 12px; font-family: Helvetica; color: #454545;"></p><p style="font-size: 12px; font-family: Helvetica; color: #454545;">Select your new property from the Available list and move it across to the Selected list using the arrow buttons, in this case I've added the new Private IP Address field to appear below the Public IP Address field on the form.</p><p style="font-size: 12px; font-family: Helvetica; color: #454545;"></p><p style="font-size: 12px; font-family: Helvetica; color: #454545;"><img   alt="Pasted Graphic 8.png" class="image-26 jive-image" src="443545c6dbd013043eb27a9e0f961951.iix" style="width: 620px; height: 207px;"/></p><p style="font-size: 12px; font-family: Helvetica; color: #454545;"></p><p style="font-size: 12px; font-family: Helvetica; color: #454545;">And here's the end result. Thanks for reading I hope you found this mini-series useful!</p><p style="font-size: 12px; font-family: Helvetica; color: #454545;"></p><p style="font-size: 12px; font-family: Helvetica; color: #454545;"><img   alt="Pasted Graphic 10.png" class="image-27 jive-image" src="def1a44adb9057049c9ffb651f9619b4.iix" style="width: 620px; height: 189px;"/></p>