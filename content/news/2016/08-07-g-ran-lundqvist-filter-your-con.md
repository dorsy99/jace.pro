---
title: "Filter your contextual search results"
date: 2016-08-07T03:24:03.000Z
authors: ["GÃ¶ran Lundqvist"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=a3bd6ea9dbd0dbc01dcaf3231f96195f"
---
<p>A friend of mine came to me with a problem he had. He created a record producer and from there he wanted to have field which would be connected to the contextual search. And of course he wanted this to search in a specific knowledge base, but OOB it search in all of the knowledge bases. I agree that If I had a record producer that is used to report IT incidents, I don't want it to search the HR knowledge base.</p><p></p><p>And of course you can do this, just takes a bit of digging and looking <span __jive_emoticon_name="happy" __jive_macro_name="emoticon" class="jive_emote jive_macro" data-renderedposition="92_442_16_16" src="/8.0.4.21bdc7e/images/emoticons/happy.png"></span></p><p></p><p>Some of you know my gigantic amount of imagination, so In this example I will create a record producer for reporting Email incidents and I want to limit the contextual search for only the email knowledge base. <span __jive_emoticon_name="wink" __jive_macro_name="emoticon" class="jive_emote jive_macro" data-renderedposition="156_157_16_16" src="/8.0.4.21bdc7e/images/emoticons/wink.png"></span></p><p></p><h3>1. First I created a knowledge base and put in one article in it</h3><p></p><p><img   class="image-1 jive-image" height="286" src="35e4544edb541f048c8ef4621f9619bc.iix" style="width: 683px; height: 285.699px;" width="683"/></p><p></p><h3>2. Now lets create the record producer</h3><p>I just created a simple RP which was going to create an incident record and threw in two variables.</p><ul><li>Short desc: This is just a simple Single Line Text which I will connect the search context to</li><li>Who: This is just a reference field to the sys_user. I just felt I wanted to have two fields <span __jive_emoticon_name="silly" __jive_macro_name="emoticon" class="jive_emote jive_macro" data-renderedposition="646.59375_586.21875_16_16" src="/8.0.4.21bdc7e/images/emoticons/silly.png"></span></li></ul><p></p><p>Then I just felt to put in the script where this was going to be put in the incident. Just for fun, no needed for this demo. And it could have been done slimmer <span __jive_emoticon_name="happy" __jive_macro_name="emoticon" class="jive_emote jive_macro" data-renderedposition="692.390625_993_16_16" src="/8.0.4.21bdc7e/images/emoticons/happy.png"></span></p><p>But bare with me, it's Saturday and I just lost a game of Monopoly.</p><p><img   class="image-2 jive-image" height="492" src="db987335db545704ed6af3231f961931.iix" style="width: 679px; height: 491.727px;" width="679"/></p><p></p><h3>3. Now lets create the search context and connect it to the Record Producer</h3><p>First I created the search context.</p><p><img   class="image-3 jive-image" height="274" src="b9de5186db10df048c8ef4621f961910.iix" style="max-width: 1200px; max-height: 900px; width: 679px; height: 273.902px;" width="679"/></p><p>You can see that I only wanted to search in knowledge so I put "Knowledge only" in the field Searcher.</p><p>Here are a few choices and depending on what you choose, the related list "Resource Configuration" will</p><p>have different records. I will tell you more about that later.</p><p></p><p>Then I pressed the "new" button on the related list, I chose my variable "Short desc" to be the one it uses for search<br/> and connect it to the search context by hitting submit.</p><p><img   class="jive-image image-4" height="235" src="255bb88adb1097049c9ffb651f961952.iix" style="max-width: 1200px; max-height: 900px; width: 679px; height: 235.387px;" width="679"/></p><p></p><p></p><p>Now you got the Record producer connected to the search context and you can also see under Resource Configuration</p><p>that knowledge is ready to rock and roll as well.</p><p><img   class="image-6 jive-image" src="f86a3f79db145fc03eb27a9e0f961995.iix" style="max-width: 1200px; max-height: 900px;"/></p><p></p><p></p><p><img   class="image-5 jive-image" height="354" src="cf8c908edb185344e9737a9e0f9619e6.iix" style="max-width: 1200px; max-height: 900px; width: 676px; height: 353.961px;" width="676"/></p><h3>4. Let try the record producer!</h3><p>As you can see when I typed "email" in the field I get a lot of results and I since my created Knowledge base</p><p>only has one article, I know that I get stuff that I don't want.</p><p><img   class="image-7 jive-image" height="631" src="eab561c2dbd0df048c8ef4621f9619e9.iix" style="max-width: 1200px; max-height: 900px; width: 675px; height: 631.169px;" width="675"/></p><p></p><h3>5. Time to filter</h3><p>Now let's make so it will only look for records in my knowledge base. To do this we need to get an encoded query to use</p><p>as a filter. So let's head to kb_knowledge.list and get that first.</p><p><img   class="jive-image image-8" height="146" src="5aa28dcadbd01b04ed6af3231f96193d.iix" style="max-width: 1200px; max-height: 900px; width: 706px; height: 146.495px;" width="706"/></p><p></p><p>So Now I got my encoded query in my clipboard. Next stop is the search context record.</p><p>Click on the related list Resource Configuration and then click on the record "Knowledge".</p><p>And that will take you to this:</p><p><img   class="image-9 jive-image" height="198" src="b6e2a4c6db5c5344e9737a9e0f96195b.iix" style="max-width: 1200px; max-height: 900px; width: 708px; height: 198.24px;" width="708"/></p><p>As you can see the "condition" record has no value. It is totally empty.</p><p>So I clicked on "Condition" and paste in my encoded query in the value field. And it looked like this:</p><p><img   class="jive-image image-10" height="262" src="39c14042dbd41304b322f4621f961940.iix" style="max-width: 1200px; max-height: 900px; width: 740px; height: 262.177px;" width="740"/></p><p></p><p>Submitted the record and ready for test nr.2.</p><p></p><h3>6. FInal test</h3><p>Back to my record producer and hit "try it". Now when I filled in "email" I only got one result and it is the</p><p>article from my own knowledge base.</p><p></p><p><img   class="image-11 jive-image" height="352" src="3277a54edbd0df048c8ef4621f9619c0.iix" style="max-width: 1200px; max-height: 900px; width: 736px; height: 352.145px;" width="736"/></p><p></p><p>Over and out, now back to watch some Olympics <span __jive_emoticon_name="happy" __jive_macro_name="emoticon" class="jive_emote jive_macro" data-renderedposition="5150.390625_321_16_16" src="/8.0.4.21bdc7e/images/emoticons/happy.png"></span></p>