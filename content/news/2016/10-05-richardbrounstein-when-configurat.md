---
title: "When Configuration Items Go Stale"
date: 2016-10-05T04:21:43.000Z
authors: ["richardbrounstein"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=f7fca6a5dbd0dbc01dcaf3231f9619fa"
---
<p style="margin-bottom: 6.0pt;">Imagine What would happen if your IT Asset reports reported dozens of extra machines in the data center that didn't exist?   Your company might pay tens of thousands of dollars on extra maintenance.   Decisions for future software license purchases based on the number of computers in your data center are just as badly affected by having stale data in your CMDB.   Or consider all the effort that goes into configuration management on your data center and how important it is the CMDB be accurate for IT processes to work.</p><p style="margin-bottom: 6.0pt;">Just as meats and vegetables will go bad in your refrigerator, configuration items can go bad in your CMDB.   We must discard the rotting CIs in the CMDB and ensure all CIs are fresh and healthy.   The reason this is such a serious issue in the CMDB is that it causes your CMDB to be inaccurate.   An inaccurate CMDB is the cause for serious problems in an organization's IT processes.</p><p style="margin-bottom: 6.0pt;">Identifying out-of-date CIs and removing them from the CMDB is just one of several on-going processes the CMDB management team needs to run in order to keep the CMDB as accurate as possible.</p><p style="margin-bottom: 6.0pt;">   </p><p><img  alt="Picture1.png" class="image-1 jive-image" src="34ad108edb985304b322f4621f9619aa.iix" style="width: 620px; height: 334px;"/></p><p></p><p style="margin-bottom: 6.0pt;"><strong>Why do Configuration Items go stale?</strong></p><p style="margin-bottom: 6.0pt;">If a CI of a particular class is stale, this means that CIs exist in the CMDB but it may or may not exist in the data center.   What we do know is that whatever process we use to populate CI data in the CMDB has not verified that these configuration items actually exist in the data center for some time.   Here are possible reasons why this is the case:</p><ul style="list-style-type: disc;"><li>The device may no longer exist.   It may have been taken off the network.</li><li>The device may still be on the network but, due to problematic network connectivity, our automated discovery process cannot connect to the device to re-discover it.</li><li>The device may still be on the network but our automated discovery process may not be able to connect to the device to rediscover it.   Maybe our access credentials do not work anymore or there is a problem with a discovery pattern.</li><li>The device may exist on the network and be accessible but our identification process may not be recognizing it uniquely.   We might be creating <strong>duplicate CIs</strong> in the CMDB for this device and so we need to fix our CI identification mechanism and remove the duplicated CIs.</li></ul><p style="margin-bottom: 6.0pt;"><strong>How does ServiceNow measure Stale Data?</strong></p><p style="margin-bottom: 6.0pt;">In the ServiceNow CMDB (as of Helsinki release), the field "<strong>most_recent_discovery (last_discovered)</strong>" is used to measure just how stale a CI is.   This is governed by rules for the classes of CI in the CI Class Manager.</p><p><img  alt="Picture2.png" class="image-2 jive-image" src="399ab7f5db545fc068c1fb651f96190d.iix" style="width: 620px; height: 638px;"/></p><p>Where you can click down into the CIs</p><p><img  alt="Picture3.png" class="image-3 jive-image" src="a8bd5d46db98d304b322f4621f9619b6.iix" style="width: 620px; height: 108px;"/></p><p style="margin-top: 12.0pt; margin-bottom: 12.0pt;"><strong>What do I do with all these Stale CIs?</strong></p><ol style="list-style-type: upper-roman;"><li>In the ServiceNow CMDB, there exists a remediation capability that will allow you to run a script against CIs determined to be stale.   The script should either remove stale CIs or at least mark the CIs as non-operational.   You can find this under Configurations  ® CMDB Remediations.   This is where you can configure a Remediation Task that will run a workflow script. The most likely remediation would be to either delete the CI or to set its status to "non-operational".   Before running a remediation, the CMDB management team should consider the above reasons why the CI might be stale and evaluate whether or not there is a discovery problem or a network problem before getting rid of that CI.</li></ol><p>Here is how to define a CI Remediation Workflow in ServiceNow:</p><p><img  alt="Picture4.png" class="image-4 jive-image" src="a42cb802db1013043eb27a9e0f96195a.iix" style="width: 620px; height: 318px;"/></p><p><img  alt="Picture5.png" class="image-5 jive-image" src="caf8d44edbd89704ed6af3231f961980.iix" style="width: 620px; height: 251px;"/></p><p>Remediation can run automatically or manually.   The advantage of running the workflow automatically is that it will run automatically against a large batch of stale CIs.   You wont have to click on each CI individually to remediate.   The disadvantage is that there might be CIs that you don't want removed or archived but need to be evaluated. The remediation is an Orchestration workflow.</p><p></p><p>Here is an example simple remediation workflow to delete the stale records:</p><p><img  alt="Picture6.png" class="image-6 jive-image" src="19de373ddb901344e9737a9e0f9619c0.iix" style="width: auto; height: auto;"/> </p><p>The Delete Record is a simple step with JavaScript code as shown here.   This is the code to remove the CI:</p><p> <img  alt="Picture7.png" class="image-7 jive-image" src="bc008d4adb10130468c1fb651f96192d.iix" style="width: auto; height: auto;"/> </p><p>if the desire is to make the CI non operational rather than remove the CI, the following javascript code can be substituted for the above:</p><p></p><p><span style="font-size: 8.0pt;">var gr = new GlideRecord ( 'cmdb_ci');</span></p><p><span style="font-size: 8.0pt;">gr.get (current.cmdb_ci);</span></p><p><span style="font-size: 8.0pt;">gr.operational_status = 0;</span></p><p><span style="font-size: 8.0pt;">gr.update();</span></p>