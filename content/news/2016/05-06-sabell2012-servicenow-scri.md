---
title: "ServiceNow Scripting  Orchestration Best Practices"
date: 2016-05-05T20:39:22.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=861d22e5dbd0dbc01dcaf3231f961973"
---
<p style="font-family: arial, sans-serif; color: #666666;"><span style="font-style: inherit; font-family: inherit;"><strong>NOTE</strong></span>: ON APRIL 1, 2016 ACCENTURE COMPLETED THE ACQUISITION PROCESS OF CLOUDSHERPAS.   AT THAT TIME THE CLOUDSHERPAS BLOG SITES WERE DOWNED FOREVER.</p><p></p><p style="font-family: arial, sans-serif; color: #666666;">THIS IS THE RE-PUBLICATION OF MY ARTICLE FROM <span style="font-style: inherit; font-family: inherit;"><strong>June 2, 2015</strong></span> ON THE CLOUDSHERPAS SERVICENOW SCRIPTING 101 BLOG.</p><p style="font-family: arial, sans-serif; color: #666666;">____________________________________________________________________________</p><p></p><p></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif; color: #000000;">While working with several clients on various Orchestration projects, it became abundantly clear that there are certain methodologies that should always be included on these type of projects.   We were seeing far too many instances with poor workflow structuring techniques, no coding standards, inefficient code and designs, inconsistent workflow planning and a lack of reusability!   So, with those in mind, here are some best practices for Orchestration in ServiceNow that can help you avoid common mistakes and challenges.</span></p><p></p><p><br/><span style="color: #3d3d3d; font-size: 14pt; font-family: arial, helvetica, sans-serif;"><strong>General Best Practices</strong></span></p><p></p><p><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif; color: #000000;">These best practices are meant for Orchestration projects, but you can also apply them to workflows:</span></p><p></p><ol><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Use system properties to configure the workflow. If you have a constant in your script, move it to a system property. Benefits include the ability to make on-the-fly changes without the need to check out the workflow and the ability to store the value in a format other than plain text.</span></li></ol><p></p><ol start="2"><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Remove workflow input variables prior to going to production. Use workflow.scratchpad or system properties and be sure to use input variables for unit testing purposes only.</span></li></ol><p></p><ol start="3"><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Adhere to the following testing progression process: </span></li></ol><p style="padding-left: 60px;"><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt; line-height: 1.5;">a. Use input variables as initial feeds</span></p><p style="padding-left: 60px;"><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt; line-height: 1.5;">b. Then use the current object, but without a call out to powershell scripts</span></p><p style="padding-left: 60px;"><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt; line-height: 1.5;">c. Then use the current object with a call out to powershell scripts and verify that the values are making it (use the Write-Host commandlet, as it will then be returned in the XML and fed back to the ECC queue).</span></p><p></p><ol start="4"><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Consider using a primary workflow and then building out sub-workflows for each task grouping. This allows you to "build" upon existing functionality and reduces workflow complexity.</span></li></ol><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><br/><span style="color: #000000;"><img class="jive-image" height="279" src="https://lh5.googleusercontent.com/h8Tcv01M0e20lVrIH9lXPNePaw_LQ9_n379OBDTz7zR5I3lySswqYt7kHvkxrGLOJYxowIp1PyuU5aKjcM9k-GfsS0ycxHkcWoNxXqzi3lEYwhqQwbeSPteytXGZQVz-5RDPt1s" style="border-style: none; display: block; margin-left: auto; margin-right: auto;" width="624"/></span></span></p><h3 dir="ltr" style="margin-top: 8pt;"></h3><h3 dir="ltr" style="margin-top: 8pt;"></h3><h3 dir="ltr" style="margin-top: 8pt;"><br/><span style="color: #3d3d3d; font-size: 14pt; font-family: arial, helvetica, sans-serif;"><strong>Coding Best Practices</strong></span></h3><p></p><p></p><ol><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Use a Run Script Activity at the beginning of the workflow to initialize your workflow scratchpad variables (including system property gets) to be used downstream.</span></li></ol><p></p><ol start="2"><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Create a library of functions using a Script Include(s) for reuse.</span></li></ol><p></p><ol start="3"><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Use code to call Script Includes to retrieve data, operate on data or where involved processing needs to occur.</span></li></ol><p></p><ol start="4"><li><span dir="ltr" style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">Use a Set Values Activity or Run Script to update the current object. If a Run Script is used, <span style="font-weight: bold;">do </span><span style="font-weight: bold; text-decoration: underline;">NOT</span> use current.update()!   </span></li></ol><p></p><ol start="5"><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Try to set up return information with your custom powershell scripts to get any feedback or error information back into the stream. Write this information down in the system logs. Remember to handle your errors!</span></li></ol><p></p><ol start="6"><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">When logging using gs.log(), make certain you use the second parameter ability to record where the gs.log was actually fired! This will help you track down mystery error messages appearing in your logs. Failure to do this could cause you a couple of hours tracking down the gs.log location in your workflow code! Remember: Activity scripts are NOT searchable! </span></li></ol><p></p><p></p><p style="padding-left: 60px;"><span dir="ltr" style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">a. example: gs.log('---&gt; ERROR! ' + err, 'WF:&lt;&lt;workflow name and activity&gt;&gt;'); // Not scope safe in Fuji+</span></p><p style="padding-left: 60px;"></p><p style="padding-left: 60px;"><span dir="ltr" style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">b. example: gs.info('---&gt; {1}, ERROR! {0}', err, 'WF:&lt;&lt;workflow name and activity&gt;&gt;');   // Scope safe in Fuji+</span></p><p></p><ol start="7"><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Use JSUtil.nil()/.notNil() &lt;string&gt;.nil() in condition statements. Note: JSUtil is currently not scope safe in Fuji+.</span></li></ol><p></p><ol start="8"><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">When converting a value to a String, use + "" or .getValue(&lt;field&gt;), but remember that getValue() cannot dot-walk!</span></li></ol><p></p><ol start="9"><li><span dir="ltr" style="font-family: arial, helvetica, sans-serif; font-size: 12pt;">If you need workflow debugging, set the system property <span style="font-weight: bold;">glide.workflow.log.debug</span> to true and use workflow.debug during testing.</span></li></ol><p></p><ol start="10"><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">If you're using powershell, consider writing your own MID Server script files.</span></li></ol><p></p><ol start="11"><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Comment your code!!!</span></li></ol><h3 dir="ltr" style="margin-top: 8pt;"></h3><h3 dir="ltr" style="margin-top: 8pt;"></h3><h3 dir="ltr" style="margin-top: 8pt;"><br/><span style="color: #3d3d3d; font-size: 14pt; font-family: arial, helvetica, sans-serif;"><strong>Final Tips for Orchestration Success</strong></span></h3><p></p><p></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="color: #000000;">To finish off, remember to keep things simple and straight-forward when you're creating an Orchestration workflow and code. Comments and standards keep the number of hours spent in maintenance to a minimum. Last but not least, the following points should be chiseled in stone for you:</span><br/></span></p><p></p><ol><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Consistency of the workflow, coding best practices and variable usage are the key to reusable and maintainable code!</span></li></ol><p></p><ol start="2"><li><span style="font-size: 12pt; font-family: arial, helvetica, sans-serif;">Your changes to a workflow are not placed into the current update set until you publish.</span></li></ol><h3 dir="ltr" style="margin-top: 8pt;"></h3><p></p><h3 dir="ltr" style="margin-top: 8pt;"><span style="color: #3d3d3d; font-size: 14pt; font-family: arial, helvetica, sans-serif;"><strong>Learn More</strong></span></h3><p></p><p></p><p><span style="color: #000000; font-size: 12pt; font-family: arial, helvetica, sans-serif;">For more information on using Orchestration in ServiceNow, check out these Wiki articles:</span></p><ul><li><span dir="ltr" style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><a href="http://www.servicenow.com/products/orchestration.html"><span style="color: #1155cc; text-decoration: underline;">ServiceNow Orchestration</span></a></span></li><li><span dir="ltr" style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><a href="http://wiki.servicenow.com/index.php?title=Orchestration"><span style="color: #1155cc; text-decoration: underline;">Orchestration Product Documentation</span></a><span style="color: #0000ff;"> </span></span></li><li><span dir="ltr" style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><a href="http://wiki.servicenow.com/index.php?title=Orchestration_Activities"><span style="color: #1155cc; text-decoration: underline;">Orchestration Activities</span></a><span style="color: #0000ff;"> </span></span></li><li><span dir="ltr" style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><a href="http://wiki.servicenow.com/index.php?title=Orchestration_PowerShell_Activities"><span style="color: #1155cc; text-decoration: underline;">Orchestration Powershell Activities</span></a></span></li><li><span dir="ltr" style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><a href="http://wiki.servicenow.com/index.php?title=Orchestration_Example_-_Active_Directory_User_Management"><span style="color: #1155cc; text-decoration: underline;">Orchestration Example - Active Director User Management</span></a><span style="color: #0000ff;"> </span></span></li><li><span dir="ltr" style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><a href="http://wiki.servicenow.com/index.php?title=Orchestration_Example_-_Restart_a_Linux_Server"><span style="color: #1155cc; text-decoration: underline;">Orhcestration Example - Restart a Linux Server</span></a><span style="color: #0000ff;"> </span></span></li></ul><p></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><span style="color: #000000;">And be sure to </span><a href="https://www.cloudsherpas.com/resources/webinar-replay-optimizing-service-automation-processes-servicenow-orchestration/"><span style="color: #1155cc; text-decoration: underline;">watch this replay of our recent webinar</span></a><span style="color: #000000;"> on how to optimize your service automation processes with ServiceNow Orchestration.</span></span></p><p><span style="font-family: arial, helvetica, sans-serif; font-size: 12pt;"><br/><span style="color: #1155cc; font-weight: bold; font-style: italic;"><a title="mamann" __default_attr="2845" __jive_macro_name="user" class="jive_macro jive_macro_user" data-orig-content="mamann" data-renderedposition="2656.491455078125_7.997159004211426_85_18" href="/community?id=community_user_profile&user=14625269dbd81fc09c9ffb651f9619eb">mamann</a></span><span style="color: #000000; font-weight: bold; font-style: italic;"> also contributed to this post.</span></span></p><p></p><p style="font-family: arial, sans-serif; color: #666666;"></p><p style="font-family: arial, sans-serif; color: #666666;"><span style="font-weight: inherit; font-style: inherit; font-size: 12pt; font-family: arial, helvetica, sans-serif;">Steven Bell</span></p><p></p><p style="font-family: arial, sans-serif; color: #666666;"><span style="color: purple; font-weight: inherit; font-size: 12pt; font-family: inherit; font-style: inherit;"><strong>If you find this article helps you, don't forget to log in and "like" it!</strong></span></p><p></p><p style="font-family: arial, sans-serif; color: #666666;"><span style="color: purple; font-weight: inherit; font-size: 12pt; font-family: inherit; font-style: inherit;"><strong>Also, if you are not already, I would like to encourage you to become a member of our blog!</strong></span></p><p></p><p style="font-family: arial, sans-serif; color: #666666;"><span style="color: purple; font-weight: inherit; font-size: 12pt; font-family: inherit; font-style: inherit;"><strong><a _jive_internal="true" href="/servlet/JiveServlet/downloadImage/38-5354-103434/accenture technology logo.png" style="font-weight: inherit; font-style: inherit; font-family: inherit; color: #266fc8;"><img   alt="accenture technology logo.png" class="image-1 jive-image" height="52" src="2542c98edb1897041dcaf3231f96196c.iix" style="margin: 10px 10px 10px 0; border: 0px; font-weight: inherit; font-style: inherit; font-family: inherit;" width="277"/></a><a _jive_internal="true" href="/servlet/JiveServlet/downloadImage/38-5354-103435/sn-community-mvp.png" style="font-weight: inherit; font-style: inherit; font-family: inherit; color: #266fc8;"><img   alt="sn-community-mvp.png" class="image-2 jive-image" height="48" src="4ab0608edbd85344e9737a9e0f9619c5.iix" style="margin: 10px 10px 10px 0; border: 0px; font-weight: inherit; font-style: inherit; font-family: inherit;" width="135"/></a></strong></span></p><p style="font-weight: inherit; font-style: inherit; font-family: inherit; color: #666666;"></p>