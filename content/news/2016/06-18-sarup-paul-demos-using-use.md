---
title: "Demos using User Criteria and Articlelevel access control in the Knowledge Base"
date: 2016-06-17T08:35:11.000Z
authors: ["Sarup Paul"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=3e6e62eddbd0dbc01dcaf3231f961903"
---
<p>We have two great videos to help understand security configuration for Knowledge Management</p><p></p><p>Knowledge Management v3 (all releases Fuji and beyond) uses User Criteria to define access control at the Knowledge Base level. This video introduces the concepts and demostrates how to configure User Criteria</p><p></p><p><iframe src="https://youtube.com/embed/OVGt5rgB3S0" width="440" height="330"/></p><p></p><p>In order to achieve Article-level access control, you can refer to our blog <a title="Article Security and Filtering in Knowledge v3" __default_attr="5341" __jive_macro_name="blogpost" class="jive_macro jive_macro_blogpost" data-orig-content="Article Security and Filtering in Knowledge v3" data-renderedposition="461.6335144042969_462.7586669921875_302_16" href="/community?id=community_blog&sys_id=264e66addbd0dbc01dcaf3231f96196c">Article Security and Filtering in Knowledge v3</a> on this topic. The video below walks through a use case to explain this even further.</p><p></p><p><iframe src="https://youtube.com/embed/v-hHmVSiBZ4" width="440" height="330"/></p><p></p><p>The script referred to in the second video is below</p><p></p><p></p><p class="p1"><span class="s1" style="font-family: terminal, monaco; font-size: 10pt;">// customer would have added a field called 'u_location'</span></p><p class="p1"><span class="s1" style="font-family: terminal, monaco; font-size: 10pt;">// (instead of checking an article list)</span></p><p class="p1"><span class="s1" style="font-family: terminal, monaco; font-size: 10pt;">// and each article might have this field that can be checked</span></p><p class="p1"><span class="s1" style="font-family: terminal, monaco; font-size: 10pt;">// against the user's location</span></p><p class="p1"><span class="s1" style="font-family: terminal, monaco; font-size: 10pt;">//</span></p><p class="p1"><span class="s1" style="font-family: terminal, monaco; font-size: 10pt;">// Exceptions: users with role 'admin' or 'knowledge_admin' or 'knowledge_manager'</span></p><p class="p1"><span class="s1" style="font-family: terminal, monaco; font-size: 10pt;">//     will be able to see all article (not restricted by location)</span></p><p class="p1"><span class="s1" style="font-family: terminal, monaco; font-size: 10pt;">function onBefore(current, previous) {</span></p><p class="p1"><span class="s1" style="font-family: terminal, monaco; font-size: 10pt;">     //This function will be automatically called when this rule is processed</span></p><p class="p1"><span class="s1" style="font-family: terminal, monaco; font-size: 10pt;">       var userObj = gs.getUser();</span></p><p class="p1"><span class="s1" style="font-family: terminal, monaco; font-size: 10pt;">if(!userObj.hasRole("admin") &amp;&amp; !userObj.hasRole("knowledge_admin") &amp;&amp; !userObj.hasRole("knowledge_manager")) {</span></p><p class="p1"><span class="s1" style="font-family: terminal, monaco; font-size: 10pt;">var gr = new GlideRecord("sys_user");</span></p><p class="p1"><span class="s1" style="font-family: terminal, monaco; font-size: 10pt;">gr.get(gs.getUserID());</span></p><p class="p1"><span class="s1" style="font-family: terminal, monaco; font-size: 10pt;">var currentUserLocation = gr.location.country;</span></p><p class="p1"><span class="s1" style="font-family: terminal, monaco; font-size: 10pt;">var q=current.addNullQuery('u_location');</span></p><p class="p1"><span class="s1" style="font-family: terminal, monaco; font-size: 10pt;">q.addOrCondition('u_location', currentUserLocation);</span></p><p class="p1"><span class="s1" style="font-family: terminal, monaco; font-size: 10pt;">gs.print("Query restricted to location: " + currentUserLocation);</span></p><p class="p1"><span class="s1" style="font-family: terminal, monaco; font-size: 10pt;">}</span></p><p class="p1"><span class="s1" style="font-family: terminal, monaco; font-size: 10pt;">}</span></p>