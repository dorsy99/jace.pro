---
title: "ECMAScript  in ServiceNow Helsinki"
date: 2016-05-03T18:15:58.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=585de229dbd0dbc01dcaf3231f9619db"
---
<p class="graf--p"><img   alt="1*3FrnFZnvDwZuyTWMHIt5zA.png" class="image-1 jive-image" src="d32c9cc2dbd81f048c8ef4621f961998.iix" style="width: 620px; height: 115px;"/></p><p class="graf--p"></p><p class="graf--p">Ok, so it may not be <a title="" _jive_internal="true" class="markup--anchor markup--p-anchor" data-href="/community?id=community_question&sys_id=6866c7e1db1cdbc01dcaf3231f961921" href="/message/894008#894008">official</a> yet and I know this is a weird thing to get worked up about. Besides, ECMAScript 5 is so 2011, you say. Weren't we still talking about <a title="anchor markup--p-anchor" class="markup--anchor markup--p-anchor" data-href="http://www.wired.com/2011/07/netflix-fees-increase-dvd/" href="http://www.wired.com/2011/07/netflix-fees-increase-dvd/">DVD's</a> in 2011? Shouldn't we be talking about ES 6 / ECMAScript 2015? Aren't we already using <a title="" _jive_internal="true" class="markup--anchor markup--p-anchor" data-href="https://community.servicenow.com/groups/servicenow-user-group-us-tx-north-texas/blog/2015/10/13/mini-lab-extending-servicenow-javascript-using-ecmascript-6-polyfills" href="/groups/servicenow-user-group-us-tx-north-texas/blog/2015/10/13/mini-lab-extending-servicenow-javascript-using-ecmascript-6-polyfills">polyfills</a> for that?</p><p class="graf--p"></p><p class="graf--p">I hear you. I'm with you. But let's not forget that a lot of code runs on top of ServiceNow's modified <a title="anchor markup--p-anchor" class="markup--anchor markup--p-anchor" data-href="https://en.wikipedia.org/wiki/Rhino_%28JavaScript_engine%29" href="https://en.wikipedia.org/wiki/Rhino_%28JavaScript_engine%29">Rhino</a> engine, including yours and mine. So it is nice to know they are not so cavalier as to go all <a title="anchor markup--p-anchor" class="markup--anchor markup--p-anchor" data-href="http://www.youtube.com/watch?v=F4lUcjUv37A&amp;t=0m51s" href="http://www.youtube.com/watch?v=F4lUcjUv37A&amp;t=0m51s">History of the World Part 1 critic</a> with all our hard work.</p><p class="graf--p"></p><p class="graf--p">So while we may lament the lack of true <a title="anchor markup--p-anchor" class="markup--anchor markup--p-anchor" data-href="http://es6-features.org/#BlockScopedVariables" href="http://es6-features.org/#BlockScopedVariables">block scopes</a>, <a title="anchor markup--p-anchor" class="markup--anchor markup--p-anchor" data-href="http://es6-features.org/#StringInterpolation" href="http://es6-features.org/#StringInterpolation">string interpolation</a>, and <a title="anchor markup--p-anchor" class="markup--anchor markup--p-anchor" data-href="http://es6-features.org/#RestParameter" href="http://es6-features.org/#RestParameter">rest parameters</a> (I know you're all just heartbroken), let's take a look at what javascript upgrades we <strong class="markup--strong markup--p-strong"><em class="markup--p-em markup--em">might</em></strong> have to look forward to with the release of Helsinki:</p><p class="graf--p"></p><h2 class="graf--h3">New Array Manipulation Functions</h2><p></p><p class="graf--p">If you are like me, you use the tools that are right in front of you. And if thats the case, your code probably looks like this anytime you are working with an array:</p><p class="graf--p"></p><pre class="graf--pre"><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code jive_text_macro _jivemacro_uid_14622811646914143" data-renderedposition="486_8_970_48" jivemacro_uid="_14622811646914143">for (var i = 0; arr.length; i++) {<br/>   // Do something with the array value arr[i]<br/>}</pre></pre><p class="graf--p"></p><p class="graf--p">But this doesn't tell you a whole lot about the intent of the manipulation. Are you looking for a value, doing something to each value, reducing the array to a value? Who cares, just iterate it! Well here are some functions you may be familiar with in the browser that could show up server side:</p><p class="graf--p"></p><ul><li><a title="li-anchor markup--anchor" class="markup--li-anchor markup--anchor" data-href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/isArray">Array.isArray()</a></li><li><a title="li-anchor markup--anchor" class="markup--li-anchor markup--anchor" data-href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/every" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/every">Array.prototype.every()</a></li><li><a title="li-anchor markup--anchor" class="markup--li-anchor markup--anchor" data-href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter">Array.prototype.filter()</a></li><li><a title="li-anchor markup--anchor" class="markup--li-anchor markup--anchor" data-href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/forEach">Array.prototype.forEach()</a></li><li><a title="li-anchor markup--anchor" class="markup--li-anchor markup--anchor" data-href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/indexOf">Array.prototype.indexOf()</a></li><li><a title="li-anchor markup--anchor" class="markup--li-anchor markup--anchor" data-href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/lastIndexOf" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/lastIndexOf">Array.prototype.lastIndexOf()</a></li><li><a title="li-anchor markup--anchor" class="markup--li-anchor markup--anchor" data-href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/map">Array.prototype.map()</a></li><li><a title="li-anchor markup--anchor" class="markup--li-anchor markup--anchor" data-href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/Reduce">Array.prototype.reduce()</a></li><li><a title="li-anchor markup--anchor" class="markup--li-anchor markup--anchor" data-href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/some">Array.prototype.some()</a></li></ul><p class="graf--p"></p><p class="graf--p">But let's face it, the best part is indexOf for all those GlideLists:</p><p class="graf--p"></p><pre class="graf--pre"><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14622811847745486 jive_text_macro" data-renderedposition="925.96875_8_970_64" jivemacro_uid="_14622811847745486">var list = current.watch_list.toString().split(',');<br/>if (list.indexOf('Mr. Important') != 0) {<br/>   current.comments = 'Something intelligent so it looks like we're working on this right away.';<br/>}</pre></pre><h2 class="graf--h3"></h2><h2 class="graf--h3">Native JSON</h2><p></p><p class="graf--p">So, I am just going to say it. This was an annoying way to convert javascript objects to JSON strings and back:</p><p class="graf--p"></p><pre class="graf--pre"><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code jive_text_macro _jivemacro_uid_14622812089034825" data-renderedposition="1140.96875_8_970_32" jivemacro_uid="_14622812089034825">var json = new JSON().encode(someObject);<br/>var obj = new JSON().decode(json);</pre></pre><p class="graf--p"></p><p class="graf--p">You are probably familiar with this if you do a lot of processor or GlideAjax work. In a recent release, JSON.parse and JSON.stringify were added as class functions. But if you have started using <a title="anchor markup--p-anchor" class="markup--anchor markup--p-anchor" data-href="http://wiki.servicenow.com/index.php?title=Scoped_System_API#gsc.tab=0" href="http://wiki.servicenow.com/index.php?title=Scoped_System_API#gsc.tab=0">scoped apps</a>, then you know that <strong class="markup--strong markup--p-strong"><em class="markup--p-em markup--em">this</em></strong> hateful incantation is still just as frustrating:</p><p class="graf--p"></p><pre class="graf--pre"><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code jive_text_macro _jivemacro_uid_14622812195124159" data-renderedposition="1285.96875_8_970_32" jivemacro_uid="_14622812195124159">var json = global.JSON.parse(someObject);<br/>var obj = global.JSON.stringify(json);</pre></pre><p class="graf--p"></p><p class="graf--p">Now is this a particularly big deal. Perhaps not. But if you spend any significant amount of time in the browser, old habits die hard. But won't it be nice if and when we can just use the native variation:</p><p class="graf--p"></p><pre class="graf--pre"><pre __default_attr="javascript" __jive_macro_name="code" class="_jivemacro_uid_14622812290009518 jive_macro_code jive_text_macro" data-renderedposition="1429.96875_8_970_32" jivemacro_uid="_14622812290009518">var json = JSON.stringify(someObject);<br/>var obj = JSON.parse(json);</pre></pre><h2 class="graf--h3"></h2><h2 class="graf--h3">Javascript Properties</h2><p></p><p class="graf--p">This might be the most exciting part of all of this. With any luck, we will see javascript property getters and setters brought to ServiceNow. If you aren't familiar, getters and setters allow you to add logic when working with object properties directly. So instead of this:</p><p class="graf--p"></p><pre class="graf--pre"><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14622812403907979 jive_text_macro" data-renderedposition="1633.96875_8_970_128" jivemacro_uid="_14622812403907979">var obj = { <br/>   _a: 1,<br/>   setA: function(val) { this._a = val + 1 },<br/>   getA: function() { return 'Value is: ' + this._a }<br/>};<br/><br/>obj.getA(); // get, a = 'Value is: 1'<br/>obj.setA(1); // set obj._a = 2</pre></pre><p class="graf--p"></p><p class="graf--p">You can end up with this:</p><p class="graf--p"></p><pre class="graf--pre"><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14622812483355080 jive_text_macro" data-renderedposition="1852.96875_8_970_112" jivemacro_uid="_14622812483355080">var obj = { <br/>   _a: 1,<br/>   set a(val) { this._a = val + 1 },<br/>   get a() { return 'Value is: ' + this._a }<br/>};<br/>obj.a; // get, a = 'Value is: 1'<br/>obj.a = 1; // set obj._a = 2</pre></pre><p class="graf--p"></p><p class="graf--p">This will likely be most useful in Scoped Apps and Script Includes for adding and changing logic with get and set without changing the contract of the Script Include. If you are already using functions like in the first example, you might not be so impressed. But hey, its another tool in the kit.</p><p class="graf--p"></p><p class="graf--p">Hopefully we will see most of these additions in Helsinki. If nothing else, it will be nice to have some compatibility between my client side scripts and server side scripts. At least until ES6 is mainstream, anyway.</p><p class="graf--p"></p><p class="graf--p"><span style="color: #666666; font-family: arial, sans-serif;">Via </span><span style="color: #3778c7; font-family: arial, sans-serif;"><a title="log.codecreative.io/" href="https://blog.codecreative.io/">Code Creative</a></span></p>