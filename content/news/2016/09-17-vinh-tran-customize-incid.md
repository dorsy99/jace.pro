---
title: "Customize Incident Fields With Alert Rule"
date: 2016-09-16T20:59:26.000Z
authors: ["Vinh Tran"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=322e2a6ddbd0dbc01dcaf3231f961981"
---
<p><em><span style="text-decoration: underline; font-size: 14.0pt;">Customize Incident Fields With Alert Rule</span><span style="text-decoration: underline; font-size: 14.0pt;"> </span></em></p><p></p><p class="p1"><span class="s1">ServiceNow's Event Management helps our customers identify health issues across the datacenter through a single management console.   It provides intelligent event and alert analysis to ensure business service continuity.   Using ServiceNow Event Management, your IT Operators have a single place to view and manage alerts, improving operational efficiency through avoiding the use of multiple consoles from multiple monitoring tools.   One of my customers implemented ServiceNow Event Management to consolidate events from SNMP, SCOM, and other monitoring tools.   They use event rules to enrich the information in the alert record, as well as use alert rules to automatically open incidents and populate the incident records with additional information dynamically from the alert fields.   </span></p><p class="p2"></p><p>My colleague, Tony Branton, had written a couple very good blogs on <span style="color: #4f81bd;">"</span><strong><em><span style="color: #4f81bd;">Become Awesome with Event Rules</span><span style="color: #4f81bd;">" and "</span><span style="color: #4f81bd;">Transform Your Way to Better Alerts</span><span style="color: #4f81bd;">"</span>.   </em></strong>So in this article, I want to focus on extending alert rule to automatically open incident and enrich the incident fields using these methods:</p><p></p><ul><li>Use task template to set the field values in incident record or</li><li><span style="font-size: 11.0pt; font-family: Calibri; color: #2e2e2e; background: white;">Use the </span><span style="font-size: 11.0pt; font-family: Calibri; color: #2e2e2e; background: #F5F8FA;">EvtMgmtCustomIncidentPopulator</span><span style="font-size: 11.0pt; font-family: Calibri; color: #2e2e2e; background: white;"> script in script include.   </span></li></ul><p></p><p style="margin-bottom: .0001pt;"><span style="text-decoration: underline;"><strong><span style="font-size: 14pt;"><em>Using Task template to set <span style="color: #3334ca;">static</span> field value</em></span><br/></strong></span></p><p style="margin-bottom: .0001pt;"></p><p>1.         In this example I create a database incident template and select the fields I want to set the field value</p><p><img   alt="Picture1.png" class="image-1 jive-image" src="786c67b1db1c1704ed6af3231f9619a9.iix" style="width: 620px; height: 331px;"/></p><p>2.         <span style="line-height: 1.5;">Next, I create an alert rule that meets certain conditions.   In this example, if the alert has severity = critical and resource contains mssqlserver, then automatically open incident and set the value defined in the database incident template.</span></p><p style="margin-bottom: .0001pt;"><img   alt="Picture2.png" class="image-2 jive-image" src="c1c01502db581b04ed6af3231f961901.iix" style="width: 620px; height: 290px;"/></p><p></p><p>3.         Now the incident record is populating with the static field values you defined in your database incident task template.</p><p></p><p style="margin-bottom: .0001pt;"><img   alt="Picture3.png" class="image-3 jive-image" height="357" src="8b9a7c0adb109f048c8ef4621f961993.iix" style="height: 357px; width: 636.034px;" width="636"/></p><p></p><p><span style="text-decoration: underline; font-size: 14pt;"><em><strong>Using <span style="color: #2e2e2e; background: #F5F8FA;">EvtMgmtCustomIncidentPopulator</span><span style="color: #2e2e2e; text-decoration: underline; background: white;"> script to <span style="color: #3334ca; text-decoration: underline;">dynamically</span> set field values</span></strong></em></span></p><p></p><p>My customer wants to set the incident priority field based on event severity.   To accomplish this task, I use the</p><p class="p1"><span class="s1">EvtMgmtCustomIncidentPopulator </span>in script include to meet their requirement.</p><p></p><p>1.         First, create an alert rule meeting the condition you want to auto open an incident.</p><ul><ul><li>Check the auto open and select type "incident"</li><li>Leave the type template blank</li></ul></ul><p style="margin-bottom: .0001pt;"><img   alt="Picture1a.png" class="image-4 jive-image" height="324" src="eaf61c4adb9817041dcaf3231f9619fa.iix" style="width: 655px; height: 324.331px;" width="655"/></p><p></p><p>2.         Modify the <span class="s1">EvtMgmtCustomIncidentPopulator </span> in script include.</p><p></p><p>                   Here's the customer's requirements for Priority:</p><ul style="list-style-type: disc;"><ul><li>if severity = critical then set priority = critical</li><li>if severity = major then set priority = High</li><li>if severity = minor then set priority = moderate</li><li>if severity = Warning then set priority = low</li><li>if severity = Info then set priority = Planning</li></ul></ul><p></p><p>                   Because the <span style="color: red;">Priority </span>of an Incident is <em>calculated</em> from both the value of Impact and Urgency.   We need to use the "priority data lookups" table below to help get the correct result for the priority field.   Here are the possible combinations that produce the appropriate Priority</p><p></p><p><img   alt="Picture2a.png" class="image-5 jive-image" src="cf96bfb9db1cdf04e9737a9e0f96191d.iix" style="width: 620px; height: 281px;"/></p><p></p><p>         To modify the <em>EvtMgmtCustomerIncidentPopulator script go to</em></p><p></p><ul style="list-style-type: disc;"><li>System UI -&gt; Script Include -&gt; (search for) <span style="color: #1f497d;">EvtMgmtCustomIncidentPopulator.   Modify the code as follows.   (I am sure some of you can write a cleaner and better code than this example, but the following code does work)</span></li></ul><p style="text-indent: .25in;"></p><p style="text-indent: .25in;">         Open the record and update the code as follow.</p><p style="text-indent: .25in;"></p><p style="text-indent: .25in;"><span style="font-size: 8.0pt; font-family: Helvetica;">                                                 var EvtMgmtCustomIncidentPopulator = Class.create();</span></p><p style="text-indent: .25in;"><span style="font-size: 8.0pt; font-family: Helvetica;">                                                 EvtMgmtCustomIncidentPopulator.prototype = {</span></p><p style="margin-left: 1.0in; margin-bottom: .0001pt;"><span style="font-size: 8.0pt; font-family: Helvetica;">                 initialize: function() {</span></p><p style="margin-left: 1.0in; margin-bottom: .0001pt;"><span style="font-size: 8.0pt; font-family: Helvetica;">                   },</span></p><p style="margin-left: 1.0in; margin-bottom: .0001pt;"><span style="font-size: 8.0pt; font-family: Helvetica;">       type: 'EvtMgmtCustomIncidentPopulator'</span></p><p style="margin-left: 1.0in; margin-bottom: .0001pt;"><span style="font-size: 8.0pt; font-family: Helvetica;">};</span></p><p style="margin-left: 1.0in; margin-bottom: .0001pt;"><span style="font-size: 8.0pt; font-family: Helvetica;">EvtMgmtCustomIncidentPopulator.populateFieldsFromAlert = function(alert, task, rule){</span></p><p style="margin-left: 1.0in; margin-bottom: .0001pt;"><span style="font-size: 8.0pt; font-family: Helvetica;">if(alert.severity=='1')</span></p><p style="margin-left: 1.0in; margin-bottom: .0001pt;"><span style="font-size: 8.0pt; font-family: Helvetica;">{</span></p><p style="margin-left: 1.0in; margin-bottom: .0001pt;"><span style="font-size: 8.0pt; font-family: Helvetica;">                                   task.impact = '1';</span></p><p style="margin-left: 1.0in; margin-bottom: .0001pt;"><span style="font-size: 8.0pt; font-family: Helvetica;">                                   task.urgency = '1';</span></p><p style="margin-left: 1.0in; margin-bottom: .0001pt;"><span style="font-size: 8.0pt; font-family: Helvetica;">                                   return true;</span></p><p style="margin-left: 1.0in; margin-bottom: .0001pt;"><span style="font-size: 8.0pt; font-family: Helvetica;">}</span></p><p style="margin-left: 1.0in; margin-bottom: .0001pt;"><span style="font-size: 8.0pt; font-family: Helvetica;">else { if(alert.severity=='2')</span></p><p style="margin-left: 1.0in; margin-bottom: .0001pt;"><span style="font-size: 8.0pt; font-family: Helvetica;">                                   {</span></p><p style="margin-left: 1.0in; margin-bottom: .0001pt;"><span style="font-size: 8.0pt; font-family: Helvetica;">                                   task.impact = '1';</span></p><p style="margin-left: 1.0in; margin-bottom: .0001pt;"><span style="font-size: 8.0pt; font-family: Helvetica;">                                   task.urgency = '2';</span></p><p style="margin-left: 1.0in; margin-bottom: .0001pt;"><span style="font-size: 8.0pt; font-family: Helvetica;">                                   return true;</span></p><p style="margin-left: 1.0in; margin-bottom: .0001pt;"><span style="font-size: 8.0pt; font-family: Helvetica;">                                 } </span></p><p style="margin-left: 1.0in; margin-bottom: .0001pt;"><span style="font-size: 8.0pt; font-family: Helvetica;">else { if(alert.severity=='3')</span></p><p style="margin-left: 1.0in; margin-bottom: .0001pt;"><span style="font-size: 8.0pt; font-family: Helvetica;">                                   {</span></p><p style="margin-left: 1.0in; margin-bottom: .0001pt;"><span style="font-size: 8.0pt; font-family: Helvetica;">                                   task.impact = '2';</span></p><p style="margin-left: 1.0in; margin-bottom: .0001pt;"><span style="font-size: 8.0pt; font-family: Helvetica;">                                   task.urgency = '2';</span></p><p style="margin-left: 1.0in; margin-bottom: .0001pt;"><span style="font-size: 8.0pt; font-family: Helvetica;">                                   return true;</span></p><p style="margin-left: 1.0in; margin-bottom: .0001pt;"><span style="font-size: 8.0pt; font-family: Helvetica;">                                   } </span></p><p style="margin-left: 1.0in; margin-bottom: .0001pt;"><span style="font-size: 8.0pt; font-family: Helvetica;">else { if(alert.severity=='4')</span></p><p style="margin-left: 1.0in; margin-bottom: .0001pt;"><span style="font-size: 8.0pt; font-family: Helvetica;">                                   {</span></p><p style="margin-left: 1.0in; margin-bottom: .0001pt;"><span style="font-size: 8.0pt; font-family: Helvetica;">                                   task .impact = '2';</span></p><p style="margin-left: 1.0in; margin-bottom: .0001pt;"><span style="font-size: 8.0pt; font-family: Helvetica;">                                   task.urgency = '3';</span></p><p style="margin-left: 1.0in; margin-bottom: .0001pt;"><span style="font-size: 8.0pt; font-family: Helvetica;">                                   return true;</span></p><p style="margin-left: 1.0in; margin-bottom: .0001pt;"><span style="font-size: 8.0pt; font-family: Helvetica;">                                   } </span></p><p style="margin-left: 1.0in; margin-bottom: .0001pt;"><span style="font-size: 8.0pt; font-family: Helvetica;">else { if(alert.severity=='5')</span></p><p style="margin-left: 1.0in; margin-bottom: .0001pt;"><span style="font-size: 8.0pt; font-family: Helvetica;">                                   {</span></p><p style="margin-left: 1.0in; margin-bottom: .0001pt;"><span style="font-size: 8.0pt; font-family: Helvetica;">                                   task.impact = '3';</span></p><p style="margin-left: 1.0in; margin-bottom: .0001pt;"><span style="font-size: 8.0pt; font-family: Helvetica;">                                   task.urgency = '3';</span></p><p style="margin-left: 1.0in; margin-bottom: .0001pt;"><span style="font-size: 8.0pt; font-family: Helvetica;">                                   return true;</span></p><p style="margin-left: 1.0in; margin-bottom: .0001pt;"><span style="font-size: 8.0pt; font-family: Helvetica;">                                   }</span></p><p style="margin-left: 1.0in; margin-bottom: .0001pt;"><span style="font-size: 8.0pt; font-family: Helvetica;">                                   }</span></p><p style="margin-left: 1.0in; margin-bottom: .0001pt;"><span style="font-size: 8.0pt; font-family: Helvetica;">                                   }</span></p><p style="margin-left: 1.0in; margin-bottom: .0001pt;"><span style="font-size: 8.0pt; font-family: Helvetica;">                                   }</span></p><p style="margin-left: 1.0in; margin-bottom: .0001pt;"><span style="font-size: 8.0pt; font-family: Helvetica;">                                   }</span></p><p style="margin-left: 1.0in;"><span style="font-size: 8.0pt; font-family: Helvetica;">};</span></p><p></p><p>3.         Now the Priority of the incident record is populated dynamically based on the severity field from the Alert</p><p></p><p><img   alt="Picture3a.png" class="image-6 jive-image" height="382" src="313dd58adbdc9f048c8ef4621f961990.iix" style="width: 697px; height: 382.193px;" width="697"/></p>