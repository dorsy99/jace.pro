---
title: "Database Views for CMDB Reports"
date: 2016-06-06T20:17:43.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=0b5eeaaddbd0dbc01dcaf3231f96198d"
---
<p><span style="font-size: 10pt;">The ServiceNow CMDB contains information on mapped Business Services, as well as an inventory of hardware and software configuration items.     Thanks to Service Mapping and Discovery, most of these CIs have relationships.   Reporting on related CIs is very important for many IT processes such as financial management and configuration management. Here are two typical reports that customers would like to run out of the CMDB:</span></p><ul style="list-style-type: disc;"><li><span style="font-size: 10pt;">On which Servers do my Business Services depend?</span></li><li><span style="font-size: 10pt;">To which machines do I need to apply a certain software patch?</span></li></ul><p style="margin-bottom: 12.0pt;"><span style="font-size: 10pt;">To get the first report, we need to query information from the following tables:</span></p><ul style="list-style-type: disc;"><li><span style="font-size: 10pt;">Business Service (cmdb_ci_service):   Stored Business Service CIs</span></li><li><span style="font-size: 10pt;">Hardware (cmdb_ci_hardware):   Stored Hardware CIs</span></li><li><span style="font-size: 10pt;">Service Configuration Item Association (svc_ci_assoc): Stored the many-to-many relationships between Business Services and Hardware</span></li></ul><p style="margin-bottom: 12.0pt;"><span style="font-size: 10pt;">For the second report, we would need to query information from the tables:</span></p><ul style="list-style-type: disc;"><li><span style="font-size: 10pt;">Hardware (cmdb_ci_hardware)</span></li><li><span style="font-size: 10pt;">CI Relationship (cmdb_rel_ci):   Defines all relationships between CIs</span></li><li><span style="font-size: 10pt;">Application Server (cmdb_ci_app_server):   Stored Application Servers CI</span></li></ul><p><span style="font-size: 10pt;"> </span><span style="font-size: 10pt;">Here is a diagram, which shows how these tables are related with the primary and secondary keys:</span></p><p style="margin-bottom: 12.0pt;"><img   alt="i1.png" class="image-1 jive-image" src="5330144adb5417041dcaf3231f96198e.iix" style="width: 620px; height: 245px;"/></p><p style="margin-bottom: 12.0pt;"><span style="font-size: 10pt;">In order to query related data, we can leverage database views in ServiceNow.   With a database view, we can create a virtual table, which is a collection of related tables. By creating a database view, a user can easily create a report just by selecting a virtual table.</span></p><ul style="list-style-type: disc;"><li><span style="font-size: 10pt;">To create the report shows a list view of Business Services and servers the Business Services depend on.</span></li></ul><p><span style="font-size: 10pt;">   <span style="font-family: Cambria;">Define a database view called: Business Service and Related Computer (u_business_services_and_related_computers), which have the relationship between the Business Service and Hardware:</span></span></p><p></p><p><span style="font-size: 10pt; font-family: Cambria;"><img   alt="i2.png" class="image-2 jive-image" src="208f2f75db5c93049c9ffb651f961900.iix" style="width: 620px; height: 445px;"/><br/></span></p><p style="margin-bottom: 12.0pt;"><span style="font-size: 10pt;">Note the individual tables and Where clauses for the Service Configuration Item Association and Hardware tables.   The order number is very important when defining the view:</span></p><p><img   alt="i3.png" class="image-3 jive-image" src="039b814edbd0d344e9737a9e0f9619c6.iix" style="width: 620px; height: 193px;"/></p><p style="margin-bottom: 12.0pt;"><span style="font-size: 10pt;">Now that this view is defined, I have a new virtual table called "Business Service and Related Computer", from which I can easily create report and select the individual fields from the tables that meet my reporting need. </span></p><p style="margin-bottom: 12.0pt;"><span style="font-size: 10pt;">In this example, the report uses the fields:   business service name, class, and hardware name.</span></p><p style="margin-bottom: 12.0pt;"><span style="font-size: 10pt;"><img   alt="i4.png" class="image-4 jive-image" src="a8cb6406db5857049c9ffb651f96199e.iix" style="width: 620px; height: 190px;"/><br/></span></p><p style="margin-bottom: 12.0pt;"><span style="font-size: 10pt;">Here's the list view report display the business service and all servers it depend on.</span></p><p style="margin-bottom: 12.0pt;"><span style="font-size: 10pt;"><img   alt="i5.png" class="image-5 jive-image" src="c4490c86db1017041dcaf3231f961915.iix" style="width: 620px; height: 108px;"/><br/></span></p><ul style="list-style-type: disc;"><li><span style="font-size: 10pt;">To create a report to help identify which machines do I need to apply a certain software patch?</span></li></ul><p style="margin-bottom: 12.0pt;"><span style="font-size: 10pt;">Define a view that includes the relationship between Computers and the Applications running on them also related to the Business Services:</span></p><p style="margin-bottom: 12.0pt;"><span style="font-size: 10pt;"><img   alt="i6.png" class="image-6 jive-image" src="64ec2bf1db949b048c8ef4621f9619e7.iix" style="width: 620px; height: 342px;"/><br/></span></p><p style="margin-bottom: 12.0pt;"><span style="font-size: 10pt;">And the new database view resulting in an easy-to-create report:</span></p><p style="margin-bottom: 12.0pt;"><span style="font-size: 10pt;">In this example, the report uses the fields:   bsvc name, cmpid, class, applsvc, and Version</span></p><p><img   alt="i7.png" class="image-7 jive-image" src="1050588edbdc1344e9737a9e0f961982.iix" style="width: 620px; height: 414px;"/></p><p></p><p style="margin-bottom: 12.0pt;"><span style="font-size: 10pt;">Here's the list view report show software version running on servers that supporting business services to help organization understand the risk/impact and make better decision when applying software patch.</span></p><p><span style="font-size: 10pt;"><img   alt="i8.png" class="image-8 jive-image" src="274d6ff5db981fc068c1fb651f961932.iix" style="width: 620px; height: 184px;"/><br/></span></p><p></p><p><span style="font-size: 10pt;"><img   alt="i9.png" class="image-9 jive-image" src="f860d98edb54d344e9737a9e0f961974.iix" style="width: 620px; height: 366px;"/></span></p><p><span style="font-size: 10pt;">Happy Reporting!</span></p>