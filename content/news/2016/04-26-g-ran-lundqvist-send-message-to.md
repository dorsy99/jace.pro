---
title: "Send message to logged on users"
date: 2016-04-26T01:15:19.000Z
authors: ["Göran Lundqvist"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=e95d6629dbd0dbc01dcaf3231f961983"
---
<p>I read a very interesting <a title="" _jive_internal="true" href="/community?id=community_question&sys_id=64cfcb65dbdcdbc01dcaf3231f9619f6">post </a>today at the community. And before I go on I want to say thanks to Steven Young (<a title="uttara.parab@igate.com" __default_attr="22457" __jive_macro_name="user" class="jive_macro jive_macro_user" data-orig-content="uttara.parab@igate.com" data-renderedposition="10.208333969116211_712.326416015625_172_16" href="/community?id=community_user_profile&user=e69e0ee9dbd41fc09c9ffb651f96191f">uttara.parab@igate.com</a>) for finding this and posting it on the community.</p><p></p><p>Remember this is a undocumented functionality and use it with caution. I'll also added a post from <a title="fschuster" __default_attr="9624" __jive_macro_name="user" class="jive-link-profile-small jive_macro jive_macro_user" data-id="9624" data-objecttype="3" data-orig-content="fschuster" data-renderedposition="50.208335876464844_627.9861450195312_76_16" data-type="person" href="/community?id=community_user_profile&user=b93352e5db1c1fc09c9ffb651f9619f6">fschuster</a> at the end of this post so you don't need to scroll down the comments to read it.</p><p></p><p>It's about the table Broadcast messages (sys_broadcast_message). From here you can send out messages to everyone that is logged in or when they log in. The message won't show up automatically without the users loading a page. But the second they click on something this message will come up like a addErrorMessage on the screen like this:</p><p></p><p><img   alt="broadcase message 1.PNG" class="image-1 jive-image" src="3fc07339db18df04e9737a9e0f96190a.iix" style="width: 620px; height: 265px;"/></p><p></p><p></p><p>First I'm going to write a few line of it in general and the I'm going to show an example of what to use it for to get your imagination going.</p><p></p><p>There is quite a mystery about this function. There isn't any trace of information about this function so everything I write here Is what I've found on the community and what I have tested myself. If you are thinking of using this wonderful functionality I would recommend a lot of testing before taking it into production.</p><p></p><p>Now, going to the list view (sys_broadcast_message.list) you will find a nice "new" button. Clicking on it will show you a nice record form. In the picture below you can see that I added a few fields and a related list that I thought might be nice to have.</p><p></p><p><img   alt="broadcast message 2.PNG" class="image-2 jive-image" src="9f2c1146db1c13043eb27a9e0f96199a.iix" style="width: 620px; height: 399px;"/></p><p></p><p>The below list covers the fields which are not read only:</p><ul><li><strong>Message</strong>: Here you write the message you want to show, possible of adding HTML</li><li><strong>Role Filter</strong>: Here you can set which roles the user needs to have to get the message</li><li><strong>Any Roled user</strong>: Checking this will on make the message show to every use that has a role</li><li><strong>At login</strong>: Guess this is to make it show at login. I couldn't get it to show, but at the related list it said that I have seen it. My guess is that is shows at login, but as ServiceNow redirects right after login the message never has the time to show before it gets redirected. But this is just a guess.</li><li><strong>Logged in</strong>: Checking this makes the alert show to this logged in. Pretty self explaining 8)</li><li><strong>Notify users after date</strong>: Giving you the option to have a start time in the future. Setting this to the past will make it alert directly</li><li><strong>Notify users until date</strong>: And here is the end date to when it should stop showing up.</li><li><strong>Email</strong>: Checking this will send an email to everyone that fits the conditions of the message. It will send a notification even if the user gets a message inside ServiceNow and there is a notification predefined for this.</li><li><strong>Conditional</strong>: Checking this will give you a field where you can write you own condition with scripting. Guessing it should return true to get it going.</li><li><strong>Run As</strong>: Just a field where you can set who will send the message. Haven't seen any usefulness of this yet.</li><li><strong>Run this script</strong>: Be default there is only one line, but I guess this opens up to do more fun things =) You can also see the function it uses to send out the message.</li></ul><p></p><p>I've also added the Related list "Broadcast Messages to Users-&gt;Message". In this list I can see everyone who has seen the message.</p><p>So you can either create messages this way, by clicking on "new" and fill in the data. I'm more like putting this in action through for example a business rule.</p><p></p><p>So let's say that if an incident get escalated to Priority 1, I want all users with ITIL role to get the info that an Priority 1 has been opened.</p><p>Lets create a business rule that will do the work for us.</p><p></p><p>I've decided to make a "After" business rule that should run if priority changes to 1 and it looks like this:</p><p></p><p><img   alt="broadcast message 3.PNG" class="image-3 jive-image" src="c0b970cedbd89344e9737a9e0f9619e7.iix" style="width: 620px; height: 388px;"/></p><p></p><p>And when that happens I want the following script to get to work:</p><p></p><p><img   alt="broadcast message 4.PNG" class="image-4 jive-image" src="035ad00edb1c9704ed6af3231f9619c9.iix" style="width: 620px; height: 367px;"/></p><p></p><p>So now if someone saves a incident that escalates to priority 1, a message will broadcast to everyone Itil-user that is logged on. Pretty cool feature and if you got any other idea how to use it, please comment below and let us know.</p><p></p><p>Btw, in my testing I noticed that there was a limit around 20? active broadcasts. more than that and there was a business rule I think that told me no no when I tried to save.</p><p></p><p></p><p>Comment from Frank:</p><p><em>"</em><em>You are right: this is an un-documented feature as of now, so we went back to Product Management and as it turns out there is a good reason behind this fact.</em></p><p style="font-family: arial, sans-serif; color: #666666;"><em> </em></p><p style="font-family: arial, sans-serif; color: #666666;"><em>The principal use case for Megaphone (that's how we call it) was more an internal one. It has been built to enable ServiceNow support pushing messages to customer end users.</em></p><p style="font-family: arial, sans-serif; color: #666666;"><em> </em></p><p style="font-family: arial, sans-serif; color: #666666;"><em>We didn't block anybody from using it, but keep the following things in mind:</em></p><p style="font-family: arial, sans-serif; color: #666666;"><em>   1. Megaphone broadcast messages may have performance impacts and latency - you're checking user preferences per message after logins and at the message go-live time, which can add up fast. You need to be judicious about how you use them. That should also explain the limit of 20.</em></p><p style="font-family: arial, sans-serif; color: #666666;"><em>   2. They're driven off events and jobs, so they don't happen instantaneously.</em></p><p style="font-family: arial, sans-serif; color: #666666;"><em>   3. We planned an integration into Connect at the time Megaphone was released rather than using gs.addErrorMessage(), but Connect wasn't ready at this time (which also explains why there is no addInfoMessage()).</em></p><p style="font-family: arial, sans-serif; color: #666666;"><em> </em></p><p style="font-family: arial, sans-serif; color: #666666;"><em>For those reasons we chose not to document the feature at the time we built it.</em></p><p style="font-family: arial, sans-serif; color: #666666;"><em>From what we have been told this feature will be brought under the notifications umbrella to provide admins a unified experience.</em></p><p style="font-family: arial, sans-serif; color: #666666;"><em> </em></p><p style="font-family: arial, sans-serif; color: #666666;"><em>In fact we will be creating pluggable notification providers (i.e. the where part of notification) and Megaphone will be one of the in-house providers we will support.</em></p><p style="font-family: arial, sans-serif; color: #666666;"><em> </em></p><p style="font-family: arial, sans-serif; color: #666666;"><em>That being said it will <strong style="font-style: inherit; font-family: inherit;">probably</strong> (targeted - not confirmed) be the <strong style="font-style: inherit; font-family: inherit;">J timeframe</strong> when it will become a fully documented/supported feature/provider.</em></p><p style="font-family: arial, sans-serif; color: #666666;"><em> </em></p><p style="font-family: arial, sans-serif; color: #666666;"><em>We do understand it's a valuable feature for you as well, but we do think you should be aware of the fact that things will be changing at some point down the road, making your development efforts in that area potentially worthless (or at least subject to being refactored)."</em></p><p></p><p></p><p>//Göran</p>