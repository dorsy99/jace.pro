---
title: "Control how users view data in forms and lists with View Rules and Navigation Handlers"
date: 2016-07-26T20:37:24.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=9d8d2669dbd0dbc01dcaf3231f9619ae"
---
<p>ServiceNow offers a number of ways to control what and how a user views data in forms and lists. This can be based on roles/groups the user has or is in, or the type of record being viewed. I will go through View Rules and Navigation Handlers in this blogpost, as well as a scenario that may arise causing your View Rules not be be applied. You can control the view applied via a <a title="ocs.servicenow.com/bundle/geneva-servicenow-platform/page/script/useful_scripts/reference/r_RestrictFormViewsByRole.html" href="https://docs.servicenow.com/bundle/geneva-servicenow-platform/page/script/useful_scripts/reference/r_RestrictFormViewsByRole.html">global Business Rule;</a> however, this is <strong>not</strong> supported by ServiceNow support.</p><p></p><h1>View Rules</h1><p>View Rules are a simple condition based method to determine which View a user will be presented with when viewing a form or list. If the user has the ability to switch Views, normally the View they select will then be saved and used for each subsequent visit to a record on that table. A View Rule will override the User Preference and always forces the same View of the form or list.</p><p></p><p style="text-align: center;"><img   alt="view rules.jpg" class="image-1 jive-image" src="00a7b739db145704ed6af3231f9619ae.iix" style="width: 620px; height: 165px;"/></p><p></p><p>You can specify the device for this to run on (browser/mobile etc) and the desired View among other options. Starting with Geneva scripts can also be used in <a title="ocs.servicenow.com/bundle/helsinki-it-service-management/page/administer/navigation-and-ui/concept/c_ViewManagement.html" href="https://docs.servicenow.com/bundle/helsinki-it-service-management/page/administer/navigation-and-ui/concept/c_ViewManagement.html">View Rules. </a></p><p></p><h1>Navigation Handlers</h1><p>A Navigation Handler is a scripted View Rule essentially and is run each time data from the specified table is requested in the form view. The scripts are typically in the form below and are fairly self explanatory in checking for a role and specifying the view:</p><pre __default_attr="java" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14672128931128316 jive_text_macro" data-renderedposition="527.0880737304688_7.997159004211426_1192_201" jivemacro_uid="_14672128931128316"><p>var gr = new GlideRecord(hr.TABLE_CASE);</p><p>if (gr.get(g_uri.get('sys_id'))) {</p><p>         if (!gs.getUser().hasRoles()) </p><p>                   g_uri.set('sysparm_view', 'ess');</p><p>         else</p><p>                   g_uri.set('sysparm_view', '');</p><p>}</p><p></p><p></p><p>answer =   g_uri.toString('hr_case.do');</p><p></p><p></p><p></p></pre><p>The script above will force the ESS view for users with no roles, and use the default view for all other users. This example is taken from an out of the box Navigation Handler installed with the HR Plugin.</p><p></p><h2>View Rules vs. Navigation Handlers, which takes precedence?</h2><p>The order in which View Rules and Navigation Handlers are applied <span style="color: #3d3d3d;"><span style="color: #303030;">is</span> con</span>trolled by a system property that was introduced in Dublin. The system property is: <span style="color: #485563; font-family: SourceSansPro, 'Helvetica Neue', Arial; font-size: 13px;"><strong>glide.ui.view_rule.check_after_nav_handler</strong></span></p><p></p><p>The type is "true/false" and must be set to value "true" to process View Rules AFTER Navigation Handlers. If it is set to false, then Navigation Handlers will take precedence over View Rules. If this system property does not exist in your instance, then regardless of View Rules for the table in question, the Navigation Handler will always take precedence.</p><p></p><p>There is a further caveat with this system property, in that it will only override the Navigation Handler if the Navigation Handler scripted function does not return an answer. In the example script above, the property will have no effect as the Navigation Handler will always return an answer due to the "answer" line being outside the if statement.</p><p></p><p>To force the Navigation Handler Script above to honour View Rules for the table you will need to add the property above (and set it to true) and also update the code to only return an answer when the view needs to be changed/forced:</p><pre __default_attr="java" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14672131631203943 jive_text_macro" data-renderedposition="1037.0880126953125_7.997159004211426_1192_108" jivemacro_uid="_14672131631203943"><p>var gr = new GlideRecord(hr.TABLE_CASE);</p><p>if (gr.get(g_url.get('sys_id'))) {</p><p>         if (!gs.getUser().hasRoles()) {</p><p>                   g_url.set('sysparm_view'),'ess');</p><p>                   answer = g_url.toString('hr_case.do');</p><p>         }</p><p>}</p></pre><p></p><p>The order in which the View Rules and Navigation Handlers are executed depends on the system property and the structure of the Navigation Handler script. View Rules will be applied when the system property (<span style="color: #485563; font-family: SourceSansPro, 'Helvetica Neue', Arial; font-size: 13px;"><strong>glide.ui.view_rule.check_after_nav_handler</strong></span>) is false and the Navigation Handler script does not return an answer. The Navigation Handler will take precedence if the script returns an answer or if the system property (<span style="color: #485563; font-family: SourceSansPro, 'Helvetica Neue', Arial; font-size: 13px;"><strong>glide.ui.view_rule.check_after_nav_handler</strong></span>) is set to false.</p><p></p><p></p><p>In the case that you run into View Rules not being followed for individual records on the Request [sc_request] table, see <a href="https://hi.service-now.com/kb_view.do?sysparm_article=KB0522746" title="https://hi.service-now.com/kb_view.do?sysparm_article=KB0522746">View Rules are not followed for individual records on the Request [sc_request] table (KB0522746). </a></p>