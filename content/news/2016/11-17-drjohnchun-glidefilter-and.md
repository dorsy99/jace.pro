---
title: "GlideFilter and Regular Expression Match"
date: 2016-11-16T22:39:39.000Z
authors: ["drjohnchun"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=cd4ee2addbd0dbc01dcaf3231f96193f"
---
<p>GlideFilter is used to determine if a GlideRecord meets the conditions specified in an encoded query string. For instance, it's used in the business rule condition builder to determine under which conditions the business rule must run. It's not well documented and its usage is slightly different between global and scoped apps, so there seems to be some confusion, especially on how it's used with regular expressions. I'll share what I know here and update this based on your feedback/additions/corrections.</p><p></p><p>The only official documentation available is <a title="ki.servicenow.com/?title=Scoped_GlideFilter_API_Reference" href="http://wiki.servicenow.com/?title=Scoped_GlideFilter_API_Reference">Scoped GlideFilter API Reference</a>. However, its variation is available in the global scope as well. Let's take a look at how they're used and how they're different (as of the Helsinki release).</p><p></p><p><img __jive_macro_name="toc" class="jive_macro_toc jive_macro" data-renderedposition="162_8_61_72" src="/8.0.4.21bdc7e/images/tiny_mce3/plugins/jiveemoticons/images/spacer.gif"/></p><h3>SCOPED GlideFilter</h3><p></p><p>Scoped GlideFilter is an object that is used without having to instantiate. It has only one method:</p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14791367476117766 jive_text_macro" data-renderedposition="321_8_898_17" jivemacro_uid="_14791367476117766"><p>boolean checkRecord(GlideRecord gr, string filter, boolean matchAll)   // returns true if <span style="font-family: 'courier new', courier;">gr</span> meets the conditions specified in <span style="font-family: 'courier new', courier;">filter</span></p></pre><p></p><p><span style="font-family: 'courier new', courier;">gr</span>: a single <a title="ki.servicenow.com/?title=Scoped_GlideRecord_API_Reference" href="http://wiki.servicenow.com/?title=Scoped_GlideRecord_API_Reference">GlideRecord</a></p><p><span style="font-family: 'courier new', courier;">filter</span>: an <a title="ki.servicenow.com/?title=Encoded_Query_Strings" href="http://wiki.servicenow.com/?title=Encoded_Query_Strings">encoded query string</a></p><p><span style="font-family: 'courier new', courier;">matchAll</span>: (Optional) if true (default), all conditions in <span style="font-family: 'courier new', courier;">filter</span> must match to return true; if false, any single true condition returns true (see below)</p><p></p><p>Here's an example:</p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14792401832986839 jive_text_macro" data-renderedposition="508.5199890136719_8_898_96" jivemacro_uid="_14792401832986839"><p>var gr = new GlideRecord('incident');</p><p>gr.query();</p><p>var filter = 'active=true^state=2';   // active &amp;&amp; state == 'In Progress'</p><p><span style="font-size: 9pt;">while (gr.next()) {   // iterate through records</span></p><p>   if (GlideFilter.checkRecord(gr, filter)) gs.info(gr.number);   // test each record for the filter conditions</p><p>}</p></pre><p></p><p>This returns all incident records that are active and the state is 'In Progress'. Some points to note are:</p><p></p><ol><li><span style="font-family: 'courier new', courier;">GlideFilter</span> is not instantiated (no need for <span style="font-family: 'courier new', courier;">new GlideFilter()</span>).</li><li><span style="font-family: 'courier new', courier;">GlideFiter.checkRecord()</span> is applied to each record <em>after</em> <span style="font-family: 'courier new', courier;">gr.query()</span> is executed. In other words, <span style="font-family: 'courier new', courier;">GlideFilter</span> is not used by <span style="font-family: 'courier new', courier;">gr.query()</span>.</li></ol><p></p><h3>USING MATCH_RGX FOR REGULAR EXPRESSION MATCH</h3><p></p><p><span style="font-family: 'courier new', courier;">GlideFilter</span> also allows the use of regular expressions in the filter using the <span style="font-family: 'courier new', courier;">MATCH_RGX</span> operator. Here's an example, modified from the previous one:</p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14792460874556277 jive_text_macro" data-renderedposition="871.5199584960937_8_898_96" jivemacro_uid="_14792460874556277"><p>var gr = new GlideRecord('incident');</p><p>gr.query();</p><p>var filter = 'active=true^state=2^numberMATCH_RGXINC.*';   // active &amp;&amp; state == 'In Progress' &amp;&amp; /^INC.*$/m.test(number)</p><p><span style="font-size: 9pt;">while (gr.next()) {   // iterate through records</span></p><p>   if (GlideFilter.checkRecord(gr, filter)) gs.info(gr.number);   // test each record for the filter conditions</p><p>}</p></pre><p></p><p>This returns all incident records that are active, the state is 'In Progress' and the number starts with 'INC' (since all incident numbers start with 'INC', this doesn't really do anything). What's not well known and often a source of confusion is that <span style="font-family: 'courier new', courier;">MATCH_RGX</span> already includes /^ and $/m, the start and end of string in multiline mode; the regular expression filter condition specified, therefore, is what comes between /^ and $/m. So</p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14792494772899195 jive_text_macro" data-renderedposition="1073.419921875_8_898_16" jivemacro_uid="_14792494772899195"><p>fieldMATCH_RGXcondition</p></pre><p></p><p>is equivalent to, in JavaScript,</p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14792494859162786 jive_text_macro" data-renderedposition="1152.419921875_8_898_16" jivemacro_uid="_14792494859162786"><p>/^condition$/m.test(field)</p></pre><p></p><p>Also, the test is <em>case sensitive</em> (we'll see below that there's a way to make this case insensitive in the global scope but not in scoped GlideFilter). Some examples and their JavaScript equivalents are</p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14792498335068997 jive_text_macro" data-renderedposition="1252.419921875_8_898_64" jivemacro_uid="_14792498335068997"><p>fieldMATCH_RGXabc === /^abc$/m.test(field)   // field exactly matches "abc"</p><p>fieldMATCH_RGXabc.* === /^abc.*$/m.test(field)   // field starts with "abc"</p><p>fieldMATCH_RGX.*abc === /^.*abc$/m.test(field)   // field ends with "abc"</p><p>fieldMATCH_RGX.*abc.* === /^.*abc.*$/m.test(field)   // field contains "abc"</p></pre><p></p><p>It's worthwhile noting that <span style="font-family: 'courier new', courier;">MATCH_RGX</span> is <em>not</em> available in GlideRecord's .<span style="font-family: 'courier new', courier;">addEncodedQuery()</span> method (I wish it was); this indicates there are different flavors of encoded queries in ServiceNow.</p><p></p><h3>GLOBAL GlideFilter</h3><p></p><p>The examples used above for Scoped GlideFilter also work in the global scope. In addition, Global GlideFilter provides the following features:</p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="_jivemacro_uid_14792561334933870 jive_macro_code jive_text_macro" data-renderedposition="1488.3199462890625_8_898_16" jivemacro_uid="_14792561334933870"><p>new GlideFilter(string filter, string title)</p></pre><p></p><p><span style="font-family: 'courier new', courier;">filter</span>: an <a title="ki.servicenow.com/?title=Encoded_Query_Strings" href="http://wiki.servicenow.com/?title=Encoded_Query_Strings">encoded query string</a></p><p><span style="font-family: 'courier new', courier;">title</span>: title of the filter</p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="_jivemacro_uid_14792548136707195 jive_macro_code jive_text_macro" data-renderedposition="1590.1199951171875_8_898_17" jivemacro_uid="_14792548136707195"><p>boolean match(GlideRecord gr, boolean matchAll)   // returns true if gr meets the conditions specified in <span style="font-family: 'courier new', courier;">filter from GlideFilter instance</span></p></pre><p></p><p><span style="font-family: 'courier new', courier;">gr</span>: a single <a title="ki.servicenow.com/?title=Scoped_GlideRecord_API_Reference" href="http://wiki.servicenow.com/?title=Scoped_GlideRecord_API_Reference">GlideRecord</a></p><p><span style="font-family: 'courier new', courier;">matchAll</span>: if true, all conditions in <span style="font-family: 'courier new', courier;">filter</span> must match to return true; if false, any single true condition returns true (see below). This is <em>not</em> optional, unlike in <span style="font-family: 'courier new', courier;">.checkRecord()</span>.</p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14792556307053398 jive_text_macro" data-renderedposition="1714.6400146484375_8_898_16" jivemacro_uid="_14792556307053398"><p><span style="font-size: 9pt;">void setCaseSensitive(boolean caseSensitivity)   // sets whether .match() is case sensitive (does not apply to .checkRecord())</span></p></pre><p></p><p><span style="font-family: 'courier new', courier;">caseSensitivity</span>: if true, <span style="font-family: 'courier new', courier;">.match()</span> is case sensitive (does <em>not</em> apply to <span style="font-family: 'courier new', courier;">.checkRecord()</span>).</p><p></p><p>Here are some additional properties and methods:</p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code jive_text_macro _jivemacro_uid_14797449673277740" data-renderedposition="1836.5399169921875_8_898_128" jivemacro_uid="_14797449673277740"><p>boolean caseSensitive   // true if .match() is case sensitive</p><p>string filter   // encoded query string of the filter</p><p>string getFilter()   // returns encoded query string of the filter</p><p>string title   // title of the filter</p><p>string getTitle()   // returns the title of the filter</p><p>void setDisplayTitle(String displayTitle)   // sets the display title of the filter</p><p>string getDisplayTitle()   // returns the display title of the filter (returns title if display title not set)</p><p>string script   // a string representing the source code of the JavaScript function for evaluating the filter conditions</p></pre><p></p><p>Here's an example:</p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14792558896452088 jive_text_macro" data-renderedposition="2027.5399169921875_8_898_128" jivemacro_uid="_14792558896452088"><p>var gr = new GlideRecord('incident');</p><p>gr.query();</p><p>var filter = 'active=true^state=2^numberMATCH_RGXinc.*';   // active &amp;&amp; state == 'In Progress' &amp;&amp; /^inc.*$/i.test(number)</p><p>var gf = new GlideFilter(filter, '');</p><p>gf.setCaseSensitive(false);</p><p>while (gr.next()) {   // iterate through records</p><p>   if (gf.match(gr, true)) gs.info(gr.number);   // test each record for the filter conditions</p><p>}</p></pre><p></p><p>Just like what we saw earlier, this returns all incident records that are active, the state is 'In Progress' and the number starts with 'inc' (case insensitive). .<span style="font-family: 'courier new', courier;">match()</span> works similarly to<span style="font-family: 'courier new', courier;"> .checkRecord()</span>, but with an added benefit of evaluating case-sensitive or insensitive matches.</p><p></p><h3>matchAll FLAG</h3><p></p><p>The <span style="font-family: 'courier new', courier;">.script</span> property, which shows the JavaScript function that evaluates the filter conditions, gives a clue on how the <span style="font-family: 'courier new', courier;">matchAll</span> flag works. Using the above example:</p><p></p><p><strong>matchAll = true</strong></p><pre __default_attr="javascript" __jive_macro_name="code" class="_jivemacro_uid_14797454299944013 jive_macro_code jive_text_macro" data-renderedposition="2370.33984375_8_898_16" jivemacro_uid="_14797454299944013"><p>function trecord() {return !!(current.active == true &amp;&amp; current.state.toString().toLowerCase() == 2 &amp;&amp; RegExp('^inc.*$','mi').test(current.number.toString()));}trecord();</p></pre><p></p><p><strong>matchAll = false</strong> (effectively all conditions become OR conditions)</p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14797454427672451 jive_text_macro" data-renderedposition="2428.33984375_8_898_16" jivemacro_uid="_14797454427672451"><p>function trecord() {if (current.active == true ) return true;if (current.state == 2 ) return true;if (RegExp('^inc.*$','m').test(current.number.toString()) ) return true; return false;}trecord();</p></pre><p></p><h3>SUMMARY</h3><p></p><p>Here's a summary of how GlideFilter is used in both global and scoped apps:</p><p></p><ol><li>GlideFilter is used to test encoded query filter conditions one record at a time; it can't be used to filter a bulk record set.</li><li>GlideFilter supports regular expression matches using the <span style="font-family: 'courier new', courier;">MATCH_RGX</span> operator: <span style="font-family: 'courier new', courier;">fieldMATCH_RGXcondition</span> is equivalent to <span style="font-family: 'courier new', courier;">/^condition$/m.test(field)</span> in JavaScript, with the /^ and $/m automatically added.</li><li>In scoped apps,<ul><li>GlideFilter is an object that is used without having to instantiate.</li><li>GlideFilter has only one method: <span style="font-family: 'courier new', courier;">.checkRecord()</span>.</li></ul></li><li>In global apps,<ul><li>GlideFilter can be used the same way as in scoped apps.</li><li>GlideFilter can be instantiated, which gives two main methods: <span style="font-family: 'courier new', courier;">.match()</span>, <span style="font-family: 'courier new', courier;">.setCaseSensitive()</span>.</li></ul></li><li>Encoded queries in GlideFilter support <span style="font-family: 'courier new', courier;">MATCH_RGX</span> but those used in GlideRecord's <span style="font-family: 'courier new', courier;">.addEncodedQuery()</span> don't.</li></ol><p></p><h3>HELPFUL LINKS</h3><p></p><ul><li><a href="http://wiki.servicenow.com/?title=Scoped_GlideFilter_API_Reference" title="Scoped GlideFilter API Reference">Scoped GlideFilter API Reference</a></li><li><a __default_attr="778087" __jive_macro_name="message" class="jive_macro jive_macro_message" data-orig-content="RegEx in condition builder" data-renderedposition="2889.889892578125_38_182_16" href="/community?id=community_question&sys_id=37fb4725db9cdbc01dcaf3231f961934" modifiedtitle="true" title="RegEx in condition builder">RegEx in condition builder</a></li><li><a title="Matches Regex in Condition Builder" __default_attr="817397" __jive_macro_name="message" class="jive_macro jive_macro_message" data-orig-content="Matches Regex in Condition Builder" data-renderedposition="2913.68994140625_38_242_16" href="/community?id=community_question&sys_id=3e914769db98dbc01dcaf3231f96197e">Matches Regex in Condition Builder</a></li><li><a title="Using the condition Builder" __default_attr="167841" __jive_macro_name="thread" class="jive_macro_thread jive_macro" data-orig-content="Using the condition Builder" data-renderedposition="2937.489990234375_38_186_16" href="/community?id=community_question&sys_id=f9b447e9dbd8dbc01dcaf3231f9619ac">Using the condition Builder</a></li><li><a __default_attr="1037746" __jive_macro_name="message" class="jive_macro jive_macro_message" data-orig-content="Ask the Expert: Regular Expressions Part 1 - TechNow Ep 31" data-renderedposition="2961.2900390625_38_400_16" href="/community?id=community_question&sys_id=93860b25db1cdbc01dcaf3231f9619f0" modifiedtitle="true" title="Ask the Expert: Regular Expressions Part 1 - TechNow Ep 31">Ask the Expert: Regular Expressions Part 1 - TechNow Ep 31</a></li><li><a href="http://snprotips.com/blog/sncprotips/2015/12/undocumented-apis-glidefilterhtml" title="http://snprotips.com/blog/sncprotips/2015/12/undocumented-apis-glidefilterhtml">SN Pro Tips — Understanding Dynamic Filters &amp; Checking a Record Against a Filter Using GlideFilter</a></li><li><a href="https://servicenowgems.com/2016/04/19/case-insensitive-filter" title="Case Insensitive Filter">Case Insensitive Filter</a></li></ul><p></p><h3>UPDATES</h3><p></p><p>2016-11-21 corrected matchAll parameter and added <span style="font-family: 'courier new', courier;">.script</span> example output; corrected title parameter; added multiline flag to regular expressions; added additional properties and methods for <span style="font-family: 'courier new', courier;">GlideFilter()</span>.</p><p></p><p><em>Please feel free to connect, follow, post feedback / questions / comments, share, like, bookmark, endorse.</em></p><table><tbody><tr><td>John Chun, <span style="font-size: 8pt;">PhD PMP</span> <a href="http://linkedin.com/in/DrJohnChun"><img alt="see John's LinkedIn profile" class="image-2 jive-image" src="http://megaicons.net/static/img/icons_sizes/182/456/16/linkedin-icon.png" style="height: auto; vertical-align: -13px;" title="see John's LinkedIn profile"/></a><p><a href="http://snowaid.com/"><img alt="visit snowaid" class="image-1 jive-image" src="http://snowaid.com/images/signature.png" style="height: auto; margin-top: -9px;" title="visit snowaid"/></a></p></td><td><a _jive_internal="true" href="/people/drjohnchun/content"><img alt="ServiceNow Advocate" class="image-3 jive-image" src="http://snowaid.com/images/sn_advocate_135x48.png" style="margin-top: -3px;"/></a></td></tr></tbody></table>