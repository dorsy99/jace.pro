---
title: "Service Portal  Creating a Custom Loading Spinner"
date: 2016-12-29T07:39:04.000Z
link: "https://community.servicenow.com/community?id=community_blog&sys_id=577ce2e1dbd0dbc01dcaf3231f961992"
---
<p>Long promised, now finally found the time to write about loading spinners in Service Portal.</p><p>Probably everybody has (or has not <span __jive_emoticon_name="happy" __jive_macro_name="emoticon" class="jive_emote jive_macro" data-renderedposition="29_233.59375_16_16" src="/8.0.4.21bdc7e/images/emoticons/happy.png"></span>) seen the three small dots in the Service Portal header, when there is work happening in the background.</p><p><img   alt="OOTB-Loading-Dots.png" class="image-1 jive-image" src="b7658406db5cd3041dcaf3231f96194f.iix" style="width: 620px; height: 47px;"/></p><p></p><p>This is a great way to indicate to the user, that there is still work to do for the browser.</p><p>However I personally find, that those dots might not draw the attention you would want, so let's have a look at how you could override those dots with your own loading spinner.</p><p></p><p>The good news is: this is really, really simple and quick <span __jive_emoticon_name="happy" __jive_macro_name="emoticon" class="jive_emote jive_macro" data-renderedposition="206_352.609375_16_16" src="/8.0.4.21bdc7e/images/emoticons/happy.png"></span></p><p></p><p>In the next few steps, I will describe everything that is needed to get a new loading spinner into your portal.</p><p>Attached to this blog, there is also an update set containing the exact result of the below described steps.</p><p></p><p><strong>1. Picking a new loading spinner &amp; uploading the SVG file</strong></p><p>There are plenty of great resources out there, where you can create your own loading spinners. A lot of them will be CSS based, but I personally prefer the .svg (Scalable Vector Graphics) spinners since those will allow you to simply upload the new spinner into the Images tables and then use it in your Header Widget with the &lt;img&gt; tag, rather than re-creating all the CSS.</p><p></p><p>Here are a few resources (in no particular order, though one of my favourites is loading.io).</p><ul><li><a title="ading.io/" href="http://loading.io/">loading.io</a></li><li><a href="http://jxnblk.com/loading/" title="http://jxnblk.com/loading/">http://jxnblk.com/loading/</a> (Hint: scroll down <span __jive_emoticon_name="wink" __jive_macro_name="emoticon" class="jive_emote jive_macro" data-renderedposition="443.59375_315.9375_16_16" src="/8.0.4.21bdc7e/images/emoticons/wink.png"></span>)</li><li><a href="http://samherbert.net/svg-loaders/" title="http://samherbert.net/svg-loaders/">http://samherbert.net/svg-loaders/</a></li></ul><p>For the following example, I will use the <strong>spin</strong> loading image from loading.io.</p><p><img   alt="loading_io_-_Your_SVG___GIF_Ajax_Loading_Icons.png" class="image-2 jive-image" src="e5ef5fb5dbdc53049c9ffb651f9619b5.iix" style="width: 620px; height: 143px;"/></p><p>Click <strong>Get SVG</strong> and <strong>Upload </strong>the SVG to the <strong>Images </strong>[db_image] table with a name of <strong>portal-loading-spinner.svg </strong>or pick your own name, just remember that you will have to use it in Step 3.</p><p></p><p><strong>2. Explaining the out of the box loading spinner</strong></p><p>The code snippet responsible for rendering the loading spinner is included in the HTML part of the <strong>Header Menu </strong>widget.</p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code jive_text_macro _jivemacro_uid_14829730792234352" data-renderedposition="767.1875_8_1177_112" jivemacro_uid="_14829730792234352"><p>&lt;div class="header-loader" <strong>ng-show="loadingIndicator"</strong>&gt;</p><p>       &lt;div class="hidden-xs sp-loading-indicator la-sm"&gt;</p><p>           &lt;div&gt;&lt;/div&gt;</p><p>           &lt;div&gt;&lt;/div&gt;</p><p>           &lt;div&gt;&lt;/div&gt;</p><p>       &lt;/div&gt;</p><p>   &lt;/div&gt;</p></pre><p></p><p>The <strong>sp-loading-indicator</strong> class on the inner &lt;div&gt; element refers to the <strong>sp-loader.css</strong> file, which ships with Service Portal. This is the CSS class, which contains all CSS styles for rendering the three dots. We will get rid of this &lt;div&gt; in a second, but let me talk about the <strong>ng-show</strong> for the <strong>loadingIndicator </strong>variable first.</p><p>The whole loading spinner &lt;div&gt; is only shown, when the <strong>loadingIndicator</strong> variable is set to true, but where does this happen?</p><p></p><p>Have a look at the <strong>Client Script</strong> part of the widget and you will find the following three lines:</p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14829734537712074 jive_text_macro" data-renderedposition="1009.1875_8_1177_48" jivemacro_uid="_14829734537712074"><p>$scope.$on('sp_loading_indicator', function(e, value) {</p><p>   $scope.loadingIndicator = value;</p><p>   });</p></pre><p></p><p>By listening to the <strong>sp_loading_indicator</strong> event, which is again part of Service Portal, the value of the variable will be determined.</p><p>In line 2 of that widget, it will initially be populated with the value of that variable within the <strong>$rootScope </strong>object.</p><pre __default_attr="javascript" __jive_macro_name="code" class="_jivemacro_uid_1482973521414960 jive_macro_code jive_text_macro" data-renderedposition="1122.1875_8_1177_16" jivemacro_uid="_1482973521414960"><p>$scope.loadingIndicator = $rootScope.loadingIndicator;</p></pre><p></p><p>Essentially everything is already prepared for us, we won't have any work on the client side. We just have to make sure, that our new loading spinner (the .svg image), is rendered in the HTML part.</p><p></p><p>As the <strong>Header Menu </strong>is an OOTB widget, we will first have to clone the widget, so we are able to edit it. As a reminder: this is a common practice for all OOTB widgets to make sure, that ServiceNow does not override your changes during the next upgrade.</p><p></p><p><strong>3. Cloning the Header Menu Widget and overriding the loading spinner</strong></p><p>Open the <strong>Widget Editor (Service Portal -&gt; Service Portal Configuration -&gt; Widget Editor)</strong> and select the <strong>Header Menu </strong>Widget.</p><p>Click the Hamburger Menu beside the <strong>Save </strong>button and <strong>Clone </strong>the Widget.</p><p></p><p>You will not have to work in the Client or Server Script, so you can deselect those parts.</p><p>In the <strong>HTML </strong>part, replace the part described in Step 2 (the whole <strong>header-loader &lt;div&gt;</strong>) with the following snippet:</p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14829739132618236 jive_text_macro" data-renderedposition="1415.1875_8_1177_80" jivemacro_uid="_14829739132618236"><p>&lt;div class="header-loader" ng-show="loadingIndicator"&gt;</p><p>       &lt;div class="hidden-xs la-sm"&gt;</p><p>           &lt;img src="portal-loading-spinner.svg" class="loading-spinner"/&gt;</p><p>       &lt;/div&gt;</p><p>   &lt;/div&gt;</p></pre><p>Make sure the name of the image is the name of the image you uploaded in Step 1.</p><p></p><p><strong>Hint: </strong>to test your loading spinner, remove the <strong>ng-show </strong>directive, so that the loading spinner will <strong>always </strong>be displayed (or change it to <strong>ng-hide</strong>). Now you can do a right-click + Inspect in your browser and modify padding, margin, sizing etc. to temporarily adjust and test your styling. Once you have your styling all figured out, you can revert the change and adjust the CSS class.</p><p></p><p>Now we only need a few minor CSS changes. Within the CSS part, add the definition for the class <strong>loading-spinner</strong> and make some small adjustments to the <strong>header-loader </strong>class.</p><p></p><p>Here is the <strong>OOTB</strong> CSS for the <strong>header-loader</strong> class:</p><pre __default_attr="css" __jive_macro_name="code" class="jive_macro_code jive_text_macro _jivemacro_uid_14829741545321284" data-renderedposition="1687.1875_8_1177_96" jivemacro_uid="_14829741545321284"><p>.header-loader {</p><p>   float: left;</p><p>   width: 24px;</p><p>   position: relative;</p><p>   top: 24px;</p><p>}</p></pre><p></p><p>Change it to the following and add the <strong>loading-spinner </strong>class:</p><pre __default_attr="css" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14829742900845847 jive_text_macro" data-renderedposition="1826.1875_8_1177_144" jivemacro_uid="_14829742900845847"><p>.header-loader {</p><p>   padding: 5px;</p><p>}</p><p></p><p></p><p>.loading-spinner {</p><p>   width: 50px;</p><p>   height: 50px;</p><p>}</p></pre><p></p><p></p><p><strong>4. Adding the Header Menu to your Portal</strong></p><p>The last step is, that you will have to use that new Header Menu in your Portal.</p><p>Navigate to your Portal record in the platform view, open the Main Menu that is allocated to your Portal and simply change the Widget reference (or keep it, if you already had your own widget, to which you added the above described changes).</p><p></p><p><strong>And that's already it!</strong> With a few minor changes, we created our own loading spinner.</p><p>That's how it will look (I did not add any menu items to my new header menu):</p><p></p><p><img   alt="Custom_Loading_Spinner_Portal_-_Service_Portal.png" class="image-3 jive-image" src="f8009102db54d304b322f4621f961989.iix" style="width: auto; height: auto;"/></p><p></p><p>Obviously you could also pick a CSS based spinner. In that case you would have to add the according CSS to the CSS part of the Widget (or CSS include, that should be related to your portal). In my opinion, SVG files are a great alternative to save yourself some work and still keep it light-weight (the spinner used here, has only a size of <strong>3 KB</strong>).</p><p>Keep browser support in mind, when using SVG files. In general all major browsers support .svg files, only IE8 and below will not be able to render it.</p><p></p><p>If the new spinner is still not obvious enough, you could certainly take all of this and render it i.e. in a <a title="ngular-ui.github.io/bootstrap/#/modal" href="https://angular-ui.github.io/bootstrap/#/modal">Bootstrap Modal</a> and display it right in the center of the screen   - that will hopefully be sufficient <span __jive_emoticon_name="happy" __jive_macro_name="emoticon" class="jive_emote jive_macro" data-renderedposition="2391.1875_68.1875_16_16" src="/8.0.4.21bdc7e/images/emoticons/happy.png"></span></p><p></p><p>Credits go out to <a title="daniel.conroy" __default_attr="13337" __jive_macro_name="user" class="jive_macro jive_macro_user" data-orig-content="daniel.conroy" data-renderedposition="2437.1875_117.171875_103_16" href="/community?id=community_user_profile&user=c692da2ddbd81fc09c9ffb651f96196f">daniel.conroy</a> and <a title="napike" __default_attr="4380" __jive_macro_name="user" class="jive_macro jive_macro_user" data-orig-content="napike" data-renderedposition="2437.1875_251.546875_60_16" href="/community?id=community_user_profile&user=f702dae1dbd81fc09c9ffb651f96192e">napike</a> who sent me on the right path <span __jive_emoticon_name="happy" __jive_macro_name="emoticon" class="jive_emote jive_macro" data-renderedposition="2434.1875_507.3125_16_16" src="/8.0.4.21bdc7e/images/emoticons/happy.png"></span></p><p></p><p>Next time, read about integrating a Google Custom Search Engine into your Service Portal!</p><p></p><p>-Frank</p>