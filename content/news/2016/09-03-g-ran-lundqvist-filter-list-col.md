---
title: "Filter List Collector with List collector"
date: 2016-09-03T02:44:09.000Z
authors: ["Göran Lundqvist"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=524d6229dbd0dbc01dcaf3231f961903"
---
<p>This time, the scenario was like this.</p><p></p><p>I have a list collector and what I choose there, should be a filter on list collector nr.2. Now biggest thing here was that I can choose multiple values in the first and these should be OR conditions on the next list collector.</p><p></p><p>Now, in my example here I want to first let the user choose which department the user should belong to and put that as a filter on the second list collector.</p><p>First I would say that there is a Pre-helsinki solution and a Helsinki solution(maybe)</p><p></p><p><img   class="image-1 jive-image" height="408" src="8e3b1942db58d304b322f4621f9619b4.iix" style="width: 430px; height: 408.356px;" width="430"/></p><p>Picture above is also using the "no_filter" to hide the filter.</p><p></p><p></p><h2>Pre-Helsinki:</h2><p>In the example above our first list collector is in a variable called "depart", So what we need to do is to make a<br/>onChange client script that hits on the variable depart. When depart changes, the script changes the filter on the second list collector "users".</p><p></p><p>This is how the onChange script can look like:</p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_1472850492731725 jive_text_macro" data-renderedposition="806_8_1192_560" jivemacro_uid="_1472850492731725"><p>function onChange(control, oldValue, newValue, isLoading) {</p><p>   if (isLoading) {</p><p>   return;</p><p>   }</p><p>   //Name of the list collector that the filter shall apply on</p><p>   var collectorName = 'users';</p><p>   //If the newValue isn't empty, build the filter</p><p>   if( newValue != '') {</p><p>   //Lets split up the string into an array</p><p>   var answer = newValue.split(',');</p><p>   var filterString = [];</p><p>   //First filter shouldnt start with an "or" so lets set it here with the first value</p><p>   filterString = 'department=' + answer[0];</p><p></p><p>   //If there is selected more than one department, put those in as "OR" conditions</p><p>   if(answer.length &gt; 1){</p><p>   for (var i=1; i&lt;answer.length;i++){</p><p>   filterString += '^ORdepartment=' + answer[i];</p><p>   }</p><p>   }</p><p>   eval(collectorName + 'g_filter.reset()');</p><p>   eval(collectorName + 'g_filter.setQuery("' + filterString + '")');</p><p>   eval(collectorName + 'acRequest(null)');</p><p>   }</p><p>   //If the newValue is empty, just reset the filter</p><p>   else{</p><p>   eval(collectorName + 'g_filter.reset()');</p><p>   eval(collectorName + 'acRequest(null)');</p><p></p><p>   }</p><p></p><p></p><p>}</p><p></p><p></p></pre><p></p><p>The script above takes the new values and put it as a "OR" condition on the second list collector. And I've also added that if they clear the all made choices so the "newValue" is null, the filter is cleared.</p><p></p><p></p><h2>Helsinki and beyond(hopefully)</h2><p>In Helsinki we got the field "reference qual" which makes us do real nice stuff. I was hoping that with a easy line but I can't get "IN" to work and if anyone reading this know's why, I hope you can throw a comment and explain.</p><p></p><p>Let me show all what I mean.</p><p></p><p>First of all go to the second list collector and the "Default Value" section.</p><p>Fill in "Variable attribues" like this where "depart" is the first list collectors name.</p><p><img   class="image-2 jive-image" src="d37470cadb589304b322f4621f961961.iix" style="max-width: 1200px; max-height: 900px;"/></p><p></p><p>Now, on the section "Type Specifications" type I was hope this would work:</p><p><img   class="image-3 jive-image" src="c0751842db189fc068c1fb651f9619a2.iix" style="max-width: 1200px; max-height: 900px;"/></p><p>But it doesn't and I can't really understand why.</p><p></p><p>I can do like this:</p><p></p><p><img   class="jive-image image-4" src="9bf9f8c2db1097049c9ffb651f96193d.iix" style="max-width: 1200px; max-height: 900px;"/></p><p>And it will work, but only if I choose 1 value from the list collector and that takes away the meaning with a list collector...<br/>Might as well just have a reference field then.</p><p></p><p>If I get any solution for the ref qual, I'll update this post.</p><p></p><p><br/>//Göran</p><p></p><p></p><p><img   alt="Symfoni-Logo-Color (1).png" class="image-5 jive-image" height="48" src="53381cc6db589fc03eb27a9e0f961986.iix" style="width: 209px; height: 48.5419px;" width="209"/> <img  alt="sn-community-mvp.png" class="image-6 jive-image" src="a36084cedbd01344e9737a9e0f96196b.iix" style="width: auto; height: auto;"/></p>