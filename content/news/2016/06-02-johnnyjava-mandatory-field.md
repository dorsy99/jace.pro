---
title: "Mandatory Field Enforcement on Dotwalked fields"
date: 2016-06-01T23:55:42.000Z
authors: ["johnnyjava"]
link: "https://community.servicenow.com/community?id=community_blog&sys_id=c23eae6ddbd0dbc01dcaf3231f961951"
---
<p>I ran into an issue recently where I discovered that if I set a dot-walked field to mandatory, the form would still submit regardless of the red mandatory indicator.</p><p></p><p>I had worked (what I thought was) a simple Incident to modify a client script for a newly dot-walked field name instead of the old field name. We had decided that instead of copying the comments journal entries from sc_task up to the request, we would instead just uniformly use the request comments field. The onChange client script which required customer communication notes when placing a Catalog Task in a Pending state were simply overlooked.</p><p></p><p>Easy ticket - <em>"done before my second cup of coffee"</em> - so I thought!</p><p></p><p>I modified the client script and visually confirmed the mandatory indicator on the dot-walked journal field when I placed the sc_task.state field in Pending. The idea being that we should notify the customer why their request is now pending.</p><p></p><p>I returned from a mid-morning meeting to find the incident reporter asking me which environment I wanted her to test in because it still wasn't working. I pulled up a test sc_task record and proudly displayed the red splat of mandatoryness on the form.</p><p></p><p>"Go ahead..." she said, "Click Submit."</p><p></p><p>I submit the form. No errors.</p><p></p><p>"Oh man... That's not good. I'll get on it." I tell her. I start guessing there's somehow a javascript error in one of our onSubmit scripts causing it to bypass the mandatory field checks.</p><p></p><p>"Easy fix" I think to myself. <em>(I always think that)</em></p><p></p><p>After I work on this a little while, I decide to ask for help and open a ticket in HI. I'm told this is working as designed. They point me to <a href="http://wiki.servicenow.com/index.php?title=Creating_New_Fields#Mandatory_Reference_Fields&amp;gsc.tab=0" title="http://wiki.servicenow.com/index.php?title=Creating_New_Fields#Mandatory_Reference_Fields&amp;gsc.tab=0">Creating New Fields - ServiceNow Wiki</a>   where it says this:</p><p></p><p style="padding-left: 30px;"><span style="color: #333333; font-family: Omnes-pro, Arial, Verdana, sans-serif;"><em>A form can be saved with an empty mandatory field, if that field is a reference field (derived from another table) and if the parent field is also blank. However, if the mandatory reference field shows a value from the parent field, then the form cannot be saved if this value is deleted. It is important to note that if the value in the referenced field is changed, the value for that field is changed everywhere it appears.</em></span></p><p></p><p>I was a bit confused by this, and while trying to wrap my mind around it, I notice that if I click into the field, type something and remove the value, then the tab section suddenly indicates a mandatory field is present. Sure enough when I try to submit the form now, I can't do it without entering something in this mandatory field. I can even toggle the mandatory off and on again using the state field's onChange script. The 'fix' seems to hold once I've entered text into that field.</p><p></p><table border="1" class="jiveBorder" style="border: 1px solid #c6c6c6; width: 100%;"><tbody><tr><th style="text-align: left; background-color: #f2f2f2; color: #505050; padding: 6px;" valign="middle"><strong>Section not Mandatory<br/></strong></th><th style="text-align: left; background-color: #f2f2f2; color: #505050; padding: 6px;" valign="middle"><strong>Section has Mandatory field<br/></strong></th></tr><tr><td style="padding: 6px;"><img   alt="Section not Mandatory.PNG" class="image-1 jive-image" src="90102bfddb1093041dcaf3231f96198d.iix" style="height: auto;"/></td><td style="padding: 6px;"><img   alt="Section Mandatory.PNG" class="image-2 jive-image" src="9338c1c6dbd897041dcaf3231f96193b.iix" style="height: auto;"/></td></tr></tbody></table><p></p><p>I took a look at the DOM and noted the onkeyup function for this field:</p><p><img   alt="Inspect Element.PNG" class="image-3 jive-image" height="120" src="817564c2dbd0dfc03eb27a9e0f961990.iix" style="width: 904px; height: 120.137px;" width="904"/></p><p>I was then able to add the line 9 here to my client script so that my mandatory field enforcement was in place:</p><p></p><pre __default_attr="javascript" __jive_macro_name="code" class="jive_macro_code _jivemacro_uid_14648059804526891 jive_text_macro" data-renderedposition="975.3551025390625_7.997159004211426_1192_201" jivemacro_uid="_14648059804526891"><p>function onChange(control, oldValue, newValue, isLoading, isTemplate) {</p><p>   if (isLoading) {</p><p>   return;</p><p>   }</p><p>   //If we are hitting the pending state or closed incomplete, require a comment</p><p>   if(newValue == -5 || newValue == 4){</p><p>   g_form.setMandatory('request_item.comments', true);</p><p>   //workaround for PRB569134 where SN Dev states this is working as designed</p><p>   multiModified(g_form.getControl('request_item.comments'));</p><p>   } else {</p><p>   g_form.setMandatory('request_item.comments', false);</p><p>   }</p><p>}</p></pre><p></p><p>I plan on writing a blog post soon about debugging the client side code, which is where we actually find the multiModified function declaration.</p>